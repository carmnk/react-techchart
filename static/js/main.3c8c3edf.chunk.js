/*! For license information please see main.3c8c3edf.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-techchart"]=this["webpackJsonpreact-techchart"]||[]).push([[0],{295:function(e,t,a){},297:function(e,t,a){},318:function(e,t){},320:function(e,t){},483:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"isCandleChartDataset",(function(){return A})),a.d(n,"isLineChartDataset",(function(){return F})),a.d(n,"isVolumeDataset",(function(){return X})),a.d(n,"isIndicatorDataset",(function(){return Y})),a.d(n,"isChartDataSeries",(function(){return R})),a.d(n,"isIndicatorDataSeries",(function(){return U})),a.d(n,"isCandleChartPixDataset",(function(){return D})),a.d(n,"isIndicatorPixDataset",(function(){return z})),a.d(n,"isLineChartPixDataset",(function(){return Z})),a.d(n,"isChartGraph",(function(){return L})),a.d(n,"isIndicatorGraph",(function(){return W})),a.d(n,"isAddDataAction",(function(){return te})),a.d(n,"isAddGraphAction",(function(){return B})),a.d(n,"isAddSubchartAction",(function(){return H})),a.d(n,"isClearChartAction",(function(){return Q})),a.d(n,"isDrawAction",(function(){return K})),a.d(n,"isRemoveGraphAction",(function(){return q})),a.d(n,"isRemoveSubchartAction",(function(){return _})),a.d(n,"isRemoveToolAction",(function(){return J})),a.d(n,"isSetGeneralPropAction",(function(){return G})),a.d(n,"isSetGraphPropAction",(function(){return N})),a.d(n,"isSetToolPropAction",(function(){return V})),a.d(n,"isSwapSubchartsAction",(function(){return ee})),a.d(n,"isUpdateInteractionState",(function(){return $})),a.d(n,"isModifyChartDataAction",(function(){return ae})),a.d(n,"isModifyIndicatorDataAction",(function(){return ne})),a.d(n,"isSetThemeAction",(function(){return oe}));var o=a(0),r=a.n(o),i=a(51),l=a.n(i),c=(a(295),a(186),a(28)),d=a(14),s=(a(251),a(297),a(591),a(588)),u=a(578),p=a(541),h=a(587),v=a(589),m=a(590),f=a(142),g=a(140),y=a.n(g),x=a(2),b=function(e){var t=e.setDarkMode,a=Object(p.a)();return Object(x.jsxs)("div",{style:{height:"100%"},children:[Object(x.jsxs)("div",{style:{height:220,backgroundColor:a.palette.background.paper,color:a.palette.getContrastText(a.palette.background.default),backgroundImage:"url(https://github.com/carmnk/resources/raw/main/icons/logo512.png)",backgroundRepeat:"no-repeat",backgroundSize:128,backgroundPosition:"50% 35%"},children:[Object(x.jsxs)(h.a,{sx:{pr:1},children:[Object(x.jsx)(s.a,{variant:"h6",sx:{flexGrow:1},color:"primary",children:"react-tech-chart"}),Object(x.jsx)(v.a,{sx:{color:a.palette.primary.main},children:Object(x.jsx)(s.a,{children:"Docs"})}),Object(x.jsx)(m.a,{sx:{color:a.palette.primary.main},"aria-label":"menu",onClick:function(){return t((function(e){return!e}))},children:Object(x.jsx)(y.a,{path:f.c,size:1.2})}),Object(x.jsx)(m.a,{edge:"start",sx:{color:a.palette.primary.main},"aria-label":"menu",children:Object(x.jsx)(y.a,{path:f.a,size:1.2})}),Object(x.jsx)(m.a,{edge:"start",sx:{color:a.palette.primary.main},"aria-label":"menu",children:Object(x.jsx)(y.a,{path:f.b,size:1.2})})]}),Object(x.jsx)("div",{style:{minWidth:320,maxWidth:"max(100%, 900px)",margin:"0px auto",position:"relative",top:0,height:"calc(100% - 64px)"},children:Object(x.jsx)("div",{style:{height:"100%"},children:Object(x.jsxs)("div",{style:{padding:"100px 16px 0px 16px",textAlign:"center",color:a.palette.text.secondary},children:[Object(x.jsx)(s.a,{children:"a flexible and extensible react charting tool dedicated to technical chart analysis."}),Object(x.jsx)(s.a,{color:"secondary.main",children:"The package is in an early development phase. Consider as experimental.  "})]})})})]}),Object(x.jsx)("div",{style:{position:"relative",top:0,height:"calc(100% - 220px)"},children:e.children})]})},k=(a(253),a(17)),w=a(586),C=a(592),T=a(268),I=function(e){var t=e.disableTheme,a=e.theme;return r.a.createElement(r.a.Fragment,null,t?e.children:r.a.createElement(w.a,{theme:a},e.children))},S=Object(C.a)(Object(T.a)({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},mode:"light"},typography:{h1:{fontWeight:600,fontSize:"3rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h2:{fontWeight:600,fontSize:"2.5rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h3:{fontWeight:600,fontSize:"2.1rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h4:{fontWeight:600,fontSize:"1.8rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h5:{fontSize:"1.4rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h6:{fontSize:"1.25rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},fontFamily:"'Quattrocento Sans', sans-serif"}})),E=Object(C.a)(Object(T.a)({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},mode:"dark",background:{paper:"#424242"}},typography:{h1:{fontWeight:600,fontSize:"3rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h2:{fontWeight:600,fontSize:"2.5rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h3:{fontWeight:600,fontSize:"2.1rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h4:{fontWeight:600,fontSize:"1.8rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h5:{fontSize:"1.4rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h6:{fontSize:"1.25rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},fontFamily:"'Quattrocento Sans', sans-serif"}})),P=a(577),O=a(593),M=a(603),j=a(19),D=function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&("pixOpen"in e.pixY&&"pixHigh"in e.pixY&&"pixLow"in e.pixY&&"pixClose"in e.pixY)},Z=function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&"pixClose"in e.pixY},z=function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&"pixPrices"in e.pixY},A=function(e){return"open"in e&&"high"in e&&"low"in e&&"close"in e},F=function(e){return"close"in e},X=function(e){return"volume"in e},Y=function(e){return"prices"in e},U=function(e){var t=e[e.length-1];return!!t.prices&&t.prices.length>0},R=function(e){if(!e)return!1;var t=e[e.length-1];return!!t.close&&!!t.date},W=function(e){return"indicator"===e.type},L=function(e){return"chart"===e.type},G=function(e){return"setGeneralProp"===e.task},N=function(e){return"setGraphProp"===e.task},V=function(e){return"setToolProp"===e.task},H=function(e){return"addSubchart"===e.task},B=function(e){return"addGraph"===e.task},K=function(e){return"draw"===e.task},_=function(e){return"removeSubchart"===e.task},q=function(e){return"removeGraph"===e.task},J=function(e){return"removeTool"===e.task},$=function(e){return"updateInteractionState"===e.task},Q=function(e){return"clearChart"===e.task},ee=function(e){return"swapSubcharts"===e.task},te=function(e){return"addData"===e.task},ae=function(e){return"modifyChartData"===e.task},ne=function(e){return"modifyIndicatorData"===e.task},oe=function(e){return"setTheme"===e.task},re=r.a.memo((function(e){var t,a,n,o=e.subCharts,i=e.subchartIdx,l=e.yaxisIdx,c=e.graphIdx,d=e.calcXaxis,s=e.calcSubcharts,u=e.indSeriesIdx,p=e.rtTicks,h=o[i].yaxis[l].graphs[c],v=null===(a=null===(t=null===s||void 0===s?void 0:s[i])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[l],m=null===(n=null===v||void 0===v?void 0:v.graphs)||void 0===n?void 0:n[c],f=r.a.useMemo((function(){return p||((null===m||void 0===m?void 0:m.curTicks)?m.curTicks:[])}),[null===m||void 0===m?void 0:m.curTicks,p]);return f&&0!==f.length?r.a.createElement(r.a.Fragment,null,f.map((function(e,t){var a;if(!z(e))return null;var n=e.pixY,o=null===v||void 0===v?void 0:v.pixY0,s=null!==(a=null===n||void 0===n?void 0:n.pixPrices[null!==u&&void 0!==u?u:0])&&void 0!==a?a:o,p=e.pixX+d.pixXStart;return r.a.createElement(j.c,{key:"barchart-".concat(i,"-").concat(l,"-").concat(c,"-line-").concat(t),points:[p+.5,o+.5,p+.5,s+.5],listening:!1,x:0,y:0,stroke:W(h)?h.style.strokeColor[null!==u&&void 0!==u?u:0]:h.style.strokeColor,strokeWidth:1})})).filter((function(e){return null!==e}))):null})),ie=function(e){return void 0===e||null===e||!("number"!==typeof e||!isNaN(e))},le=function(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0},ce=r.a.memo((function(e){var t,a,n,o,i=e.subCharts,l=e.subchartIdx,c=e.yaxisIdx,d=e.graphIdx,s=e.indSeriesIdx,u=void 0===s?0:s,p=e.calcXaxis,h=e.calcSubcharts,v=e.rtTicks,m=i[l].yaxis[c].graphs[d],f=null===(o=null===(n=null===(a=null===(t=null===h||void 0===h?void 0:h[l])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[c])||void 0===n?void 0:n.graphs)||void 0===o?void 0:o[d],g=v||(null===f||void 0===f?void 0:f.curTicks),y=g?g.map((function(e){var t;if(!e.pixY)return null;var a=z(e)?null===(t=e.pixY.pixPrices)||void 0===t?void 0:t[u]:Z(e)?e.pixY.pixClose:null;return ie(a)?null:[e.pixX,a]})).flat().filter((function(e){return null!==e})):[];return(null===y||void 0===y?void 0:y.length)>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.c,{listening:!1,key:"sub".concat(l,"_graph").concat(d,"-").concat(u),x:p.pixXStart,y:0,points:y,stroke:W(m)?m.style.strokeColor[u]:m.style.strokeColor,strokeWidth:1})):null})),de=r.a.memo((function(e){var t,a,n,o,i,l,c=e.subCharts,d=e.calcXaxis,s=e.calcSubcharts,u=e.subchartIdx,p=void 0===u?0:u,h=e.yaxisIdx,v=void 0===h?0:h,m=e.graphIdx,f=void 0===m?0:m,g=e.rtTicks,y=null===(a=null===(t=null===c||void 0===c?void 0:c[p])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[v],x=null===y||void 0===y?void 0:y.graphs[f],b=null===(l=null===(i=null===(o=null===(n=null===s||void 0===s?void 0:s[p])||void 0===n?void 0:n.yaxis)||void 0===o?void 0:o[v])||void 0===i?void 0:i.graphs)||void 0===l?void 0:l[f],k=r.a.useMemo((function(){return g?g.slice(1):(null===b||void 0===b?void 0:b.curTicks)?b.curTicks:[]}),[null===b||void 0===b?void 0:b.curTicks,g]),w=r.a.useMemo((function(){return(null===d||void 0===d?void 0:d.scaledWidthPerTick)>2?Math.floor(.35*(d.scaledWidthPerTick-1)):0}),[d.scaledWidthPerTick]);return x&&L(x)&&k?r.a.createElement(r.a.Fragment,null,k.map((function(e,t){var a=e.pixX+d.pixXStart;if(!D(e))return null;var n=e.pixY,o=n.pixOpen,i=n.pixHigh,l=n.pixLow,c=n.pixClose,s=2*w;return r.a.createElement(r.a.Fragment,{key:"candle-".concat(t)},r.a.createElement(j.c,{listening:!1,x:0,y:0,points:[a+.5,i+.5,a+.5,l+.5],stroke:x.style.candleWickStrokeColor,strokeWidth:1}),c!==o?0!==w?r.a.createElement(j.d,{listening:!1,draggable:!1,x:a+.5-w,y:o+.5,width:s,height:c-o,stroke:x.style.candleStrokeColor,fill:c<o?x.style.candleUpColor:x.style.candleDownColor,strokeWidth:1}):r.a.createElement(j.c,{listening:!1,draggable:!1,x:0,y:0,points:[a+.5,o+.5,a+.5,c+.5],stroke:c<o?x.style.candleUpColor:x.style.candleDownColor,strokeWidth:1}):r.a.createElement(j.c,{listening:!1,draggable:!1,x:0,y:0,points:[a+.5-w,c+.5,a+.5+w,c+.5],stroke:x.style.candleStrokeColor,strokeWidth:1}))}))):null})),se=r.a.memo((function(e){var t=e.valign,a=e.halign,n=e.text,o=e.x,i=e.y,l=e.fontColor,c=e.fontSize,d=e.fontName,s=e.name,u=r.a.useCallback((function(e,r){var s=e._context;s.font=(null!==c&&void 0!==c?c:12)+"px "+(null!==d&&void 0!==d?d:"Arial"),s.fillStyle=null!==l&&void 0!==l?l:"black",s.textAlign=null!==a&&void 0!==a?a:"left",s.textBaseline=null!==t&&void 0!==t?t:"middle",s.fillText(n,o,i),e.fillStrokeShape(r)}),[d,l,c,a,t,o,i,n]);return r.a.createElement(j.e,{name:s,listening:!1,sceneFunc:u})})),ue=a(563),pe=a(548),he=a(549),ve=a(550),me=a(571),fe=a(551),ge=a(552),ye=6e4,xe=36e5,be=864e5,ke=[{name:"minutes",period:ye,scaleMultiplys:[2,5,15,30],range:[ye,18e5]},{name:"hours",period:xe,scaleMultiplys:[2,4,12],range:[xe,432e5]},{name:"days",period:be,scaleMultiplys:[2],range:[be,be]},{name:"weeks",period:6048e5,scaleMultiplys:[2],range:[3*be,11*be]},{name:"months",period:26784e5,scaleMultiplys:[2,3,6],range:[28*be,31*be]},{name:"years",period:31536e6,scaleMultiplys:[],range:[365*be,366*be]}],we=function(e,t){switch(t){case"minutes":return Object(ue.a)(e,"HH:mm");case"hours":return Object(ue.a)(e,"HH:00");case"days":case"weeks":return Object(ue.a)(e,"dd");case"months":return Object(ue.a)(e,"MMM");case"years":return Object(ue.a)(e,"yyyy");default:return""}},Ce=function(e,t){switch(t){case"minutes":return Object(pe.a)(e);case"hours":return Object(he.a)(e);case"days":return Object(ve.a)(e);case"weeks":return Object(me.a)(e);case"months":return Object(fe.a)(e);case"years":return Object(ge.a)(e);default:return 0}},Te=function(e,t,a){return e*a+t},Ie=function(e,t,a){return(e-t)/a},Se=function(e,t,a,n,o){return t-e*Math.pow(10,a)*o+n},Ee=function(e,t,a,n,o){return(t+n-e)/o*Math.pow(10,-a)},Pe=function(e,t,a,n,o,r,i){var l=i||10;if(ie(e)||ie(a)||ie(n)||ie(o)||ie(t)||ie(t))return null;var c=Y(t)?t.prices.filter((function(e){return null!==e})):A(t)?[t.open,t.high,t.low,t.close]:F(t)?[t.close]:[];if(0===c.length)return null;var d=r[n].yaxis[o];return c.map((function(e){return{pixY:Se(e,a[n].bottom,d.decimals,d.translatedY,d.heightPerPt),y:e.toFixed(le(e))}})).filter((function(t){return t.pixY>=e-l&&t.pixY<=e+l})).sort((function(t,a){return Math.abs(t.pixY-e)<Math.abs(a.pixY-e)?-1:Math.abs(t.pixY-e)>Math.abs(a.pixY-e)?1:0}))},Oe=function(e,t){if(!e||!t)return null;var a=t.find((function(t){return e[1]>=t.top&&e[1]<t.bottom}));if(!a)return null;var n=t.indexOf(a);return-1===n?null:n},Me=r.a.memo((function(e){var t,a,n,o,i,l,c,d,s,u,p,h=e.disableSnapX,v=e.disableSnapGraphs,m=e.containerSize,f=e.style,g=e.subcharts,y=e.data,x=e.calcSubcharts,b=e.calcPointer,k=e.calcXaxis,w=e.pixToY,C=e.rtTicks,T=m.width-1,I=m.height-1,S=f.yaxis.widthYAxis,E=f.xaxis,P=E.heightXAxis,O=E.heightTickMarkLines,M=b.move,D=M.pixXSnap,Z=M.xUnlimited,z=M.pixXUnlimSnap,A=k.xEnd,F=k.xLast,X=b.move.subchartIdx,Y=null===(t=b.move.snapDatasets)||void 0===t?void 0:t[0],U=Y?Y.yaxisIdx:null,R=Y?Y.graphIdx:null,L=ie(U)||ie(R)||ie(X)?null:null===(o=null===(n=null===(a=g[X].yaxis)||void 0===a?void 0:a[U])||void 0===n?void 0:n.graphs)||void 0===o?void 0:o[R],G=y.find((function(e){return e.id===(null===L||void 0===L?void 0:L.dataId)})),N=(!h||(null===Y||void 0===Y?void 0:Y.ySnap)&&!v)&&D?D:null!==z&&void 0!==z?z:0,V="chart"===(null===y||void 0===y?void 0:y[0].type)?y[0]:null,H=Y?Y.dateString:Z>F&&Z<=F+(null!==(l=null===(i=null===C||void 0===C?void 0:C[0])||void 0===i?void 0:i.data.length)&&void 0!==l?l:1)-1&&(null===(c=null===V||void 0===V?void 0:V.meta)||void 0===c?void 0:c.chartPeriod)?function(){var e,t,a,n=null===(a=null===(t=null===(e=null===C||void 0===C?void 0:C[0])||void 0===e?void 0:e.data)||void 0===t?void 0:t[Z-A])||void 0===a?void 0:a.date,o=V.meta.chartPeriod;return n&&o?we(n,o.name):""}():"",B=Z>F&&Z<=F+(null!==(s=null===(d=null===C||void 0===C?void 0:C[0])||void 0===d?void 0:d.data.length)&&void 0!==s?s:1)-1&&!ie(X)&&!ie(b.move.pixY)&&C?C.map((function(e){var t,a,n;return null!==(n=null===(a=Pe(b.move.pixY,null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t[Z-A],g,X,0,x))||void 0===a?void 0:a.filter((function(e){return null!==e})))&&void 0!==n?n:[]})).flat():null,K=ie(null===Y||void 0===Y?void 0:Y.pixYSnap)?!ie(B)&&B.length>0?B[0].pixY:ie(b.move.pixY)?null:b.move.pixY:Y.pixYSnap,_=ie(null===Y||void 0===Y?void 0:Y.ySnap)||v?!ie(B)&&B.length>0?B[0].y:(null===Y||void 0===Y?void 0:Y.y)?Y.y.toString():w&&!ie(X)?w(b.move.pixY,X,0).toString():null:Y.ySnap,q=L&&!ie(_)&&W(L)&&"indicator"===(null===G||void 0===G?void 0:G.type)&&G.indicator.default.decimals?parseFloat(_).toFixed(G.indicator.default.decimals).toString():_;return K&&g.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.c,{name:"crosshair-x",listening:!1,x:0,y:0,points:[N+.5,.5,N+.5,I-P+O+.5],stroke:f.crosshair.strokeColor,strokeWidth:1}),b.move.pixY<=g[g.length-1].bottom?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.c,{name:"crosshair-y",listening:!1,x:0,y:0,points:[.5,K+.5,T-S+.5,K+.5],stroke:f.crosshair.strokeColor,strokeWidth:1}),r.a.createElement(j.c,{name:"y-marker-polygon",listening:!1,draggable:!1,x:0,y:0,points:[T-S,K,T-S+10,K+10,T,K+10,T,K-10,T-S+10,K-10],stroke:f.crosshair.yMarkerStrokeColor,fill:f.crosshair.yMarkerBackgroundColor,strokeWidth:1,closed:!0}),r.a.createElement(se,{name:"y-marker text",listening:!1,text:null!==q&&void 0!==q?q:"",halign:"left",valign:"middle",fontColor:f.crosshair.yMarkerTextColor,fontSize:f.crosshair.yMarkerFontSize,fontName:f.crosshair.yMarkerFontName,x:T-S+f.yaxis.widthTickmarkLines+5,y:K})):null,Z>=0&&Z<=A+(null!==(p=null===(u=null===C||void 0===C?void 0:C[0])||void 0===u?void 0:u.data.length)&&void 0!==p?p:1)-1?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.d,{name:"x-marker rect",listening:!1,x:N-25,y:I-P+O+.5,width:50,height:25,fill:f.crosshair.xMarkerBackgroundColor,stroke:f.crosshair.xMarkerStrokeColor,strokeWidth:1}),r.a.createElement(se,{name:"x-marker text",listening:!1,fontSize:f.crosshair.xMarkerFontSize,fontName:f.crosshair.xMarkerFontName,fontColor:f.crosshair.xMarkerTextColor,halign:"center",valign:"top",text:H,x:N,y:I-P+O+5+.5})):null):null})),je=r.a.memo((function(e){var t,a,n,o,i,l,c,d,s,u,p,h,v,m,f,g=e.rtTicks,y=e.containerSize,x=e.style,b=e.indSeriesIdx,k=e.xaxis,w=null===(a=null===(t=null===g||void 0===g?void 0:g[0])||void 0===t?void 0:t.ticks)||void 0===a?void 0:a[(null===(o=null===(n=null===g||void 0===g?void 0:g[0])||void 0===n?void 0:n.ticks)||void 0===o?void 0:o.length)-1],C=null===(l=null===(i=null===g||void 0===g?void 0:g[0])||void 0===i?void 0:i.data)||void 0===l?void 0:l[(null===(d=null===(c=null===g||void 0===g?void 0:g[0])||void 0===c?void 0:c.data)||void 0===d?void 0:d.length)-1];if(!g||!w||!C)return null;var T=y.width,I=x.yaxis.widthYAxis,S=null===w||void 0===w?void 0:w.pixY,E=w.pixX,P=S&&Z(w)?null===(s=null===w||void 0===w?void 0:w.pixY)||void 0===s?void 0:s.pixClose:z(w)?null===(p=null===(u=null===w||void 0===w?void 0:w.pixY)||void 0===u?void 0:u.pixPrices)||void 0===p?void 0:p[null!==b&&void 0!==b?b:0]:null,O=F(C)?null===(h=C)||void 0===h?void 0:h.close:Y(C)?null===(m=null===(v=C)||void 0===v?void 0:v.prices)||void 0===m?void 0:m[null!==b&&void 0!==b?b:0]:null;return ie(P)||ie(O)?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(j.c,{name:"graphmarkerLineY",listening:!1,x:k.pixXStart,y:0,points:[Math.round(E)+.5,Math.round(P)+.5,T-I+.5,Math.round(P)+.5],stroke:"rgba(102,102,102,0.5)",strokeWidth:1}),r.a.createElement(j.c,{name:"graphMarkerPolygonY",listening:!1,draggable:!1,x:0,y:0,points:[Math.round(T-I)+.5,Math.round(P)+.5,Math.round(T-I+10)+.5,Math.round(P+10)+.5,Math.round(T)+.5,Math.round(P+10)+.5,Math.round(T)+.5,Math.round(P-10)+.5,Math.round(T-I+10)+.5,Math.round(P-10)+.5],stroke:x.crosshair.yMarkerStrokeColor,fill:x.crosshair.yMarkerBackgroundColor,strokeWidth:1,closed:!0}),r.a.createElement(se,{name:"graphMarkerPolygonYText",listening:!1,text:null!==(f=O.toString())&&void 0!==f?f:"",halign:"left",valign:"middle",fontColor:x.crosshair.yMarkerTextColor,fontSize:x.crosshair.yMarkerFontSize,fontName:x.crosshair.yMarkerFontName,x:Math.round(T-I+x.yaxis.widthTickmarkLines+5)+.5,y:Math.round(P)+.5}))})),De=r.a.memo((function(e){var t=e.calcXaxis,a=e.style,n=e.containerSize,o=a.xaxis,i=o.heightXAxis,l=o.heightTickMarkLines;return r.a.createElement(r.a.Fragment,null,t.curTicks.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"xaxis-ticks-".concat(t)},r.a.createElement(j.c,{name:"x-tickmark-".concat(t),listening:!1,x:e.x,y:n.height-1-i+.5,points:[0,0,0,l],stroke:a.xaxis.strokeColor,strokeWidth:1}),a.grid.useGridX?r.a.createElement(j.c,{name:"x-gridline-".concat(t),listening:!1,x:e.x,y:.5,points:[0,0,0,n.height-1-i+.5],stroke:a.grid.strokeColor,strokeWidth:1}):null,r.a.createElement(se,{text:e.dateString,halign:"center",valign:"top",fontColor:a.xaxis.fontColor,fontName:a.xaxis.fontName,fontSize:a.xaxis.fontSize,x:e.x+.5,y:n.height-1-i+l+.5+8}))})))})),Ze=r.a.memo((function(e){var t=e.subcharts,a=e.calcSubcharts,n=e.style,o=e.containerSize,i=n.yaxis.widthTickmarkLines;return r.a.createElement(r.a.Fragment,null,t.map((function(e,t){return e.yaxis.map((function(e,l){var c,d,s,u=null===(d=null===(c=null===a||void 0===a?void 0:a[t])||void 0===c?void 0:c.yaxis)||void 0===d?void 0:d[l];return(null!==(s=null===u||void 0===u?void 0:u.drawTicks)&&void 0!==s?s:[]).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"yaxis-ticks-".concat(t)},r.a.createElement(j.c,{name:"y-tickmark-".concat(t),listening:!1,x:o.width-1+.5-n.yaxis.widthTickmarkLines,y:e.pixY+.5,points:[0,0,i,0],stroke:n.yaxis.strokeColor,strokeWidth:1}),n.grid.useGridY?r.a.createElement(j.c,{name:"y-gridline-".concat(t),listening:!1,x:.5,y:e.pixY+.5,points:[0,0,o.width-1+.5,0],stroke:n.grid.strokeColor,strokeWidth:1}):null,r.a.createElement(se,{text:e.label,halign:"right",valign:"middle",fontColor:n.yaxis.fontColor,fontName:n.yaxis.fontName,fontSize:n.yaxis.fontSize,x:o.width-1-n.yaxis.widthTickmarkLines+.5,y:e.pixY}))}))}))})))})),ze=a(562),Ae=a(41),Fe=a(594),Xe=a(8),Ye=a(5),Ue=a(554),Re=a(572),We=a(21),Le=a.n(We),Ge=Object(Ye.a)(Ue.a)((function(e){return{border:"1px solid #666",borderRadius:5,marginRight:10,background:e.theme.palette.secondary.main,minWidth:32,height:32,position:"relative",top:0}})),Ne=r.a.memo((function(e){var t=e.text,a=e.id,n=e.iconPath,o=e.onClick,i=e.iconColor,l=e.textColor,c=e.addIcons,d=e.iconBgColor,s=null!==c&&void 0!==c?c:[];return r.a.createElement(Re.a,{button:!0,onClick:o,key:a+"_listitem"},r.a.createElement(Ge,{sx:{background:null!==d&&void 0!==d?d:"secondary.main"}},r.a.createElement(Le.a,{path:n,size:"32px",color:null!==i&&void 0!==i?i:"#fff"}),s),r.a.createElement(O.a,{variant:"h6",component:"div",color:null!==l&&void 0!==l?l:"text.primary"},t))})),Ve=function(e){var t=e.onNavigate,a=Object(Ae.a)(),n=r.a.useCallback((function(){null===t||void 0===t||t("chart")}),[t]),o=r.a.useCallback((function(){null===t||void 0===t||t("indicators")}),[t]),i=r.a.useCallback((function(){null===t||void 0===t||t("tools")}),[t]),l=r.a.useCallback((function(){null===t||void 0===t||t("settings")}),[t]);return r.a.createElement(Fe.a,{sx:{pt:4}},r.a.createElement(Ne,{id:"0",text:"Chart",iconPath:Xe.l,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:n}),r.a.createElement(Ne,{text:"Indicators",id:"1",iconPath:Xe.k,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:o}),r.a.createElement(Ne,{id:"2",text:"Tools",iconPath:Xe.F,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:i}),r.a.createElement(Ne,{id:"3",text:"Settings",iconPath:Xe.M,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:l}))},He=a(568),Be=a(557),Ke=a(582),_e=a(269),qe=a(583),Je=a(595),$e=a(596),Qe=a(575),et=a(70),tt=function(){return(tt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},at=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},nt=Object(Ye.a)(Qe.a)((function(e){var t,a,n,o=e.theme;return(t={})["& .".concat(et.a.content)]=((a={boxSizing:"border-box",borderTopRightRadius:o.spacing(2),borderBottomRightRadius:o.spacing(2),paddingTop:o.spacing(1),paddingBottom:o.spacing(1),paddingRight:o.spacing(2),"&:hover":{backgroundColor:o.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"var(--tree-view-bg-color, ".concat(o.palette.action.selected,")"),color:"var(--tree-view-color)"}})["& .".concat(et.a.label)]={color:"inherit"},a),t["& .".concat(et.a.group)]=((n={marginLeft:o.spacing(1)})["& .".concat(et.a.content)]={paddingLeft:o.spacing(1)},n),t})),ot=r.a.forwardRef((function(e,t){var a=e.bgColorSelected,n=e.colorSelected,o=e.labelIcon,i=e.labelInfo,l=e.labelText,c=e.typographyVariant,d=at(e,["bgColorSelected","colorSelected","labelIcon","labelInfo","labelText","typographyVariant"]);return r.a.createElement(nt,tt({ref:t,label:r.a.createElement(Be.a,{direction:"row",sx:{alignItems:"center",alignContent:"center"}},r.a.createElement(Je.a,{component:"span",sx:{mr:1,lineHeight:0}},o),r.a.createElement(O.a,{variant:null!==c&&void 0!==c?c:"h6",component:"div",sx:{flexGrow:1}},l),r.a.createElement(O.a,{variant:"caption",component:"div"},i)),sx:{color:"text.primary"},style:{"--tree-view-color":n,"--tree-view-bg-color":a}},d))}));ot.displayName="CTreeItem";var rt=a(597),it=a(580),lt=a(573),ct=a(565),dt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},st=function(e){if(!e)return null;e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,a,n){return t+t+a+a+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},ut=function(){return(ut=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},pt=["0, 0, 0","102, 102, 102","187, 187, 187","255, 255, 255","144, 19, 254","189, 16, 224","63, 81, 181","6, 147, 227","142, 209, 252","0, 128, 128","0, 208, 132","123, 220, 181","184, 0, 0","245, 0, 87","247, 141, 167","121, 85, 72","255, 105, 0","252, 185, 0"],ht=function(e){var t=e.color,a=e.width,n=void 0===a?24:a,o=e.height,i=void 0===o?24:o,l=e.BoxProps,c=void 0===l?{}:l;return r.a.createElement(Je.a,ut({},c,{sx:ut({minWidth:n,minHeight:i,boxSizing:"border-box",background:t,borderRadius:1,border:"2px solid #000"},null===c||void 0===c?void 0:c.sx)}))},vt=function(e){var t=e.color,a=e.onColorSelected,n=r.a.useState(!1),o=n[0],i=n[1],l=r.a.useState(null),c=l[0],d=l[1],s=r.a.useRef(null),u=/((^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$))/i.test(t),p=u&&"string"===typeof t?st(t):null,h="string"===typeof t?t.match(/^(rgb)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/):null,v=!!h&&2 in h&&"a"===h[2],m=h&&3 in h&&4 in h&&5 in h?[parseFloat(h[3]),parseFloat(h[4]),parseFloat(h[5])]:u&&p?[p.r,p.g,p.b]:[];if(0===m.length){var f=t in dt?st(dt.name):null;f&&m.push(f.r,f.g,f.b)}var g=v&&h&&6 in h?100*parseFloat(h[6]):100,y=r.a.useState(g),x=y[0],b=y[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{color:"primary",style:{padding:0},onClick:function(){i(!0)},ref:s},r.a.createElement(ht,{color:t})),r.a.createElement(rt.a,{id:"colorpicker-popover",open:o,anchorEl:s.current,onClose:function(){i(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{sx:{width:300,p:1}}},r.a.createElement(it.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},pt.map((function(e,t){return r.a.createElement(it.a,{item:!0,xs:2,key:t},r.a.createElement($e.a,{color:"default",style:{padding:0},onMouseOver:function(e){d("rgba(".concat(pt[t],",").concat(x,")"))},onMouseLeave:function(){d(null)},onClick:function(){a("rgba("+pt[t]+","+x/100+")")}},r.a.createElement(ht,{color:"rgba("+e+",1)",width:24,height:24})))})),r.a.createElement(it.a,{item:!0,xs:3},r.a.createElement(O.a,null,"Alpha")),r.a.createElement(it.a,{item:!0,xs:6,style:{padding:"0px 10px"}},r.a.createElement(lt.a,{value:x,onChange:function(e,t){b(Array.isArray(t)?t[0]:t),a("rgba(".concat(m[0],",").concat(m[1],",").concat(m[2],",").concat((Array.isArray(t)?t[0]:t)/100,")"))}})),r.a.createElement(it.a,{item:!0,xs:3},r.a.createElement(ct.a,{margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:"5px 5px 5px 10px"}},value:x,onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)&&(t=0),t<0||t>100||(b(t),a("rgba(".concat(m[0],",").concat(m[1],",").concat(m[2],",").concat(t/100,")")))}}))),r.a.createElement(it.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(O.a,{component:"div",align:"center"},"R")),r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(O.a,{component:"div",align:"center"},"G")),r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(O.a,{component:"div",align:"center"},"B")),r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(O.a,{component:"div",align:"center"},"A")),r.a.createElement(it.a,{item:!0,xs:2}),r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(ht,{color:c||t,width:24,height:24,BoxProps:{maxWidth:24,maxHeight:24}}))),r.a.createElement(it.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(ct.a,{disabled:!0,value:m?m[0]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(184, 0, 0, ".concat(m?m[0]/255:1,")")}}})),r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(ct.a,{disabled:!0,value:m?m[1]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(0, 208, 132, ".concat(m?m[1]/255:1,")")}},fullWidth:!0})),r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(ct.a,{disabled:!0,value:m?m[2]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(6, 147, 227, ".concat(m?m[2]/255:1,")")}}})),r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(ct.a,{disabled:!0,value:x,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"#bbb"}}})),r.a.createElement(it.a,{item:!0,xs:2}),r.a.createElement(it.a,{item:!0,xs:2},r.a.createElement(Ke.a,{color:"secondary",variant:"contained",size:"small",style:{minWidth:0},onClick:function(){return i(!1)}},"OK")))))},mt=a(579),ft=function(){return(ft=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},yt=function(e){var t=gt(e,[]),a=Object(Ae.a)();return o.createElement(mt.a,ft({"aria-label":"treeview",defaultCollapseIcon:o.createElement(Le.a,{path:Xe.C,size:1,color:"light"===a.palette.mode?"#333":"#fff"}),defaultExpandIcon:o.createElement(Le.a,{path:Xe.D,size:1,color:"light"===a.palette.mode?"#333":"#fff"}),defaultEndIcon:o.createElement("div",{style:{width:24}}),sx:{overflowY:"auto",pt:1,pb:1}},t),e.children)},xt=function(){return(xt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},bt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},kt=function(e){var t=e.path,a=e.size,n=e.style,o=e.background,i=e.border,l=bt(e,["path","size","style","background","border"]);return r.a.createElement(Le.a,xt({path:t,size:a},l,{style:xt({background:o,border:null!==i&&void 0!==i?i:"1px solid #666",borderRadius:5,marginRight:10,boxSizing:"border-box"},n)}))},wt=a(144),Ct=a(570),Tt=function(e){var t=e.nodeId,a=e.onColorSelected,n=e.color,o=e.iconPath,i=e.text,l=Object(Ae.a)();return r.a.createElement(ot,{key:t,nodeId:t,labelText:i,typographyVariant:"body1",labelIcon:r.a.createElement(kt,{path:o,size:"24px",color:l.palette.text.primary,border:"dark"===l.palette.mode?void 0:"1px solid #bbb"}),labelInfo:r.a.createElement(vt,{color:"string"===typeof n?n:n[0],onColorSelected:a})})},It=function(e){var t,a,n,o,i,l=e.subchartIdx,c=e.yaxisIdx,d=e.graphIdx,s=e.subCharts,u=e.Dispatch,p=e.onSettingsExpand,h=e.data,v=null===(o=null===(n=null===(a=null===(t=null===s||void 0===s?void 0:s[l])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[c])||void 0===n?void 0:n.graphs)||void 0===o?void 0:o[d],m=Object(Ae.a)(),f=h.find((function(e){return e.id===(null===v||void 0===v?void 0:v.dataId)}));return L(v)?r.a.createElement(ot,{onClick:function(){var e="graph-sub-".concat(l,"-y-").concat(c,"-graph-").concat(d);null===p||void 0===p||p(e)},key:"graph-sub-".concat(l,"-y-").concat(c,"-graph-").concat(d),nodeId:"graph-sub-".concat(l,"-y-").concat(c,"-graph-").concat(d),labelText:null!==(i=null===f||void 0===f?void 0:f.name)&&void 0!==i?i:"Graph No."+d,bgColorSelected:m.palette.primary.light,labelIcon:r.a.createElement(kt,{path:Xe.l,size:"32px",color:m.palette.secondary.contrastText,background:m.palette.primary.main}),labelInfo:0!==l||0!==d?r.a.createElement($e.a,{size:"small",onClick:function(e){e.preventDefault(),u({task:"removeGraph",params:{subchartIdx:l,yaxisIdx:c,graphIdx:d}})}},r.a.createElement(Le.a,{path:Xe.m,size:1,color:"light"===m.palette.mode?"#333":"#fff"})):void 0},"chart"===v.type&&"candlechart"===(null===f||void 0===f?void 0:f.meta.type)?r.a.createElement(ot,{key:"chart-s".concat(l,"-y").concat(c,"-g").concat(d,"-chartType"),nodeId:"chart-s".concat(l,"-y").concat(c,"-g").concat(d,"-chartType"),labelText:"chart type",typographyVariant:"body1",labelIcon:r.a.createElement(kt,{path:Xe.J,size:"24px",color:"light"===m.palette.mode?"#333":"#fff"}),labelInfo:r.a.createElement(Ct.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:v.chartType,onChange:function(e){var t=e.target.value;u({task:"setGraphProp",params:{prop:"chartType",subchartIdx:l,yaxisIdx:c,graphIdx:d,newValue:t}})}},["line","candles"].map((function(e,t){return r.a.createElement(qe.a,{key:"chart-s".concat(l,"-y").concat(c,"-g").concat(d,"-chartType-o-").concat(t),value:e},e)})))}):null,function(e){return L(e)&&"chart"===(null===f||void 0===f?void 0:f.type)?"candles"===e.chartType?[{text:"candle up color",icon:Xe.g,color:e.style.candleUpColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleUpColor",subchartIdx:l,yaxisIdx:c,graphIdx:d,newValue:e}})}},{text:"candle down color",icon:Xe.g,color:e.style.candleDownColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleDownColor",subchartIdx:l,yaxisIdx:c,graphIdx:d,newValue:e}})}},{text:"candle stroke color",icon:Xe.g,color:e.style.candleStrokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleStrokeColor",subchartIdx:l,yaxisIdx:c,graphIdx:d,newValue:e}})}},{text:"candle wick color",icon:Xe.g,color:e.style.candleWickStrokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleWickStrokeColor",subchartIdx:l,yaxisIdx:c,graphIdx:d,newValue:e}})}}]:[{text:"line stroke color",icon:Xe.g,color:e.style.strokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"strokeColor",subchartIdx:l,yaxisIdx:c,graphIdx:d,newValue:e}})}}]:[]}(v).map((function(e,t){return r.a.createElement(Tt,{key:"settings-treeitem-chartGraph-s".concat(l,"-y").concat(c,"-g").concat(d,"-p").concat(t),nodeId:"settings-treeitem-chartGraph-s".concat(l,"-y").concat(c,"-g").concat(d,"-p").concat(t),text:e.text,color:e.color,iconPath:e.icon,onColorSelected:e.onColorSelected})}))):null},St=a(258),Et=a.n(St),Pt=a(89),Ot=a.n(Pt),Mt=a(95),jt=a.n(Mt),Dt=a(259),Zt=a.n(Dt),zt=a(68),At=a.n(zt),Ft=a(69),Xt=a.n(Ft),Yt=function(){return(Yt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ut=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Rt=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Wt=function(e,t,a,n){if("object"!==typeof e)return null;var o=Array.isArray(e)?Rt([],e,!0):Yt({},e),r=e,i=o;try{t.forEach((function(e,l){if(!(e in r)||"number"!==typeof e&&"string"!==typeof e)throw o=null,new Error("path at position ".concat(l," '").concat(e,"' not found in src object/array -1"));if(l<t.length-1){if("number"===typeof e&&!Array.isArray(r)||"string"===typeof e&&"object"!==typeof r)throw o=null,new Error("path at position ".concat(l," '").concat(e,"' not found in src object/array -2"));if(Array.isArray(r),i[e]=Array.isArray(r[e])?Rt([],r[e],!0):Yt({},r[e]),"remove"===n&&l===t.length-2){var c=t[t.length-1];if("number"===typeof c&&Array.isArray(r[e]))i[e]=Rt(Rt([],r[e].slice(0,t[t.length-1]),!0),r[e].slice(c+1),!0);else if("string"===typeof c&&(r[e],1)){var d=r[e],s=c,u=(d[s],Ut(d,["symbol"===typeof s?s:s+""]));i[e]=Yt({},u)}}else i=i[e];r=r[e]}else if("remove"!==n){if(!(e in r)&&"add"!==n)throw o=null,new Error("path at position ".concat(l," '").concat(e,"' not found in src object/array -3"));"add"===n&&Array.isArray(r[e])?i[e]=Rt(Rt([],r[e],!0),[a],!1):i[e]=a}}))}catch(l){return console.error("Error at setStateProp(): ",l),null}return o},Lt=function(e,t,a){return Wt(e,t,a,"edit")},Gt=function(e,t){return Wt(e,t,null,"remove")};var Nt=function(){return(Nt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Vt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Ht=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Bt=function(e,t,a,n,o,r){return n&&o?Kt(e,o,n,r,a,t):R(e)?_t(e,t,a):null},Kt=function(e,t,a,n,o,r){var i,l=Zt()(a),c=l.params.findIndex((function(e){return"dataSeriesKey"===e.name}));-1===c||ie(n)||(l.params[c].val=n);var d=null===(i=a.indicatorFn)||void 0===i?void 0:i(Nt({chartData:e,prevData:[]},l.params.reduce((function(e,t){var a;return Nt(Nt({},e),((a={})[t.name]=t.val,a))}),{}))),s=l.default.decimals?l.default.decimals:2,u=o||At()(),p=null!==r&&void 0!==r?r:l.name;return{data:d,name:p,fullName:p+"("+l.params.map((function(e){return"dataSeriesKey"!==e.name?e.val:null})).filter((function(e){return null!==e})).join(",")+")",type:"indicator",decimals:s,indicator:l,indSrcId:t,id:u}},_t=function(e,t,a){var n=$t(e),o=n.decimals,r=n.isDescending,i=Vt(n,["decimals","isDescending"]);r&&e.reverse();var l=ie(null===i||void 0===i?void 0:i.chartPeriod)?null:Qt(e,null===i||void 0===i?void 0:i.chartPeriod);return ie(l)?null:{id:a,data:e,meta:i,dateStat:l,type:"chart",name:t,decimals:o}},qt=function(e,t,a){var n=e.data,o=n.findIndex((function(e){return e.id===t})),r=null===n||void 0===n?void 0:n[o];if("chart"!==(null===r||void 0===r?void 0:r.type)||!a||0===a.length)return e;var i=function(e,t){var a=e.meta.chartPeriod;return a?Nt(Nt({},e),{data:Ht(Ht([],e.data,!0),t,!0),dateStat:Qt(t,a,e.dateStat)}):e}(r,a),l=aa(n,t),c=Ht([],Lt(e.data,[o],i),!0);return l.forEach((function(e,t){var a=c.findIndex((function(t){return t.id===e})),n=null===c||void 0===c?void 0:c[a];if("indicator"===(null===n||void 0===n?void 0:n.type)){var o=ea(c,e,void 0,n.data);o&&(c[a]=o)}})),Nt(Nt({},e),{data:c})},Jt=function(e){var t=e.slice(1).map((function(t,a){return n=e[a+1],o=e[a],(null===n||void 0===n?void 0:n.date)&&(null===o||void 0===o?void 0:o.date)?n.date.valueOf()-o.date.valueOf():0;var n,o})),a=Et()(t),n=Object.entries(a).map((function(e){var t=e[0],a=e[1];return{dT:parseInt(t,10),amt:a}})),o=n.map((function(e){return e.amt})),r=o.indexOf(Math.max.apply(Math,o)),i=Math.abs(n[r].dT);return{dataPeriod:i,dataPeriodConfidence:n[r].amt/e.length,chartPeriod:function(e){var t=ke.find((function(t){return e===t.period||e>=t.range[0]&&e<=t.range[1]}));if(!t)return null;t.scaleMultiplys,t.range;var a=Vt(t,["scaleMultiplys","range"]),n=Math.round(e/t.period);return Nt(Nt({},a),{multiply:n})}(i),isDescending:n[r].dT<0}},$t=function(e){var t=Jt(e),a=t.dataPeriod,n=t.dataPeriodConfidence,o=t.chartPeriod,r=t.isDescending;return{dataPeriod:a,chartPeriod:o,dataPeriodConfidence:n,type:"candlechart",decimals:function(e){var t=e.map((function(e){return A(e)?Math.max.apply(Math,[le(e.close),le(e.open),le(e.high),le(e.low)]):F(e)?le(e.close):Y(e)?le(Math.max.apply(Math,e.prices.map((function(e){return ie(e)?0:le(e)})))):0}));return Math.max.apply(Math,t)}(e),isDescending:r}},Qt=function(e,t,a){var n,o=ke.map((function(e){return e.name})),r=o.slice(o.findIndex((function(e){return e===t.name}))),i=r.map((function(e){return e.slice(0,e.length-1)})),l=e.map((function(e){var t={};return i.forEach((function(a,n){t[a]=Ce(e.date,r[n])})),t})),c=l.reduce((function(e,t){return{years:e.lastData?e.lastData.year!==t.year?e.years+1:e.years:1,months:e.lastData?e.lastData.month!==t.month?e.months+1:e.months:"month"in t?1:0,weeks:e.lastData?e.lastData.week!==t.week?e.weeks+1:e.weeks:"week"in t?1:0,days:e.lastData?e.lastData.day!==t.day?e.days+1:e.days:"day"in t?1:0,hours:e.lastData?e.lastData.hour!==t.hour?e.hours+1:e.hours:"hour"in t?1:0,minutes:e.lastData?e.lastData.minute!==t.minute?e.minutes+1:e.minutes:"minute"in t?1:0,lastData:t}}),a?a.accAmt:{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,lastData:null}),d=Vt(c,[]),s=null===(n=function e(t,a){var n=function(e,t){return ie(e)||"years"===t?l:l.filter((function(a){return a.year===(null===e||void 0===e?void 0:e.year)&&(a.month===(null===e||void 0===e?void 0:e.month)||["months"].includes(t))&&(a.week===(null===e||void 0===e?void 0:e.week)||["months","weeks"].includes(t))&&(a.day===(null===e||void 0===e?void 0:e.day)||["months","weeks","days"].includes(t))&&(a.hour===(null===e||void 0===e?void 0:e.hour)||"minutes"!==t)}))}(a||null,t);return"minutes"===t?{minutes:Ot()(n,(function(e){return"".concat(e.minute)})).map((function(e){return{minute:e.minute}}))}:"hours"===t?{hours:Ot()(n,(function(e){return"".concat(e.hour)})).map((function(t){return{hour:t.hour,minutes:"minute"in t?e("minutes",t).minutes:[]}}))}:"days"===t?{days:Ot()(n,(function(e){return"".concat((e.year,e.month,e.week,e.day))})).map((function(t){return{day:t.day,hours:"hour"in t?e("hours",t).hours:[]}}))}:"weeks"===t?{weeks:Ot()(n,(function(e){return"".concat((e.year,e.month,e.week))})).map((function(t){return{week:t.week,days:"day"in t?e("days",t).days:[]}}))}:"months"===t?{months:Ot()(n,(function(e){return"".concat((e.year,e.month))})).map((function(t){return{month:t.month,weeks:"week"in t?e("weeks",t).weeks:[]}}))}:"years"===t?{years:Ot()(l,"year").map((function(t){return{year:t.year,months:"month"in t?e("months",t).months:[]}}))}:null}("years"))||void 0===n?void 0:n.years;return{years:a?function e(t,a){var n,o,r=null!==(n=null===t||void 0===t?void 0:t[t.length-1])&&void 0!==n?n:null,i=null!==(o=null===a||void 0===a?void 0:a[0])&&void 0!==o?o:null;if(!r||!i)return Ht(Ht([],t,!0),a,!0);var l="year"in r?"year":"month"in r?"month":"week"in r?"week":"day"in r?"day":"hour"in r?"hour":"minute"in r?"minute":null,c="year"in r&&"months"in r&&"months"in i?{year:r.year,months:e(r.months,i.months)}:"month"in r&&"weeks"in r&&"weeks"in i?{month:r.month,weeks:e(r.weeks,i.weeks)}:"week"in r&&"days"in r&&"days"in i?{week:r.week,days:e(r.days,i.days)}:"day"in r&&"hours"in r&&"hours"in i?{day:r.day,hours:e(r.hours,i.hours)}:"hour"in r&&"minutes"in r&&"minutes"in i?{hour:r.hour,minutes:e(r.minutes,i.minutes)}:null,d=l&&l in r?r[l]:null,s=l&&l in i?i[l]:null;return d===s&&!ie(d)&&!ie(s)&&l&&c?Ht(Ht(Ht([],t.slice(0,t.length-1),!0),[c],!1),a.slice(1),!0):Ht(Ht([],t,!0),a,!0)}(a.years,s):s,accAmt:d}},ea=function(e,t,a,n){var o,r,i=null!==a&&void 0!==a?a:{},l=i.newIndSrcId,c=i.newParams,d=e.find((function(e){return e.id===t&&"indicator"===e.type}));if("indicator"!==(null===d||void 0===d?void 0:d.type))return null;var s=null===(o=d.indicator)||void 0===o?void 0:o.indicatorFn,u=l||d.indSrcId,p=null===(r=e.find((function(e){return e.id===u})))||void 0===r?void 0:r.data;if(!s||!p)return null;var h=c||d.indicator.params;return Nt(Nt({},d),{data:s(Nt({chartData:p,prevData:null!==n&&void 0!==n?n:[]},h.reduce((function(e,t){var a;return Nt(Nt({},e),((a={})[t.name]=t.val,a))}),{}))),fullName:c?d.name+"("+c.map((function(e){return e.val})).join(",")+")":d.fullName,indSrcId:u,indicator:Nt(Nt({},d.indicator),{params:h})})},ta=function e(t,a,n){var o=null!==n&&void 0!==n?n:[];if(o.includes(a))return[];var r=t.find((function(e){return(null===e||void 0===e?void 0:e.id)===a&&"indicator"===(null===e||void 0===e?void 0:e.type)}));if("indicator"!==(null===r||void 0===r?void 0:r.type))return[];var i=t.find((function(e){return e.id===r.indSrcId}));return"chart"===(null===i||void 0===i?void 0:i.type)?[r.id]:"indicator"===(null===i||void 0===i?void 0:i.type)?Ht(Ht([],e(t,i.id,Ht(Ht([],o,!0),[r.id],!1)),!0),[r.id],!1):[]},aa=function e(t,a){return t.filter((function(e){return"indicator"===e.type&&e.indSrcId===a})).map((function(a){return Ht([a.id],e(t,a.id),!0)})).flat()},na=function(e,t,a){return ta(e,a).includes(t)},oa=function(e,t,a,n){var o=e.data,r=null!==a&&void 0!==a?a:{},i=r.newIndSrcId,l=r.newParams;if(i&&na(o,t,i))return o;var c=jt()(Ht([t],aa(o,t),!0)),d=Ht([],o,!0);return c.forEach((function(e,a){var o=d.findIndex((function(t){return t.id===e})),r=ea(d,e,e===t?{newIndSrcId:i,newParams:l}:void 0,null!==n&&void 0!==n?n:[]);r&&(d[o]=r)})),d},ra=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},ia=function(e){var t=e.subchartIdx,a=e.yaxisIdx,n=e.graphIdx,o=e.subCharts,i=e.Dispatch,l=e.handleToggleExpanded,c=e.data,d=o[t].yaxis[a].graphs[n],s=W(d)?d:null,u=Object(Ae.a)(),p=c.find((function(e){return e.id===(null===s||void 0===s?void 0:s.dataId)}));return s&&"indicator"===(null===p||void 0===p?void 0:p.type)?r.a.createElement(ot,{key:"settings-treeitem-indiGraph-s".concat(t,"-y").concat(a,"-g").concat(n),nodeId:"settings-treeitem-indiGraph-s".concat(t,"-y").concat(a,"-g").concat(n),bgColorSelected:u.palette.primary.light,onClick:function(){var e="settings-treeitem-indiGraph-s".concat(t,"-y").concat(a,"-g").concat(n);null===l||void 0===l||l(e)},labelIcon:r.a.createElement(kt,{path:Xe.k,size:"32px",color:u.palette.secondary.contrastText,background:u.palette.primary.main}),labelText:p.fullName,labelInfo:0!==t||0!==n?r.a.createElement($e.a,{size:"small",onClick:function(e){e.preventDefault(),i({task:"removeGraph",params:{subchartIdx:t,yaxisIdx:0,graphIdx:n}})}},r.a.createElement(Le.a,{path:Xe.m,size:1,color:"light"===u.palette.mode?"#333":"#fff"})):void 0},r.a.createElement(ot,{key:"settings-treeitem-indiGraph-src-s".concat(t,"-y").concat(a,"-g").concat(n),nodeId:"settings-treeitem-indiGraph-src-s".concat(t,"-y").concat(a,"-g").concat(n),labelIcon:r.a.createElement(kt,{path:Xe.p,size:"24px",color:u.palette.text.primary}),labelText:"Source",typographyVariant:"body1",labelInfo:r.a.createElement(Ct.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:p.indSrcId,onChange:function(e){var t=e.target.value;i({task:"modifyIndicatorData",params:{dataId:p.id,newIndSrcId:t}})}},["dataSeries","chartSeries"].includes(p.indicator.indicatorFnType)?function(){var e=o[t].yaxis[a].graphs.map((function(e){return e.dataId}));return(p.indicator.default.newSubchart?"dataSeries"===p.indicator.indicatorFnType?c:"chartSeries"===p.indicator.indicatorFnType?c.filter((function(e){return"chart"===e.type})):[]:c.filter((function(t){return e.includes(t.id)}))).map((function(e){return e.id===p.id||na(c,p.id,e.id)?null:r.a.createElement(qe.a,{key:"settings-treeitem-indiGraph-src-menuitem-s".concat(t,"-y").concat(a,"-g").concat(n,"-").concat(e.id),value:e.id},e.name)}))}():null)}),p.indicator.graphTypes.map((function(e,l){var c,d,u=s.style.strokeColor;return r.a.createElement(Tt,{nodeId:"settings-treeitem-indiGraph-clrProps-".concat(t,"-y").concat(a,"-g").concat(n,"-gt").concat(l),key:"settings-treeitem-indiGraph-clrProps-".concat(t,"-y").concat(a,"-g").concat(n,"-gt").concat(l),color:null===(d=null===(c=o[t].yaxis[0].graphs[n].style)||void 0===c?void 0:c.strokeColor)||void 0===d?void 0:d[l],iconPath:Xe.g,text:"line stroke color",onColorSelected:function(e){i({task:"setGraphProp",params:{subchartIdx:t,yaxisIdx:0,graphIdx:n,newValue:ra(ra(ra([],u.slice(0,l),!0),[e],!1),u.slice(l+1),!0),prop:"strokeColor"}})}})})),p.indicator.params.map((function(e,o){return r.a.createElement(ot,{key:"sub-".concat(t,"-yaxis-").concat(a,"-graph-").concat(n,"-").concat(o),nodeId:"".concat(2+t,"00-").concat(n,"-").concat(o),labelIcon:r.a.createElement(kt,{path:Xe.A,size:"24px",color:u.palette.text.primary}),labelText:e.name,typographyVariant:"body1",labelInfo:r.a.createElement(ct.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},value:e.val,onChange:function(e){var t=parseFloat(e.target.value);isNaN(t)||i({task:"modifyIndicatorData",params:{dataId:p.id,newParam:{paramIdx:o,newValue:t}}})}})})}))):null},la=r.a.memo((function(e){var t,a=e.style,n=e.subcharts,o=e.subchartIdx,i=e.mode,l=e.calcXaxis,c=e.xy,d=e.drawPixXy,s=e.yToPix,u=n[o].top,p=!!(null===d||void 0===d?void 0:d[0]);if(1!==c.length&&!p||!s||!l.xToPix)return null;var h=1===c.length?[l.xToPix(c[0][0]),s(c[0][1],o,0)]:(null===d||void 0===d?void 0:d[0])?d[0]:null;if(!h)return null;var v=(null===a||void 0===a?void 0:a.strokeColor)?a.strokeColor:"red",m=(null===a||void 0===a?void 0:a.anchorColor)?a.anchorColor:"#333",f=["extendUp","extendDown","extendUpDown","*extendToSecondPoint"].includes(null!==i&&void 0!==i?i:"")?i:"extendUpDown",g=null===(t=null===n||void 0===n?void 0:n[Math.max(n.length-1,0)])||void 0===t?void 0:t.bottom,y=[[h[0],"extendDown"===f?h[1]:u],[h[0],"extendUp"===f?h[1]:g]];return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.c,{listening:!1,x:0,y:0,points:y.flat(),stroke:v,strokeWidth:1}),r.a.createElement(j.a,{x:h[0],y:h[1],radius:5,fill:m}))})),ca={name:"Vertical Line",type:"vline",nPoints:1,category:"lines",params:[{name:"mode",val:"extendUpDown",vals:["extendUp","extendDown","extendUpDown"],type:"select"}],default:{params:[{icon:Xe.J}]},component:la},da=r.a.memo((function(e){var t=e.style,a=e.subcharts,n=e.subchartIdx,o=e.containerSize,i=e.calcXaxis,l=e.mode,c=e.xy,d=e.drawPixXy,s=e.yToPix,u=o.left,p=u+o.width,h=a[n],v=h.bottom,m=h.top,f=!!(null===d||void 0===d?void 0:d[0]);if(1!==c.length&&!f||!s||!i.xToPix)return null;var g=1===c.length?[i.xToPix(c[0][0]),s(c[0][1],n,0)]:(null===d||void 0===d?void 0:d[0])?d[0]:null;if(!g)return null;if((null===g||void 0===g?void 0:g[1])<m||(null===g||void 0===g?void 0:g[1])>v)return null;var y=(null===t||void 0===t?void 0:t.strokeColor)?t.strokeColor:"red",x=(null===t||void 0===t?void 0:t.anchorColor)?t.anchorColor:"#333",b=["extendRight","extendLeft","extendLeftRight","*extendToSecondPoint"].includes(null!==l&&void 0!==l?l:"")?l:"extendLeftRight",k=[["extendRight"===b?g[0]:u,g[1]],["extendLeft"===b?g[0]:p,g[1]]];return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.c,{listening:!1,x:0,y:0,points:[k[0][0],k[0][1],k[1][0],k[1][1]],stroke:y,strokeWidth:1}),r.a.createElement(j.a,{x:g[0],y:k[0][1],radius:5,fill:x}))})),sa={name:"Horizontal Line",type:"hline",nPoints:1,category:"lines",params:[{name:"mode",val:"extendLeftRight",vals:["extendRight","extendLeft","extendLeftRight"],type:"select"}],default:{params:[{icon:Xe.J}]},component:da},ua=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},pa=r.a.memo((function(e){var t=e.style,a=e.mode,n=e.subcharts,o=e.subchartIdx,i=e.calcXaxis,l=e.xy,c=e.drawPixXy,d=e.yToPix,s=n[o],u=s.bottom,p=s.top;if(2!==l.length&&2!==(null===c||void 0===c?void 0:c.length)||!d||!i.xToPix)return null;var h=i.xToPix,v=2===l.length?l.map((function(e){return[h(e[0]),(t=e[1],d(t,o,0))];var t})):2===(null===c||void 0===c?void 0:c.length)?c:null;if(!v||2!==v.length)return null;var m=(null===t||void 0===t?void 0:t.strokeColor)?t.strokeColor:"red",f=(null===t||void 0===t?void 0:t.anchorColor)?t.anchorColor:"#333",g=["line","trendline","infiniteLine"].includes(null!==a&&void 0!==a?a:"")?a:"trendline",y=v[0][0]>v[1][0]?[v[1],v[0]]:v,x=[ua([],y[0],!0),ua([],y[1],!0)];if("trendline"===g||"infiniteLine"===a){var b=x[1][0]-x[0][0],k=x[1][1]-x[0][1],w=k/b,C=k<0?p:u,T=x[0][1]-w*x[0][0],I=(C-T)/w;if(x[1][0]=I,x[1][1]=C,"infiniteLine"===a){var S=k<0?u:p,E=(S-T)/w;x[0][0]=E,x[0][1]=S}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.c,{listening:!1,draggable:!1,x:0,y:0,points:x.flat(),stroke:m,strokeWidth:1}),r.a.createElement(j.a,{x:y[0][0],y:y[0][1],radius:5,fill:f}),r.a.createElement(j.a,{x:y[1][0],y:y[1][1],radius:5,fill:f}))})),ha={name:"Trendline",type:"trendline",nPoints:2,category:"lines",params:[{name:"mode",val:"trendline",vals:["line","trendline","infiniteLine"],type:"select"}],default:{params:[{icon:Xe.J}]},component:pa},va=[sa,ca,ha],ma=function(e){var t,a,n,o,i=e.subchartIdx,l=e.yaxisIdx,c=e.toolIdx,d=e.subCharts,s=e.Dispatch,u=e.handleToggleExpanded,p=null===(o=null===(n=null===(a=null===(t=null===d||void 0===d?void 0:d[i])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[l])||void 0===n?void 0:n.tools)||void 0===o?void 0:o[c],h=p||null,v=Object(Ae.a)();if(!h)return null;return r.a.createElement(ot,{key:"tool-".concat(c),nodeId:"tool-".concat(i,"-").concat(c),labelText:"hline"===h.type?"horizontal line":"vline"===h.type?"vertical line":"trendline"===h.type?"Trendline":"Tool",typographyVariant:"body1",labelIcon:r.a.createElement("div",{style:{border:"1px solid ".concat("light"===v.palette.mode?"#333":"#fff"),borderRadius:5}},r.a.createElement(Le.a,{path:"hline"===h.type||"vline"===h.type||"trendline"===h.type?Xe.E:Xe.y,size:"24px",color:"light"===v.palette.mode?"#333":"#fff",rotate:"trendline"===h.type?-45:"vline"===h.type?90:0})),onClick:function(){var e="tool-".concat(i,"-").concat(c);null===u||void 0===u||u(e)},bgColorSelected:v.palette.primary.light,labelInfo:r.a.createElement($e.a,{size:"small",onClick:function(e){e.preventDefault(),s({task:"removeTool",params:{subchartIdx:i,yaxisIdx:0,toolIdx:c}})}},r.a.createElement(Le.a,{path:Xe.m,size:1,color:"light"===v.palette.mode?"#333":"#fff"}))},"hline"===h.type?r.a.createElement(ot,{key:"tool-".concat(i,"-y0-").concat(c,"-hlinelevel"),nodeId:"tool-".concat(i,"-y0-").concat(c,"-hlinelevel"),labelText:"Y-Level",typographyVariant:"body1",labelIcon:r.a.createElement(kt,{path:Xe.e,size:"24px",color:"light"===v.palette.mode?"#333":"#fff"}),labelInfo:r.a.createElement(ct.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},defaultValue:h.xy[0][1],onChange:function(e){var t=parseFloat(e.target.value);isNaN(t)||s({task:"setToolProp",params:{prop:"hLineYlevel",subchartIdx:i,yaxisIdx:0,toolIdx:c,newValue:t}})}})}):null,h.params?h.params.map((function(e,t){var a,n,o=null===(n=null===(a=va.find((function(e){return e.type===h.type})))||void 0===a?void 0:a.default)||void 0===n?void 0:n.params,d=o?o[t].icon:Xe.A;return r.a.createElement(ot,{key:"tool-s".concat(i,"-y0-t").concat(c,"-p").concat(t),nodeId:"tool-s".concat(i,"-y0-t").concat(c,"-p").concat(t),labelText:e.name,typographyVariant:"body1",labelIcon:r.a.createElement(kt,{path:d,size:"24px",color:"light"===v.palette.mode?"#333":"#fff"}),labelInfo:"select"===e.type?r.a.createElement(Ct.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:e.val,onChange:function(e){var a=e.target.value;s({task:"setToolProp",params:{prop:"toolParam",subchartIdx:i,yaxisIdx:l,toolIdx:c,toolParamIdx:t,newValue:a}})}},e.vals.map((function(e,a){return r.a.createElement(qe.a,{key:"tool-s".concat(i,"-y0-t").concat(c,"-p").concat(t,"-o").concat(a),value:e},e)}))):"number"===e.type?r.a.createElement(ct.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,maxWidth:80}},value:e.val,onChange:function(e){var a=parseFloat(e.target.value);isNaN(a)||s({task:"setToolProp",params:{prop:"toolParam",subchartIdx:i,yaxisIdx:l,toolIdx:c,toolParamIdx:t,newValue:a}})}}):void 0})})):null,function(e){return[{text:"stroke color",icon:Xe.g,color:e.style.strokeColor,onColorSelected:function(e){s({task:"setToolProp",params:{prop:"strokeColor",subchartIdx:i,yaxisIdx:0,toolIdx:c,newValue:e}})}},{text:"anchor color",icon:Xe.i,color:e.style.anchorColor,onColorSelected:function(e){s({task:"setToolProp",params:{prop:"anchorColor",subchartIdx:i,yaxisIdx:0,toolIdx:c,newValue:e}})}}]}(h).map((function(e,t){return r.a.createElement(Tt,{nodeId:"settings-treeitem-tool-clrProp-".concat(i,"-y").concat(l,"-t").concat(c,"-p").concat(t),key:"settings-treeitem-tool-clrProp-".concat(i,"-y").concat(l,"-t").concat(c,"-p").concat(t),color:e.color,iconPath:e.icon,text:e.text,onColorSelected:e.onColorSelected})})))},fa=function(){return(fa=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ga=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},ya=r.a.forwardRef((function(e,t){var a=e.subchartIdx,n=e.subcharts,o=e.data,i=e.Dispatch,l=e.onSettingsExpand,c=e.additionalLabelInfo,d=ga(e,["subchartIdx","subcharts","data","Dispatch","onSettingsExpand","additionalLabelInfo"]),s=Object(Ae.a)(),u=n[a];return r.a.createElement(ot,fa({ref:t},d,{key:"sub-".concat(a),nodeId:"sub-".concat(a),labelText:0===a?"Mainchart":"Subchart ".concat(a),bgColorSelected:s.palette.primary.light,onClick:function(){var e="sub-".concat(a);null===l||void 0===l||l(e)},labelIcon:r.a.createElement(kt,{path:Xe.j,size:"32px",color:s.palette.secondary.contrastText,background:s.palette.secondary.main}),labelInfo:0!==a?r.a.createElement(r.a.Fragment,null,c,r.a.createElement($e.a,{size:"small",onClick:function(e){e.preventDefault(),i({task:"removeSubchart",params:{subchartIdx:a}})}},r.a.createElement(We.Icon,{path:Xe.m,size:1,color:"light"===s.palette.mode?"#333":"#fff"}))):void 0}),u.yaxis[0].graphs.map((function(e,t){return W(e)?r.a.createElement(ia,{key:"editIndicator-sub-".concat(a,"-yaxis-").concat(0,"-graph-").concat(t),subCharts:n,Dispatch:i,subchartIdx:a,yaxisIdx:0,graphIdx:t,handleToggleExpanded:l,data:o}):L(e)?r.a.createElement(It,{key:"graph-sub-".concat(a,"-y-").concat(0,"-graph-").concat(t,"-frag"),subCharts:n,Dispatch:i,subchartIdx:a,yaxisIdx:0,graphIdx:t,onSettingsExpand:l,data:o}):null})),u.yaxis[0].tools.length>0?r.a.createElement(ot,{key:"tools-".concat(a,"-y0"),nodeId:"tools-".concat(a,"-y0"),labelIcon:r.a.createElement("div",{style:{background:s.palette.primary.main,width:32,height:32,border:"1px solid #666",borderRadius:5,marginRight:10}},r.a.createElement(We.Icon,{path:Xe.F,size:"32px",color:s.palette.secondary.contrastText})),labelText:"Tools",onClick:function(){var e="tools-".concat(a,"-y0");null===l||void 0===l||l(e)}},u.yaxis[0].tools.map((function(e,t){return r.a.createElement(ma,{key:"editTool-sub-".concat(a,"-yaxis-").concat(0,"-tool-").concat(t),subCharts:n,Dispatch:i,subchartIdx:a,yaxisIdx:0,toolIdx:t,handleToggleExpanded:l})}))):null)}));ya.displayName="SubchartTreeItem";var xa=function(){return(xa=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ba=function(e){return r.a.createElement(kt,{path:e.iconPath,size:"24px",color:e.theme.palette.text.primary,style:{marginLeft:e.theme.spacing(1)},border:"light"===e.theme.palette.mode?"1px solid #bbb":void 0})},ka=function(e){var t=e.subCharts,a=e.onNavigate,n=e.Dispatch,o=e.onSettingsExpand,i=e.ChartMenuState,l=e.style,c=e.data,d=Object(Ae.a)(),s=r.a.useState(null),u=s[0],p=s[1],h=function(e){p(null),e&&(null===a||void 0===a||a(e))},v=[{category:void 0},{category:"xaxis",icon:Xe.a},{category:"yaxis",icon:Xe.b},{category:"grid",icon:Xe.x},{category:"crosshair",icon:Xe.o}],m=[{nodeId:"bgcolor",labelText:"background color",iconPath:Xe.N,labelInfo:r.a.createElement(vt,{color:l.backgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"backgroundColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisFillColor",labelText:"fill color",iconPath:Xe.N,labelInfo:r.a.createElement(vt,{color:l.xaxis.fillColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisFillColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisStrokeColor",labelText:"stroke color",iconPath:Xe.g,labelInfo:r.a.createElement(vt,{color:l.xaxis.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisStrokeColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisTextColor",labelText:"text color",iconPath:Xe.u,labelInfo:r.a.createElement(vt,{color:l.xaxis.fontColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisTextColor",newValue:e}})}})},{category:"yaxis",nodeId:"yaxisStrokeColor",labelText:"stroke color",iconPath:Xe.g,labelInfo:r.a.createElement(vt,{color:l.yaxis.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"yAxisStrokeColor",newValue:e}})}})},{category:"yaxis",nodeId:"yaxisTextColor",labelText:"text color",iconPath:Xe.u,labelInfo:r.a.createElement(vt,{color:l.yaxis.fontColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"yAxisTextColor",newValue:e}})}})},{category:"grid",nodeId:"useXGrid",labelText:"use x-axis grid",iconPath:Xe.x,labelInfo:r.a.createElement(He.a,{checked:l.grid.useGridX,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleGridX"}})}})},{category:"grid",nodeId:"useYGrid",labelText:"use y-axis grid",iconPath:Xe.x,labelInfo:r.a.createElement(He.a,{checked:l.grid.useGridY,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleGridY"}})}})},{category:"grid",nodeId:"gridStrokeColor",labelText:"stroke color",iconPath:Xe.g,labelInfo:r.a.createElement(vt,{color:l.grid.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"gridStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"useCrosshair",labelText:"use crosshair",iconPath:Xe.o,labelInfo:r.a.createElement(He.a,{checked:l.crosshair.useCrosshair,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleCrosshair"}})}})},{category:"crosshair",nodeId:"crosshairStrokeColor",labelText:"stroke color",iconPath:Xe.g,labelInfo:r.a.createElement(vt,{color:l.crosshair.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerBackground",labelText:"x-marker background",iconPath:Xe.N,labelInfo:r.a.createElement(vt,{color:l.crosshair.xMarkerBackgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerBackgroundColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerStrokeColor",labelText:"x-marker stroke color",iconPath:Xe.g,labelInfo:r.a.createElement(vt,{color:l.crosshair.xMarkerStrokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerTextColor",labelText:"x-marker text color",iconPath:Xe.u,labelInfo:r.a.createElement(vt,{color:l.crosshair.xMarkerTextColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerTextColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerBackground",labelText:"y-marker background",iconPath:Xe.N,labelInfo:r.a.createElement(vt,{color:l.crosshair.yMarkerBackgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerBackgroundColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerStrokeColor",labelText:"y-marker stroke color",iconPath:Xe.g,labelInfo:r.a.createElement(vt,{color:l.crosshair.yMarkerStrokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerTextColor",labelText:"y-marker text color",iconPath:Xe.u,labelInfo:r.a.createElement(vt,{color:l.crosshair.yMarkerTextColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerTextColor",newValue:e}})}})}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},r.a.createElement(Ke.a,{style:{border:"1px solid #666",borderRadius:50,padding:5,textTransform:"none",background:d.palette.secondary.light,color:d.palette.secondary.contrastText},onClick:function(e){p(e.currentTarget)}},r.a.createElement(O.a,null," Add...")),r.a.createElement(_e.a,{id:"quick-add",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:function(){return h(void 0)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(qe.a,{onClick:function(){return h("indicators")}},"Indicator"),r.a.createElement(qe.a,{onClick:function(){return h("tools")}},"Tool"))),r.a.createElement(yt,{expanded:i.expandedSetting},r.a.createElement(ot,{nodeId:"1",labelText:"General",labelIcon:r.a.createElement(kt,{path:Xe.r,size:"32px",color:d.palette.secondary.contrastText,background:d.palette.secondary.main}),bgColorSelected:d.palette.primary.light,typographyVariant:"h6",onClick:function(){null===o||void 0===o||o("1")}},v.map((function(e,t){var a;return e.category?r.a.createElement(ot,{nodeId:"settings-treeitem-general-cat-".concat(t),key:"settings-treeitem-general-cat-".concat(t),labelText:null!==(a=e.category)&&void 0!==a?a:"",labelIcon:r.a.createElement(kt,{path:e.icon,size:"32px",color:d.palette.secondary.contrastText,background:d.palette.primary.main}),onClick:function(){null===o||void 0===o||o("settings-treeitem-general-cat-".concat(t))}},m.filter((function(t){return t.category===e.category})).map((function(e){return r.a.createElement(ot,{key:"settings-treeitem-general-cat-".concat(t,"-").concat(e.nodeId),nodeId:"settings-treeitem-general-cat-".concat(t,"-").concat(e.nodeId),labelText:e.labelText,typographyVariant:"body1",labelInfo:e.labelInfo,labelIcon:r.a.createElement(ba,{iconPath:e.iconPath,theme:d})})}))):m.filter((function(t){return t.category===e.category})).map((function(e){return r.a.createElement(ot,{key:"settings-treeitem-general-cat-".concat(t,"-").concat(e.nodeId),nodeId:"settings-treeitem-general-cat-".concat(t,"-").concat(e.nodeId),labelText:e.labelText,typographyVariant:"body1",labelInfo:e.labelInfo,labelIcon:r.a.createElement(ba,{iconPath:e.iconPath,theme:d})})}))}))),r.a.createElement(ya,{subcharts:t,data:c,subchartIdx:0,Dispatch:n,onSettingsExpand:o}),r.a.createElement(wt.a,{onDragEnd:function(e){var t;(null===(t=e.destination)||void 0===t?void 0:t.index)&&n({task:"swapSubcharts",params:{subchartIdx1:e.source.index,subchartIdx2:e.destination.index}})}},r.a.createElement(wt.c,{droppableId:"droppable"},(function(e,a){return r.a.createElement(Je.a,xa({},e.droppableProps,{ref:e.innerRef,sx:{background:a.isDraggingOver?d.palette.primary.light:"transparent",borderTopRightRadius:d.spacing(2),borderBottomRightRadius:d.spacing(2)}}),t.slice(1).map((function(e,a){var i=a+1;return r.a.createElement(wt.b,{key:"sub-".concat(i),draggableId:"sub-".concat(i),index:i},(function(e,a){return r.a.createElement(ya,xa({subcharts:t,data:c,subchartIdx:i,Dispatch:n,onSettingsExpand:o,ref:e.innerRef},e.draggableProps,{additionalLabelInfo:r.a.createElement($e.a,xa({size:"small"},e.dragHandleProps),r.a.createElement(We.Icon,{path:Xe.f,size:1,color:"light"===d.palette.mode?"#333":"#fff"}))}))}))})),e.placeholder)})))))},wa=a(601),Ca=a(574),Ta=a(569),Ia=function(){return(Ia=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Sa=r.a.forwardRef((function(e,t){return r.a.createElement(Ta.a,Ia({elevation:6,ref:t,variant:"filled"},e))})),Ea=function(e){var t=e.open,a=e.onClose,n=e.content,o=e.type,i=e.autoHideDuration,l=void 0===i?5e3:i,c=e.msgIdx,d=function(e,t){"clickaway"!==t&&(null===a||void 0===a||a())};return r.a.createElement(Ca.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,autoHideDuration:l,onClose:d,sx:{bottom:"".concat(24*(c+1)+48*c,"px !important"),color:"red"}},r.a.createElement(Sa,{severity:o,onClose:d},n))},Pa=a(261),Oa=a.n(Pa),Ma=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function i(e){try{c(n.next(e))}catch(t){r(t)}}function l(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((n=n.apply(e,t||[])).next())}))},ja=function(e,t){var a,n,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(l){r=[6,l],n=0}finally{a=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},Da=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};function Za(e){return Ma(this,void 0,void 0,(function(){return ja(this,(function(t){switch(t.label){case 0:return[4,e.text().then((function(e){var t,a,n,o,r,i,l,c,d,s,u=[{chars:"\n",amt:null!==(a=null===(t=e.match(/\n/gm))||void 0===t?void 0:t.length)&&void 0!==a?a:0},{chars:"\r",amt:null!==(o=null===(n=e.match(/\r/gm))||void 0===n?void 0:n.length)&&void 0!==o?o:0},{chars:"\r\n",amt:null!==(i=null===(r=e.match(/\r\n/gm))||void 0===r?void 0:r.length)&&void 0!==i?i:0}],p=u.map((function(e){return e.amt})),h=u[p.indexOf(Math.max.apply(Math,p))].chars,v=e.split(h),m=[{chars:",",amt:null!==(c=null===(l=v[0].match(/,/gm))||void 0===l?void 0:l.length)&&void 0!==c?c:0},{chars:";",amt:null!==(s=null===(d=v[0].match(/;/gm))||void 0===d?void 0:d.length)&&void 0!==s?s:0}],f=m.map((function(e){return e.amt})),g=m[f.indexOf(Math.max.apply(Math,f))].chars,y={dots:0,commas:0};v.forEach((function(e){e.split(g).forEach((function(e){var t=e.lastIndexOf("."),a=e.lastIndexOf(",");-1!==t&&-1!==a?t>a?y.dots++:y.commas++:-1!==t&&-1===a?y.dots++:-1===t&&-1!==a&&y.commas++}))}));var x=y.dots<y.commas,b=y.dots>y.commas&&y.commas>0,k=x?e.replaceAll(".","").replaceAll(",","."):b?e.replaceAll(",",""):e,w=Oa()(k.trim(),{delimiter:g,record_delimiter:h,cast:!0,trim:!0,cast_date:!0}).map((function(e){return{date:e[0],open:e[1],high:e[2],low:e[3],close:e[4],volume:e[5]}}));return w.shift(),w}))];case 1:return[2,t.sent()]}}))}))}var za=function(e){var t=e.Dispatch,a=r.a.useState([]),n=a[0],o=a[1],i=Object(Ae.a)(),l=r.a.useRef(null),c=r.a.useState(!1),d=c[0],s=c[1],u=r.a.useState(""),p=u[0],h=u[1];function v(){return Ma(this,void 0,void 0,(function(){var e,a,n,r;return ja(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!p)throw new Error("url not provided");return[4,fetch(p)];case 1:if(!(e=i.sent()))throw new Error("cant download file from url");return[4,Za(e)];case 2:return a=i.sent(),n=p.substring(p.lastIndexOf("/")+1,p.lastIndexOf(".")),t({task:"addSubchart",params:{chartSeries:a,chartName:n,reset:!0,id:At()()}}),o((function(e){return Da(Da([],e,!0),[{type:"success",text:"Graph successfully loaded"}],!1)})),s(!1),[3,4];case 3:return r=i.sent(),console.error("Error - could not download file from URL or File could not be parsed",r),o((function(e){return Da(Da([],e,!0),[{type:"error",text:"Error - "+r}],!1)})),[3,4];case 4:return[2]}}))}))}var m=r.a.useCallback((function(){s(!0)}),[s]),f=r.a.useCallback((function(){s(!1)}),[s]),g=r.a.useCallback((function(){var e,t;null===(t=null===(e=null===l||void 0===l?void 0:l.current)||void 0===e?void 0:e.click)||void 0===t||t.call(e)}),[l]);return r.a.createElement(r.a.Fragment,null,n.length>0?n.map((function(e,t){var a;return r.a.createElement(Ea,{key:"msg-".concat(t),autoHideDuration:5e3,type:null!==(a=e.type)&&void 0!==a?a:"error",open:n.length>0,onClose:function(){return o((function(e){return 1===e.length?[]:e.splice(1)}))},content:e.text,msgIdx:t})})):null,r.a.createElement("input",{type:"file",style:{visibility:"hidden",position:"absolute",top:0,height:0,width:0},ref:l,onChange:function(e){return Ma(this,void 0,void 0,(function(){var a,n,r,i;return ja(this,(function(l){switch(l.label){case 0:if(!(a=e.target.files))return[2];if(!(a.length>0))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Za(a[0])];case 2:return n=l.sent(),r=a[0].name.substr(0,a[0].name.lastIndexOf(".")),t({task:"addSubchart",params:{chartSeries:n,chartName:r,reset:!0,id:At()()}}),o((function(e){return Da(Da([],e,!0),[{type:"success",text:"Graph successfully loaded"}],!1)})),[3,4];case 3:return i=l.sent(),console.error("Error - could not parse provided local file",i),o((function(e){return Da(Da([],e,!0),[{type:"error",text:"Error - could not parse provided local file"}],!1)})),[3,4];case 4:return[2]}}))}))}}),r.a.createElement(Fe.a,{sx:{pt:4}},r.a.createElement(Ne,{text:"CSV from device",id:"1",iconPath:Xe.s,iconColor:i.palette.secondary.contrastText,onClick:g}),r.a.createElement(Ne,{text:"CSV from URL",id:"2",iconPath:Xe.O,iconColor:i.palette.secondary.contrastText,onClick:m}),d?r.a.createElement("div",null,r.a.createElement(ct.a,{helperText:"Enter/Paste URL",fullWidth:!0,onKeyUp:function(e){"Enter"===e.key&&"keyup"===e.type&&v()},value:p,onChange:function(e){return h(e.target.value)},sx:{p:1,pt:2,boxSizing:"border-box"},InputProps:{sx:{boxSizing:"border-box",pr:0},endAdornment:r.a.createElement(wa.a,{position:"end"},r.a.createElement(Be.a,{direction:"row"},r.a.createElement($e.a,{onClick:v,size:"small"},r.a.createElement(We.Icon,{path:Xe.d,size:1})),r.a.createElement($e.a,{onClick:f},r.a.createElement(We.Icon,{path:Xe.m,size:1}))))}})):null))},Aa=a(584),Fa=a(602),Xa=function(e){var t=e.location,a=e.submenuContent,n=e.theme,o=e.onNavigate,i=e.amtIndicators;return r.a.createElement(Be.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},a,i>0?r.a.createElement(Aa.a,{value:"indicatorModifyMode",exclusive:!0,size:"small"},r.a.createElement(Fa.a,{value:"addIndicator",sx:{"&:hover":{background:"indicators"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"indicators"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===o||void 0===o||o("indicators")}},r.a.createElement(O.a,null," Add")),r.a.createElement(Fa.a,{value:"editIndicator",sx:{"&:hover":{background:"editIndicator"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomRightRadius:50,borderTopRightRadius:50,background:"editIndicator"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===o||void 0===o||o("editIndicator")}},"Edit")):null)},Ya={name:"ATR",category:"Volatility",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=n||[],l=null!==(t=0+(null===n||void 0===n?void 0:n.length))&&void 0!==t?t:0;l<a.length;l++)if(l<r)i.push({prices:[null],date:a[l].date});else{for(var c=0,d=l-r+1;d<=l;d++){var s=a[d],u=a[d-1],p=0;if(A(s)&&A(u)){var h=s.high-s.low,v=Math.abs(s.high-u.close),m=Math.abs(s.low-u.close);p=Math.max(h,v,m)}else{p=Math.abs(s.close-u.close)}c+=p}i.push({prices:[c/r],date:a[l].date})}return i}},Ua={name:"EMA",category:"Average",params:[{name:"period",val:10},{name:"dataSeriesKey",val:void 0}],default:{params:[{name:"period",val:10},{name:"dataSeriesKey",val:void 0}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){for(var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=e.dataSeriesKey,l="string"===typeof i?i:"close",c="number"===typeof i?i:0,d=function(e){var t;return F(e)?l in e?e[l]:e.close:Y(e)&&(null===(t=e.prices)||void 0===t?void 0:t[c])||0},s=n||[],u=null!==(t=null===s||void 0===s?void 0:s.length)&&void 0!==t?t:0;u<a.length;u++)if(u<r-1)s.push({prices:[null],date:a[u].date});else if(u===r-1){for(var p=0,h=0;h<r;h++){p+=d(a[h])}p/=r,s.push({prices:[p],date:a[u].date})}else{var v=2/(r+1),m=(d(a[u])-s[u-1].prices[0])*v+s[u-1].prices[0];s.push({prices:[m],date:a[u].date})}return s}},Ra=function(){return(Ra=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Wa=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},La=function(){return(La=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ga={name:"RSI",category:"Oszillator",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0,decimals:2,fixedYScale:[0,100],graphProps:[{name:"areaTresholds",val:{lower:25,upper:75}}]},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a,n,o,r=e.chartData,i=e.prevData,l=e.period,c=void 0===l?14:l,d=i||[],s=i.length;s<r.length;s++)if(0!==s){var u=r[s],p=r[s-1],h=u.close-p.close,v=h>0?h:0,m=h<0?-h:0,f=1/c,g=null===(a=null===(t=null===d||void 0===d?void 0:d[(null===d||void 0===d?void 0:d.length)-1])||void 0===t?void 0:t.prices)||void 0===a?void 0:a[1],y=null===(o=null===(n=null===d||void 0===d?void 0:d[(null===d||void 0===d?void 0:d.length)-1])||void 0===n?void 0:n.prices)||void 0===o?void 0:o[2];if(s<c||ie(g)||ie(y))d.push({prices:[null,v,m],date:r[s].date});else{var x=v*f+(1-f)*g,b=m*f+(1-f)*y,k=0===b?100:100-100/(1+x/b);d.push({prices:[k,x,b],date:r[s].date})}}else d.push({prices:[null,null,null],date:r[s].date});return d}},Na=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Va=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Ha={name:"KAMA",category:"Average",params:[{name:"erPeriod",val:21},{name:"fastEmaPeriod",val:2},{name:"slowEmaPeriod",val:30}],default:{params:[{name:"erPeriod",val:21},{name:"fastEmaPeriod",val:2},{name:"slowEmaPeriod",val:30}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){var t,a=e.chartData,n=e.prevData,o=e.erPeriod,r=void 0===o?20:o,i=e.fastEmaPeriod,l=void 0===i?2:i,c=e.slowEmaPeriod,d=void 0===c?30:c,s=Va([],n,!0);return a.slice(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0).forEach((function(e,t){var o,i,c,u,p,h=t+(null!==(o=null===n||void 0===n?void 0:n.length)&&void 0!==o?o:0),v={prices:[null],date:e.date};if(h<r-1+1)s.push(v);else{var m=a[h],f=function(e){var t;return ie(e)?null:F(e)?e.close:Y(e)?null===(t=e.prices)||void 0===t?void 0:t[0]:null},g=f(m);if(g){var y=Math.abs(g-(null!==(i=f(null===a||void 0===a?void 0:a[h-r+1]))&&void 0!==i?i:g)),x=a.slice(h-r,h+1).map((function(e,t,a){if(0===t)return null;var n=f(e),o=f(a[t-1]);return ie(n)||ie(o)?null:Math.abs(n-o)})).filter((function(e){return null!==e})).reduce((function(e,t,a){return e+t}),0),b=0!==x?y/x:0,k=2/(d+1),w=2/(l+1),C=Math.pow(b*(w-k)+k,2),T=null!==(p=null===(u=null===(c=null===s||void 0===s?void 0:s[h-1])||void 0===c?void 0:c.prices)||void 0===u?void 0:u[0])&&void 0!==p?p:f(null===a||void 0===a?void 0:a[h-1]),I=ie(T)?g:T+C*(g-T);s.push({prices:[I],date:e.date})}else s.push(v)}})),s}},Ba=[{name:"SMA",category:"Average",params:[{name:"period",val:10}],default:{params:[{name:"period",val:10}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=Na([],n,!0);return a.slice(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0).forEach((function(e,t){var o,l=t+(null!==(o=null===n||void 0===n?void 0:n.length)&&void 0!==o?o:0);if(l<r-1)i.push({prices:[null],date:e.date});else{var c=0;a.slice(l-r+1,l+1).forEach((function(e,t,a){F(e)?c+=e.close:Y(e)&&(c+=e.prices[0]?e.prices[0]:0)})),i.push({prices:[c/r],date:e.date})}})),i}},Ua,Ga,{name:"MACD",category:"Oszillator",params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],default:{params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],newSubchart:!0},graphTypes:[{type:"line",name:"MACD"},{type:"line",name:"Signal"},{type:"bars",name:"Histogram"}],indicatorFnType:"chartSeries",indicatorFn:function(e){var t,a,n,o,r,i,l,c=e.chartData,d=e.prevData,s=e.periodEmaShort,u=void 0===s?12:s,p=e.periodEmaLong,h=void 0===p?26:p,v=e.periodSignal,m=void 0===v?9:v,f=Ua.indicatorFn,g=d?{macd:d.map((function(e,t){var a;return Ra(Ra({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[0]]})})),signal:d.map((function(e,t){var a;return Ra(Ra({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[1]]})})),emaShort:d.map((function(e){var t;return Ra(Ra({},e),{prices:[null===(t=null===e||void 0===e?void 0:e.prices)||void 0===t?void 0:t[3]]})})),emaLong:d.map((function(e,t){var a;return Ra(Ra({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[4]]})}))}:null,y=f({chartData:c,prevData:null!==(t=null===g||void 0===g?void 0:g.emaShort)&&void 0!==t?t:[],period:u}),x=f({chartData:c,prevData:null!==(a=null===g||void 0===g?void 0:g.emaLong)&&void 0!==a?a:[],period:h}),b=Wa(Wa([],null!==(n=null===g||void 0===g?void 0:g.macd)&&void 0!==n?n:[],!0),y.slice(null!==(r=null===(o=null===g||void 0===g?void 0:g.macd)||void 0===o?void 0:o.length)&&void 0!==r?r:0).map((function(e,t){var a,n,o=t+(null!==(n=null===(a=null===g||void 0===g?void 0:g.macd)||void 0===a?void 0:a.length)&&void 0!==n?n:0),r=x[o].prices[0],i=e.prices[0];return{prices:[ie(i)||ie(r)?null:i-r],date:c[o].date,priceLabels:["MACD"]}})),!0),k=f({chartData:b,prevData:null!==(i=null===g||void 0===g?void 0:g.signal)&&void 0!==i?i:[],period:m});return Wa(Wa([],d,!0),b.slice(null!==(l=null===d||void 0===d?void 0:d.length)&&void 0!==l?l:0).map((function(e,t){var a,n=null!==(a=t+(null===d||void 0===d?void 0:d.length))&&void 0!==a?a:0,o=e.prices[0],r=k[n].prices[0],i=null===o||null===r?null:o-r,l=y[n].prices[0],c=x[n].prices[0];return Ra(Ra({},e),{prices:[o,r,i,l,c]})})),!0)}},Ya,{name:"Volume",category:"Volume",params:[],default:{params:[],newSubchart:!0,decimals:0},graphTypes:[{type:"bars"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t=e.chartData,a=[],n=0;n<t.length;n++){var o=t[n];X(o)?a.push({prices:[o.volume],date:o.date}):a.push({prices:[0],date:o.date})}return a}},{name:"OBV",category:"Volume",graphTypes:[{type:"line"}],params:[],default:{params:[],newSubchart:!0,decimals:0},indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a,n=e.chartData,o=e.prevData,r=o||[],i=null===r||void 0===r?void 0:r.length;i<n.length;i++){var l=n[i];if(0===i&&X(l))r.push({prices:[l.volume],date:l.date});else{var c=n[i-1],d=null===r||void 0===r?void 0:r[i-1];if(X(l)&&X(c)){var s=(null!==(a=null===(t=null===d||void 0===d?void 0:d.prices)||void 0===t?void 0:t[0])&&void 0!==a?a:0)+Math.sign(l.close-c.close)*l.volume;r.push({prices:[s],date:n[i].date})}else r.push({prices:[null],date:n[i].date})}}return r}},Ha],Ka=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},_a=[{name:"Average",icon:Xe.q},{name:"Oszillator",icon:Xe.k},{name:"Volatility",icon:Xe.c},{name:"Volume",icon:Xe.G}],qa=function(e){var t,a,n=e.subCharts,o=e.onNavigate,i=e.location,l=e.Dispatch,c=e.settings,d=e.data,s=r.a.useState(!1),u=s[0],p=s[1],h=r.a.useState(0),v=h[0],m=h[1],f=null===n||void 0===n?void 0:n[0].yaxis[0].graphs[0],g=d.filter((function(e){return"indicator"===e.type})).length,y=d.find((function(e){return e.id===f.dataId})),x=null!==(t=null===y||void 0===y?void 0:y.data)&&void 0!==t?t:[],b=null!==(a=null===y||void 0===y?void 0:y.name)&&void 0!==a?a:"",k=null===y||void 0===y?void 0:y.id,w=Object(Ae.a)(),C=r.a.useMemo((function(){return(null===c||void 0===c?void 0:c.additionalIndicators)?Ka(Ka([],Ba,!0),c.additionalIndicators,!0):Ba}),[null===c||void 0===c?void 0:c.additionalIndicators]),T=n.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,n){var o=d.find((function(t){return t.id===e.dataId})),r="indicator"===(null===o||void 0===o?void 0:o.type)?o.indicator.graphTypes:null,i=r?r.length:1;return Array(i).fill(0).map((function(i,l){var c,d=null===r||void 0===r?void 0:r[l],s=(null===d||void 0===d?void 0:d.name)?" - "+d.name:"";return{name:null!==(c=null===o||void 0===o?void 0:o.name)&&void 0!==c?c:"Graph No."+n,subchartIdx:t,yaxisIdx:a,graphIdx:n,graphLineIdx:l,fullName:"indicator"===(null===o||void 0===o?void 0:o.type)?o.fullName+s+"":null,type:e.type,dataId:e.dataId}})).flat()})).flat()})).flat()})).flat(),I=C.filter((function(e){var t,a;return"indicator"===(null===(t=null===T||void 0===T?void 0:T[v])||void 0===t?void 0:t.type)&&"dataSeries"===e.indicatorFnType||"chart"===(null===(a=null===T||void 0===T?void 0:T[v])||void 0===a?void 0:a.type)}));return r.a.createElement(r.a.Fragment,null,g>0&&r.a.createElement(Xa,{location:i,onNavigate:o,theme:w,amtIndicators:g,submenuContent:r.a.createElement(r.a.Fragment,null,r.a.createElement(ct.a,{select:!0,SelectProps:{SelectDisplayProps:{style:{padding:8,paddingRight:32,paddingLeft:16}}},variant:"outlined",InputProps:{sx:{borderRadius:"18px"}},label:r.a.createElement(O.a,{color:"text.secondary"},"Source Graph"),value:v,onChange:function(e){var t="number"===typeof e.target.value?e.target.value:parseInt(e.target.value,10);isNaN(t)||m(t)}},T.map((function(e,t){var a;return r.a.createElement(qe.a,{value:t,key:"srcGraph-"+t},null!==(a=null===e||void 0===e?void 0:e.fullName)&&void 0!==a?a:e.name)}))),r.a.createElement($e.a,{size:"small",sx:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return p((function(e){return!e}))}},r.a.createElement(We.Icon,{path:u?Xe.t:Xe.K,size:1,color:w.palette.primary.contrastText})))}),r.a.createElement(yt,null,u?I.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){return r.a.createElement(ot,{key:"cat-indi-".concat(t),nodeId:(t+1).toString(),labelText:e.name,typographyVariant:"body1",onClick:(a=e,function(e){a.default.newSubchart?l({task:"addSubchart",params:{chartSeries:x,chartName:b,id:At()(),indicator:a,indSrcId:k}}):l({task:"addGraph",params:{chartSeries:x,chartName:b,id:At()(),indicator:a,subchartIdx:0,indSrcId:k}})})});var a})):_a.map((function(e,t){var a=I.filter((function(t){return t.category===e.name}));return a.length>0&&r.a.createElement(ot,{key:"cat-".concat(t),nodeId:t.toString(),labelText:e.name,bgColorSelected:w.palette.primary.light,color:"#ff0000",labelIcon:r.a.createElement("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:w.palette.secondary.main,minWidth:32,height:32}},r.a.createElement(We.Icon,{path:e.icon,size:"32px",color:w.palette.secondary.contrastText}))},a.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,a){return r.a.createElement(ot,{key:"cat-".concat(t,"-indi-").concat(a),nodeId:(100*(t+1)+(a+1)).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){var t,a,n=d.find((function(e){var t;return e.id===(null===(t=T[v])||void 0===t?void 0:t.dataId)}));if(n){var o=null!==(t=n.data)&&void 0!==t?t:[],r=null!==(a=n.name)&&void 0!==a?a:"Graph No."+(null===T||void 0===T?void 0:T[v].graphIdx);(null===e||void 0===e?void 0:e.default.newSubchart)?l({task:"addSubchart",params:{dataSeries:o,name:r,indicator:e,indSrcId:n.id,id:At()()}}):l({task:"addGraph",params:{dataSeries:o,name:r,id:At()(),indicator:e,subchartIdx:null===T||void 0===T?void 0:T[v].subchartIdx,indSrcId:n.id,indSrcLineIdx:null===T||void 0===T?void 0:T[v].graphLineIdx}})}}})})))}))))},Ja=a(585),$a=a(561),Qa=function(){return(Qa=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},en=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},tn="undefined"!==typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches,an={isDrawing:!1,xy:[],params:[]},nn={isHovering:!1,move:{x:0,pixX:0,pixY:0,snapDatasets:[],subchartIdx:null,xDateString:"",pixXSnap:0,pixXUnlimSnap:0,xUnlimited:0},click:{clickedSubchartIdx:null}},on={isDarkMode:!1,borderColor:"#000",backgroundColor:"#fff",crosshair:{useCrosshair:!0,strokeColor:"#000",xMarkerBackgroundColor:"#fff",xMarkerFontName:"Arial",xMarkerFontSize:14,xMarkerTextColor:"#000",xMarkerStrokeColor:"#000",yMarkerBackgroundColor:"#fff",yMarkerStrokeColor:"#000",yMarkerTextColor:"#000",yMarkerFontName:"Arial",yMarkerFontSize:14},grid:{useGridX:!0,useGridY:!0,strokeColor:"rgba(51,51,51, 0.2)",strokeStyle:"FUTURE"},yaxis:{widthYAxis:80,widthTickmarkLines:5,fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:14,fontName:"Arial"},xaxis:{heightXAxis:36,heightTickMarkLines:8,fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:14,fontName:"Arial"},draw:{strokeColor:"red",anchorColor:"#333"}},rn=Qa(Qa({},on),{isDarkMode:!0,crosshair:Qa(Qa({},on.crosshair),{strokeColor:"#bbb"}),borderColor:"#666",draw:{strokeColor:"red",anchorColor:"#ccc"},grid:Qa(Qa({},on.grid),{strokeColor:"rgba(153,153,153, 0.08)"}),yaxis:Qa(Qa({},on.yaxis),{fontColor:"#bbb",strokeColor:"#bbb"}),backgroundColor:"#333"}),ln={data:[],subCharts:[],fullscreen:!1,draw:an,containerSize:{top:0,left:0,width:300,height:300,init:!1},pointer:{isHovering:!1,move:{isMoving:!1,xy:[0,0]},wheel:{isWheeling:!1,delta:[0,0]},dragPointerUp:{isDragPointerUp:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0]},drag:{isDragging:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0],delta:[0,0],ctrlKey:!1},pinch:{isPinching:!1,first:!1,movementInitial:[0,0],origin:[0,0]}},calc:{subcharts:[],xaxis:{totalTranslatedX:0,scaledWidthPerTick:10,xStart:0,xEnd:0,xLast:0,xUnlimited:0,pixXStart:0,pixXEnd:0,optChartPeriod:null,initialWidthPerTick:10,curTicks:[]},pointer:nn},style:on},cn=Qa(Qa({},ln),{style:rn}),dn=["#666","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],sn=["#bbb","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],un=function(e,t){return e[t%e.length]},pn={candleStrokeColor:"transparent",candleWickStrokeColor:"#666",candleDownColor:"#c70039",candleUpColor:"#009688"},hn={strokeColor:["#666"]},vn={strokeColor:["#bbb"]},mn=function(e,t,a,n){return"indicator"===e?(console.log("IL",n,!n||n<=1),!n||n<=1?{strokeColor:[un(t?sn:dn,null!==a&&void 0!==a?a:0)]}:{strokeColor:(t?sn:dn).slice(0,n)}):Qa(Qa({},pn),{strokeColor:un(t?sn:dn,null!==a&&void 0!==a?a:0)})},fn=function(){return(fn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gn=function(e){var t=e.isDesktop,a=e.onClose,n=e.location,o=e.fullscreen,i=e.headerText,l=e.onNavigate,c=e.Dispatch,d=e.settings,s=e.content,u=Object(Ae.a)(),p=r.a.useState(null),h=p[0],v=p[1],m=r.a.useState(null),f=m[0],g=m[1],y=r.a.useMemo((function(){var e;return null!==(e=d.themes)&&void 0!==e?e:[fn(fn({},on),{name:"light"}),fn(fn({},rn),{name:"dark"})]}),[]),x=r.a.useCallback((function(){l("menu")}),[l]),b=r.a.useCallback((function(){c({task:"setGeneralProp",params:{prop:"toggleFullscreen"}})}),[c]),k=r.a.useCallback((function(e,t){"theme"===t&&v(e.currentTarget),"clear"===t&&g(e.currentTarget)}),[]),w=r.a.useCallback((function(){v(null),g(null)}),[]),C=r.a.useCallback((function(e){v(null);var t=y.find((function(t){return t.name===e}));t&&c({task:"setTheme",params:{theme:t}})}),[c,y]);return r.a.createElement(Ja.a,{anchor:t?"left":"bottom",open:!!n,disablePortal:o,onBackdropClick:a,onClose:a,PaperProps:{sx:t?{border:"1px solid #666",borderBottomRightRadius:10,borderTopRightRadius:10,minWidth:300,height:"100%"}:{border:"1px solid #666",borderTopLeftRadius:10,borderTopRightRadius:10,maxHeight:"75%",minHeight:"33%"}}},r.a.createElement(Je.a,{sx:{position:"relative",top:0,height:"100%"}},r.a.createElement(Je.a,{sx:{position:"sticky",top:0,height:48,width:"100%",bgcolor:"primary.main",p:1,boxSizing:"border-box",zIndex:1}},r.a.createElement(Be.a,{direction:"row",sx:{height:32,justifyItems:"center",justifyContent:"center",verticalAlign:"middle"}},r.a.createElement(O.a,{component:"div",variant:"h5",sx:{flexGrow:1,pt:.5,pr:1}},i||""),r.a.createElement(Je.a,{sx:{margin:"-5px"}},!!n&&"menu"!==n&&r.a.createElement($e.a,{size:"small",onClick:x},r.a.createElement(Le.a,{path:Xe.z,size:"32px",color:u.palette.primary.contrastText})),!window.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&r.a.createElement($e.a,{size:"small",onClick:b},r.a.createElement(Le.a,{path:o?Xe.w:Xe.v,size:"32px",color:u.palette.primary.contrastText})),r.a.createElement($e.a,{size:"small",onClick:a},r.a.createElement(Le.a,{path:Xe.m,size:"32px",color:u.palette.primary.contrastText}))))),r.a.createElement(Je.a,{sx:{position:"relative",top:0,mb:t?"48px":"96px",height:t?"calc(100% - 96px)":"auto",overflowY:"auto",p:1}},s),r.a.createElement(Je.a,{sx:{position:t?"absolute":"fixed",bottom:0,height:48,width:"100%",bgcolor:"primary.main"}},r.a.createElement(Be.a,{direction:"row",sx:{alignItems:"center",alignContent:"center",pt:.5}},r.a.createElement(Je.a,{sx:{flexGrow:1}}),r.a.createElement($e.a,{id:"clearMenuButton",size:"small",onClick:function(e){null===k||void 0===k||k(e,"clear")}},r.a.createElement(Le.a,{path:Xe.h,size:"32px",color:u.palette.primary.contrastText})),r.a.createElement(_e.a,{id:"clear-menu",anchorEl:f,anchorOrigin:{horizontal:"center",vertical:"top"},transformOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(f),onClose:w,MenuListProps:{"aria-labelledby":"clearMenuButton"}},r.a.createElement(O.a,{variant:"h6",component:"div",sx:{textAlign:"center",pb:1,pl:1,pr:1,color:"primary.main"}},"Clear Chart"),r.a.createElement($a.a,null),["all","indicators","tools"].map((function(e,t){return r.a.createElement(qe.a,{key:"clearMenuItem-".concat(t),onClick:function(){c({task:"clearChart",params:{mode:e}})}},e)}))),r.a.createElement($e.a,{id:"themeMenuButton",size:"small",onClick:function(e){null===k||void 0===k||k(e,"theme")}},r.a.createElement(Le.a,{path:Xe.L,size:"32px",color:u.palette.primary.contrastText})),r.a.createElement(_e.a,{id:"theme-menu",anchorEl:h,anchorOrigin:{horizontal:"center",vertical:"top"},transformOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(h),onClose:w,MenuListProps:{"aria-labelledby":"themeMenuButton"}},r.a.createElement(O.a,{variant:"h6",component:"div",sx:{textAlign:"center",pb:1,pl:1,pr:1,color:"primary.main"}},"Set Theme"),r.a.createElement($a.a,null),y.map((function(e,t){return r.a.createElement(qe.a,{key:"themeMenuItem-".concat(t),onClick:function(){C(e.name)}},e.name)}))),r.a.createElement($e.a,{size:"small",onClick:function(){null===a||void 0===a||a()}},r.a.createElement(Le.a,{path:Xe.m,size:"32px",color:u.palette.primary.contrastText}))))))},yn=function(e){var t=e.subCharts,a=e.Dispatch,n=e.data,o=e.location,i=e.onNavigate,l=Object(Ae.a)(),c=n.filter((function(e){return"indicator"===e.type})).length;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xa,{location:o,onNavigate:i,theme:l,amtIndicators:c}),r.a.createElement(yt,null,t.map((function(e,o){return e.yaxis.map((function(e,i){return e.graphs.map((function(e,l){return W(e)?r.a.createElement(ia,{key:"editIndicator-sub-".concat(o,"-yaxis-").concat(i,"-graph-").concat(l),subCharts:t,Dispatch:a,subchartIdx:o,yaxisIdx:i,graphIdx:l,data:n}):null}))}))}))))},xn=function(e){var t=e.location,a=e.submenuContent,n=e.theme,o=e.onNavigate,i=e.subCharts.map((function(e){return e.yaxis.map((function(e){return e.tools.length}))})).flat().reduce((function(e,t){return e+t}));return r.a.createElement(Be.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},a,i>0?r.a.createElement(Aa.a,{value:"toolModifyMode",exclusive:!0,size:"small"},r.a.createElement(Fa.a,{value:"addTool",sx:{"&:hover":{background:"tools"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"tools"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===o||void 0===o||o("tools")}},r.a.createElement(O.a,null," Add")),r.a.createElement(Fa.a,{value:"editTool",sx:{"&:hover":{background:"editTool"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomRightRadius:50,borderTopRightRadius:50,background:"editTool"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===o||void 0===o||o("editTool")}},"Edit")):null)},bn=[{name:"Lines",icon:Xe.H},{name:"Measure",icon:Xe.n},{name:"Upcoming",icon:Xe.I}],kn=[{name:"trendline",type:"trendline",category:"Lines"},{name:"horizontal",type:"hline",category:"Lines"},{name:"vertical",type:"vline",category:"Lines"}],wn=function(e,t){e({task:"draw",params:{type:t,subchartIdx:0}})},Cn=function(e){var t=e.Dispatch,a=e.onNavigate,n=e.subCharts,o=r.a.useState(!1),i=o[0],l=o[1],c=Object(Ae.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(xn,{subCharts:n,location:"tools",onNavigate:a,theme:c,submenuContent:r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{size:"small",sx:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return l((function(e){return!e}))}},r.a.createElement(Le.a,{path:i?Xe.t:Xe.K,size:1,color:c.palette.primary.contrastText})))}),r.a.createElement(yt,null,i?kn.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,n){return r.a.createElement(ot,{key:"cat-tool-".concat(n),nodeId:(n+1).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){wn(t,e.type),null===a||void 0===a||a(null)}})})):bn.map((function(e,n){return r.a.createElement(ot,{key:"cat-".concat(n),nodeId:n.toString(),labelText:e.name,labelIcon:r.a.createElement("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:c.palette.secondary.main,minWidth:32,height:32}},r.a.createElement(Le.a,{path:e.icon,size:"32px",color:c.palette.secondary.contrastText})),bgColorSelected:c.palette.primary.light},kn.filter((function(t){return t.category===e.name})).sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,o){return r.a.createElement(ot,{key:"cat-".concat(n,"-tool-").concat(o),nodeId:(100*(n+1)+(o+1)).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){wn(t,e.type),null===a||void 0===a||a(null)}})})))}))))},Tn=function(e){var t=e.subCharts,a=e.Dispatch,n=e.onNavigate,o=Object(Ae.a)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(xn,{subCharts:t,location:"editTool",onNavigate:n,theme:o}),r.a.createElement(yt,null,t.map((function(e,n){return e.yaxis.map((function(e,o){return e.tools.map((function(e,i){return r.a.createElement(ma,{key:"editIndicator-sub-".concat(n,"-yaxis-").concat(o,"-graph-").concat(i),subCharts:t,Dispatch:a,subchartIdx:n,yaxisIdx:o,toolIdx:i})}))}))}))))},In=r.a.memo((function(e){var t=e.onClose,a=e.ChartMenuState,n=e.subCharts,o=e.style,i=e.onNavigate,l=e.Dispatch,c=e.onSettingsExpand,d=e.fullscreen,s=e.settings,u=e.data,p=Object(ze.a)("(min-width:600px)"),h=[{location:"menu",headerText:"Chart Menu",component:function(){return r.a.createElement(Ve,{onNavigate:i})}},{location:"chart",headerText:"Chart",component:function(){return r.a.createElement(za,{Dispatch:l})}},{location:"indicators",headerText:"Add Indicator",component:function(){return r.a.createElement(qa,{subCharts:n,onNavigate:i,location:a.location,Dispatch:l,settings:s,data:u})}},{location:"editIndicator",headerText:"Edit Indicator",component:function(){return r.a.createElement(yn,{subCharts:n,onNavigate:i,location:a.location,Dispatch:l,settings:s,data:u})}},{location:"tools",headerText:"Add Tool",component:function(){return r.a.createElement(Cn,{subCharts:n,Dispatch:l,onNavigate:i})}},{location:"editTool",headerText:"Edit Tool",component:function(){return r.a.createElement(Tn,{subCharts:n,Dispatch:l,onNavigate:i})}},{location:"settings",headerText:"Settings",component:function(){return r.a.createElement(ka,{ChartMenuState:a,subCharts:n,style:o,Dispatch:l,onNavigate:i,onSettingsExpand:c,data:u})}}].find((function(e){return e.location===a.location}));if(!a.location||!h)return null;var v=h.component,m=h.headerText;return console.log("Chartmenu renders"),r.a.createElement(gn,{headerText:m,isDesktop:p,settings:s,location:a.location,onNavigate:i,Dispatch:l,fullscreen:d,onClose:t,content:r.a.createElement(v,null)})})),Sn=r.a.memo((function(e){var t=e.bottomY,a=e.onOpenClick;return r.a.createElement(Je.a,{sx:{position:"absolute",top:t-48-10,left:10}},r.a.createElement(Ke.a,{color:"primary",variant:"contained",onClick:a,sx:{width:48,minWidth:48,height:48,textTransform:"none",borderRadius:2,opacity:.8,padding:0}},r.a.createElement(We.Icon,{path:Xe.B,size:"48px",color:"#fff"})))})),En=function(e){var t=e.dataset,a=e.name,n=e.decimals,o=e.onClick,i=e.subchartIdx,l=e.graphIdx,c=e.graphTypes,d=r.a.useCallback((function(e){null===o||void 0===o||o(e,i,l)}),[o,i,l]);return t?r.a.createElement(Ke.a,{style:{textTransform:"none",textAlign:"left"},onClick:d,startIcon:r.a.createElement(Le.a,{path:Y(t)?Xe.k:Xe.l,size:1})},Y(t)?r.a.createElement(O.a,null,"".concat(a,":").concat(t.prices.map((function(e,t){var a,o;return e&&n&&["line","bars"].includes(null!==(o=null===(a=null===c||void 0===c?void 0:c[t])||void 0===a?void 0:a.type)&&void 0!==o?o:"")?null===e||void 0===e?void 0:e.toFixed(n):null})).filter((function(e){return null!==e})).join(", ")||"")):r.a.createElement(O.a,{variant:"body1"},A(t)?"".concat(a,"\n                O:").concat(t.open.toFixed(n),"\n                H:").concat(t.high.toFixed(n),"\n                L:").concat(t.low.toFixed(n),"\n                C:").concat(t.close.toFixed(n)):"".concat(a,"\n                C:").concat(t.close.toFixed(n)))):null},Pn=function(e){var t=e.data,a=e.calcPointer,n=e.calcSubcharts,o=e.subcharts,i=e.onGraphLabelClick;return r.a.createElement(r.a.Fragment,null,o.map((function(e,o){return r.a.createElement(Je.a,{key:"chart-label-subarea-".concat(o),sx:{position:"absolute",top:e.top}},e.yaxis[0].graphs.map((function(e,l){var c,d,s,u,p,h,v,m,f,g,y,x,b=t.find((function(t){return t.id===e.dataId})),k=null!==(c=null===b||void 0===b?void 0:b.data)&&void 0!==c?c:[],w=null!==(d=null===b||void 0===b?void 0:b.decimals)&&void 0!==d?d:0,C=null===(h=null===(p=null===(u=null===(s=null===n||void 0===n?void 0:n[o])||void 0===s?void 0:s.yaxis)||void 0===u?void 0:u[0])||void 0===p?void 0:p.graphs)||void 0===h?void 0:h[l];if(!(null===C||void 0===C?void 0:C.lastDataset)||!b)return null;var T=W(e)&&"indicator"===b.type&&b.indicator.params.length>0?"".concat(b.indicator.name,"(").concat(b.indicator.params[0].val,")"):W(e)&&"indicator"===b.type&&0===b.indicator.params.length?"".concat(b.indicator.name):b.name,I=(a.isHovering&&o===(null===a||void 0===a?void 0:a.move.subchartIdx)&&(null===(m=null===(v=null===a||void 0===a?void 0:a.move.snapDatasets)||void 0===v?void 0:v[0])||void 0===m?void 0:m.graphIdx)===l?null===(y=null===(g=null===(f=null===a||void 0===a?void 0:a.move)||void 0===f?void 0:f.snapDatasets)||void 0===g?void 0:g[0])||void 0===y?void 0:y.data:a.isHovering&&null!==a.move.x?k[null===a||void 0===a?void 0:a.move.x]:C.lastDataset.data)||C.lastDataset.data;return r.a.createElement(En,{key:"chart-label-".concat(o,"-").concat(l),onClick:i,subchartIdx:o,graphIdx:l,name:T,dataset:I,decimals:W(e)&&"indicator"===b.type&&void 0!==b.indicator.default.decimals?b.indicator.default.decimals:w,graphTypes:"indicator"===(null===b||void 0===b?void 0:b.type)?null===(x=null===b||void 0===b?void 0:b.indicator)||void 0===x?void 0:x.graphTypes:void 0})})))})))},On=function(){return(On=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Mn=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},jn=function(e){var t,a,n,o=e.subcharts,i=e.draw,l=e.calc,c=e.containerSize,d=e.drawStyle,s=l.pointer,u=l.subcharts,p=l.xaxis,h=l.yToPix,v=l.pixToY,m=p.xToPix,f=i.isDrawing&&i.type||null,g=va.find((function(e){return e.type===f})),y=null===g||void 0===g?void 0:g.component,x={};null===(t=null===g||void 0===g?void 0:g.params)||void 0===t||t.forEach((function(e){x[e.name]=e.val}));var b=null===(n=null===(a=null===s||void 0===s?void 0:s.move.snapDatasets)||void 0===a?void 0:a[0])||void 0===n?void 0:n.pixYSnap,k=s.move.subchartIdx,w=r.a.useMemo((function(){return ie(k)?[]:Mn(Mn([],i.xy.map((function(e){return m&&h?[m(e[0]),h(e[1],k,0)]:e})),!0),[[s.move.x&&m?null===m||void 0===m?void 0:m(s.move.x):s.move.pixX,b||s.move.pixY]],!1)}),[s.move.x,i.xy,b,s.move.pixX,s.move.pixY,k,m,h]);return i.isDrawing&&y&&!ie(k)&&r.a.createElement(y,On({subcharts:o,subchartIdx:k,xy:i.xy,drawPixXy:w,containerSize:c,calcXaxis:p,calcSubcharts:u,yToPix:h,pixToY:v,style:d},x))||null},Dn=function(){return(Dn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Zn=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},zn=r.a.forwardRef((function(e,t){var a,n,o,i,l,c,d,s,u,p=e.settings,h=e.ChartState,v=e.Dispatch,m=e.rtTicks,f=void 0===m?[]:m,g=p.disableTheme,y=r.a.useRef(p),x=r.a.useState({location:null,expandedSetting:[]}),b=x[0],k=x[1],w=r.a.useCallback((function(){k((function(e){return Dn(Dn({},e),{location:"menu"})}))}),[]),C=r.a.useCallback((function(){k((function(e){return Dn(Dn({},e),{location:null})}))}),[]),T=r.a.useCallback((function(e){k((function(t){return Dn(Dn({},t),{location:e})}))}),[]),D=r.a.useCallback((function(e){k((function(t){return t.expandedSetting.includes(e)?Dn(Dn({},t),{expandedSetting:t.expandedSetting.filter((function(t){return t!==e}))}):Dn(Dn({},t),{expandedSetting:Zn(Zn([],t.expandedSetting,!0),[e],!1)})}))}),[]),Z=r.a.useCallback((function(e,t,a){ie(t)||ie(a)||k({location:"settings",expandedSetting:["graph-sub-".concat(t,"-y-0-graph-").concat(a),"sub-".concat(t)]})}),[]),z=h.style.isDarkMode,A=null===(l=null===(i=null===(o=null===(n=null===(a=null===h||void 0===h?void 0:h.subCharts)||void 0===a?void 0:a[0])||void 0===n?void 0:n.yaxis)||void 0===o?void 0:o[0])||void 0===i?void 0:i.graphs)||void 0===l?void 0:l[0],F="candles"===(null===A||void 0===A?void 0:A.chartType)?de:ce,X=h.containerSize.init,Y=h.style.xaxis.heightXAxis,U=h.containerSize.width-1,R=h.containerSize.height-1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{theme:z?E:S,disableTheme:g},r.a.createElement("div",{ref:t,style:{boxSizing:"border-box",position:"relative",top:0,zIndex:1e3,height:"100%",background:h.style.backgroundColor}},A&&F&&X?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.f,{width:h.containerSize.width,height:h.containerSize.height,listening:!1},r.a.createElement(j.b,{listening:!1},r.a.createElement(j.d,{name:"xaxis-rect",listening:!1,x:.5,y:R-Y+.5,width:U,height:Y,fill:h.style.xaxis.fillColor,stroke:h.style.borderColor,strokeWidth:1}),h.subCharts.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"subchart-border-".concat(t)},r.a.createElement(j.d,{name:"subchart rect "+t,listening:!1,x:.5,y:e.top+.5,width:U,height:e.bottom-e.top,stroke:h.style.borderColor,strokeWidth:1}))}))),r.a.createElement(j.b,{listening:!1},0 in h.subCharts?r.a.createElement(F,{subCharts:h.subCharts,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,yToPix:h.calc.yToPix,pixToY:h.calc.pixToY,subchartIdx:0,yaxisIdx:0,graphIdx:0}):null,h.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,a){var n,o,i,l,c,d,s=h.data.find((function(t){return t.id===e.dataId}));return W(e)&&"indicator"===(null===s||void 0===s?void 0:s.type)&&(null!==(o=null===(n=null===s||void 0===s?void 0:s.data)||void 0===n?void 0:n.length)&&void 0!==o?o:0)>0?(null!==(d=null===(c=null===s||void 0===s?void 0:s.data[(null!==(l=null===(i=null===s||void 0===s?void 0:s.data)||void 0===i?void 0:i.length)&&void 0!==l?l:0)-1])||void 0===c?void 0:c.prices)&&void 0!==d?d:[]).map((function(e,n){var o,i,l,c,d,u,p,v=null!==(l=null===(i=null===(o=s.indicator.graphTypes)||void 0===o?void 0:o[n])||void 0===i?void 0:i.type)&&void 0!==l?l:"line",m="line"===v?ce:"bars"===v?re:null;if(!m)return null;var f=null===(d=null===(c=s.indicator.default)||void 0===c?void 0:c.graphProps)||void 0===d?void 0:d.findIndex((function(e){return"areaTresholds"===e.name})),g="line"!==v||ie(f)||-1===f?{}:{areaTresholds:null===(p=null===(u=s.indicator.default)||void 0===u?void 0:u.graphProps)||void 0===p?void 0:p[f].val};return r.a.createElement(m,Dn({key:"".concat(v,"-chart-s").concat(t,"-y0-g").concat(a,"-l").concat(n),subCharts:h.subCharts,subchartIdx:t,yaxisIdx:0,graphIdx:a,indSeriesIdx:n,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,yToPix:h.calc.yToPix,pixToY:h.calc.pixToY},g))})):null}))}))})),r.a.createElement(De,{calcXaxis:h.calc.xaxis,containerSize:h.containerSize,style:h.style}),r.a.createElement(Ze,{calcSubcharts:h.calc.subcharts,containerSize:h.containerSize,style:h.style,subcharts:h.subCharts})),r.a.createElement(j.b,{listening:!1},r.a.createElement(je,{rtTicks:f,style:h.style,containerSize:h.containerSize,xaxis:h.calc.xaxis}),h.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,n){var o,i,l,c,d;if("indicator"===e.type){var s=h.data.find((function(t){return t.id===e.dataId})),u=f.findIndex((function(e){return e.dataId===(null===s||void 0===s?void 0:s.id)}));return-1===u||("indicator"!==(null===s||void 0===s?void 0:s.type)||0===(null!==(i=null===(o=null===s||void 0===s?void 0:s.data)||void 0===o?void 0:o.length)&&void 0!==i?i:0))?null:(null===(l=null===s||void 0===s?void 0:s.indicator)||void 0===l?void 0:l.graphTypes).map((function(e,o){var i,l,c,d,p,v=null!==(c=null===(l=null===(i=s.indicator.graphTypes)||void 0===i?void 0:i[o])||void 0===l?void 0:l.type)&&void 0!==c?c:"line",m="line"===v?ce:"bars"===v?re:null;return m?r.a.createElement(m,{key:"rtBars-s".concat(t,"-y").concat(a,"-g").concat(n,"-l").concat(o),subCharts:h.subCharts,subchartIdx:t,yaxisIdx:a,graphIdx:n,indSeriesIdx:o,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,yToPix:h.calc.yToPix,pixToY:h.calc.pixToY,rtTicks:null!==(p=null===(d=null===f||void 0===f?void 0:f[u])||void 0===d?void 0:d.ticks)&&void 0!==p?p:void 0}):null}))}if("chart"===e.type){var p="candles"===e.chartType?de:"line"===e.chartType?ce:null;return p?r.a.createElement(p,{key:"rtBars-s".concat(t,"-y").concat(a,"-g").concat(n),subCharts:h.subCharts,subchartIdx:t,yaxisIdx:a,graphIdx:n,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,rtTicks:null!==(d=null===(c=null===f||void 0===f?void 0:f[0])||void 0===c?void 0:c.ticks)&&void 0!==d?d:void 0}):null}return null}))}))}))),r.a.createElement(j.b,{listening:!1},(null===(c=h.calc.xaxis)||void 0===c?void 0:c.xToPix)&&!!h.calc.yToPix&&h.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.tools.map((function(e,a){var n,o=va.find((function(t){return t.type===e.type})),i={};null===(n=e.params)||void 0===n||n.forEach((function(e){i[e.name]=e.val}));var l=o?o.component:null;return l&&o?r.a.createElement(l,Dn({key:"trendline-sub-0-y-0-tool-".concat(a),subcharts:h.subCharts,subchartIdx:t,xy:e.xy,containerSize:h.containerSize,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,yToPix:h.calc.yToPix,pixToY:h.calc.pixToY,style:e.style},i)):null}))}))}))),r.a.createElement(j.b,{listening:!1},h.calc.pointer.isHovering&&!y.current.disablePointerEvents&&h.style.crosshair.useCrosshair?r.a.createElement(Me,{subcharts:h.subCharts,data:h.data,containerSize:h.containerSize,calcPointer:h.calc.pointer,calcXaxis:h.calc.xaxis,style:h.style,pixToY:h.calc.pixToY,rtTicks:f,calcSubcharts:h.calc.subcharts}):null,r.a.createElement(jn,{subcharts:h.subCharts,containerSize:h.containerSize,draw:h.draw,calc:h.calc,drawStyle:h.style.draw}))),r.a.createElement(Pn,{data:h.data,subcharts:h.subCharts,calcPointer:h.calc.pointer,calcSubcharts:h.calc.subcharts,onGraphLabelClick:Z}),r.a.createElement(Sn,{bottomY:null!==(u=null===(s=null===(d=h.subCharts)||void 0===d?void 0:d[h.subCharts.length-1])||void 0===s?void 0:s.bottom)&&void 0!==u?u:0,onOpenClick:w}),r.a.createElement(In,{ChartMenuState:b,onClose:C,onNavigate:T,subCharts:h.subCharts,xaxis:h.calc.xaxis,style:h.style,fullscreen:h.fullscreen,Dispatch:v,onSettingsExpand:D,settings:y.current,data:h.data})):r.a.createElement("div",{style:{height:"100%",background:h.style.backgroundColor}},r.a.createElement(P.a,{sx:{color:"primary.main"},open:!0,invisible:!0},r.a.createElement(O.a,{variant:"h6",component:"div"},"Chart data is loaded.."),r.a.createElement(M.a,{color:"inherit"}))))))}));zn.displayName="CChart";var An=a(266),Fn=a.n(An),Xn=function(){return(Xn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Yn=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Un=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Rn=function(e){var t=e.top,a=e.bottom,n=Yn(e,["top","bottom"]),o=Wn(n);return o?{yaxis:[o],top:t,bottom:a}:null},Wn=function(e){var t=e.dataId,a=e.style,n=e.indicator,o=e.type;return"indicator"!==o||n?{graphs:["indicator"===o&&n?Gn({dataId:t,style:a}):Ln({dataId:t,style:a})],tools:[]}:null},Ln=function(e){var t=e.dataId;return{style:e.style,type:"chart",chartType:"candles",dataId:t}},Gn=function(e){return{type:"indicator",dataId:e.dataId,style:e.style}},Nn=function(e){var t=e.subCharts,a=e.removeSubchartIdx,n=e.addSubchart,o=e.subchartsHeight,r=150,i=null===n||void 0===n?void 0:n.data,l=ie(a)?t:Un(Un([],t.slice(0,a),!0),t.slice(a+1),!0),c=l.length+(n?1:0),d=l.map((function(e,t){return e.bottom-e.top>0?e.bottom-e.top:0===t?o-(c-1)*r:r})),s=n?Un(Un([],d,!0),[r],!1):d,u=s.slice(1).reduce((function(e,t){return e+t}),0);if(o>=250+u){var p=o-s[0]-u,h=s.map((function(e,t){return Math.max((0===t?250:r)-e,0)})),v=h.reduce((function(e,t){return e+t}),0),m=0===v?0:p>=v?1:p/v,f=s.map((function(e,t){return e+Math.floor(m*h[t])})),g=f.slice(1).reduce((function(e,t){return e+t}),0),y=l.reduce((function(e,t,a){return 0===a?[Xn(Xn({},t),{top:0,bottom:o-g})]:Un(Un([],e,!0),[Xn(Xn({},t),{top:e[e.length-1].bottom,bottom:e[e.length-1].bottom+f[a]})],!1)}),[]),x=i&&"indicator"===i.type?i.indicator.graphTypes.length:void 0;console.log(x);var b=(i&&0!==y.length?[Rn({top:y[y.length-1].bottom,bottom:o,dataId:i.id,style:mn(i.type,n.darkMode,void 0,x),indicator:"indicator"===i.type?i.indicator:void 0,type:i.type})]:[]).filter((function(e){return null!==e}));return Un(Un([],y,!0),b,!0)}var k=o/(s[0]+u),w=s.slice(1).map((function(e){return Math.min(Math.ceil(e*k),150)})),C=w.reduce((function(e,t){return e+t}));y=l.reduce((function(e,t,a){return 0===a?[Xn(Xn({},t),{top:0,bottom:o-C})]:Un(Un([],e,!0),[Xn(Xn({},t),{top:e[e.length-1].bottom,bottom:e[e.length-1].bottom+w[a-1]})],!1)}),[]),x=i&&"indicator"===i.type?i.indicator.graphTypes.length:void 0,b=(i&&0!==y.length?[Rn({top:y[y.length-1].bottom,bottom:o,dataId:i.id,style:mn(i.type,n.darkMode,void 0,x),indicator:"indicator"===i.type?i.indicator:void 0,type:i.type})]:[]).filter((function(e){return null!==e}));return Un(Un([],y,!0),b,!0)},Vn=function(){return(Vn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Hn=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Bn=function(e,t,a,n){var o,r,i,l,c,d,s,u=e.calc,p=e.containerSize,h=e.stateControl,v=e.pointer,m=u.xaxis,f=h.shallUpdate,g=h.prevAction,y=p.width,x=p.height,b=null===g||void 0===g?void 0:g.drag,k=x-n,w=v.drag.first,C=v.drag.last,T=v.drag.isDragging,I=(!!(null===(r=null===(o=v.drag)||void 0===o?void 0:o.delta)||void 0===r?void 0:r[0])||!!(null===(l=null===(i=v.drag)||void 0===i?void 0:i.delta)||void 0===l?void 0:l[1]))&&!(null===(c=v.drag)||void 0===c?void 0:c.first)&&f.includes("drag");if((["drawTool","editTool","resizeSubchart"].includes(null!==(d=null===b||void 0===b?void 0:b.type)&&void 0!==d?d:"")||["translate","scale"].includes(null!==(s=null===b||void 0===b?void 0:b.type)&&void 0!==s?s:"")&&!v.drag.last)&&b)return Vn(Vn({},b),{shallUpdate:I,start:!1,end:C});if(T&&a)return{type:"drawTool",start:!0,end:!1,shallUpdate:!0};if(T&&!a){var S=v.drag.initial,E=function(e,t,a){if(!e)return null;var n=null!==a&&void 0!==a?a:10,o=t.find((function(t){return e[1]>=t.bottom-n&&e[1]<t.bottom+n}));if(!o)return null;var r=t.indexOf(o);return-1===r?null:r}(S,t);if(null!==E&&E!==t.length-1)return{type:"resizeSubchart",start:w,end:C,subchartIdx:E,bottomInitY:t[E].bottom,shallUpdate:!0};var P=function(e,t,a,n){if(!e||!t||!a)return[];var o=Oe(e,t);if(null===o)return[];var r=a.totalTranslatedX,i=a.scaledWidthPerTick;return t[o].yaxis.map((function(a,l){var c,d,s,u=null===(s=null===(d=null===(c=n.subcharts)||void 0===c?void 0:c[o])||void 0===d?void 0:d.yaxis)||void 0===s?void 0:s[l];return u?a.tools.map((function(a,n){return a.xy.map((function(a,c){var d=Te(a[0],r,i),s=Se(a[1],t[o].bottom,u.decimals,u.translatedY,u.heightPerPt);return e[0]>=d-10&&e[0]<=d+10&&e[1]>=s-10&&e[1]<=s+10?{subchartIdx:o,yaxisIdx:l,toolIdx:n,toolPtIdx:c}:null})).filter((function(e){return null!==e}))})).flat():[]})).flat()}(S,t,m,u);if(P.length>0){var O=P[0],M=O.subchartIdx,j=O.yaxisIdx,D=O.toolIdx,Z=O.toolPtIdx;return{type:"editTool",start:w,end:C,subchartIdx:M,yaxisIdx:j,toolIdx:D,toolPtIdx:Z,toolInitXy:t[M].yaxis[j].tools[D].xy[Z],shallUpdate:!0}}return S[0]>=0&&S[0]<0+y&&S[1]>=0&&S[1]<0+k?{type:"translate",start:w,end:C,shallUpdate:!0}:S[0]>=0&&S[0]<0+y&&S[1]>=0+k?{type:"scale",start:w,end:C,initScaledWidthPerTick:m.scaledWidthPerTick,initTranslatedX:m.totalTranslatedX,shallUpdate:!0}:null}return null},Kn=function(e,t,a){var n=e-1-a.xaxis.heightXAxis;return Nn({subchartsHeight:n,subCharts:t})},_n=function(){return(_n=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},qn=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Jn=function(e,t){var a=t.subchartIdx,n=e.subCharts[a].yaxis.map((function(e){return e.graphs.map((function(e){return e.dataId}))})).flat(),o=e.containerSize.height-e.style.xaxis.heightXAxis,r=Nn({subchartsHeight:o,subCharts:e.subCharts,removeSubchartIdx:a});return _n(_n({},e),{data:e.data.filter((function(e){return!n.includes(e.id)})),subCharts:r})},$n=function(e,t){var a=t.dataSeries,n=t.graphName,o=t.subchartIdx,r=t.id,i=t.indSrcId,l=t.indicator,c=t.indSrcLineIdx,d=e.subCharts[o].yaxis[0].graphs.length;if(!i&&l||i&&!l)return e;var s=Bt(a,n,r,l,i,c);if(!s)return e;var u=s.id,p="indicator"===s.type?s.indicator.graphTypes.length:void 0,h=mn(s.type,e.style.isDarkMode,d,p),v="indicator"===s.type&&l&&i?Gn({dataId:u,style:h}):Ln({dataId:u,style:h});W(v)&&s.data[s.data.length-1].prices.length>1&&(v.style.strokeColor=s.data[s.data.length-1].prices.map((function(t,a){return function(t){return un(e.style.isDarkMode?sn:dn,t)}(a)})));var m=e.subCharts[o];return Lt(Lt(e,["data"],qn(qn([],e.data,!0),[s],!1)),["subCharts",o],_n(_n({},m),{yaxis:[_n(_n({},m.yaxis[0]),{graphs:qn(qn([],m.yaxis[0].graphs,!0),[v],!1)})]}))},Qn=function(e,t){var a,n=t.datas,o=null===(a=null===n||void 0===n?void 0:n[0])||void 0===a?void 0:a.id,r=n.map((function(e,t){var a,n;return"chart"===e.type?e:_n(_n({},e),{indSrcId:null!==(a=e.indSrcId)&&void 0!==a?a:o,id:null!==(n=e.id)&&void 0!==n?n:"indi_"+t.toString().padStart(2,"0")})})),i=jt()(r.map((function(e,t){return"indicator"!==e.type||ie(null===e||void 0===e?void 0:e.id)?null:ta(r,e.id)})).flat().filter((function(e){return null!==e}))),l=r.map((function(e){return"chart"===e.type?_t(e.data,e.name,e.id):null})),c=qn([],l,!0);i.forEach((function(e,t){var a=null===r||void 0===r?void 0:r.findIndex((function(t,a){return t.id===e})),n=null===r||void 0===r?void 0:r[a],o="indicator"===(null===n||void 0===n?void 0:n.type)?n:null,i=null===o||void 0===o?void 0:o.indSrcId,l=ie(i)?null:null===c||void 0===c?void 0:c.find((function(e){return(null===e||void 0===e?void 0:e.id)===i}));"indicator"===(null===n||void 0===n?void 0:n.type)&&l&&o&&(c[a]=Kt(null===l||void 0===l?void 0:l.data,null===l||void 0===l?void 0:l.id,o.indicator,void 0,e,o.name))}));var d=c.filter((function(e){return null!==e}));d.length!==r.length&&console.warn("Warning - not all indicators could be initialized.");var s=n?function(e,t){var a=-1,n=0,o=t?t.map((function(t,o){var r,i,l,c,d,s,u,p,h,v,m,f,g,y;if(-1===a||ie(null===(r=null===t||void 0===t?void 0:t.graphProps)||void 0===r?void 0:r.subchartIdx)&&("chart"===t.type||"indicator"===t.type&&t.indicator.default.newSubchart)?(a++,n=0):n++,"chart"===t.type){var x=null!==(i=["line","candles","area"].find((function(e){var a;return e===(null===(a=null===t||void 0===t?void 0:t.graphProps)||void 0===a?void 0:a.chartType)})))&&void 0!==i?i:"candles";return{dataId:t.id,dataIdx:o,type:"chart",chartType:x,style:Qa(Qa(Qa({},pn),{strokeColor:e?vn.strokeColor[0]:hn.strokeColor[0]}),null===(l=null===t||void 0===t?void 0:t.graphProps)||void 0===l?void 0:l.style),subchartIdx:null!==(d=null===(c=null===t||void 0===t?void 0:t.graphProps)||void 0===c?void 0:c.subchartIdx)&&void 0!==d?d:a,yaxisIdx:0,graphIdx:null!==(u=null===(s=null===t||void 0===t?void 0:t.graphProps)||void 0===s?void 0:s.graphIdx)&&void 0!==u?u:n}}return"indicator"===t.type?{dataId:null!==(p=t.id)&&void 0!==p?p:"",dataIdx:o,type:"indicator",style:{strokeColor:(null===(v=null===(h=null===t||void 0===t?void 0:t.graphProps)||void 0===h?void 0:h.style)||void 0===v?void 0:v.strokeColor)?t.graphProps.style.strokeColor:t.indicator.graphTypes.length<=1?hn.strokeColor:e?sn.slice(0,t.indicator.graphTypes.length):dn.slice(0,t.indicator.graphTypes.length)},subchartIdx:null!==(f=null===(m=null===t||void 0===t?void 0:t.graphProps)||void 0===m?void 0:m.subchartIdx)&&void 0!==f?f:a,yaxisIdx:0,graphIdx:null!==(y=null===(g=null===t||void 0===t?void 0:t.graphProps)||void 0===g?void 0:g.graphIdx)&&void 0!==y?y:n}:null})).filter((function(e){return!!e})).sort((function(e,t){return e&&t&&e.subchartIdx!==t.subchartIdx?e.subchartIdx-t.subchartIdx:e&&t&&e.subchartIdx===t.subchartIdx?e.graphIdx-t.graphIdx:0})):[];return jt()(null===o||void 0===o?void 0:o.map((function(e){return e.subchartIdx}))).map((function(e,t){return{top:0,bottom:0,yaxis:[0].map((function(e,a){return{tools:[],graphs:null===o||void 0===o?void 0:o.filter((function(e){return e.subchartIdx===t})).map((function(e){return e.subchartIdx,e.yaxisIdx,e.graphIdx,en(e,["subchartIdx","yaxisIdx","graphIdx"])}))}}))}}))}(e.style.isDarkMode,n):[],u=Kn(e.containerSize.height,s,e.style);return _n(_n({},e),{subCharts:u,data:d})},eo=function(){return(eo=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},to=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},ao=[{prop:"backgroundColor",path:["style","backgroundColor"]},{prop:"crosshairStrokeColor",path:["style","crosshair","strokeColor"]},{prop:"crosshairXmarkerBackgroundColor",path:["style","crosshair","xMarkerBackgroundColor"]},{prop:"crosshairXmarkerStrokeColor",path:["style","crosshair","xMarkerStrokeColor"]},{prop:"crosshairXmarkerTextColor",path:["style","crosshair","xMarkerTextColor"]},{prop:"crosshairYmarkerBackgroundColor",path:["style","crosshair","yMarkerBackgroundColor"]},{prop:"crosshairYmarkerStrokeColor",path:["style","crosshair","yMarkerStrokeColor"]},{prop:"crosshairYmarkerTextColor",path:["style","crosshair","yMarkerTextColor"]},{prop:"gridStrokeColor",path:["style","grid","strokeColor"]},{prop:"toggleCrosshair",path:["style","crosshair","useCrosshair"],toggle:!0},{prop:"toggleFullscreen",path:["fullscreen"],toggle:!0},{prop:"toggleGridX",path:["style","grid","useGridX"],toggle:!0},{prop:"toggleGridY",path:["style","grid","useGridY"],toggle:!0},{prop:"xAxisFillColor",path:["style","xaxis","fillColor"]},{prop:"xAxisStrokeColor",path:["style","xaxis","strokeColor"]},{prop:"xAxisTextColor",path:["style","xaxis","fontColor"]},{prop:"yAxisStrokeColor",path:["style","yaxis","strokeColor"]},{prop:"yAxisTextColor",path:["style","yaxis","fontColor"]}],no=function(e,t){var a;if(ne(t)){var n=t.params,o=n.dataId,r=n.newIndSrcId,i=n.newParam,l=n.prevData,c=e.data.find((function(e){return e.id===o}));if("indicator"!==(null===c||void 0===c?void 0:c.type))return e;var d=i&&c.indicator.params.map((function(e,t){return t!==(null===i||void 0===i?void 0:i.paramIdx)?e:eo(eo({},e),{val:i.newValue})}));return eo(eo({},e),{data:oa(e,o,{newParams:d,newIndSrcId:r},l)})}if(ae(t)){var s=t.params,u=s.dataId,p=s.newDatasets;return qt(e,u,p)}if(V(t)){var h=t.params,v=h.newValue,m=h.prop,f=h.subchartIdx,g=h.yaxisIdx,y=h.toolIdx,x=h.toolParamIdx,b=e.subCharts[f].yaxis[g].tools[y];return"strokeColor"===m||"anchorColor"===m?Lt(e,["subCharts",f,"yaxis",g,"tools",y,"style",m],v):"hLineYlevel"===m?Lt(e,["subCharts",f,"yaxis",g,"tools",y,"xy"],[[b.xy[0][0],v]]):"toolParam"!==m||ie(x)?e:Lt(e,["subCharts",f,"yaxis",g,"tools",y,"params",x,"val"],v)}if(N(t)){var k=t.params,w=(v=k.newValue,m=k.prop,f=k.subchartIdx,g=k.yaxisIdx,k.graphIdx);return["strokeColor","candleDownColor","candleUpColor","candleStrokeColor","candleWickStrokeColor"].includes(m)?Lt(e,["subCharts",f,"yaxis",g,"graphs",w,"style",m],v):"chartType"!==m||"line"!==v&&"candles"!==v?"dataId"===m?Lt(e,["subCharts",f,"yaxis",g,"graphs",w,"dataId"],v):e:Lt(e,["subCharts",f,"yaxis",g,"graphs",w,"chartType"],v)}if(G(t)){var C=t.params,T=C.newValue,I=C.prop,S=null===ao||void 0===ao?void 0:ao.find((function(e){return e.prop===I}));if(!S)return e;var E=S.path;v=S.toggle?!function(e,t){if("object"!==typeof e)return null;var a=e;try{return t.forEach((function(e,t){if(!(e in a)||"number"!==typeof e&&"string"!==typeof e)throw new Error("path at position ".concat(t," '").concat(e,"' not found in src object/array -1"));a=a[e]})),a}catch(n){console.error("Error at getStateProp(): ",n)}}(e,E):T;return Lt(e,E,v)}if(te(t))return Qn(e,t.params);if(H(t))return function(e,t){var a=t.dataSeries,n=t.graphName,o=t.id,r=t.indicator,i=t.reset,l=t.indSrcId,c=e.containerSize.height,d=Bt(a,n,o,r,l);if(!d)return e;var s="indicator"===d.type?d.indicator.graphTypes.length:void 0,u=mn(d.type,e.style.isDarkMode,void 0,s),p=d.id;if(0===e.subCharts.length||i){var h=c-e.style.xaxis.heightXAxis,v=Rn({top:0,bottom:h,dataId:p,style:u,indicator:r,type:d.type});return v?_n(_n({},e),{data:[d],subCharts:[v]}):e}var m=c-e.style.xaxis.heightXAxis,f=Nn({subchartsHeight:m,subCharts:e.subCharts,addSubchart:{data:d,darkMode:e.style.isDarkMode}});return _n(_n({},e),{data:qn(qn([],e.data,!0),[d],!1),subCharts:f})}(e,t.params);if(_(t))return Jn(e,t.params);if(B(t))return $n(e,t.params);if(q(t))return function(e,t){var a=t.subchartIdx,n=t.yaxisIdx,o=t.graphIdx,r=e.subCharts[a].yaxis[n].graphs[o].dataId,i=e.subCharts[a];return 0===o&&1===i.yaxis[n].graphs.length?Jn(e,{subchartIdx:a}):Lt(Gt(e,["subCharts",a,"yaxis",n,"graphs",o]),["data"],e.data.filter((function(e){return e.id!==r})))}(e,t.params);if(ee(t))return function(e,t){var a=t.subchartIdx1,n=t.subchartIdx2,o=a<=n?a:n,r=a>n?a:n,i=e.subCharts[o],l=e.subCharts[r],c=i.bottom-i.top,d=l.bottom-l.top,s=d-c;return o===r||ie(o)||ie(r)||r>=e.subCharts.length?e:Xn(Xn({},e),{subCharts:Un(Un(Un(Un(Un([],e.subCharts.slice(0,o),!0),[Xn(Xn({},l),{bottom:i.top+d,top:i.top})],!1),e.subCharts.slice(o+1,r).map((function(e,t){return Xn(Xn({},e),{top:e.top+s,bottom:e.bottom+s})})),!0),[Xn(Xn({},i),{top:l.top+s,bottom:l.bottom})],!1),e.subCharts.slice(r+1),!0)})}(e,t.params);if(J(t)){var P=t.params;f=P.subchartIdx,g=P.yaxisIdx,y=P.toolIdx;return Gt(e,["subCharts",f,"yaxis",g,"tools",y])}if(Q(t))return function(e,t){var a=t.mode,n=_n(_n({},e.subCharts[0]),{top:0,bottom:"tools"!==a?e.containerSize.height-1-e.style.xaxis.heightXAxis:e.subCharts[0].bottom,yaxis:[_n(_n({},e.subCharts[0].yaxis[0]),{graphs:"all"===a||"indicators"===a?[e.subCharts[0].yaxis[0].graphs[0]]:e.subCharts[0].yaxis[0].graphs,tools:"all"===a||"tools"===a?[]:e.subCharts[0].yaxis[0].tools})]});return"all"===a||"indicators"===a?Lt(Lt(e,["subCharts"],[n]),["data"],[e.data.find((function(t){var a,n,o,r,i,l;return t.id===(null===(l=null===(i=null===(r=null===(o=null===(n=null===(a=e.subCharts)||void 0===a?void 0:a[0])||void 0===n?void 0:n.yaxis)||void 0===o?void 0:o[0])||void 0===r?void 0:r.graphs)||void 0===i?void 0:i[0])||void 0===l?void 0:l.dataId)}))]):"tools"===a?Lt(e,["subCharts"],qn([n],e.subCharts,!0)):e}(e,t.params);if(oe(t)){var O=t.params.theme,M=(O.name,to(O,["name"])),j=M.isDarkMode?rn:on;return eo(eo({},e),{style:eo(eo(eo({},j),M),{crosshair:eo(eo({},j.crosshair),M.crosshair),draw:eo(eo({},j.draw),M.draw),grid:eo(eo({},j.grid),M.grid),xaxis:eo(eo({},j.xaxis),M.xaxis),yaxis:eo(eo({},j.yaxis),M.yaxis)})})}if(K(t)){var D=t.params.xy;return(null===(a=va.find((function(e){return e.type===t.params.type})))||void 0===a?void 0:a.nPoints)&&t.params.type?!D&&t.params.type?eo(eo({},e),{draw:eo(eo({},e.draw),{isDrawing:!0,xy:[],type:t.params.type})}):e:eo(eo({},e),{draw:an})}if($(t)){var Z=Xt()(e.calc.xaxis,t.params.newState.calc.xaxis)?{}:{xaxis:eo(eo({},e.calc.xaxis),t.params.newState.calc.xaxis)},z=Xt()(e.subCharts,t.params.newState.subCharts)?{}:{subCharts:t.params.newState.subCharts},A=Xt()(e.containerSize,t.params.newState.containerSize)?{}:{containerSize:t.params.newState.containerSize};return eo(eo(eo(eo({},e),A),z),{pointer:t.params.newState.pointer,draw:t.params.newState.draw,calc:eo(eo(eo({},e.calc),t.params.newState.calc),Z)})}return e},oo=function(){return(oo=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ro=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},io=function(e,t,a,n){var o=1/Math.pow(10,a),r=(e-t)/o/n,i=Math.floor(Math.log10(r))||0;return parseFloat(Array(6).fill(0).map((function(a,r){var l,c=o*Math.pow(10,i+Math.floor(r/3))*(r%3===0?1:r%3===1?2.5:r%3===2?5:0);return{intervalStep:c,optimum:(l=c,Math.abs((e-t)/l-n))}})).reduce((function(e,t){return t.optimum<(null===e||void 0===e?void 0:e.optimum)?t:e})).intervalStep.toFixed(a))},lo=function(e,t,a,n,o){var r=o.xStart,i=o.xEnd,l=o.pixXEnd,c=t[a],d=c.top,s=c.bottom,u=Math.max(Math.round((s-d)/75),3);return t[a].yaxis[n].graphs.map((function(t){var a,n,o,c,d,s=e.find((function(e){return e.id===t.dataId}));if(!(null===s||void 0===s?void 0:s.data))return null;var p,h,v,m=null!==(a=null===s||void 0===s?void 0:s.data)&&void 0!==a?a:[],f=null===(n=s)||void 0===n?void 0:n.indicator,g=m.slice(r,i+1),y=(p=g,h=null===(o=null===f||void 0===f?void 0:f.default)||void 0===o?void 0:o.fixedYScale,v=null===f||void 0===f?void 0:f.graphTypes,Y(p[0])&&h?h[1]:Math.max.apply(Math,p.map((function(e){if(Y(e)){var t=Math.max.apply(Math,e.prices.filter((function(e,t){var a,n;return null!==e&&["line","bars"].includes(null!==(n=null===(a=null===v||void 0===v?void 0:v[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")})));return ie(t)?0:t}return A(e)?e.high:e.close})))),x=function(e,t,a){return Y(e[0])&&t?t[0]:Math.min.apply(Math,e.map((function(e){if(Y(e)){var t=Math.min.apply(Math,e.prices.filter((function(e,t){var n,o;return null!==e&&["line","bars"].includes(null!==(o=null===(n=null===a||void 0===a?void 0:a[t])||void 0===n?void 0:n.type)&&void 0!==o?o:"")})));return ie(t)?0:t}return A(e)?e.low:e.close})))}(g,null===(c=null===f||void 0===f?void 0:f.default)||void 0===c?void 0:c.fixedYScale,null===f||void 0===f?void 0:f.graphTypes),b=null!==(d=null===s||void 0===s?void 0:s.decimals)&&void 0!==d?d:0,k=io(y,x,b,u);return{lastDataset:{data:m[i],x:i,pixX:l,dateString:""},curData:g,yMaxExact:y,yMax:Math.ceil(y/k)*k,yMinExact:x,yMin:Math.floor(x/k)*k}}))},co=function(e,t,a,n,o){var r,i,l=n.map((function(e,a){return e.yaxis.map((function(e,n){return e.graphs.map((function(e,o){return e.dataId===t?{subchartIdx:a,yaxisIdx:n,graphIdx:o}:null}))})).flat()})).flat().filter((function(e){return null!==e})),c=null===l||void 0===l?void 0:l[0];if(!c||!o)return null;var d=function(e){return o(e,c.subchartIdx,c.yaxisIdx)},s=null===(i=null===(r=a.find((function(e){return e.id===t&&"indicator"===e.type})))||void 0===r?void 0:r.indicator)||void 0===i?void 0:i.graphTypes;return Y(e)?{pixPrices:e.prices.map((function(e,t){var a,n;return e&&["line","bars"].includes(null!==(n=null===(a=null===s||void 0===s?void 0:s[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")?d(e):null}))}:A(e)?{pixOpen:d(e.open),pixHigh:d(e.high),pixLow:d(e.low),pixClose:d(e.close)}:F(e)?{pixClose:d(e.close)}:null},so=function(){return(so=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},uo=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},po=function(e,t,a){return e&&t&&a?so(so({},t),{xy:uo(uo([],t.xy,!0),[a],!1)}):an},ho=function(e,t,a,n){var o,r,i=a.xy,l=null!==(r=null===(o=va.find((function(e){return e.type===a.type})))||void 0===o?void 0:o.params)&&void 0!==r?r:[];return function(e,t,a){return Wt(e,t,a,"add")}(e,[t,"yaxis",0,"tools"],{xy:i,type:a.type,style:n.draw,params:l})},vo=function(e,t,a,n){var o,r,i,l,c,d,s,u,p,h,v,m,f,g,y,x,b,k,w,C,T,I,S,E,P,O,M,j,D,Z;if(!a||!n||!t)return null;var z=n.name,A=n.multiply,F=function(e){return{minute:Ce(e,"minutes"),hour:Ce(e,"hours"),day:Ce(e,"days"),week:Ce(e,"weeks"),month:Ce(e,"months"),year:Ce(e,"years")}}(e),X=F.minute,Y=F.hour,U=F.day,R=F.week,W=F.month,L=F.year,G=t.years.findIndex((function(e){return e.year===L})),N=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[G])||void 0===r?void 0:r.months)||void 0===i?void 0:i.findIndex((function(e){return e.month===W})),V=null===(u=null===(s=null===(d=null===(c=null===(l=t.years)||void 0===l?void 0:l[G])||void 0===c?void 0:c.months)||void 0===d?void 0:d[N])||void 0===s?void 0:s.weeks)||void 0===u?void 0:u.findIndex((function(e){return e.week===R})),H=null===(y=null===(g=null===(f=null===(m=null===(v=null===(h=null===(p=t.years)||void 0===p?void 0:p[G])||void 0===h?void 0:h.months)||void 0===v?void 0:v[N])||void 0===m?void 0:m.weeks)||void 0===f?void 0:f[V])||void 0===g?void 0:g.days)||void 0===y?void 0:y.findIndex((function(e){return e.day===U})),B=null===(I=null===(T=null===(C=null===(w=null===(k=null===(b=null===(x=t.years)||void 0===x?void 0:x[G])||void 0===b?void 0:b.months)||void 0===k?void 0:k[N])||void 0===w?void 0:w.weeks)||void 0===C?void 0:C[V])||void 0===T?void 0:T.days)||void 0===I?void 0:I[H];if(-1===G||-1===N||-1===V||-1===H||!B)return null;var K=a.period<(null===(E=null===(S=null===ke||void 0===ke?void 0:ke[2])||void 0===S?void 0:S.range)||void 0===E?void 0:E[0]),_=a.period<(null===(O=null===(P=null===ke||void 0===ke?void 0:ke[1])||void 0===P?void 0:P.range)||void 0===O?void 0:O[0]),q=K?null===B||void 0===B?void 0:B.hours.findIndex((function(e){return e.hour===Y})):void 0,J=K&&!ie(q)&&-1!==(null===(j=null===(M=null===B||void 0===B?void 0:B.hours)||void 0===M?void 0:M[q])||void 0===j?void 0:j.minutes.findIndex((function(e){return e.minute===X})))?null===(Z=null===(D=null===B||void 0===B?void 0:B.hours)||void 0===D?void 0:D[q])||void 0===Z?void 0:Z.minutes.findIndex((function(e){return e.minute===X})):void 0;if(K&&ie(q)||_&&ie(J))return null;if(a.name===z&&1===A)return z;var $={yearIdx:G,monthIdx:N,weekIdx:V,dayIdx:H,hourIdx:q,minuteIdx:J},Q=!q&&!J,ee="months"===z?A:1,te="weeks"===z?A:1,ae="days"===z?A:1,ne="hours"===z?A:1;return!mo(F,t,$)||q||J?"years"!==z&&fo(F,t,$,ee)&&Q?"months":!["years","months"].includes(z)&&go(F,t,$,te)&&Q?"weeks":!["years","months","weeks"].includes(z)&&yo(F,t,$,ae)&&Q?"days":["years","months","weeks","days"].includes(z)||!xo(F,t,$,ne)||J?"minutes"===z&&bo(F,t,$,A)?"minutes":null:"hours":"years"},mo=function(e,t,a){var n,o,r,i=e.day,l=e.week,c=e.month,d=a.yearIdx;if(!t)return!1;var s=null===(r=null===(o=null===(n=t.years)||void 0===n?void 0:n[d])||void 0===o?void 0:o.months)||void 0===r?void 0:r[0];return s.weeks[0].days[0].day===i&&s.weeks[0].week===l&&s.month===c},fo=function(e,t,a,n){void 0===n&&(n=1);var o=e.day,r=e.week,i=a.yearIdx,l=a.monthIdx;return!((l+1)%n!==0||-1===i||-1===l||!t)&&(t.years[i].months[l].weeks[0].days[0].day===o&&t.years[i].months[l].weeks[0].week===r)},go=function(e,t,a,n){void 0===n&&(n=1);var o=e.day,r=e.week,i=a.yearIdx,l=a.monthIdx,c=a.weekIdx;if(!t)return!1;if(t.years[i].months[l].weeks[c].days[0].day===o&&t.years[i].months[l].weeks[c].week===r){if(2===n){var d=0;t.years[i].months[l].weeks.forEach((function(e){return d+=e.days.length}));for(var s=0,u=0,p=0,h=Math.round(d/2),v=0;v<t.years[i].months[l].weeks.length;v++){var m=t.years[i].months[l].weeks[v];Math.abs(s+m.days.length-h)<Math.abs(u-h)&&(u=s+m.days.length,p=v+1),s+=m.days.length}return c===p}if(1===n)return!(1===c&&t.years[i].months[l].weeks[0].days.length<3)&&!(c===t.years[i].months[l].weeks.length-1&&t.years[i].months[l].weeks[c].days.length<3)}return!1},yo=function(e,t,a,n){var o,r,i,l,c,d,s;void 0===n&&(n=1);var u=e.day,p=a.yearIdx,h=a.monthIdx,v=a.weekIdx,m=a.dayIdx;if(!t)return!1;var f=null===(s=null===(d=null===(c=null===(l=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[p])||void 0===r?void 0:r.months)||void 0===i?void 0:i[h])||void 0===l?void 0:l.weeks)||void 0===c?void 0:c[v])||void 0===d?void 0:d.days)||void 0===s?void 0:s[m];if(-1===m||-1===v||-1===h||-1===p||!f)return!1;if(f.day===u&&1===n)return!0;if(f.day===u&&2===n){if(t.years[p].months[h].weeks[v].days.length<=3)return!1;if(4===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m)||5===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m)||6===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m||4===m)||7===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m||5===m))return!0}return!1},xo=function(e,t,a,n){var o,r,i,l,c,d,s,u;void 0===n&&(n=1);var p=e.hour,h=a.yearIdx,v=a.monthIdx,m=a.weekIdx,f=a.dayIdx,g=a.hourIdx;if(!t)return!1;var y=null===(s=null===(d=null===(c=null===(l=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[h])||void 0===r?void 0:r.months)||void 0===i?void 0:i[v])||void 0===l?void 0:l.weeks)||void 0===c?void 0:c[m])||void 0===d?void 0:d.days)||void 0===s?void 0:s[f],x=ie(g)?null:null===(u=null===y||void 0===y?void 0:y.hours)||void 0===u?void 0:u[g];return!(-1===f||-1===m||-1===v||-1===h||-1===g||!x||ie(g))&&(g%n===0&&x.hour===p)},bo=function(e,t,a,n){void 0===n&&(n=1);var o=e.minute,r=a.yearIdx,i=a.monthIdx,l=a.weekIdx,c=a.dayIdx,d=a.hourIdx,s=a.minuteIdx;if(!t)return!1;var u=t.years[r].months[i].weeks[l].days[c];if(-1===r||-1===i||-1===l||-1===c)return!1;if(ie(d)||-1===d||ie(s)||-1===s)return!1;var p=u.hours[d].minutes[s];return s%n===0&&p.minute===o},ko=function(){return(ko=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},wo=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Co=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},To=function(e,t,a){return e>=0?Math.min(t*(1+Math.abs(e)/(a/2)),a/3):Math.max(t/(1+Math.abs(e)/(a/2)),1)},Io=function(e,t,a,n,o){var r,i,l=e?-t/e:0,c=Math.max(Math.ceil(l),0),d=c*e+t,s={xStart:c,pixXStart:d,xEnd:0,xLast:0,xUnlimited:0,pixXEnd:0,curTicks:[],optChartPeriod:null},u=o.find((function(e){return e.id===(null===n||void 0===n?void 0:n.dataId)}));if(!a||!n||!e||!u||!u.dateStat||0===(null===(r=null===u||void 0===u?void 0:u.data)||void 0===r?void 0:r.length))return s;var p=null!==(i=u.data.length)&&void 0!==i?i:0,h=Math.min(a,p*e+t),v=a,m=Math.floor((v-t)/e),f=Math.min(m,p-1),g=function(e,t,a,n){if(!e.chartPeriod||!t)return null;var o=e.chartPeriod,r=o.name,i=o.multiply,l=ke.findIndex((function(e){return e.name===r}));if(-1===l)return null;var c=Ie(a,0,n),d=ko({},t.accAmt);Object.entries(d).forEach((function(e){var t=e[0],a=t;t!==r?d[a]=d[a]*c/d[r]:d[r]=c}));var s=Math.max(Math.round(a/50),4),u=function(e,t){return Math.abs(e/t-s)},p=ke.slice(l).map((function(e,t){var a=e.name,n=0===t?Co([1],e.scaleMultiplys,!0).filter((function(e){return e>=i})).map((function(e){return e/i})):Co([1],e.scaleMultiplys,!0);return Co([1],n,!0).map((function(t,n){var o=d[a],r=e.period;return{name:a,multiply:t,amt:o,period:r}}))})).flat().reduce((function(e,t,a){return u(t.amt,t.multiply)<u(e.amt,e.multiply)?t:e}));return p.amt,wo(p,["amt"])}(u.meta,u.dateStat,a,e),y=u.meta.chartPeriod,x=null===u||void 0===u?void 0:u.dateStat,b=g&&y&&!ie(x)?Array(f-c+1).fill(0).map((function(t,a){var n=c+a,o=vo(u.data[n].date,x,y,ko({},g));if(o){var r=we(u.data[n].date,o);return{x:d+e*a,dateString:r}}return null})).filter((function(e){return null!==e})):[];return{xLast:p-1,xStart:c,pixXStart:d,xEnd:f,xUnlimited:m,pixXEnd:h,curTicks:b,optChartPeriod:g,xToPix:function(a,n){return Te(a,null!==n&&void 0!==n?n:t,e)},pixToX:function(a,n){return Ie(a,null!==n&&void 0!==n?n:t,e)}}},So=a(262),Eo=a(265),Po=function(){return(Po=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Oo=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Mo=function(e,t,a,n,o,i,l,c,d,s){var u,p,h,v,m,f=n,g=o,y=r.a.useRef({calc:{subcharts:[],pointer:(m=t).calc.pointer,xaxis:m.calc.xaxis},containerSize:m.containerSize,pointer:m.pointer,stateControl:{prevAction:null,lastMainChartData:[],lastUpdate:new Date,shallUpdate:[],customEffectChartState:null}}),x=null!==(p=null===(u=null===e||void 0===e?void 0:e.current)||void 0===u?void 0:u.getBoundingClientRect())&&void 0!==p?p:{},b=x.top,k=x.left;r.a.useEffect((function(){var t=e;if((null===t||void 0===t?void 0:t.current)&&!s&&"static"===c&&!ie(b)&&!ie(k)){var a=y.current,n=t.current,o=n.clientWidth,r=n.clientHeight,i={top:b,left:k,width:"static"===c&&void 0!==f?f:o,height:"static"===c&&void 0!==g?g:r,init:!0};t.current.style.position="relative",t.current.style.width="static"===c&&void 0!==f?f+"px":"100%",t.current.style.height="static"===c&&void 0!==g?g+"px":"100%",t.current.style.top="0px",t.current.style.left="0px",y.current=Po(Po({},a),{stateControl:Po(Po({},a.stateControl),{shallUpdate:Oo(Oo([],a.stateControl.shallUpdate,!0),["containerResize"],!1)}),containerSize:i})}}),[c,e,s,f,g,k,b]),r.a.useEffect((function(){var t=e;if(null===t||void 0===t?void 0:t.current)if(d)t.current.style.pointerEvents="none";else if(t.current.style.pointerEvents="auto",s){var a=y.current,n=function(e){if(t&&t.current){var n=window.innerWidth,o=window.innerHeight;y.current=Po(Po({},a),{stateControl:Po(Po({},a.stateControl),{shallUpdate:Oo(Oo([],a.stateControl.shallUpdate,!0),["containerResize"],!1)}),containerSize:{top:0,left:0,width:n,height:o,init:!0}})}};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),function(){window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}}}),[e,s,d]);var w=r.a.useCallback((function(t,a){var n;if(!("responsive"!==c||ie(t)||ie(a)||s)&&(null===(n=null===e||void 0===e?void 0:e.current)||void 0===n?void 0:n.parentElement)){var o=y.current,r=e.current.parentElement.getBoundingClientRect(),i=r.top,l=r.left;y.current=Po(Po({},o),{stateControl:Po(Po({},o.stateControl),{shallUpdate:Oo(Oo([],o.stateControl.shallUpdate,!0),["containerResize"],!1)}),containerSize:{top:i,left:l,width:t,height:a,init:!0}})}}),[s,c,e]);Object(So.a)({targetRef:null!==(v={current:null===(h=e.current)||void 0===h?void 0:h.parentElement})&&void 0!==v?v:void 0,onResize:w});var C=function(e){return[e[0]-0,e[1]-0]};return Object(Eo.a)({onPinch:function(e){var t=e.active,a=e.origin,n=e.movement,o=e.first;e.offset;y.current.pointer=Po(Po({},y.current.pointer),{pinch:{isPinching:t,origin:C(a),movementInitial:n,first:o}}),y.current.stateControl.shallUpdate=Oo(Oo([],y.current.stateControl.shallUpdate.filter((function(e){return"pointerMove"!==e})),!0),["pinch"],!1)},onDrag:function(e){var t=y.current.stateControl.shallUpdate.includes("drag"),a=y.current.pointer.drag.delta,n=t&&a?a[0]+e.delta[0]:e.delta[0],o=t&&a?a[1]+e.delta[1]:e.delta[1],r=e.xy,i=e.initial,l=e.movement,c=e.first,d=e.last,s=e.active,u=e.ctrlKey,p=t&&y.current.pointer.drag.first||c,h=t&&y.current.pointer.drag.last||d;(!s||p||e.delta[0]||e.delta[1])&&(y.current=Po(Po({},y.current),{pointer:Po(Po({},y.current.pointer),{drag:{isDragging:s,xy:C(r),initial:C(i),movementInitial:l,last:h,first:p,delta:[n,o],ctrlKey:u}}),stateControl:Po(Po({},y.current.stateControl),{shallUpdate:Oo(Oo([],y.current.stateControl.shallUpdate,!0),["drag"],!1),lastUpdate:y.current.stateControl.lastUpdate})}))},onMove:function(e){(!e.active||e.first||e.delta[0]||e.delta[1])&&(y.current=Po(Po({},y.current),{pointer:Po(Po({},y.current.pointer),{move:{isMoving:e.active,xy:C(e.xy)}}),stateControl:Po(Po({},y.current.stateControl),{shallUpdate:Oo(Oo([],y.current.stateControl.shallUpdate,!0),["pointerMove"],!1)})}))},onHover:function(e){y.current=Po(Po({},y.current),{pointer:Po(Po({},y.current.pointer),{isHovering:e.active}),stateControl:Po(Po({},y.current.stateControl),{shallUpdate:Oo(Oo([],y.current.stateControl.shallUpdate,!0),["pointerMove"],!1)})})},onWheel:function(e){var t=y.current.stateControl.shallUpdate.includes("wheel"),a=y.current.pointer.wheel.delta,n=t&&a?a[0]+e.delta[0]:e.delta[0],o=t&&a?a[1]+e.delta[1]:e.delta[1];y.current=Po(Po({},y.current),{pointer:Po(Po({},y.current.pointer),{wheel:{delta:[n,o],isWheeling:e.active}}),stateControl:Po(Po({},y.current.stateControl),{shallUpdate:Oo(Oo([],y.current.stateControl.shallUpdate,!0),["wheel"],!1)})})},onDragEnd:function(e){var t=e.xy,a=(e.initial,e.first),n=e.last,o=e.movement;y.current=Po(Po({},y.current),{pointer:Po(Po({},y.current.pointer),{dragPointerUp:{isDragPointerUp:!0,xy:C(t),initial:C(t),movementInitial:o,last:n,first:a}}),stateControl:Po(Po({},y.current.stateControl),{shallUpdate:Oo(Oo([],y.current.stateControl.shallUpdate,!0),["dragEnd"],!1)})})}},{domTarget:s?document.body:e,transform:function(e){var t=e[0],a=e[1];return[t-(null!==k&&void 0!==k?k:0),a-(null!==b&&void 0!==b?b:0)]},drag:{experimental_preventWindowScrollY:!0,useTouch:!0},enabled:!d&&y.current.containerSize.init,eventOptions:{passive:!1,capture:!1},pinch:{transform:function(e){return[e[0],e[1]]}},wheel:{transform:function(e){return[e[0],e[1]]}}}),y},jo=function(){return(jo=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Do=function(e,t,a,n){var o,r,i,l,c=e.move,d=e.dragPointerUp,s=e.isHovering,u=t.xaxis,p=(null===(l=null===(i=null===(r=null===(o=null===a||void 0===a?void 0:a[0])||void 0===o?void 0:o.yaxis)||void 0===r?void 0:r[0])||void 0===i?void 0:i.graphs)||void 0===l?void 0:l[0])&&L(a[0].yaxis[0].graphs[0])?a[0].yaxis[0].graphs[0]:null,h=null===c||void 0===c?void 0:c.xy;if(!p||!c||!a||!h)return null;var v=Oe(h,a);if(null===v)return nn;var m=function(e,t,a,n){if("chart"!==(null===t||void 0===t?void 0:t.type)||!n)return null;var o=a.find((function(e){return e.id===t.dataId}));if("chart"!==(null===o||void 0===o?void 0:o.type))return null;var r=o.meta,i=o.dateStat,l=e.scaledWidthPerTick,c=e.totalTranslatedX,d=Math.round(Ie(null===n||void 0===n?void 0:n.xy[0],c,l)),s=Te(d,c,l);if(d<0||d>o.data.length-1||!i)return{xUnlimited:d,pixXUnlimSnap:s};var u=Math.abs(Math.round(d)),p=e.optChartPeriod;if(!p||!r.chartPeriod||!i)return{xUnlimited:d,pixXUnlimSnap:s};var h=vo(o.data[u].date,i,r.chartPeriod,jo({},p)),v=Te(u,c,l);return{x:u,xDateString:we(o.data[u].date,h||r.chartPeriod.name),pixXSnap:v,xUnlimited:d,pixXUnlimSnap:s}}(u,p,n,c);if(!m)return null;if(!("x"in m))return function(e,t,a){return{isHovering:s,move:{pixX:h[0],pixXUnlimSnap:t,pixXSnap:0,pixY:h[1],x:null,xUnlimited:e,subchartIdx:a,snapDatasets:[],xDateString:""},click:{clickedSubchartIdx:null}}}(m.xUnlimited,m.pixXUnlimSnap,v);var f=m.xUnlimited,g=m.x,y=m.xDateString,x=m.pixXSnap,b=m.pixXUnlimSnap,k=d&&d.xy?Oe(d.xy,a):null,w=a[v].yaxis.map((function(e,o){return e.graphs.map((function(e,r){var i,l=null===(i=n.find((function(t){return t.id===(null===e||void 0===e?void 0:e.dataId)})))||void 0===i?void 0:i.data,c=l?Pe(h[1],l[g],a,v,o,t.subcharts):null,d=c&&c.length>0?c[0].pixY:null,s=c&&c.length>0?c[0].y:null,u=t.subcharts[v].yaxis[o],p=u.decimals,m=u.translatedY,f=u.heightPerPt;return{yaxisIdx:o,graphIdx:r,data:null===l||void 0===l?void 0:l[g],y:Ee(h[1],a[v].bottom,p,m,f),ySnap:s,pixYSnap:d,dateString:y}}))})).flat().sort((function(e,t){return null===e.ySnap&&null===t.ySnap?0:null===e.ySnap&&null!==t.ySnap||null!==e.ySnap&&null!==t.ySnap&&Math.abs(parseFloat(e.ySnap)-e.y)>Math.abs(parseFloat(t.ySnap)-t.y)?1:null!==e.ySnap&&null===t.ySnap||null!==e.ySnap&&null!==t.ySnap&&Math.abs(parseFloat(e.ySnap)-e.y)<Math.abs(parseFloat(t.ySnap)-t.y)?-1:0}));return{isHovering:s,move:{pixX:h[0],pixXSnap:x,pixXUnlimSnap:b,pixY:h[1],x:g,xUnlimited:f,subchartIdx:v,snapDatasets:w,xDateString:y},click:{clickedSubchartIdx:k}}},Zo=function(){return(Zo=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},zo=function(e,t,a){if(a||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Ao=function(){return(Ao=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Fo=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Xo=function(e){var t=e.ContainerRef,a=e.data,n=e.rtData,o=e.width,i=e.height,l=e.settings,c=r.a.useMemo((function(){return function(e,t){var a=tn&&void 0===(null===e||void 0===e?void 0:e.isDarkMode)||(null===e||void 0===e?void 0:e.isDarkMode)?cn:ln,n=t?Lt(a,["calc","xaxis"],Qa(Qa({},a.calc.xaxis),{initialWidthPerTick:t,scaledWidthPerTick:t})):a;return Qa(Qa({},n),{subCharts:[],style:Qa(Qa(Qa({},e),n.style),{grid:Qa(Qa({},n.style.grid),null===e||void 0===e?void 0:e.grid),yaxis:Qa(Qa({},n.style.yaxis),null===e||void 0===e?void 0:e.yaxis),xaxis:Qa(Qa({},n.style.xaxis),null===e||void 0===e?void 0:e.xaxis),crosshair:Qa(Qa({},n.style.crosshair),null===e||void 0===e?void 0:e.crosshair),draw:Qa(Qa({},n.style.draw),null===e||void 0===e?void 0:e.draw)})})}(l.initialState,l.initWidthPerTick)}),[]),d=l.maxUpdatesPerSec?l.maxUpdatesPerSec:15,s=l.disablePointerEvents,u=("static"!==l.containerMode||i&&o)&&l.containerMode?l.containerMode:"responsive",p=o,h=i,v=r.a.useReducer(no,c),m=v[0],f=v[1],g=Mo(t,c,0,p,h,m.containerSize.left,m.containerSize.top,u,s,m.fullscreen);n&&(g.current.rtData=n),Fn()(t,m.fullscreen,{onClose:function(){return f({task:"setGeneralProp",params:{prop:"toggleFullscreen"}})}});var y=m.draw,x=y.xy,b=Fo(y,["xy"]),k={subcharts:m.subCharts.map((function(e){return{yaxis:e.yaxis}})),draw:Ao(Ao({},b),{nPixXy:x.length})};Xt()(g.current.stateControl.customEffectChartState,k)||(g.current.stateControl.customEffectChartState=k),r.a.useEffect((function(){var e=function(){var e,t,a,n,o,r,i,l,c,d,u,p=g.current,h=p.stateControl;if(s)p.pointer.drag=Ao(Ao({},p.pointer.drag),{delta:[0,0],movementInitial:[0,0]});else{var v=m.subCharts,y=!1;if(p.rtData&&p.rtData.length>0&&v.length===p.calc.subcharts.length&&p.calc.xaxis.xUnlimited>p.calc.xaxis.xLast&&p.calc.subcharts.forEach((function(e,t){var a,n,o=v[t],r=null!==(n=null===(a=p.rtData)||void 0===a?void 0:a.filter((function(e){return o.yaxis.map((function(e){return e.graphs.map((function(e){return e.dataId}))})).flat().includes(e.dataId)})).map((function(e){return Ao(Ao({},e),{data:e.data.slice(1,p.calc.xaxis.xUnlimited-p.calc.xaxis.xLast+1)})})))&&void 0!==n?n:[],i=Math.max.apply(Math,e.yaxis.map((function(e){return e.yMaxExact}))),l=r&&0!==r.length?Math.max.apply(Math,r.map((function(e){return e.data.map((function(e){var t;return A(e)&&null!==(t=e.high)&&void 0!==t?t:e.close}))})).flat()):0,c=Math.min.apply(Math,e.yaxis.map((function(e){return e.yMinExact}))),d=r&&0!==r.length?Math.min.apply(Math,r.map((function(e){return e.data.map((function(e){var t;return A(e)&&null!==(t=e.low)&&void 0!==t?t:e.close}))})).flat()):l;r&&(l>i||d<c)&&(y=!0,console.log("RT-DATA OUT OF Y-RANGE! -> rtMax:",p.rtData,l,", rtMin:",d,", curMax:",i,", curMin:",c))})),h.shallUpdate.length>0||y){h.shallUpdate.includes("dragEnd")||(p.pointer.dragPointerUp.isDragPointerUp=!1);var x=m.style.xaxis.heightXAxis,b=p.containerSize.width-1,k=(null===(n=null===(a=null===(t=null===(e=null===v||void 0===v?void 0:v[0])||void 0===e?void 0:e.yaxis)||void 0===t?void 0:t[0])||void 0===a?void 0:a.graphs)||void 0===n?void 0:n[0])&&L(v[0].yaxis[0].graphs[0])?v[0].yaxis[0].graphs[0]:null,w=m.data.find((function(e){return e.id===(null===k||void 0===k?void 0:k.dataId)})),C=m.draw.isDrawing,T=function(e,t,a,n){var o,r,i,l,c,d,s,u=e.stateControl,p=e.pointer,h=u.shallUpdate,v=u.customEffectChartState,m=u.prevAction,f=e.calc.xaxis,g="drawTool"===(null===(o=null===m||void 0===m?void 0:m.drag)||void 0===o?void 0:o.type)&&!a,y=null===(r=p.wheel)||void 0===r?void 0:r.delta[1],x=(null===(i=p.wheel)||void 0===i?void 0:i.isWheeling)&&h.includes("wheel")&&y?{wheelDeltaY:y,type:"wheelScale"}:null,b=Bn(e,t,a,n),k=h.includes("containerResize")&&t.length>0,w=(null===m||void 0===m?void 0:m.pinch)&&e.pointer.pinch.isPinching?m.pinch:h.includes("pinch")&&e.pointer.pinch.isPinching?{type:"pinchScale",initScaledWidthPerTick:f.scaledWidthPerTick,initTranslatedX:f.totalTranslatedX}:null,C=h.includes("deps"),T=!p.drag.isDragging&&["resizeSubchart","editTool"].includes(null!==(l=null===b||void 0===b?void 0:b.type)&&void 0!==l?l:"")||k,I=!p.drag.isDragging&&["resizeSubchart","editTool"].includes(null!==(c=null===b||void 0===b?void 0:b.type)&&void 0!==c?c:""),S={drag:b,pinch:w,wheel:x,containerResize:k,deps:C,shallUpdateCalcSubcharts:["scale","translate"].includes(null!==(d=null===b||void 0===b?void 0:b.type)&&void 0!==d?d:"")&&(null===b||void 0===b?void 0:b.shallUpdate)||"resizeSubchart"===(null===b||void 0===b?void 0:b.type)||k||C||!!x,shallUpdateXaxis:null!==(s=!!x||C||!!w||(null===b||void 0===b?void 0:b.shallUpdate)&&("translate"===b.type||"scale"===b.type))&&void 0!==s&&s};return{action:S,stateControl:Vn(Vn({},u),{prevAction:Vn(Vn({},S),{drag:I||g?null:b}),customEffectChartState:T?null:v})}}(p,v,C,x),I=T.action,S=T.stateControl;h=Ao(Ao({},S),{prevAction:I?Ao({},I):null}),g.current.stateControl=S;var E=I.containerResize?Kn(p.containerSize.height,v,m.style):v,P="resizeSubchart"===(null===(o=null===I||void 0===I?void 0:I.drag)||void 0===o?void 0:o.type)?function(e,t,a){var n;if("resizeSubchart"!==(null===(n=null===e||void 0===e?void 0:e.drag)||void 0===n?void 0:n.type))return t;var o=e.drag,r=o.subchartIdx,i=Math.min(Math.max(o.bottomInitY+a.movementInitial[1],t[r].top+10,0===r?50:0),t[r+1].bottom-10),l=i-o.bottomInitY;return a.ctrlKey&&0!==r?Hn(Hn(Hn([],t.slice(0,r).map((function(e,t){return Vn(Vn({},e),{bottom:e.bottom+l})})).map((function(e,t,a){return 0===t?e:Vn(Vn({},e),{top:a[t-1].bottom})})),!0),[Vn(Vn({},t[r]),{bottom:i,top:t[r].top+l}),Vn(Vn({},t[r+1]),{top:i})],!1),t.slice(r+2),!0):Hn(Hn(Hn([],t.slice(0,r),!0),[Vn(Vn({},t[r]),{bottom:i}),Vn(Vn({},t[r+1]),{top:i})],!1),t.slice(r+2),!0)}(I,E,p.pointer.drag):E;null!==(r=h.lastMainChartData!==(null===w||void 0===w?void 0:w.data))&&void 0!==r&&r&&"chart"===(null===w||void 0===w?void 0:w.type)&&(p.calc.xaxis=function(e,t,a){return ko(ko({},e),{totalTranslatedX:-(t.length+10-a/e.scaledWidthPerTick)*e.scaledWidthPerTick})}(p.calc.xaxis,w.data,b));var O=I.shallUpdateXaxis?function(e,t,a,n){var o,r,i,l,c,d,s,u,p,h,v=e.calc.xaxis,m=e.pointer,f=e.containerSize.width-1,g=null===(o=m.wheel)||void 0===o?void 0:o.delta[1],y=!!t.wheel,x=!!t.pinch,b=null===(r=m.move)||void 0===r?void 0:r.xy,k=null===(i=null===t||void 0===t?void 0:t.drag)||void 0===i?void 0:i.shallUpdate,w="translate"===(null===(l=null===t||void 0===t?void 0:t.drag)||void 0===l?void 0:l.type)&&k,C="scale"===(null===(c=null===t||void 0===t?void 0:t.drag)||void 0===c?void 0:c.type)&&k,T=n.find((function(e){return e.id===(null===a||void 0===a?void 0:a.dataId)})),I=null===(d=m.drag)||void 0===d?void 0:d.initial;if(!T||!(null===(s=t.drag)||void 0===s?void 0:s.shallUpdate)&&!t.wheel&&!t.deps&&!t.containerResize||!I&&(null===(u=t.drag)||void 0===u?void 0:u.shallUpdate))return v;var S=T.data.length;if(x){var E=t.pinch,P=E.initScaledWidthPerTick,O=E.initTranslatedX;if("pinchScale"!==E.type||ie(P)||ie(O))return v;var M=To(null===(p=null===m||void 0===m?void 0:m.pinch)||void 0===p?void 0:p.movementInitial[0],P,f),j=O,D=I[0],Z=O-(A=(z=(I[0]-j)/P)*M+j)+D;return ko(ko(ko({},v),{scaledWidthPerTick:M,totalTranslatedX:Z}),Io(M,Z,f,a,n))}if(y){M=To(g/2,v.scaledWidthPerTick,f),j=v.totalTranslatedX,D=b?b[0]:0;var z=((b?b[0]:0)-j)/v.scaledWidthPerTick,A=Math.round(z)*M+v.totalTranslatedX;return Z=v.totalTranslatedX-A+D,ko(ko(ko({},v),{scaledWidthPerTick:M,totalTranslatedX:Z}),Io(M,Z,f,a,n))}if(w)return Z=Math.max(Math.min(m.drag.delta[0]+v.totalTranslatedX,f-2*v.scaledWidthPerTick),-(S-3)*v.scaledWidthPerTick),ko(ko(ko({},v),{totalTranslatedX:Z}),Io(v.scaledWidthPerTick,Z,f,a,n));if(C){var F=t.drag;return O=F.initTranslatedX,(P=F.initScaledWidthPerTick)?(M=To(null===(h=null===m||void 0===m?void 0:m.drag)||void 0===h?void 0:h.movementInitial[0],P,f),j=O,D=I[0],Z=O-(A=(z=(I[0]-j)/P)*M+j)+D,ko(ko(ko({},v),{scaledWidthPerTick:M,totalTranslatedX:Z}),Io(M,Z,f,a,n))):v}return t.deps?ko(ko({},v),Io(v.scaledWidthPerTick,v.totalTranslatedX,f,a,n)):v}(p,I,k,m.data):p.calc.xaxis;p.calc.xaxis=O;var M=I.shallUpdateCalcSubcharts||y?function(e,t,a,n){return e&&t&&a?0===e.length||0===a.length?null:e.map((function(o,r){var i=o.bottom,l=o.top,c=Math.max(Math.round((i-l)/75),3);return{yaxis:o.yaxis.map((function(o,d){var s,u,p,h,v,m,f,g=lo(a,e,r,d,t),y=null!==(p=Math.max.apply(Math,ro(ro([],g.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.yMaxExact)&&void 0!==t?t:null})).filter((function(e){return null!==e})),!1),null!==(u=null===(s=null===n||void 0===n?void 0:n.filter)||void 0===s?void 0:s.call(n,(function(e){return o.graphs.map((function(e,t){return e.dataId})).includes(e.dataId)})).map((function(e){return e.data.map((function(e){var t;return A(e)&&null!==(t=e.high)&&void 0!==t?t:e.close}))})).flat())&&void 0!==u?u:[],!1)))&&void 0!==p?p:0,x=null!==(m=Math.min.apply(Math,ro(ro([],g.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.yMinExact)&&void 0!==t?t:null})).filter((function(e){return null!==e})),!1),null!==(v=null===(h=null===n||void 0===n?void 0:n.filter)||void 0===h?void 0:h.call(n,(function(e){return o.graphs.map((function(e,t){return e.dataId})).includes(e.dataId)})).map((function(e){return e.data.map((function(e){var t;return A(e)&&null!==(t=e.low)&&void 0!==t?t:e.close}))})).flat())&&void 0!==v?v:[],!1)))&&void 0!==m?m:0,b=null!==(f=Math.max.apply(Math,o.graphs.map((function(e){var t,n;return null!==(n=null===(t=a.find((function(t){return t.id===e.dataId})))||void 0===t?void 0:t.decimals)&&void 0!==n?n:0}))))&&void 0!==f?f:0,k=io(y,x,b,c),w=Math.ceil(y/k)*k,C=Math.floor(x/k)*k,T=(i-l)/((w||0)-(C||0))/Math.pow(10,b),I=-Se(C||0,i,b,0,T)+i,S=function(e){return Se(e,i,b,I,T)},E=Ee(i,i,b,I,T),P=S(Math.ceil(E/k)*k),O=T*k/Math.pow(10,-b),M=Math.floor((P-10-l-10)/O),j=!M||M<0?[]:Array(M).fill(0).map((function(e,t){var a=P-(t+1)*O,n=Ee(a,i,b,I,T);return{pixY:a,label:(Math.round(n*Math.pow(10,b))/Math.pow(10,b)).toString()}})),D=g&&g.map((function(e,n){if(!(null===e||void 0===e?void 0:e.curData))return e;var r=e.curData.map((function(e,r){var i,l,c=null===(l=null===(i=a.find((function(e){var t;return e.id===(null===(t=o.graphs)||void 0===t?void 0:t[n].dataId)&&"indicator"===e.type})))||void 0===i?void 0:i.indicator)||void 0===l?void 0:l.graphTypes,d=Y(e)?{pixPrices:e.prices.map((function(e,t){var a,n;return e&&["line","bars"].includes(null!==(n=null===(a=null===c||void 0===c?void 0:c[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")?S(e):null}))}:A(e)?{pixOpen:S(e.open),pixHigh:S(e.high),pixLow:S(e.low),pixClose:S(e.close)}:F(e)?{pixClose:S(e.close)}:null;return{pixX:t.scaledWidthPerTick*r,pixY:d}}));return oo(oo({},e),{curTicks:r})}));return{pixY0:S(0),yMaxExact:y,yMinExact:x,yMax:w,yMin:C,heightPerPt:T,decimals:b,optIntervalY:k,translatedY:I,graphs:D,drawTicks:j}}))}})):null}(P,p.calc.xaxis,m.data,y?p.rtData:void 0):null;M&&(p.calc.subcharts=M);var j=h.shallUpdate.includes("pointerMove")?Do(p.pointer,p.calc,v,m.data):null;j&&(p.calc.pointer=j);var D="editTool"===(null===(i=null===I||void 0===I?void 0:I.drag)||void 0===i?void 0:i.type)&&(null===(l=null===I||void 0===I?void 0:I.drag)||void 0===l?void 0:l.shallUpdate)?function(e,t,a){var n,o,r,i=e.pointer,l=e.calc,c=l.pointer;if("editTool"!==(null===(n=null===a||void 0===a?void 0:a.drag)||void 0===n?void 0:n.type))return t;var d=null===a||void 0===a?void 0:a.drag,s=d.subchartIdx,u=d.yaxisIdx,p=t[s],h=l.subcharts[s].yaxis[u],v=c.move.snapDatasets.length>0&&!!c.move.snapDatasets[0].ySnap,m=null!==(o=c.move.x)&&void 0!==o?o:c.move.xUnlimited,f=v?parseFloat(null!==(r=c.move.snapDatasets[0].ySnap)&&void 0!==r?r:""):Ee(i.drag.xy[1],p.bottom,h.decimals,h.translatedY,h.heightPerPt),g=d.toolIdx,y=d.toolPtIdx;return Lt(t,[s,"yaxis",u,"tools",g,"xy",y],[m,f])}(p,P,I):P,Z="drawTool"===(null===(c=null===I||void 0===I?void 0:I.drag)||void 0===c?void 0:c.type)?function(e,t,a,n){var o,r,i;if(!e.pointer.dragPointerUp.isDragPointerUp)return{subcharts:t,draw:a};var l=e.calc,c=l.pointer,d=l.xaxis,s=e.pointer,u=a.type,p=null===(o=va.find((function(e){return e.type===u})))||void 0===o?void 0:o.nPoints,h=Oe(s.drag.initial,t);if(!u||!p||ie(h))return{draw:an,subcharts:t};var v=null===(r=l.subcharts)||void 0===r?void 0:r[h],m=null===(i=null===v||void 0===v?void 0:v.yaxis)||void 0===i?void 0:i[0];if(!v||!m)return{draw:an,subcharts:t};var f=c.move.pixXSnap?c.move.pixXSnap:s.drag.xy[0],g=c.move.snapDatasets.length>0&&c.move.snapDatasets[0].pixYSnap?c.move.snapDatasets[0].pixYSnap:s.drag.xy[1],y=Ie(f,d.totalTranslatedX,d.scaledWidthPerTick),x=m.decimals,b=m.translatedY,k=m.heightPerPt,w=Ee(g,t[h].bottom,x,b,k);return a.xy.length<p-1?{draw:po(a.type,a,[y,w]),subcharts:t}:{draw:an,subcharts:ho(t,h,po(a.type,a,[y,w]),n)}}(p,D,m.draw,m.style):{subcharts:D,draw:m.draw},z=Z.subcharts,X=Z.draw,U=z,R=(p.stateControl,Fo(p,["stateControl"])),W=M?Ao({subcharts:M},function(e,t){return{yToPix:function(a,n,o,r){var i,l;if(!(null===(l=null===(i=null===e||void 0===e?void 0:e[n])||void 0===i?void 0:i.yaxis)||void 0===l?void 0:l[o]))return 0;var c=t[n].yaxis[o],d=c.heightPerPt,s=c.decimals,u=c.translatedY,p=void 0!==r?r:u;return e[n].bottom-a*Math.pow(10,s)*d+p},pixToY:function(a,n,o,r){var i,l;if(!(null===(l=null===(i=null===e||void 0===e?void 0:e[n])||void 0===i?void 0:i.yaxis)||void 0===l?void 0:l[o]))return 0;var c=t[n].yaxis[o],d=c.heightPerPt,s=c.decimals,u=c.translatedY,p=void 0!==r?r:u;return(e[n].bottom+p-a)/d*Math.pow(10,-s)}}}(U,M)):null,G=j?{pointer:j}:null;f({task:"updateInteractionState",params:{newState:Ao(Ao({},R),{calc:Ao(Ao({xaxis:O},G),W),subCharts:U,draw:X})}});var N=null===(d=m.data.find((function(e){var t;return e.id===(null===(t=m.subCharts)||void 0===t?void 0:t[0].yaxis[0].graphs[0].dataId)})))||void 0===d?void 0:d.data;g.current=Ao(Ao({},g.current),{stateControl:Ao(Ao({},g.current.stateControl),{lastUpdate:new Date,shallUpdate:[],lastMainChartData:null!==(u=N)&&void 0!==u?u:null})})}}};g.current.stateControl.shallUpdate.push("deps"),e(),console.log("updated Timer");var t=window.setInterval(e,Math.round(1e3/d));return function(){window.clearInterval(t)}}),[g.current.stateControl.customEffectChartState,d,s,m.style,m.data]);var w=function(e,t,a,n){var o,r,i,l,c,d,s,u,p,h,v,m,f,g;if(!e||!n.yToPix)return[];var y=null===(s=null===(d=null===(c=null===(l=null===(i=null===(r=null===(o=n.subcharts)||void 0===o?void 0:o[0])||void 0===r?void 0:r.yaxis)||void 0===i?void 0:i[0])||void 0===l?void 0:l.graphs)||void 0===c?void 0:c[0])||void 0===d?void 0:d.curTicks)||void 0===s?void 0:s[(null===(f=null===(m=null===(v=null===(h=null===(p=null===(u=n.subcharts)||void 0===u?void 0:u[0])||void 0===p?void 0:p.yaxis)||void 0===h?void 0:h[0])||void 0===v?void 0:v.graphs)||void 0===m?void 0:m[0])||void 0===f?void 0:f.curTicks.length)-1],x=null!==(g=n.yToPix&&e&&y&&e.reduce((function(e,o,r){var i;return zo(zo([],e,!0),[{data:(null===o||void 0===o?void 0:o.data)?null===o||void 0===o?void 0:o.data.map((function(e,t){return Zo(Zo({},e),{x:n.xaxis.xLast+t})})):[],dataId:null===(i=null===t||void 0===t?void 0:t[null===o||void 0===o?void 0:o.dataIdx])||void 0===i?void 0:i.id,ticks:o.data.map((function(e,r){var i;return{pixX:y.pixX+(r+0)*n.xaxis.scaledWidthPerTick,pixY:co(e,null===(i=null===t||void 0===t?void 0:t[null===o||void 0===o?void 0:o.dataIdx])||void 0===i?void 0:i.id,t,a,n.yToPix)}}))}],!1)}),[]))&&void 0!==g?g:[];return x.map((function(e){return aa(t,e.dataId)})).flat().reduce((function(e,o,r){var i,l,c,d,s,u,p,h=t.find((function(e){return e.id===o&&"indicator"===e.type}));if(!h||"indicator"!==(null===h||void 0===h?void 0:h.type))return e;var v=h.indicator.indicatorFn,m=h.indSrcId,f=h.indicator.params,g=zo(zo([],null!==(l=null===(i=t.find((function(e){return e.id===m})))||void 0===i?void 0:i.data)&&void 0!==l?l:[],!0),null!==(u=null===(s=null===(d=null===(c=e.find)||void 0===c?void 0:c.call(e,(function(e){return(null===e||void 0===e?void 0:e.dataId)===m})))||void 0===d?void 0:d.data)||void 0===s?void 0:s.slice(1))&&void 0!==u?u:[],!0),x=zo([],null!==(p=h.data)&&void 0!==p?p:[],!0);if(!v||!(null===g||void 0===g?void 0:g.length)||!y)return e;var b=v(Zo({chartData:g,prevData:x},f.reduce((function(e,t){var a;return Zo(Zo({},e),((a={})[t.name]=t.val,a))}),{}))).slice(h.data.length-1),k={data:b.map((function(e,t){return Zo(Zo({},e),{x:x.length-1+t})})),dataId:o,ticks:b.map((function(e,r){return{pixX:y.pixX+r*n.xaxis.scaledWidthPerTick,pixY:co(e,o,t,a,n.yToPix)}}))};return zo(zo([],e,!0),[k],!1)}),x)}(n,m.data,m.subCharts,m.calc);return r.a.useEffect((function(){var e,t,n,o;if(m.containerSize.init){var r=null===a||void 0===a?void 0:a[0];if("chart"===(null===r||void 0===r?void 0:r.type)&&(null===(e=null===r||void 0===r?void 0:r.data)||void 0===e?void 0:e.length)){var i=null===(t=m.data)||void 0===t?void 0:t[0];if(0===m.data.length)return console.log("Chart is initialized."),void f({task:"addData",params:{datas:a}});if(i.id===r.id&&"chart"===i.type){if(r.data.length===i.data.length)return;r.data.length>i.data.length?(console.log("Chart is updated"),f({task:"modifyChartData",params:{dataId:i.id,newDatasets:null===(o=null===(n=null===w||void 0===w?void 0:w[0])||void 0===n?void 0:n.data)||void 0===o?void 0:o.slice(1,-1)}})):r.data.length<i.data.length&&console.log("HERE THERE SHOULD BE LOADED A NEW GRAPH")}}}}),[a,m.containerSize.init,m.data,m.subCharts]),[m,f,w]},Yo={name:"BuyStop",category:"Average",params:[{name:"atrPeriod",val:5},{name:"stopInAtr",val:-.5},{name:"soarStopInAtr",val:0}],default:{params:[{name:"atrPeriod",val:5},{name:"stopInAtr",val:-.5},{name:"soarStopInAtr",val:0}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){var t,a,o,r,i,l,d,s=e.chartData,u=e.prevData,p=e.atrPeriod,h=void 0===p?5:p,v=e.stopInAtr,m=void 0===v?-.42:v,f=e.soarStopInAtr,g=void 0===f?.33:f,y=u?{stop:u.map((function(e,t){var a;return Object(c.a)(Object(c.a)({},e),{},{prices:[null===e||void 0===e||null===(a=e.prices)||void 0===a?void 0:a[0]]})})),atr:u.map((function(e,t){var a;return Object(c.a)(Object(c.a)({},e),{},{prices:[null===e||void 0===e||null===(a=e.prices)||void 0===a?void 0:a[1]]})})),atrLong:u.map((function(e,t){var a;return Object(c.a)(Object(c.a)({},e),{},{prices:[null===e||void 0===e||null===(a=e.prices)||void 0===a?void 0:a[2]]})})),atrOpt:u.map((function(e,t){var a;return Object(c.a)(Object(c.a)({},e),{},{prices:[null===e||void 0===e||null===(a=e.prices)||void 0===a?void 0:a[3]]})}))}:null,x=n.isChartDataSeries(s)&&Ya.indicatorFn?null===(t=Ya.indicatorFn)||void 0===t?void 0:t.call(Ya,{chartData:s,prevData:null!==(a=null===y||void 0===y?void 0:y.atr)&&void 0!==a?a:[],period:h}):null,b=n.isChartDataSeries(s)&&Ya.indicatorFn?null===(o=Ya.indicatorFn)||void 0===o?void 0:o.call(Ya,{chartData:s,prevData:null!==(r=null===y||void 0===y?void 0:y.atrLong)&&void 0!==r?r:[],period:100}):null;if(!x||!n.isChartDataSeries(s)||!b)return[];var w=[].concat(Object(k.a)(null!==(i=null===y||void 0===y?void 0:y.atrOpt)&&void 0!==i?i:[]),Object(k.a)(x.slice(null!==(l=null===y||void 0===y?void 0:y.atrOpt.length)&&void 0!==l?l:0).map((function(e,t){var a,n,o,r,i;return Object(c.a)(Object(c.a)({},e),{},{prices:[Math.max(null!==(a=null===(n=e.prices)||void 0===n?void 0:n[0])&&void 0!==a?a:0,null!==(o=null===b||void 0===b||null===(r=b[(null!==(i=null===y||void 0===y?void 0:y.atrOpt.length)&&void 0!==i?i:0)+t].prices)||void 0===r?void 0:r[0])&&void 0!==o?o:0)]})})))),C=Object(k.a)(u);return s.slice(null!==(d=null===u||void 0===u?void 0:u.length)&&void 0!==d?d:0).forEach((function(e,t){var a,o,r,i,l,c,d,p,v,f,y,k,T,I,S=t+(null!==(a=null===u||void 0===u?void 0:u.length)&&void 0!==a?a:0),E=null===x||void 0===x||null===(o=x[S])||void 0===o||null===(r=o.prices)||void 0===r?void 0:r[0],P=null===b||void 0===b||null===(i=b[S])||void 0===i||null===(l=i.prices)||void 0===l?void 0:l[0],O=null===w||void 0===w||null===(c=w[S])||void 0===c||null===(d=c.prices)||void 0===d?void 0:d[0],M={prices:[null,E,P,O],date:e.date};if(S<h-1+1)C.push(M);else{var j=null===s||void 0===s?void 0:s[S],D=null===s||void 0===s?void 0:s[S-1],Z=null===x||void 0===x||null===(p=x[S-1])||void 0===p||null===(v=p.prices)||void 0===v?void 0:v[0],z=null===w||void 0===w||null===(f=w[S-1])||void 0===f||null===(y=f.prices)||void 0===y?void 0:y[0];if(j&&D&&n.isCandleChartDataset(j)&&n.isCandleChartDataset(D)&&!ie(Z)){var A=D.low,F=null!==(k=null===C||void 0===C||null===(T=C[S-1])||void 0===T||null===(I=T.prices)||void 0===I?void 0:I[0])&&void 0!==k?k:A,X=A+m*Z,Y=A+m*(null!==z&&void 0!==z?z:Z),U=A+g*Z,R=D.high-D.low,W=Math.abs(D.close-D.open),L=(null===D||void 0===D?void 0:D.low)<=F?X:(null===D||void 0===D?void 0:D.close)>=(null===s||void 0===s?void 0:s[S-2].close)?R<1.66*Z||W<.5*R?Math.max(Y,F):Math.max(U,F):F;C.push({prices:[L,E,P,O],date:e.date})}else C.push(M)}})),C}},Uo={name:"SellStop",category:"Average",params:[{name:"atrPeriod",val:5},{name:"stopInAtr",val:.5},{name:"soarStopInAtr",val:-0}],default:{params:[{name:"atrPeriod",val:5},{name:"stopInAtr",val:.5},{name:"soarStopInAtr",val:-0}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){var t,a,o,r,i,l,d,s=e.chartData,u=e.prevData,p=e.atrPeriod,h=void 0===p?5:p,v=e.stopInAtr,m=void 0===v?.42:v,f=e.soarStopInAtr,g=void 0===f?-.33:f,y=u?{stop:u.map((function(e,t){var a;return Object(c.a)(Object(c.a)({},e),{},{prices:[null===e||void 0===e||null===(a=e.prices)||void 0===a?void 0:a[0]]})})),atr:u.map((function(e,t){var a;return Object(c.a)(Object(c.a)({},e),{},{prices:[null===e||void 0===e||null===(a=e.prices)||void 0===a?void 0:a[1]]})})),atrLong:u.map((function(e,t){var a;return Object(c.a)(Object(c.a)({},e),{},{prices:[null===e||void 0===e||null===(a=e.prices)||void 0===a?void 0:a[2]]})})),atrOpt:u.map((function(e,t){var a;return Object(c.a)(Object(c.a)({},e),{},{prices:[null===e||void 0===e||null===(a=e.prices)||void 0===a?void 0:a[3]]})}))}:null,x=n.isChartDataSeries(s)&&Ya.indicatorFn?null===(t=Ya.indicatorFn)||void 0===t?void 0:t.call(Ya,{chartData:s,prevData:null!==(a=null===y||void 0===y?void 0:y.atr)&&void 0!==a?a:[],period:h}):null,b=n.isChartDataSeries(s)&&Ya.indicatorFn?null===(o=Ya.indicatorFn)||void 0===o?void 0:o.call(Ya,{chartData:s,prevData:null!==(r=null===y||void 0===y?void 0:y.atrLong)&&void 0!==r?r:[],period:100}):null;if(!x||!n.isChartDataSeries(s)||!b)return[];var w=[].concat(Object(k.a)(null!==(i=null===y||void 0===y?void 0:y.atrOpt)&&void 0!==i?i:[]),Object(k.a)(x.slice(null!==(l=null===y||void 0===y?void 0:y.atrOpt.length)&&void 0!==l?l:0).map((function(e,t){var a,n,o,r,i;return Object(c.a)(Object(c.a)({},e),{},{prices:[Math.max(null!==(a=null===(n=e.prices)||void 0===n?void 0:n[0])&&void 0!==a?a:0,null!==(o=null===b||void 0===b||null===(r=b[(null!==(i=null===y||void 0===y?void 0:y.atrOpt.length)&&void 0!==i?i:0)+t].prices)||void 0===r?void 0:r[0])&&void 0!==o?o:0)]})})))),C=Object(k.a)(u);return s.slice(null!==(d=null===u||void 0===u?void 0:u.length)&&void 0!==d?d:0).forEach((function(e,t){var a,o,r,i,l,c,d,p,v,f,y,k,T,I,S=t+(null!==(a=null===u||void 0===u?void 0:u.length)&&void 0!==a?a:0),E=null===x||void 0===x||null===(o=x[S])||void 0===o||null===(r=o.prices)||void 0===r?void 0:r[0],P=null===b||void 0===b||null===(i=b[S])||void 0===i||null===(l=i.prices)||void 0===l?void 0:l[0],O=null===w||void 0===w||null===(c=w[S])||void 0===c||null===(d=c.prices)||void 0===d?void 0:d[0],M={prices:[null,E,P,O],date:e.date};if(S<h-1+1)C.push(M);else{var j=null===s||void 0===s?void 0:s[S],D=null===s||void 0===s?void 0:s[S-1],Z=null===x||void 0===x||null===(p=x[S-1])||void 0===p||null===(v=p.prices)||void 0===v?void 0:v[0],z=null===w||void 0===w||null===(f=w[S-1])||void 0===f||null===(y=f.prices)||void 0===y?void 0:y[0];if(j&&D&&n.isCandleChartDataset(j)&&n.isCandleChartDataset(D)&&!ie(Z)){var A=null!==(k=null===C||void 0===C||null===(T=C[S-1])||void 0===T||null===(I=T.prices)||void 0===I?void 0:I[0])&&void 0!==k?k:D.high,F=D.high+m*Z,X=D.high+m*(null!==z&&void 0!==z?z:Z),Y=D.high+g*Z,U=D.high-D.low,R=Math.abs(D.close-D.open),W=(null===D||void 0===D?void 0:D.high)>=A?F:(null===D||void 0===D?void 0:D.close)<=(null===s||void 0===s?void 0:s[S-2].close)?U<1.66*Z||R<.5*U?Math.min(X,A):Math.min(Y,A):A;C.push({prices:[W,E,P,O],date:e.date})}else C.push(M)}})),C}},Ro=[{date:"2021-01-05T00:00:00.000Z",open:268.290009,high:272.399994,low:268.209991,close:270.970001,volume:9871600},{date:"2021-01-06T00:00:00.000Z",open:262,high:267.75,low:260.01001,close:263.309998,volume:24354100},{date:"2021-01-07T00:00:00.000Z",open:265.899994,high:271.609985,low:264.779999,close:268.73999,volume:15789800},{date:"2021-01-08T00:00:00.000Z",open:268.309998,high:268.950012,low:263.179993,close:267.570007,volume:18528300},{date:"2021-01-11T00:00:00.000Z",open:260.480011,high:263.470001,low:255.899994,close:256.839996,volume:30412300},{date:"2021-01-12T00:00:00.000Z",open:256.630005,high:259.720001,low:250.300003,close:251.089996,volume:26383500},{date:"2021-01-13T00:00:00.000Z",open:251.550003,high:253.949997,low:249.199997,close:251.639999,volume:19528900},{date:"2021-01-14T00:00:00.000Z",open:253.399994,high:255.029999,low:244.610001,close:245.639999,volume:29739400},{date:"2021-01-15T00:00:00.000Z",open:247.899994,high:253.860001,low:247.160004,close:251.360001,volume:24942900},{date:"2021-01-19T00:00:00.000Z",open:256.899994,high:262.200012,low:252.720001,close:261.100006,volume:28028500},{date:"2021-01-20T00:00:00.000Z",open:268.929993,high:270.320007,low:263.600006,close:267.480011,volume:25199900},{date:"2021-01-21T00:00:00.000Z",open:269.26001,high:273.600006,low:267.48999,close:272.869995,volume:20838700},{date:"2021-01-22T00:00:00.000Z",open:272.01001,high:278.470001,low:272,close:274.5,volume:21954e3},{date:"2021-01-25T00:00:00.000Z",open:278.140015,high:280.100006,low:271.51001,close:278.01001,volume:19087e3},{date:"2021-01-26T00:00:00.000Z",open:278.140015,high:285.390015,low:277.809998,close:282.049988,volume:19373600},{date:"2021-01-27T00:00:00.000Z",open:282.529999,high:283.450012,low:268.119995,close:272.140015,volume:35346200},{date:"2021-01-28T00:00:00.000Z",open:277.179993,high:286.790009,low:264.700012,close:265,volume:37758800},{date:"2021-01-29T00:00:00.000Z",open:265.299988,high:266.559998,low:254.850006,close:258.329987,volume:30389500},{date:"2021-02-01T00:00:00.000Z",open:259.519989,high:264.170013,low:254.910004,close:262.01001,volume:22914300},{date:"2021-02-02T00:00:00.000Z",open:264,high:268.850006,low:263.269989,close:267.079987,volume:17320800},{date:"2021-02-03T00:00:00.000Z",open:265.619995,high:269.200012,low:263.839996,close:266.649994,volume:14223400},{date:"2021-02-04T00:00:00.000Z",open:267.01001,high:268.160004,low:264,close:266.48999,volume:1606e4},{date:"2021-02-05T00:00:00.000Z",open:266.799988,high:269.170013,low:265.670013,close:268.100006,volume:12454400},{date:"2021-02-08T00:00:00.000Z",open:268.75,high:269.859985,low:265,close:266.579987,volume:13755200},{date:"2021-02-09T00:00:00.000Z",open:266.440002,high:273.390015,low:265.75,close:269.450012,volume:14613400},{date:"2021-02-10T00:00:00.000Z",open:272.450012,high:273.799988,low:267.720001,close:271.869995,volume:14687200},{date:"2021-02-11T00:00:00.000Z",open:271.890015,high:273.579987,low:268.48999,close:270.390015,volume:12828600},{date:"2021-02-12T00:00:00.000Z",open:270.519989,high:271.179993,low:268.339996,close:270.5,volume:9097600},{date:"2021-02-16T00:00:00.000Z",open:270.799988,high:276.600006,low:270.049988,close:273.970001,volume:15417200},{date:"2021-02-17T00:00:00.000Z",open:271.23999,high:273.970001,low:269.579987,close:273.570007,volume:12763200},{date:"2021-02-18T00:00:00.000Z",open:269.570007,high:271.950012,low:266.029999,close:269.390015,volume:15249100},{date:"2021-02-19T00:00:00.000Z",open:269.859985,high:270.269989,low:260.149994,close:261.559998,volume:25622600},{date:"2021-02-22T00:00:00.000Z",open:257.950012,high:263.070007,low:257.529999,close:260.329987,volume:17434900},{date:"2021-02-23T00:00:00.000Z",open:259.5,high:267.459991,low:254.960007,close:265.859985,volume:21924600},{date:"2021-02-24T00:00:00.000Z",open:262.329987,high:266.380005,low:258.390015,close:264.309998,volume:15736100},{date:"2021-02-25T00:00:00.000Z",open:262.299988,high:266.940002,low:254.039993,close:254.690002,volume:19053100},{date:"2021-02-26T00:00:00.000Z",open:256.470001,high:265.549988,low:256.470001,close:257.619995,volume:26619500},{date:"2021-03-01T00:00:00.000Z",open:260.820007,high:266.649994,low:257.899994,close:264.910004,volume:22157300},{date:"2021-03-02T00:00:00.000Z",open:265.779999,high:266.709991,low:258.649994,close:259,volume:15191700},{date:"2021-03-03T00:00:00.000Z",open:260.290009,high:260.98999,low:255.100006,close:255.410004,volume:15513500},{date:"2021-03-04T00:00:00.000Z",open:256.470001,high:266.48999,low:253.5,close:257.640015,volume:31626500},{date:"2021-03-05T00:00:00.000Z",open:260.670013,high:265.450012,low:255.610001,close:264.279999,volume:26820100},{date:"2021-03-08T00:00:00.000Z",open:265.549988,high:265.579987,low:255.050003,close:255.309998,volume:18391800},{date:"2021-03-09T00:00:00.000Z",open:261.179993,high:268.529999,low:259.809998,close:265.73999,volume:22039700},{date:"2021-03-10T00:00:00.000Z",open:268.640015,high:268.970001,low:262.869995,close:264.899994,volume:14210300},{date:"2021-03-11T00:00:00.000Z",open:268.109985,high:277.899994,low:267.820007,close:273.880005,volume:21834e3},{date:"2021-03-12T00:00:00.000Z",open:269.140015,high:269.73999,low:264.019989,close:268.399994,volume:20600200},{date:"2021-03-15T00:00:00.000Z",open:269.079987,high:275.959991,low:268.5,close:273.75,volume:16844800},{date:"2021-03-16T00:00:00.000Z",open:276.079987,high:282.140015,low:274.799988,close:279.279999,volume:22437700},{date:"2021-03-17T00:00:00.000Z",open:275.709991,high:286.230011,low:275.410004,close:284.01001,volume:21315e3},{date:"2021-03-18T00:00:00.000Z",open:279.869995,high:285.190002,low:278.279999,close:278.619995,volume:18728300},{date:"2021-03-19T00:00:00.000Z",open:281.220001,high:292.799988,low:281.200012,close:290.109985,volume:38930500},{date:"2021-03-22T00:00:00.000Z",open:290.450012,high:299.709991,low:286.75,close:293.540009,volume:28273100},{date:"2021-03-23T00:00:00.000Z",open:293.149994,high:298,low:289.809998,close:290.630005,volume:23000900},{date:"2021-03-24T00:00:00.000Z",open:291,high:291.720001,low:281.160004,close:282.140015,volume:18675e3},{date:"2021-03-25T00:00:00.000Z",open:280.980011,high:288.059998,low:277.75,close:278.73999,volume:24505600},{date:"2021-03-26T00:00:00.000Z",open:278.299988,high:284.5,low:277.769989,close:283.019989,volume:17629200},{date:"2021-03-29T00:00:00.000Z",open:285.769989,high:293.179993,low:284.700012,close:290.820007,volume:21718800},{date:"2021-03-30T00:00:00.000Z",open:289.829987,high:292.470001,low:286.700012,close:288,volume:17474500},{date:"2021-03-31T00:00:00.000Z",open:289.98999,high:296.5,low:288.609985,close:294.529999,volume:19498200},{date:"2021-04-01T00:00:00.000Z",open:298.399994,high:302.399994,low:296.600006,close:298.660004,volume:17616e3},{date:"2021-04-05T00:00:00.000Z",open:300.890015,high:310.769989,low:300.679993,close:308.910004,volume:28237e3},{date:"2021-04-06T00:00:00.000Z",open:308.839996,high:311.350006,low:305.25,close:306.26001,volume:17335200},{date:"2021-04-07T00:00:00.000Z",open:306.339996,high:314.25,low:305.5,close:313.089996,volume:22855200},{date:"2021-04-08T00:00:00.000Z",open:314.850006,high:315.880005,low:310.049988,close:313.019989,volume:20894100},{date:"2021-04-09T00:00:00.000Z",open:311.399994,high:314.73999,low:310.329987,close:312.459991,volume:15988600},{date:"2021-04-12T00:00:00.000Z",open:311.049988,high:312.149994,low:307.929993,close:311.540009,volume:10881900},{date:"2021-04-13T00:00:00.000Z",open:312.209991,high:314.429993,low:309.320007,close:309.76001,volume:14036900},{date:"2021-04-14T00:00:00.000Z",open:307.299988,high:308.029999,low:301.950012,close:302.820007,volume:17421400},{date:"2021-04-15T00:00:00.000Z",open:306.339996,high:310.140015,low:304.100006,close:307.820007,volume:14558300},{date:"2021-04-16T00:00:00.000Z",open:308.170013,high:308.950012,low:304.609985,close:306.179993,volume:13059200},{date:"2021-04-19T00:00:00.000Z",open:305.01001,high:307.700012,low:300.559998,close:302.23999,volume:14553500},{date:"2021-04-20T00:00:00.000Z",open:301.98999,high:305.100006,low:297.209991,close:302.649994,volume:16796400},{date:"2021-04-21T00:00:00.000Z",open:301.950012,high:301.980011,low:297.390015,close:301.470001,volume:14863500},{date:"2021-04-22T00:00:00.000Z",open:301.329987,high:302.920013,low:296.040009,close:296.519989,volume:16375400},{date:"2021-04-23T00:00:00.000Z",open:298.76001,high:302.589996,low:297.149994,close:301.130005,volume:17536800},{date:"2021-04-26T00:00:00.000Z",open:303.339996,high:305.799988,low:301.559998,close:303.040009,volume:16172600},{date:"2021-04-27T00:00:00.000Z",open:304.279999,high:305.339996,low:301.109985,close:303.570007,volume:15309300},{date:"2021-04-28T00:00:00.000Z",open:307.359985,high:310.920013,low:305.369995,close:307.100006,volume:33907200},{date:"2021-04-29T00:00:00.000Z",open:330.119995,high:331.809998,low:321.609985,close:329.51001,volume:56526800},{date:"2021-04-30T00:00:00.000Z",open:326.140015,high:329.820007,low:324.5,close:325.079987,volume:26332400},{date:"2021-05-03T00:00:00.000Z",open:326.170013,high:328.549988,low:321.839996,close:322.579987,volume:18719500},{date:"2021-05-04T00:00:00.000Z",open:320.019989,high:322.190002,low:313.119995,close:318.359985,volume:24032600},{date:"2021-05-05T00:00:00.000Z",open:318.190002,high:321.059998,low:314.48999,close:315.019989,volume:15577600},{date:"2021-05-06T00:00:00.000Z",open:314.519989,high:320.23999,low:313.269989,close:320.019989,volume:19012200},{date:"2021-05-07T00:00:00.000Z",open:322.380005,high:322.940002,low:318.75,close:319.079987,volume:15916700},{date:"2021-05-10T00:00:00.000Z",open:314.350006,high:314.579987,low:304.829987,close:305.970001,volume:24239200},{date:"2021-05-11T00:00:00.000Z",open:300.75,high:306.839996,low:299.690002,close:306.529999,volume:18920100},{date:"2021-05-12T00:00:00.000Z",open:301.130005,high:304.959991,low:298.190002,close:302.549988,volume:24645500},{date:"2021-05-13T00:00:00.000Z",open:306.079987,high:308.859985,low:302.769989,close:305.26001,volume:18079200},{date:"2021-05-14T00:00:00.000Z",open:309.540009,high:316.850006,low:309.079987,close:315.940002,volume:19245700},{date:"2021-05-17T00:00:00.000Z",open:313.549988,high:315.679993,low:311.579987,close:315.459991,volume:15401300},{date:"2021-05-18T00:00:00.000Z",open:315.589996,high:316.5,low:309.809998,close:309.959991,volume:14522400},{date:"2021-05-19T00:00:00.000Z",open:304.190002,high:314.660004,low:303.570007,close:313.589996,volume:19106200},{date:"2021-05-20T00:00:00.000Z",open:313.579987,high:319.25,low:313.160004,close:318.609985,volume:17320200},{date:"2021-05-21T00:00:00.000Z",open:319.290009,high:319.929993,low:315.809998,close:316.230011,volume:13600900},{date:"2021-05-24T00:00:00.000Z",open:318.209991,high:325.950012,low:318.029999,close:324.630005,volume:16445400},{date:"2021-05-25T00:00:00.000Z",open:327.079987,high:329.179993,low:324.799988,close:327.790009,volume:16437e3},{date:"2021-05-26T00:00:00.000Z",open:328.350006,high:329.829987,low:325.820007,close:327.660004,volume:9686900},{date:"2021-05-27T00:00:00.000Z",open:328,high:333.779999,low:326.76001,close:332.75,volume:20477700},{date:"2021-05-28T00:00:00.000Z",open:331,high:332.869995,low:328.329987,close:328.730011,volume:12037400},{date:"2021-06-01T00:00:00.000Z",open:330.149994,high:331.420013,low:326.640015,close:329.130005,volume:11765900},{date:"2021-06-02T00:00:00.000Z",open:330.380005,high:331.869995,low:327.119995,close:329.149994,volume:11654300},{date:"2021-06-03T00:00:00.000Z",open:325.779999,high:327.380005,low:323.480011,close:326.040009,volume:12610800},{date:"2021-06-04T00:00:00.000Z",open:325.899994,high:332.459991,low:325.179993,close:330.350006,volume:13289400},{date:"2021-06-07T00:00:00.000Z",open:329.480011,high:337.690002,low:328.929993,close:336.579987,volume:20136700},{date:"2021-06-08T00:00:00.000Z",open:336.700012,high:338.299988,low:332.23999,close:333.679993,volume:14580500},{date:"2021-06-09T00:00:00.000Z",open:335.73999,high:336.799988,low:330,close:330.25,volume:13727900},{date:"2021-06-10T00:00:00.000Z",open:330.790009,high:333.940002,low:328.549988,close:332.459991,volume:13240200},{date:"2021-06-11T00:00:00.000Z",open:332.579987,high:332.829987,low:328.929993,close:331.26001,volume:13587900},{date:"2021-06-14T00:00:00.000Z",open:331.899994,high:336.820007,low:329.809998,close:336.769989,volume:12250800},{date:"2021-06-15T00:00:00.000Z",open:336.98999,high:339.920013,low:335.029999,close:336.75,volume:15795200},{date:"2021-06-16T00:00:00.000Z",open:336.700012,high:337.549988,low:328.720001,close:331.079987,volume:17232200},{date:"2021-06-17T00:00:00.000Z",open:330.48999,high:337.980011,low:330.149994,close:336.51001,volume:17794100},{date:"2021-06-18T00:00:00.000Z",open:334.529999,high:336.149994,low:329,close:329.660004,volume:23039500},{date:"2021-06-21T00:00:00.000Z",open:331.089996,high:332.920013,low:327.649994,close:332.290009,volume:11337500},{date:"2021-06-22T00:00:00.000Z",open:332.690002,high:339.920013,low:332.600006,close:339.029999,volume:15345300},{date:"2021-06-23T00:00:00.000Z",open:339.350006,high:343.420013,low:338.200012,close:340.589996,volume:14817800},{date:"2021-06-24T00:00:00.000Z",open:341.850006,high:344.899994,low:341.790009,close:343.179993,volume:12329100},{date:"2021-06-25T00:00:00.000Z",open:342.589996,high:344.119995,low:339.679993,close:341.369995,volume:14594400},{date:"2021-06-28T00:00:00.000Z",open:342.459991,high:358.140015,low:341.769989,close:355.640015,volume:29156100},{date:"2021-06-29T00:00:00.000Z",open:356.269989,high:356.73999,low:349.049988,close:351.890015,volume:21417300},{date:"2021-06-30T00:00:00.000Z",open:352.170013,high:352.920013,low:347.170013,close:347.709991,volume:15107500},{date:"2021-07-01T00:00:00.000Z",open:346.820007,high:354.670013,low:346.5,close:354.390015,volume:17137e3},{date:"2021-07-02T00:00:00.000Z",open:355.100006,high:356.440002,low:352.619995,close:354.700012,volume:11521300},{date:"2021-07-06T00:00:00.000Z",open:356.5,high:358.790009,low:349.179993,close:352.779999,volume:13488500},{date:"2021-07-07T00:00:00.000Z",open:355.26001,high:356.48999,low:350,close:350.48999,volume:14218900},{date:"2021-07-08T00:00:00.000Z",open:345.730011,high:348.329987,low:342.559998,close:345.649994,volume:14406500},{date:"2021-07-09T00:00:00.000Z",open:345.320007,high:350.709991,low:345.269989,close:350.420013,volume:13018700},{date:"2021-07-12T00:00:00.000Z",open:351.230011,high:354.190002,low:349.640015,close:353.160004,volume:10018600},{date:"2021-07-13T00:00:00.000Z",open:351.5,high:358.48999,low:348.799988,close:352.089996,volume:11456e3},{date:"2021-07-14T00:00:00.000Z",open:354.559998,high:355.200012,low:346.730011,close:347.630005,volume:13894200},{date:"2021-07-15T00:00:00.000Z",open:349.230011,high:349.230011,low:340.220001,close:344.459991,volume:14781600},{date:"2021-07-16T00:00:00.000Z",open:344.910004,high:345.98999,low:340.140015,close:341.160004,volume:11026100},{date:"2021-07-19T00:00:00.000Z",open:337.570007,high:339.790009,low:334.540009,close:336.950012,volume:14372300},{date:"2021-07-20T00:00:00.000Z",open:338.799988,high:343.450012,low:334.5,close:341.660004,volume:11024300},{date:"2021-07-21T00:00:00.000Z",open:341.5,high:346.519989,low:341.25,close:346.230011,volume:9279700},{date:"2021-07-22T00:00:00.000Z",open:346.679993,high:351.540009,low:345.209991,close:351.190002,volume:12385400},{date:"2021-07-23T00:00:00.000Z",open:360.910004,high:375.329987,low:357.190002,close:369.790009,volume:33694300},{date:"2021-07-26T00:00:00.000Z",open:369.579987,high:374.440002,low:368.220001,close:372.459991,volume:14925200},{date:"2021-07-27T00:00:00.000Z",open:371.910004,high:373.149994,low:364.549988,close:367.809998,volume:15705400},{date:"2021-07-28T00:00:00.000Z",open:374.559998,high:377.549988,low:366.929993,close:373.279999,volume:29676900},{date:"2021-07-29T00:00:00.000Z",open:361,high:365.519989,low:356.73999,close:358.320007,volume:33413200},{date:"2021-07-30T00:00:00.000Z",open:354,high:360.730011,low:352.940002,close:356.299988,volume:15966700},{date:"2021-08-02T00:00:00.000Z",open:358.100006,high:359.399994,low:350.73999,close:351.950012,volume:13180400},{date:"2021-08-03T00:00:00.000Z",open:352.730011,high:353.769989,low:347.700012,close:351.23999,volume:12406100},{date:"2021-08-04T00:00:00.000Z",open:352.420013,high:360.480011,low:351.51001,close:358.920013,volume:14180600},{date:"2021-08-05T00:00:00.000Z",open:359.640015,high:363.899994,low:356.899994,close:362.970001,volume:10247200},{date:"2021-08-06T00:00:00.000Z",open:361.399994,high:365.149994,low:361.399994,close:363.51001,volume:8918100},{date:"2021-08-09T00:00:00.000Z",open:363.76001,high:365.779999,low:360.75,close:361.609985,volume:7798900},{date:"2021-08-10T00:00:00.000Z",open:361.829987,high:364.100006,low:359.040009,close:361.130005,volume:7469900},{date:"2021-08-11T00:00:00.000Z",open:362.100006,high:362.359985,low:357.809998,close:359.959991,volume:8400300},{date:"2021-08-12T00:00:00.000Z",open:358.450012,high:363,low:357.109985,close:362.649994,volume:7170700},{date:"2021-08-13T00:00:00.000Z",open:362.970001,high:364.660004,low:361.480011,close:363.179993,volume:7192500},{date:"2021-08-16T00:00:00.000Z",open:362.519989,high:366.950012,low:357.380005,close:366.559998,volume:11222100},{date:"2021-08-17T00:00:00.000Z",open:362.980011,high:364.670013,low:355.070007,close:358.450012,volume:12328700},{date:"2021-08-18T00:00:00.000Z",open:356.25,high:359.859985,low:355.149994,close:355.450012,volume:10042400},{date:"2021-08-19T00:00:00.000Z",open:351.350006,high:357.570007,low:351,close:355.119995,volume:12004500},{date:"2021-08-20T00:00:00.000Z",open:354.600006,high:359.98999,low:353.309998,close:359.369995,volume:8693500},{date:"2021-08-23T00:00:00.000Z",open:359.440002,high:365.690002,low:359.100006,close:363.350006,volume:10942e3},{date:"2021-08-24T00:00:00.000Z",open:363.660004,high:367.959991,low:361.839996,close:365.51001,volume:9235100},{date:"2021-08-25T00:00:00.000Z",open:365.600006,high:370.859985,low:365.399994,close:368.390015,volume:9684500},{date:"2021-08-26T00:00:00.000Z",open:368.380005,high:369.440002,low:364.130005,close:364.380005,volume:7888700},{date:"2021-08-27T00:00:00.000Z",open:365.100006,high:373.73999,low:364.079987,close:372.630005,volume:11214200},{date:"2021-08-30T00:00:00.000Z",open:372.559998,high:381.48999,low:370.519989,close:380.660004,volume:13547300},{date:"2021-08-31T00:00:00.000Z",open:379.950012,high:382.76001,low:378.799988,close:379.380005,volume:12345400},{date:"2021-09-01T00:00:00.000Z",open:379.589996,high:384.329987,low:378.809998,close:382.049988,volume:11567200},{date:"2021-09-02T00:00:00.000Z",open:381.5,high:381.75,low:374.059998,close:375.279999,volume:14832900},{date:"2021-09-03T00:00:00.000Z",open:374.75,high:377.160004,low:373.109985,close:376.26001,volume:7509600},{date:"2021-09-07T00:00:00.000Z",open:375.880005,high:382.959991,low:373.149994,close:382.179993,volume:10793800},{date:"2021-09-08T00:00:00.000Z",open:380.160004,high:380.869995,low:374.790009,close:377.570007,volume:11067200},{date:"2021-09-09T00:00:00.000Z",open:377.640015,high:379.829987,low:376.570007,close:378,volume:9098900},{date:"2021-09-10T00:00:00.000Z",open:381.359985,high:383.790009,low:378.26001,close:378.690002,volume:11537600},{date:"2021-09-13T00:00:00.000Z",open:381.679993,high:381.75,low:374.350006,close:376.51001,volume:13026300},{date:"2021-09-14T00:00:00.000Z",open:377.399994,high:378.589996,low:375.109985,close:376.529999,volume:8711600},{date:"2021-09-15T00:00:00.000Z",open:377,high:377.559998,low:367.670013,close:373.920013,volume:17940300},{date:"2021-09-16T00:00:00.000Z",open:372.790009,high:373.559998,low:369.709991,close:373.059998,volume:11934200},{date:"2021-09-17T00:00:00.000Z",open:371.410004,high:371.410004,low:361.589996,close:364.720001,volume:26299e3},{date:"2021-09-20T00:00:00.000Z",open:359.299988,high:361.029999,low:349.799988,close:355.700012,volume:19822800},{date:"2021-09-21T00:00:00.000Z",open:358.5,high:360.040009,low:355.190002,close:357.480011,volume:11751900},{date:"2021-09-22T00:00:00.000Z",open:347.230011,high:349.839996,low:340.690002,close:343.209991,volume:43692900},{date:"2021-09-23T00:00:00.000Z",open:345.359985,high:349.670013,low:343,close:345.959991,volume:21806300},{date:"2021-09-24T00:00:00.000Z",open:343.23999,high:354.350006,low:342.369995,close:352.959991,volume:18801900},{date:"2021-09-27T00:00:00.000Z",open:349.809998,high:355.149994,low:347.079987,close:353.579987,volume:15205800},{date:"2021-09-28T00:00:00.000Z",open:347.970001,high:349.600006,low:338.920013,close:340.649994,volume:21710300},{date:"2021-09-29T00:00:00.000Z",open:343.149994,high:345.230011,low:338.880005,close:339.609985,volume:14452200},{date:"2021-09-30T00:00:00.000Z",open:340.450012,high:342.799988,low:338.149994,close:339.390015,volume:16547100},{date:"2021-10-01T00:00:00.000Z",open:341.609985,high:345.019989,low:338.640015,close:343.01001,volume:14905300},{date:"2021-10-04T00:00:00.000Z",open:335.529999,high:335.940002,low:322.700012,close:326.230011,volume:42885e3},{date:"2021-10-05T00:00:00.000Z",open:328.579987,high:335.179993,low:326.160004,close:332.959991,volume:35377900},{date:"2021-10-06T00:00:00.000Z",open:329.73999,high:334.380005,low:325.799988,close:333.640015,volume:26443e3},{date:"2021-10-07T00:00:00.000Z",open:337,high:338.839996,low:328.980011,close:329.220001,volume:28307500},{date:"2021-10-08T00:00:00.000Z",open:331.51001,high:333.399994,low:328.709991,close:330.049988,volume:15934300},{date:"2021-10-11T00:00:00.000Z",open:327.630005,high:330.459991,low:325.309998,close:325.450012,volume:14708200},{date:"2021-10-12T00:00:00.000Z",open:323.029999,high:324.380005,low:317.369995,close:323.769989,volume:31658700},{date:"2021-10-13T00:00:00.000Z",open:326.970001,high:327,low:322.660004,close:324.540009,volume:14761500},{date:"2021-10-14T00:00:00.000Z",open:328.359985,high:330.519989,low:327.100006,close:328.529999,volume:14302200},{date:"2021-10-15T00:00:00.000Z",open:328.679993,high:329.070007,low:322.51001,close:324.76001,volume:21575100},{date:"2021-10-18T00:00:00.000Z",open:328.950012,high:335.890015,low:327.5,close:335.339996,volume:21585e3},{date:"2021-10-19T00:00:00.000Z",open:339.649994,high:342.459991,low:337.279999,close:339.98999,volume:18786300},{date:"2021-10-20T00:00:00.000Z",open:343.450012,high:343.980011,low:339.450012,close:340.779999,volume:13639500},{date:"2021-10-21T00:00:00.000Z",open:340.279999,high:342.309998,low:337.799988,close:341.880005,volume:16354400},{date:"2021-10-22T00:00:00.000Z",open:326.350006,high:329.630005,low:321.109985,close:324.609985,volume:35224500},{date:"2021-10-25T00:00:00.000Z",open:320.299988,high:329.559998,low:319.720001,close:328.690002,volume:38409e3},{date:"2021-10-26T00:00:00.000Z",open:328.26001,high:330.209991,low:309.600006,close:315.809998,volume:65654e3},{date:"2021-10-27T00:00:00.000Z",open:314.190002,high:319.25,low:312.059998,close:312.220001,volume:29971800},{date:"2021-10-28T00:00:00.000Z",open:312.98999,high:325.519989,low:308.109985,close:316.920013,volume:50806800},{date:"2021-10-29T00:00:00.000Z",open:320.190002,high:326,low:319.600006,close:323.570007,volume:37059400},{date:"2021-11-01T00:00:00.000Z",open:326.040009,high:333.450012,low:326,close:329.980011,volume:31518900},{date:"2021-11-02T00:00:00.000Z",open:331.380005,high:334.790009,low:323.799988,close:328.079987,volume:28353e3},{date:"2021-11-03T00:00:00.000Z",open:327.48999,high:332.149994,low:323.200012,close:331.619995,volume:20786500},{date:"2021-11-04T00:00:00.000Z",open:334.01001,high:337.269989,low:332.649994,close:335.850006,volume:22495300},{date:"2021-11-05T00:00:00.000Z",open:340.309998,high:346.790009,low:339.640015,close:341.130005,volume:26852100},{date:"2021-11-08T00:00:00.000Z",open:344.420013,high:344.790009,low:338.339996,close:338.619995,volume:18342500},{date:"2021-11-09T00:00:00.000Z",open:340,high:341.309998,low:334.470001,close:335.369995,volume:17556700},{date:"2021-11-10T00:00:00.000Z",open:332.48999,high:333.190002,low:325.51001,close:327.640015,volume:21872600},{date:"2021-11-11T00:00:00.000Z",open:329.820007,high:332.459991,low:327,close:327.73999,volume:12376600},{date:"2021-11-12T00:00:00.000Z",open:330.179993,high:341.859985,low:329.779999,close:340.890015,volume:25387200},{date:"2021-11-15T00:00:00.000Z",open:344.339996,high:353.649994,low:343.200012,close:347.559998,volume:25076600},{date:"2021-11-16T00:00:00.000Z",open:343.829987,high:346.649994,low:340.869995,close:342.959991,volume:18181100},{date:"2021-11-17T00:00:00.000Z",open:344.23999,high:347.299988,low:340.100006,close:340.769989,volume:13602800},{date:"2021-11-18T00:00:00.000Z",open:339.720001,high:342.459991,low:335.299988,close:338.690002,volume:17487200},{date:"2021-11-19T00:00:00.000Z",open:342.200012,high:352.100006,low:339.899994,close:345.299988,volume:26441e3},{date:"2021-11-22T00:00:00.000Z",open:349.049988,high:353.829987,low:340.51001,close:341.01001,volume:27116800},{date:"2021-11-23T00:00:00.000Z",open:338.929993,high:341.399994,low:333.5,close:337.25,volume:17211500}];var Wo={disableTheme:!1,initWidthPerTick:8};var Lo=function(){var e=r.a.useRef(null),t=r.a.useState(!0),a=Object(d.a)(t,2),n=a[0],o=a[1];console.log("production mode"),console.log=function(){};var i,l=Ro.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{date:new Date(e.date)})})),s=Xo({ContainerRef:e,data:[{data:l,name:"Meta Platforms",type:"chart",id:"mainchart"},{id:"kama_01",type:"indicator",indicator:Ha,graphProps:{style:{strokeColor:["#0693E3"]}}},{id:"buystop_01",type:"indicator",indicator:Yo,graphProps:{style:{strokeColor:["#00D084"]}}},{id:"sellstop_01",type:"indicator",indicator:Uo,graphProps:{style:{strokeColor:["#f50057"]}}},{type:"indicator",indicator:(i={period:5},La(La({},Ga),{params:Ga.params.map((function(e){return"period"!==e.name||ie(null===i||void 0===i?void 0:i.period)?e:La(La({},e),{val:i.period})}))})),id:"rsi_01"},{id:"ema_rsi_01",type:"indicator",indSrcId:"rsi_01",indicator:Ua,graphProps:{style:{strokeColor:["#0693E3"]}}}],rtData:undefined,settings:Wo}),p=Object(d.a)(s,3),h=p[0],v=p[1],m=p[2],f=r.a.useCallback((function(){v({task:"setTheme",params:{theme:n?on:rn}}),o((function(e){return!e}))}),[v,n]);return Object(x.jsx)(r.a.Fragment,{children:Object(x.jsx)(u.a,{theme:h.style.isDarkMode?E:S,children:Object(x.jsx)(b,{setDarkMode:f,children:Object(x.jsx)("div",{style:{height:"100%"},children:Object(x.jsx)(zn,{ref:e,ChartState:h,Dispatch:v,rtTicks:m,settings:Wo})})})})})},Go=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,604)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),o(e),r(e),i(e)}))};l.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(Lo,{})}),document.getElementById("root")),Go()}},[[483,1,2]]]);
//# sourceMappingURL=main.3c8c3edf.chunk.js.map