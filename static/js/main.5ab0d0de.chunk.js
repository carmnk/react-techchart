/*! For license information please see main.5ab0d0de.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-techchart"]=this["webpackJsonpreact-techchart"]||[]).push([[0],{289:function(e,t,a){},468:function(e,t){},470:function(e,t){},482:function(e,t,a){"use strict";a.r(t);var n=a(6),o=a.n(n),r=a(245),i=a.n(r),l=(a(289),a(16)),d=a(183),c=a(582),s=a(542),u=a(545),p=a(590),h=a(17),v=function(e){e.setDarkMode;var t=Object(s.a)();return Object(h.jsxs)(u.a,{sx:{height:"100%",label:"homeRoot"},children:[Object(h.jsx)("div",{style:{minHeight:128,backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.default),backgroundImage:"url(https://github.com/carmnk/resources/raw/main/icons/logo512.png)",backgroundRepeat:"no-repeat",backgroundSize:128,backgroundPosition:"50% 35%"}}),Object(h.jsxs)("div",{style:{backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.default),textAlign:"center",paddingBottom:"8px"},children:[Object(h.jsx)(p.a,{children:"a flexible and extensible react charting tool dedicated to technical chart analysis."}),Object(h.jsx)(p.a,{color:"secondary.main",children:"experimental in early development phase."})]}),Object(h.jsx)("div",{style:{flexGrow:1,border:"1px solid red"},children:e.children})]})},m=a(0),f=a.n(m),g=a(589),y=a(596),x=a(264),b=function(e){var t=e.disableTheme,a=e.theme;return f.a.createElement(f.a.Fragment,null,t?e.children:f.a.createElement(g.a,{theme:a},e.children))},k=Object(y.a)(Object(x.a)({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},mode:"light"},typography:{h1:{fontWeight:600,fontSize:"3rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h2:{fontWeight:600,fontSize:"2.5rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h3:{fontWeight:600,fontSize:"2.1rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h4:{fontWeight:600,fontSize:"1.8rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h5:{fontSize:"1.4rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h6:{fontSize:"1.25rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},fontFamily:"'Quattrocento Sans', sans-serif"}})),w=Object(y.a)(Object(x.a)({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},mode:"dark",background:{paper:"#424242"}},typography:{h1:{fontWeight:600,fontSize:"3rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h2:{fontWeight:600,fontSize:"2.5rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h3:{fontWeight:600,fontSize:"2.1rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h4:{fontWeight:600,fontSize:"1.8rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h5:{fontSize:"1.4rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h6:{fontSize:"1.25rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},fontFamily:"'Quattrocento Sans', sans-serif"}})),T=a(579),C=a(594),I=a(595),S=a(20),E=function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&"pixClose"in e.pixY},P=function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&"pixPrices"in e.pixY},O=function(e){return"open"in e&&"high"in e&&"low"in e&&"close"in e},M=function(e){return"close"in e},Z=function(e){return"volume"in e},j=function(e){return"prices"in e},D=function(e){return"indicator"===e.type},z=function(e){return"chart"===e.type},F=f.a.memo((function(e){var t,a,n,o=e.subCharts,r=e.subchartIdx,i=e.yaxisIdx,l=e.graphIdx,d=e.calcXaxis,c=e.calcSubcharts,s=e.indSeriesIdx,u=e.rtTicks,p=o[r].yaxis[i].graphs[l],h=null===(a=null===(t=null===c||void 0===c?void 0:c[r])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[i],v=null===(n=null===h||void 0===h?void 0:h.graphs)||void 0===n?void 0:n[l],m=f.a.useMemo((function(){return u||((null===v||void 0===v?void 0:v.curTicks)?v.curTicks:[])}),[null===v||void 0===v?void 0:v.curTicks,u]);return m&&0!==m.length?f.a.createElement(f.a.Fragment,null,m.map((function(e,t){var a;if(!P(e))return null;var n=e.pixY,o=null===h||void 0===h?void 0:h.pixY0,c=null!==(a=null===n||void 0===n?void 0:n.pixPrices[null!==s&&void 0!==s?s:0])&&void 0!==a?a:o,u=e.pixX+d.pixXStart;return f.a.createElement(S.c,{key:"barchart-"+r+"-"+i+"-"+l+"-line-"+t,points:[u+.5,o+.5,u+.5,c+.5],listening:!1,x:0,y:0,stroke:D(p)?p.style.strokeColor[null!==s&&void 0!==s?s:0]:p.style.strokeColor,strokeWidth:1})})).filter((function(e){return null!==e}))):null})),X=function(e){return void 0===e||null===e||!("number"!==typeof e||!isNaN(e))},Y=function(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0},U=f.a.memo((function(e){var t,a,n,o,r=e.subCharts,i=e.subchartIdx,l=e.yaxisIdx,d=e.graphIdx,c=e.indSeriesIdx,s=void 0===c?0:c,u=e.calcXaxis,p=e.calcSubcharts,h=e.rtTicks,v=r[i].yaxis[l].graphs[d],m=null===(o=null===(n=null===(a=null===(t=null===p||void 0===p?void 0:p[i])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[l])||void 0===n?void 0:n.graphs)||void 0===o?void 0:o[d],g=h||(null===m||void 0===m?void 0:m.curTicks),y=g?g.map((function(e){var t;if(!e.pixY)return null;var a=P(e)?null===(t=e.pixY.pixPrices)||void 0===t?void 0:t[s]:E(e)?e.pixY.pixClose:null;return X(a)?null:[e.pixX,a]})).flat().filter((function(e){return null!==e})):[];return(null===y||void 0===y?void 0:y.length)>0?f.a.createElement(f.a.Fragment,null,f.a.createElement(S.c,{listening:!1,key:"sub"+i+"_graph"+d+"-"+s,x:u.pixXStart,y:0,points:y,stroke:D(v)?v.style.strokeColor[s]:v.style.strokeColor,strokeWidth:1})):null})),A=f.a.memo((function(e){var t,a,n,o,r,i,l=e.subCharts,d=e.calcXaxis,c=e.calcSubcharts,s=e.subchartIdx,u=void 0===s?0:s,p=e.yaxisIdx,h=void 0===p?0:p,v=e.graphIdx,m=void 0===v?0:v,g=e.rtTicks,y=null===(a=null===(t=null===l||void 0===l?void 0:l[u])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[h],x=null===y||void 0===y?void 0:y.graphs[m],b=null===(i=null===(r=null===(o=null===(n=null===c||void 0===c?void 0:c[u])||void 0===n?void 0:n.yaxis)||void 0===o?void 0:o[h])||void 0===r?void 0:r.graphs)||void 0===i?void 0:i[m],k=f.a.useMemo((function(){return g?g.slice(1):(null===b||void 0===b?void 0:b.curTicks)?b.curTicks:[]}),[null===b||void 0===b?void 0:b.curTicks,g]),w=f.a.useMemo((function(){return(null===d||void 0===d?void 0:d.scaledWidthPerTick)>2?Math.floor(.35*(d.scaledWidthPerTick-1)):0}),[d.scaledWidthPerTick]);return x&&z(x)&&k?f.a.createElement(f.a.Fragment,null,k.map((function(e,t){var a=e.pixX+d.pixXStart;if(!function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&"pixOpen"in e.pixY&&"pixHigh"in e.pixY&&"pixLow"in e.pixY&&"pixClose"in e.pixY}(e))return null;var n=e.pixY,o=n.pixOpen,r=n.pixHigh,i=n.pixLow,l=n.pixClose,c=2*w;return f.a.createElement(f.a.Fragment,{key:"candle-"+t},f.a.createElement(S.c,{listening:!1,x:0,y:0,points:[a+.5,r+.5,a+.5,i+.5],stroke:x.style.candleWickStrokeColor,strokeWidth:1}),l!==o?0!==w?f.a.createElement(S.d,{listening:!1,draggable:!1,x:a+.5-w,y:o+.5,width:c,height:l-o,stroke:x.style.candleStrokeColor,fill:l<o?x.style.candleUpColor:x.style.candleDownColor,strokeWidth:1}):f.a.createElement(S.c,{listening:!1,draggable:!1,x:0,y:0,points:[a+.5,o+.5,a+.5,l+.5],stroke:l<o?x.style.candleUpColor:x.style.candleDownColor,strokeWidth:1}):f.a.createElement(S.c,{listening:!1,draggable:!1,x:0,y:0,points:[a+.5-w,l+.5,a+.5+w,l+.5],stroke:x.style.candleStrokeColor,strokeWidth:1}))}))):null})),R=f.a.memo((function(e){var t=e.valign,a=e.halign,n=e.text,o=e.x,r=e.y,i=e.fontColor,l=e.fontSize,d=e.fontName,c=e.name,s=f.a.useCallback((function(e,c){var s=e._context;s.font=(null!==l&&void 0!==l?l:12)+"px "+(null!==d&&void 0!==d?d:"Arial"),s.fillStyle=null!==i&&void 0!==i?i:"black",s.textAlign=null!==a&&void 0!==a?a:"left",s.textBaseline=null!==t&&void 0!==t?t:"middle",s.fillText(n,o,r),e.fillStrokeShape(c)}),[d,i,l,a,t,o,r,n]);return f.a.createElement(S.e,{name:c,listening:!1,sceneFunc:s})})),W=a(565),L=a(549),G=a(550),N=a(551),V=a(573),H=a(552),B=a(553),K=6e4,_=36e5,q=864e5,J=[{name:"minutes",period:K,scaleMultiplys:[2,5,15,30],range:[K,18e5]},{name:"hours",period:_,scaleMultiplys:[2,4,12],range:[_,432e5]},{name:"days",period:q,scaleMultiplys:[2],range:[q,q]},{name:"weeks",period:6048e5,scaleMultiplys:[2],range:[3*q,11*q]},{name:"months",period:26784e5,scaleMultiplys:[2,3,6],range:[28*q,31*q]},{name:"years",period:31536e6,scaleMultiplys:[],range:[365*q,366*q]}],$=function(e,t){switch(t){case"minutes":return Object(W.a)(e,"HH:mm");case"hours":return Object(W.a)(e,"HH:00");case"days":case"weeks":return Object(W.a)(e,"dd");case"months":return Object(W.a)(e,"MMM");case"years":return Object(W.a)(e,"yyyy");default:return""}},Q=function(e,t){switch(t){case"minutes":return Object(L.a)(e);case"hours":return Object(G.a)(e);case"days":return Object(N.a)(e);case"weeks":return Object(V.a)(e);case"months":return Object(H.a)(e);case"years":return Object(B.a)(e);default:return 0}},ee=function(e,t,a){return e*a+t},te=function(e,t,a){return(e-t)/a},ae=function(e,t,a,n,o){return t-e*Math.pow(10,a)*o+n},ne=function(e,t,a,n,o){return(t+n-e)/o*Math.pow(10,-a)},oe=function(e,t,a,n,o,r,i){var l=i||10;if(X(e)||X(a)||X(n)||X(o)||X(t)||X(t))return null;var d=j(t)?t.prices.filter((function(e){return null!==e})):O(t)?[t.open,t.high,t.low,t.close]:M(t)?[t.close]:[];if(0===d.length)return null;var c=r[n].yaxis[o];return d.map((function(e){return{pixY:ae(e,a[n].bottom,c.decimals,c.translatedY,c.heightPerPt),y:e.toFixed(Y(e))}})).filter((function(t){return t.pixY>=e-l&&t.pixY<=e+l})).sort((function(t,a){return Math.abs(t.pixY-e)<Math.abs(a.pixY-e)?-1:Math.abs(t.pixY-e)>Math.abs(a.pixY-e)?1:0}))},re=function(e,t){if(!e||!t)return null;var a=t.find((function(t){return e[1]>=t.top&&e[1]<t.bottom}));if(!a)return null;var n=t.indexOf(a);return-1===n?null:n},ie=f.a.memo((function(e){var t,a,n,o,r,i,l,d,c,s,u,p=e.disableSnapX,h=e.disableSnapGraphs,v=e.containerSize,m=e.style,g=e.subcharts,y=e.data,x=e.calcSubcharts,b=e.calcPointer,k=e.calcXaxis,w=e.pixToY,T=e.rtTicks,C=v.width-1,I=v.height-1,E=m.yaxis.widthYAxis,P=m.xaxis,O=P.heightXAxis,M=P.heightTickMarkLines,Z=b.move,j=Z.pixXSnap,z=Z.xUnlimited,F=Z.pixXUnlimSnap,Y=k.xEnd,U=k.xLast,A=b.move.subchartIdx,W=null===(t=b.move.snapDatasets)||void 0===t?void 0:t[0],L=W?W.yaxisIdx:null,G=W?W.graphIdx:null,N=X(L)||X(G)||X(A)?null:null===(o=null===(n=null===(a=g[A].yaxis)||void 0===a?void 0:a[L])||void 0===n?void 0:n.graphs)||void 0===o?void 0:o[G],V=y.find((function(e){return e.id===(null===N||void 0===N?void 0:N.dataId)})),H=(!p||(null===W||void 0===W?void 0:W.ySnap)&&!h)&&j?j:null!==F&&void 0!==F?F:0,B="chart"===(null===y||void 0===y?void 0:y[0].type)?y[0]:null,K=W?W.dateString:z>U&&z<=U+(null!==(i=null===(r=null===T||void 0===T?void 0:T[0])||void 0===r?void 0:r.data.length)&&void 0!==i?i:1)-1&&(null===(l=null===B||void 0===B?void 0:B.meta)||void 0===l?void 0:l.chartPeriod)?function(){var e,t,a,n=null===(a=null===(t=null===(e=null===T||void 0===T?void 0:T[0])||void 0===e?void 0:e.data)||void 0===t?void 0:t[z-Y])||void 0===a?void 0:a.date,o=B.meta.chartPeriod;return n&&o?$(n,o.name):""}():"",_=z>U&&z<=U+(null!==(c=null===(d=null===T||void 0===T?void 0:T[0])||void 0===d?void 0:d.data.length)&&void 0!==c?c:1)-1&&!X(A)&&!X(b.move.pixY)&&T?T.map((function(e){var t,a,n;return null!==(n=null===(a=oe(b.move.pixY,null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t[z-Y],g,A,0,x))||void 0===a?void 0:a.filter((function(e){return null!==e})))&&void 0!==n?n:[]})).flat():null,q=X(null===W||void 0===W?void 0:W.pixYSnap)?!X(_)&&_.length>0?_[0].pixY:X(b.move.pixY)?null:b.move.pixY:W.pixYSnap,J=X(null===W||void 0===W?void 0:W.ySnap)||h?!X(_)&&_.length>0?_[0].y:(null===W||void 0===W?void 0:W.y)?W.y.toString():w&&!X(A)?w(b.move.pixY,A,0).toString():null:W.ySnap,Q=N&&!X(J)&&D(N)&&"indicator"===(null===V||void 0===V?void 0:V.type)&&V.indicator.default.decimals?parseFloat(J).toFixed(V.indicator.default.decimals).toString():J;return q&&g.length>0?f.a.createElement(f.a.Fragment,null,f.a.createElement(S.c,{name:"crosshair-x",listening:!1,x:0,y:0,points:[H+.5,.5,H+.5,I-O+M+.5],stroke:m.crosshair.strokeColor,strokeWidth:1}),b.move.pixY<=g[g.length-1].bottom?f.a.createElement(f.a.Fragment,null,f.a.createElement(S.c,{name:"crosshair-y",listening:!1,x:0,y:0,points:[.5,q+.5,C-E+.5,q+.5],stroke:m.crosshair.strokeColor,strokeWidth:1}),f.a.createElement(S.c,{name:"y-marker-polygon",listening:!1,draggable:!1,x:0,y:0,points:[C-E,q,C-E+10,q+10,C,q+10,C,q-10,C-E+10,q-10],stroke:m.crosshair.yMarkerStrokeColor,fill:m.crosshair.yMarkerBackgroundColor,strokeWidth:1,closed:!0}),f.a.createElement(R,{name:"y-marker text",listening:!1,text:null!==Q&&void 0!==Q?Q:"",halign:"left",valign:"middle",fontColor:m.crosshair.yMarkerTextColor,fontSize:m.crosshair.yMarkerFontSize,fontName:m.crosshair.yMarkerFontName,x:C-E+m.yaxis.widthTickmarkLines+5,y:q})):null,z>=0&&z<=Y+(null!==(u=null===(s=null===T||void 0===T?void 0:T[0])||void 0===s?void 0:s.data.length)&&void 0!==u?u:1)-1?f.a.createElement(f.a.Fragment,null,f.a.createElement(S.d,{name:"x-marker rect",listening:!1,x:H-25,y:I-O+M+.5,width:50,height:25,fill:m.crosshair.xMarkerBackgroundColor,stroke:m.crosshair.xMarkerStrokeColor,strokeWidth:1}),f.a.createElement(R,{name:"x-marker text",listening:!1,fontSize:m.crosshair.xMarkerFontSize,fontName:m.crosshair.xMarkerFontName,fontColor:m.crosshair.xMarkerTextColor,halign:"center",valign:"top",text:K,x:H,y:I-O+M+5+.5})):null):null})),le=f.a.memo((function(e){var t,a,n,o,r,i,l,d,c,s,u,p,h,v,m,g=e.rtTicks,y=e.containerSize,x=e.style,b=e.indSeriesIdx,k=e.xaxis,w=null===(a=null===(t=null===g||void 0===g?void 0:g[0])||void 0===t?void 0:t.ticks)||void 0===a?void 0:a[(null===(o=null===(n=null===g||void 0===g?void 0:g[0])||void 0===n?void 0:n.ticks)||void 0===o?void 0:o.length)-1],T=null===(i=null===(r=null===g||void 0===g?void 0:g[0])||void 0===r?void 0:r.data)||void 0===i?void 0:i[(null===(d=null===(l=null===g||void 0===g?void 0:g[0])||void 0===l?void 0:l.data)||void 0===d?void 0:d.length)-1];if(!g||!w||!T)return null;var C=y.width,I=x.yaxis.widthYAxis,O=null===w||void 0===w?void 0:w.pixY,Z=w.pixX,D=O&&E(w)?null===(c=null===w||void 0===w?void 0:w.pixY)||void 0===c?void 0:c.pixClose:P(w)?null===(u=null===(s=null===w||void 0===w?void 0:w.pixY)||void 0===s?void 0:s.pixPrices)||void 0===u?void 0:u[null!==b&&void 0!==b?b:0]:null,z=M(T)?null===(p=T)||void 0===p?void 0:p.close:j(T)?null===(v=null===(h=T)||void 0===h?void 0:h.prices)||void 0===v?void 0:v[null!==b&&void 0!==b?b:0]:null;return X(D)||X(z)?null:f.a.createElement(f.a.Fragment,null,f.a.createElement(S.c,{name:"graphmarkerLineY",listening:!1,x:k.pixXStart,y:0,points:[Math.round(Z)+.5,Math.round(D)+.5,C-I+.5,Math.round(D)+.5],stroke:"rgba(102,102,102,0.5)",strokeWidth:1}),f.a.createElement(S.c,{name:"graphMarkerPolygonY",listening:!1,draggable:!1,x:0,y:0,points:[Math.round(C-I)+.5,Math.round(D)+.5,Math.round(C-I+10)+.5,Math.round(D+10)+.5,Math.round(C)+.5,Math.round(D+10)+.5,Math.round(C)+.5,Math.round(D-10)+.5,Math.round(C-I+10)+.5,Math.round(D-10)+.5],stroke:x.crosshair.yMarkerStrokeColor,fill:x.crosshair.yMarkerBackgroundColor,strokeWidth:1,closed:!0}),f.a.createElement(R,{name:"graphMarkerPolygonYText",listening:!1,text:null!==(m=z.toString())&&void 0!==m?m:"",halign:"left",valign:"middle",fontColor:x.crosshair.yMarkerTextColor,fontSize:x.crosshair.yMarkerFontSize,fontName:x.crosshair.yMarkerFontName,x:Math.round(C-I+x.yaxis.widthTickmarkLines+5)+.5,y:Math.round(D)+.5}))})),de=f.a.memo((function(e){var t=e.calcXaxis,a=e.style,n=e.containerSize,o=a.xaxis,r=o.heightXAxis,i=o.heightTickMarkLines;return f.a.createElement(f.a.Fragment,null,t.curTicks.map((function(e,t){return f.a.createElement(f.a.Fragment,{key:"xaxis-ticks-"+t},f.a.createElement(S.c,{name:"x-tickmark-"+t,listening:!1,x:e.x,y:n.height-1-r+.5,points:[0,0,0,i],stroke:a.xaxis.strokeColor,strokeWidth:1}),a.grid.useGridX?f.a.createElement(S.c,{name:"x-gridline-"+t,listening:!1,x:e.x,y:.5,points:[0,0,0,n.height-1-r+.5],stroke:a.grid.strokeColor,strokeWidth:1}):null,f.a.createElement(R,{text:e.dateString,halign:"center",valign:"top",fontColor:a.xaxis.fontColor,fontName:a.xaxis.fontName,fontSize:a.xaxis.fontSize,x:e.x+.5,y:n.height-1-r+i+.5+8}))})))})),ce=f.a.memo((function(e){var t=e.subcharts,a=e.calcSubcharts,n=e.style,o=e.containerSize,r=n.yaxis.widthTickmarkLines;return f.a.createElement(f.a.Fragment,null,t.map((function(e,t){return e.yaxis.map((function(e,i){var l,d,c,s=null===(d=null===(l=null===a||void 0===a?void 0:a[t])||void 0===l?void 0:l.yaxis)||void 0===d?void 0:d[i];return(null!==(c=null===s||void 0===s?void 0:s.drawTicks)&&void 0!==c?c:[]).map((function(e,t){return f.a.createElement(f.a.Fragment,{key:"yaxis-ticks-"+t},f.a.createElement(S.c,{name:"y-tickmark-"+t,listening:!1,x:o.width-1+.5-n.yaxis.widthTickmarkLines,y:e.pixY+.5,points:[0,0,r,0],stroke:n.yaxis.strokeColor,strokeWidth:1}),n.grid.useGridY?f.a.createElement(S.c,{name:"y-gridline-"+t,listening:!1,x:.5,y:e.pixY+.5,points:[0,0,o.width-1+.5,0],stroke:n.grid.strokeColor,strokeWidth:1}):null,f.a.createElement(R,{text:e.label,halign:"right",valign:"middle",fontColor:n.yaxis.fontColor,fontName:n.yaxis.fontName,fontSize:n.yaxis.fontSize,x:o.width-1-n.yaxis.widthTickmarkLines+.5,y:e.pixY}))}))}))})))})),se=a(563),ue=a(43),pe=a(597),he=a(9),ve=a(5),me=a(555),fe=a(574),ge=a(23),ye=a.n(ge),xe=Object(ve.a)(me.a)((function(e){return{border:"1px solid #666",borderRadius:5,marginRight:10,background:e.theme.palette.secondary.main,minWidth:32,height:32,position:"relative",top:0}})),be=f.a.memo((function(e){var t=e.text,a=e.id,n=e.iconPath,o=e.onClick,r=e.iconColor,i=e.textColor,l=e.addIcons,d=e.iconBgColor,c=null!==l&&void 0!==l?l:[];return f.a.createElement(fe.a,{button:!0,onClick:o,key:a+"_listitem"},f.a.createElement(xe,{sx:{background:null!==d&&void 0!==d?d:"secondary.main"}},f.a.createElement(ye.a,{path:n,size:"32px",color:null!==r&&void 0!==r?r:"#fff"}),c),f.a.createElement(C.a,{variant:"h6",component:"div",color:null!==i&&void 0!==i?i:"text.primary"},t))})),ke=function(e){var t=e.onNavigate,a=Object(ue.a)(),n=f.a.useCallback((function(){null===t||void 0===t||t("chart")}),[t]),o=f.a.useCallback((function(){null===t||void 0===t||t("indicators")}),[t]),r=f.a.useCallback((function(){null===t||void 0===t||t("tools")}),[t]),i=f.a.useCallback((function(){null===t||void 0===t||t("settings")}),[t]);return f.a.createElement(pe.a,{sx:{pt:4}},f.a.createElement(be,{id:"0",text:"Chart",iconPath:he.l,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:n}),f.a.createElement(be,{text:"Indicators",id:"1",iconPath:he.k,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:o}),f.a.createElement(be,{id:"2",text:"Tools",iconPath:he.F,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:r}),f.a.createElement(be,{id:"3",text:"Settings",iconPath:he.M,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:i}))},we=a(570),Te=a(558),Ce=a(585),Ie=a(265),Se=a(586),Ee=a(598),Pe=a(599),Oe=a(577),Me=a(71),Ze=function(){return(Ze=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},je=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},De=Object(ve.a)(Oe.a)((function(e){var t,a,n,o=e.theme;return(t={})["& ."+Me.a.content]=((a={boxSizing:"border-box",borderTopRightRadius:o.spacing(2),borderBottomRightRadius:o.spacing(2),paddingTop:o.spacing(1),paddingBottom:o.spacing(1),paddingRight:o.spacing(2),"&:hover":{backgroundColor:o.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"var(--tree-view-bg-color, "+o.palette.action.selected+")",color:"var(--tree-view-color)"}})["& ."+Me.a.label]={color:"inherit"},a),t["& ."+Me.a.group]=((n={marginLeft:o.spacing(1)})["& ."+Me.a.content]={paddingLeft:o.spacing(1)},n),t})),ze=f.a.forwardRef((function(e,t){var a=e.bgColorSelected,n=e.colorSelected,o=e.labelIcon,r=e.labelInfo,i=e.labelText,l=e.typographyVariant,d=je(e,["bgColorSelected","colorSelected","labelIcon","labelInfo","labelText","typographyVariant"]);return f.a.createElement(De,Ze({ref:t,label:f.a.createElement(Te.a,{direction:"row",sx:{alignItems:"center",alignContent:"center"}},f.a.createElement(Ee.a,{component:"span",sx:{mr:1,lineHeight:0}},o),f.a.createElement(C.a,{variant:null!==l&&void 0!==l?l:"h6",component:"div",sx:{flexGrow:1}},i),f.a.createElement(C.a,{variant:"caption",component:"div"},r)),sx:{color:"text.primary"},style:{"--tree-view-color":n,"--tree-view-bg-color":a}},d))}));ze.displayName="CTreeItem";var Fe=a(600),Xe=a(583),Ye=a(575),Ue=a(567),Ae={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Re=function(e){if(!e)return null;e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,a,n){return t+t+a+a+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},We=function(){return(We=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Le=["0, 0, 0","102, 102, 102","187, 187, 187","255, 255, 255","144, 19, 254","189, 16, 224","63, 81, 181","6, 147, 227","142, 209, 252","0, 128, 128","0, 208, 132","123, 220, 181","184, 0, 0","245, 0, 87","247, 141, 167","121, 85, 72","255, 105, 0","252, 185, 0"],Ge=function(e){var t=e.color,a=e.width,n=void 0===a?24:a,o=e.height,r=void 0===o?24:o,i=e.BoxProps,l=void 0===i?{}:i;return f.a.createElement(Ee.a,We({},l,{sx:We({minWidth:n,minHeight:r,boxSizing:"border-box",background:t,borderRadius:1,border:"2px solid #000"},null===l||void 0===l?void 0:l.sx)}))},Ne=function(e){var t=e.color,a=e.onColorSelected,n=f.a.useState(!1),o=n[0],r=n[1],i=f.a.useState(null),l=i[0],d=i[1],c=f.a.useRef(null),s=/((^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$))/i.test(t),u=s&&"string"===typeof t?Re(t):null,p="string"===typeof t?t.match(/^(rgb)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/):null,h=!!p&&2 in p&&"a"===p[2],v=p&&3 in p&&4 in p&&5 in p?[parseFloat(p[3]),parseFloat(p[4]),parseFloat(p[5])]:s&&u?[u.r,u.g,u.b]:[];if(0===v.length){var m=t in Ae?Re(Ae.name):null;m&&v.push(m.r,m.g,m.b)}var g=h&&p&&6 in p?100*parseFloat(p[6]):100,y=f.a.useState(g),x=y[0],b=y[1];return f.a.createElement(f.a.Fragment,null,f.a.createElement(Pe.a,{color:"primary",style:{padding:0},onClick:function(){r(!0)},ref:c},f.a.createElement(Ge,{color:t})),f.a.createElement(Fe.a,{id:"colorpicker-popover",open:o,anchorEl:c.current,onClose:function(){r(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{sx:{width:300,p:1}}},f.a.createElement(Xe.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},Le.map((function(e,t){return f.a.createElement(Xe.a,{item:!0,xs:2,key:t},f.a.createElement(Pe.a,{color:"default",style:{padding:0},onMouseOver:function(e){d("rgba("+Le[t]+","+x+")")},onMouseLeave:function(){d(null)},onClick:function(){a("rgba("+Le[t]+","+x/100+")")}},f.a.createElement(Ge,{color:"rgba("+e+",1)",width:24,height:24})))})),f.a.createElement(Xe.a,{item:!0,xs:3},f.a.createElement(C.a,null,"Alpha")),f.a.createElement(Xe.a,{item:!0,xs:6,style:{padding:"0px 10px"}},f.a.createElement(Ye.a,{value:x,onChange:function(e,t){b(Array.isArray(t)?t[0]:t),a("rgba("+v[0]+","+v[1]+","+v[2]+","+(Array.isArray(t)?t[0]:t)/100+")")}})),f.a.createElement(Xe.a,{item:!0,xs:3},f.a.createElement(Ue.a,{margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:"5px 5px 5px 10px"}},value:x,onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)&&(t=0),t<0||t>100||(b(t),a("rgba("+v[0]+","+v[1]+","+v[2]+","+t/100+")"))}}))),f.a.createElement(Xe.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(C.a,{component:"div",align:"center"},"R")),f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(C.a,{component:"div",align:"center"},"G")),f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(C.a,{component:"div",align:"center"},"B")),f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(C.a,{component:"div",align:"center"},"A")),f.a.createElement(Xe.a,{item:!0,xs:2}),f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(Ge,{color:l||t,width:24,height:24,BoxProps:{maxWidth:24,maxHeight:24}}))),f.a.createElement(Xe.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(Ue.a,{disabled:!0,value:v?v[0]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(184, 0, 0, "+(v?v[0]/255:1)+")"}}})),f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(Ue.a,{disabled:!0,value:v?v[1]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(0, 208, 132, "+(v?v[1]/255:1)+")"}},fullWidth:!0})),f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(Ue.a,{disabled:!0,value:v?v[2]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(6, 147, 227, "+(v?v[2]/255:1)+")"}}})),f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(Ue.a,{disabled:!0,value:x,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"#bbb"}}})),f.a.createElement(Xe.a,{item:!0,xs:2}),f.a.createElement(Xe.a,{item:!0,xs:2},f.a.createElement(Ce.a,{color:"secondary",variant:"contained",size:"small",style:{minWidth:0},onClick:function(){return r(!1)}},"OK")))))},Ve=a(580),He=function(){return(He=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Be=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Ke=function(e){var t=Be(e,[]),a=Object(ue.a)();return m.createElement(Ve.a,He({"aria-label":"treeview",defaultCollapseIcon:m.createElement(ye.a,{path:he.C,size:1,color:"light"===a.palette.mode?"#333":"#fff"}),defaultExpandIcon:m.createElement(ye.a,{path:he.D,size:1,color:"light"===a.palette.mode?"#333":"#fff"}),defaultEndIcon:m.createElement("div",{style:{width:24}}),sx:{overflowY:"auto",pt:1,pb:1}},t),e.children)},_e=function(){return(_e=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},qe=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Je=function(e){var t=e.path,a=e.size,n=e.style,o=e.background,r=e.border,i=qe(e,["path","size","style","background","border"]);return f.a.createElement(ye.a,_e({path:t,size:a},i,{style:_e({background:o,border:null!==r&&void 0!==r?r:"1px solid #666",borderRadius:5,marginRight:10,boxSizing:"border-box"},n)}))},$e=a(142),Qe=a(572),et=function(e){var t=e.nodeId,a=e.onColorSelected,n=e.color,o=e.iconPath,r=e.text,i=Object(ue.a)();return f.a.createElement(ze,{key:t,nodeId:t,labelText:r,typographyVariant:"body1",labelIcon:f.a.createElement(Je,{path:o,size:"24px",color:i.palette.text.primary,border:"dark"===i.palette.mode?void 0:"1px solid #bbb"}),labelInfo:f.a.createElement(Ne,{color:"string"===typeof n?n:n[0],onColorSelected:a})})},tt=function(e){var t,a,n,o,r,i=e.subchartIdx,l=e.yaxisIdx,d=e.graphIdx,c=e.subCharts,s=e.Dispatch,u=e.onSettingsExpand,p=e.data,h=null===(o=null===(n=null===(a=null===(t=null===c||void 0===c?void 0:c[i])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[l])||void 0===n?void 0:n.graphs)||void 0===o?void 0:o[d],v=Object(ue.a)(),m=p.find((function(e){return e.id===(null===h||void 0===h?void 0:h.dataId)}));return z(h)?f.a.createElement(ze,{onClick:function(){null===u||void 0===u||u("graph-sub-"+i+"-y-"+l+"-graph-"+d)},key:"graph-sub-"+i+"-y-"+l+"-graph-"+d,nodeId:"graph-sub-"+i+"-y-"+l+"-graph-"+d,labelText:null!==(r=null===m||void 0===m?void 0:m.name)&&void 0!==r?r:"Graph No."+d,bgColorSelected:v.palette.primary.light,labelIcon:f.a.createElement(Je,{path:he.l,size:"32px",color:v.palette.secondary.contrastText,background:v.palette.primary.main}),labelInfo:0!==i||0!==d?f.a.createElement(Pe.a,{size:"small",onClick:function(e){e.preventDefault(),s({task:"removeGraph",params:{subchartIdx:i,yaxisIdx:l,graphIdx:d}})}},f.a.createElement(ye.a,{path:he.m,size:1,color:"light"===v.palette.mode?"#333":"#fff"})):void 0},"chart"===h.type&&"candlechart"===(null===m||void 0===m?void 0:m.meta.type)?f.a.createElement(ze,{key:"chart-s"+i+"-y"+l+"-g"+d+"-chartType",nodeId:"chart-s"+i+"-y"+l+"-g"+d+"-chartType",labelText:"chart type",typographyVariant:"body1",labelIcon:f.a.createElement(Je,{path:he.J,size:"24px",color:"light"===v.palette.mode?"#333":"#fff"}),labelInfo:f.a.createElement(Qe.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:h.chartType,onChange:function(e){var t=e.target.value;s({task:"setGraphProp",params:{prop:"chartType",subchartIdx:i,yaxisIdx:l,graphIdx:d,newValue:t}})}},["line","candles"].map((function(e,t){return f.a.createElement(Se.a,{key:"chart-s"+i+"-y"+l+"-g"+d+"-chartType-o-"+t,value:e},e)})))}):null,function(e){return z(e)&&"chart"===(null===m||void 0===m?void 0:m.type)?"candles"===e.chartType?[{text:"candle up color",icon:he.g,color:e.style.candleUpColor,onColorSelected:function(e){s({task:"setGraphProp",params:{prop:"candleUpColor",subchartIdx:i,yaxisIdx:l,graphIdx:d,newValue:e}})}},{text:"candle down color",icon:he.g,color:e.style.candleDownColor,onColorSelected:function(e){s({task:"setGraphProp",params:{prop:"candleDownColor",subchartIdx:i,yaxisIdx:l,graphIdx:d,newValue:e}})}},{text:"candle stroke color",icon:he.g,color:e.style.candleStrokeColor,onColorSelected:function(e){s({task:"setGraphProp",params:{prop:"candleStrokeColor",subchartIdx:i,yaxisIdx:l,graphIdx:d,newValue:e}})}},{text:"candle wick color",icon:he.g,color:e.style.candleWickStrokeColor,onColorSelected:function(e){s({task:"setGraphProp",params:{prop:"candleWickStrokeColor",subchartIdx:i,yaxisIdx:l,graphIdx:d,newValue:e}})}}]:[{text:"line stroke color",icon:he.g,color:e.style.strokeColor,onColorSelected:function(e){s({task:"setGraphProp",params:{prop:"strokeColor",subchartIdx:i,yaxisIdx:l,graphIdx:d,newValue:e}})}}]:[]}(h).map((function(e,t){return f.a.createElement(et,{key:"settings-treeitem-chartGraph-s"+i+"-y"+l+"-g"+d+"-p"+t,nodeId:"settings-treeitem-chartGraph-s"+i+"-y"+l+"-g"+d+"-p"+t,text:e.text,color:e.color,iconPath:e.icon,onColorSelected:e.onColorSelected})}))):null},at=a(254),nt=a.n(at),ot=a(86),rt=a.n(ot),it=a(94),lt=a.n(it),dt=a(255),ct=a.n(dt),st=a(69),ut=a.n(st),pt=a(70),ht=a.n(pt),vt=function(){return(vt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},ft=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},gt=function(e,t,a,n){if("object"!==typeof e)return null;var o=Array.isArray(e)?ft([],e):vt({},e),r=e,i=o;try{t.forEach((function(e,l){if(!(e in r)||"number"!==typeof e&&"string"!==typeof e)throw o=null,new Error("path at position "+l+" '"+e+"' not found in src object/array -1");if(l<t.length-1){if("number"===typeof e&&!Array.isArray(r)||"string"===typeof e&&"object"!==typeof r)throw o=null,new Error("path at position "+l+" '"+e+"' not found in src object/array -2");if(Array.isArray(r),i[e]=Array.isArray(r[e])?ft([],r[e]):vt({},r[e]),"remove"===n&&l===t.length-2){var d=t[t.length-1];if("number"===typeof d&&Array.isArray(r[e]))i[e]=ft(ft([],r[e].slice(0,t[t.length-1])),r[e].slice(d+1));else if("string"===typeof d&&(r[e],1)){var c=r[e],s=d,u=(c[s],mt(c,["symbol"===typeof s?s:s+""]));i[e]=vt({},u)}}else i=i[e];r=r[e]}else if("remove"!==n){if(!(e in r)&&"add"!==n)throw o=null,new Error("path at position "+l+" '"+e+"' not found in src object/array -3");"add"===n&&Array.isArray(r[e])?i[e]=ft(ft([],r[e]),[a]):i[e]=a}}))}catch(l){return console.error("Error at setStateProp(): ",l),null}return o},yt=function(e,t,a){return gt(e,t,a,"edit")},xt=function(e,t){return gt(e,t,null,"remove")};var bt=function(){return(bt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},kt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},wt=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Tt=function(e,t,a,n,o,r){return n&&o?Ct(e,o,n,r,a,t):function(e){if(!e)return!1;var t=e[e.length-1];return!!t.close&&!!t.date}(e)?It(e,t,a):null},Ct=function(e,t,a,n,o,r){var i,l=ct()(a),d=l.params.findIndex((function(e){return"dataSeriesKey"===e.name}));-1===d||X(n)||(l.params[d].val=n);var c=null===(i=a.indicatorFn)||void 0===i?void 0:i(bt({chartData:e,prevData:[]},l.params.reduce((function(e,t){var a;return bt(bt({},e),((a={})[t.name]=t.val,a))}),{}))),s=l.default.decimals?l.default.decimals:2,u=o||ut()(),p=null!==r&&void 0!==r?r:l.name;return{data:c,name:p,fullName:p+"("+l.params.map((function(e){return"dataSeriesKey"!==e.name?e.val:null})).filter((function(e){return null!==e})).join(",")+")",type:"indicator",decimals:s,indicator:l,indSrcId:t,id:u}},It=function(e,t,a){var n=Pt(e),o=n.decimals,r=n.isDescending,i=kt(n,["decimals","isDescending"]);r&&e.reverse();var l=X(null===i||void 0===i?void 0:i.chartPeriod)?null:Ot(e,null===i||void 0===i?void 0:i.chartPeriod);return X(l)?null:{id:a,data:e,meta:i,dateStat:l,type:"chart",name:t,decimals:o}},St=function(e,t,a){var n=e.data,o=n.findIndex((function(e){return e.id===t})),r=null===n||void 0===n?void 0:n[o];if("chart"!==(null===r||void 0===r?void 0:r.type)||!a||0===a.length)return e;var i=function(e,t){var a=e.meta.chartPeriod;return a?bt(bt({},e),{data:wt(wt([],e.data),t),dateStat:Ot(t,a,e.dateStat)}):e}(r,a),l=jt(n,t),d=wt([],yt(e.data,[o],i));return l.forEach((function(e,t){var a=d.findIndex((function(t){return t.id===e})),n=null===d||void 0===d?void 0:d[a];if("indicator"===(null===n||void 0===n?void 0:n.type)){var o=Mt(d,e,void 0,n.data);o&&(d[a]=o)}})),bt(bt({},e),{data:d})},Et=function(e){var t=e.slice(1).map((function(t,a){return n=e[a+1],o=e[a],(null===n||void 0===n?void 0:n.date)&&(null===o||void 0===o?void 0:o.date)?n.date.valueOf()-o.date.valueOf():0;var n,o})),a=nt()(t),n=Object.entries(a).map((function(e){var t=e[0],a=e[1];return{dT:parseInt(t,10),amt:a}})),o=n.map((function(e){return e.amt})),r=o.indexOf(Math.max.apply(Math,o)),i=Math.abs(n[r].dT);return{dataPeriod:i,dataPeriodConfidence:n[r].amt/e.length,chartPeriod:function(e){var t=J.find((function(t){return e===t.period||e>=t.range[0]&&e<=t.range[1]}));if(!t)return null;t.scaleMultiplys,t.range;var a=kt(t,["scaleMultiplys","range"]),n=Math.round(e/t.period);return bt(bt({},a),{multiply:n})}(i),isDescending:n[r].dT<0}},Pt=function(e){var t=Et(e),a=t.dataPeriod,n=t.dataPeriodConfidence,o=t.chartPeriod,r=t.isDescending;return{dataPeriod:a,chartPeriod:o,dataPeriodConfidence:n,type:"candlechart",decimals:function(e){var t=e.map((function(e){return O(e)?Math.max.apply(Math,[Y(e.close),Y(e.open),Y(e.high),Y(e.low)]):M(e)?Y(e.close):j(e)?Y(Math.max.apply(Math,e.prices.map((function(e){return X(e)?0:Y(e)})))):0}));return Math.max.apply(Math,t)}(e),isDescending:r}},Ot=function(e,t,a){var n,o=J.map((function(e){return e.name})),r=o.slice(o.findIndex((function(e){return e===t.name}))),i=r.map((function(e){return e.slice(0,e.length-1)})),l=e.map((function(e){var t={};return i.forEach((function(a,n){t[a]=Q(e.date,r[n])})),t})),d=l.reduce((function(e,t){return{years:e.lastData?e.lastData.year!==t.year?e.years+1:e.years:1,months:e.lastData?e.lastData.month!==t.month?e.months+1:e.months:"month"in t?1:0,weeks:e.lastData?e.lastData.week!==t.week?e.weeks+1:e.weeks:"week"in t?1:0,days:e.lastData?e.lastData.day!==t.day?e.days+1:e.days:"day"in t?1:0,hours:e.lastData?e.lastData.hour!==t.hour?e.hours+1:e.hours:"hour"in t?1:0,minutes:e.lastData?e.lastData.minute!==t.minute?e.minutes+1:e.minutes:"minute"in t?1:0,lastData:t}}),a?a.accAmt:{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,lastData:null}),c=kt(d,[]),s=null===(n=function e(t,a){var n=function(e,t){return X(e)||"years"===t?l:l.filter((function(a){return a.year===(null===e||void 0===e?void 0:e.year)&&(a.month===(null===e||void 0===e?void 0:e.month)||["months"].includes(t))&&(a.week===(null===e||void 0===e?void 0:e.week)||["months","weeks"].includes(t))&&(a.day===(null===e||void 0===e?void 0:e.day)||["months","weeks","days"].includes(t))&&(a.hour===(null===e||void 0===e?void 0:e.hour)||"minutes"!==t)}))}(a||null,t);return"minutes"===t?{minutes:rt()(n,(function(e){return""+e.minute})).map((function(e){return{minute:e.minute}}))}:"hours"===t?{hours:rt()(n,(function(e){return""+e.hour})).map((function(t){return{hour:t.hour,minutes:"minute"in t?e("minutes",t).minutes:[]}}))}:"days"===t?{days:rt()(n,(function(e){return""+(e.year,e.month,e.week,e.day)})).map((function(t){return{day:t.day,hours:"hour"in t?e("hours",t).hours:[]}}))}:"weeks"===t?{weeks:rt()(n,(function(e){return""+(e.year,e.month,e.week)})).map((function(t){return{week:t.week,days:"day"in t?e("days",t).days:[]}}))}:"months"===t?{months:rt()(n,(function(e){return""+(e.year,e.month)})).map((function(t){return{month:t.month,weeks:"week"in t?e("weeks",t).weeks:[]}}))}:"years"===t?{years:rt()(l,"year").map((function(t){return{year:t.year,months:"month"in t?e("months",t).months:[]}}))}:null}("years"))||void 0===n?void 0:n.years;return{years:a?function e(t,a){var n,o,r=null!==(n=null===t||void 0===t?void 0:t[t.length-1])&&void 0!==n?n:null,i=null!==(o=null===a||void 0===a?void 0:a[0])&&void 0!==o?o:null;if(!r||!i)return wt(wt([],t),a);var l="year"in r?"year":"month"in r?"month":"week"in r?"week":"day"in r?"day":"hour"in r?"hour":"minute"in r?"minute":null,d="year"in r&&"months"in r&&"months"in i?{year:r.year,months:e(r.months,i.months)}:"month"in r&&"weeks"in r&&"weeks"in i?{month:r.month,weeks:e(r.weeks,i.weeks)}:"week"in r&&"days"in r&&"days"in i?{week:r.week,days:e(r.days,i.days)}:"day"in r&&"hours"in r&&"hours"in i?{day:r.day,hours:e(r.hours,i.hours)}:"hour"in r&&"minutes"in r&&"minutes"in i?{hour:r.hour,minutes:e(r.minutes,i.minutes)}:null,c=l&&l in r?r[l]:null,s=l&&l in i?i[l]:null;return c===s&&!X(c)&&!X(s)&&l&&d?wt(wt(wt([],t.slice(0,t.length-1)),[d]),a.slice(1)):wt(wt([],t),a)}(a.years,s):s,accAmt:c}},Mt=function(e,t,a,n){var o,r,i=null!==a&&void 0!==a?a:{},l=i.newIndSrcId,d=i.newParams,c=e.find((function(e){return e.id===t&&"indicator"===e.type}));if("indicator"!==(null===c||void 0===c?void 0:c.type))return null;var s=null===(o=c.indicator)||void 0===o?void 0:o.indicatorFn,u=l||c.indSrcId,p=null===(r=e.find((function(e){return e.id===u})))||void 0===r?void 0:r.data;if(!s||!p)return null;var h=d||c.indicator.params;return bt(bt({},c),{data:s(bt({chartData:p,prevData:null!==n&&void 0!==n?n:[]},h.reduce((function(e,t){var a;return bt(bt({},e),((a={})[t.name]=t.val,a))}),{}))),fullName:d?c.name+"("+d.map((function(e){return e.val})).join(",")+")":c.fullName,indSrcId:u,indicator:bt(bt({},c.indicator),{params:h})})},Zt=function e(t,a,n){var o=null!==n&&void 0!==n?n:[];if(o.includes(a))return[];var r=t.find((function(e){return(null===e||void 0===e?void 0:e.id)===a&&"indicator"===(null===e||void 0===e?void 0:e.type)}));if("indicator"!==(null===r||void 0===r?void 0:r.type))return[];var i=t.find((function(e){return e.id===r.indSrcId}));return"chart"===(null===i||void 0===i?void 0:i.type)?[r.id]:"indicator"===(null===i||void 0===i?void 0:i.type)?wt(wt([],e(t,i.id,wt(wt([],o),[r.id]))),[r.id]):[]},jt=function e(t,a){return t.filter((function(e){return"indicator"===e.type&&e.indSrcId===a})).map((function(a){return wt([a.id],e(t,a.id))})).flat()},Dt=function(e,t,a){return Zt(e,a).includes(t)},zt=function(e,t,a,n){var o=e.data,r=null!==a&&void 0!==a?a:{},i=r.newIndSrcId,l=r.newParams;if(i&&Dt(o,t,i))return o;var d=lt()(wt([t],jt(o,t))),c=wt([],o);return d.forEach((function(e,a){var o=c.findIndex((function(t){return t.id===e})),r=Mt(c,e,e===t?{newIndSrcId:i,newParams:l}:void 0,null!==n&&void 0!==n?n:[]);r&&(c[o]=r)})),c},Ft=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Xt=function(e){var t=e.subchartIdx,a=e.yaxisIdx,n=e.graphIdx,o=e.subCharts,r=e.Dispatch,i=e.handleToggleExpanded,l=e.data,d=o[t].yaxis[a].graphs[n],c=D(d)?d:null,s=Object(ue.a)(),u=l.find((function(e){return e.id===(null===c||void 0===c?void 0:c.dataId)}));return c&&"indicator"===(null===u||void 0===u?void 0:u.type)?f.a.createElement(ze,{key:"settings-treeitem-indiGraph-s"+t+"-y"+a+"-g"+n,nodeId:"settings-treeitem-indiGraph-s"+t+"-y"+a+"-g"+n,bgColorSelected:s.palette.primary.light,onClick:function(){null===i||void 0===i||i("settings-treeitem-indiGraph-s"+t+"-y"+a+"-g"+n)},labelIcon:f.a.createElement(Je,{path:he.k,size:"32px",color:s.palette.secondary.contrastText,background:s.palette.primary.main}),labelText:u.fullName,labelInfo:0!==t||0!==n?f.a.createElement(Pe.a,{size:"small",onClick:function(e){e.preventDefault(),r({task:"removeGraph",params:{subchartIdx:t,yaxisIdx:0,graphIdx:n}})}},f.a.createElement(ye.a,{path:he.m,size:1,color:"light"===s.palette.mode?"#333":"#fff"})):void 0},f.a.createElement(ze,{key:"settings-treeitem-indiGraph-src-s"+t+"-y"+a+"-g"+n,nodeId:"settings-treeitem-indiGraph-src-s"+t+"-y"+a+"-g"+n,labelIcon:f.a.createElement(Je,{path:he.p,size:"24px",color:s.palette.text.primary}),labelText:"Source",typographyVariant:"body1",labelInfo:f.a.createElement(Qe.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:u.indSrcId,onChange:function(e){var t=e.target.value;r({task:"modifyIndicatorData",params:{dataId:u.id,newIndSrcId:t}})}},["dataSeries","chartSeries"].includes(u.indicator.indicatorFnType)?function(){var e=o[t].yaxis[a].graphs.map((function(e){return e.dataId}));return(u.indicator.default.newSubchart?"dataSeries"===u.indicator.indicatorFnType?l:"chartSeries"===u.indicator.indicatorFnType?l.filter((function(e){return"chart"===e.type})):[]:l.filter((function(t){return e.includes(t.id)}))).map((function(e){return e.id===u.id||Dt(l,u.id,e.id)?null:f.a.createElement(Se.a,{key:"settings-treeitem-indiGraph-src-menuitem-s"+t+"-y"+a+"-g"+n+"-"+e.id,value:e.id},e.name)}))}():null)}),u.indicator.graphTypes.map((function(e,i){var l,d,s=c.style.strokeColor;return f.a.createElement(et,{nodeId:"settings-treeitem-indiGraph-clrProps-"+t+"-y"+a+"-g"+n+"-gt"+i,key:"settings-treeitem-indiGraph-clrProps-"+t+"-y"+a+"-g"+n+"-gt"+i,color:null===(d=null===(l=o[t].yaxis[0].graphs[n].style)||void 0===l?void 0:l.strokeColor)||void 0===d?void 0:d[i],iconPath:he.g,text:"line stroke color",onColorSelected:function(e){r({task:"setGraphProp",params:{subchartIdx:t,yaxisIdx:0,graphIdx:n,newValue:Ft(Ft(Ft([],s.slice(0,i)),[e]),s.slice(i+1)),prop:"strokeColor"}})}})})),u.indicator.params.map((function(e,o){return f.a.createElement(ze,{key:"sub-"+t+"-yaxis-"+a+"-graph-"+n+"-"+o,nodeId:2+t+"00-"+n+"-"+o,labelIcon:f.a.createElement(Je,{path:he.A,size:"24px",color:s.palette.text.primary}),labelText:e.name,typographyVariant:"body1",labelInfo:f.a.createElement(Ue.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},value:e.val,onChange:function(e){var t=parseFloat(e.target.value);isNaN(t)||r({task:"modifyIndicatorData",params:{dataId:u.id,newParam:{paramIdx:o,newValue:t}}})}})})}))):null},Yt=f.a.memo((function(e){var t,a=e.style,n=e.subcharts,o=e.subchartIdx,r=e.mode,i=e.calcXaxis,l=e.xy,d=e.drawPixXy,c=e.yToPix,s=n[o].top,u=!!(null===d||void 0===d?void 0:d[0]);if(1!==l.length&&!u||!c||!i.xToPix)return null;var p=1===l.length?[i.xToPix(l[0][0]),c(l[0][1],o,0)]:(null===d||void 0===d?void 0:d[0])?d[0]:null;if(!p)return null;var h=(null===a||void 0===a?void 0:a.strokeColor)?a.strokeColor:"red",v=(null===a||void 0===a?void 0:a.anchorColor)?a.anchorColor:"#333",m=["extendUp","extendDown","extendUpDown","*extendToSecondPoint"].includes(null!==r&&void 0!==r?r:"")?r:"extendUpDown",g=null===(t=null===n||void 0===n?void 0:n[Math.max(n.length-1,0)])||void 0===t?void 0:t.bottom,y=[[p[0],"extendDown"===m?p[1]:s],[p[0],"extendUp"===m?p[1]:g]];return f.a.createElement(f.a.Fragment,null,f.a.createElement(S.c,{listening:!1,x:0,y:0,points:y.flat(),stroke:h,strokeWidth:1}),f.a.createElement(S.a,{x:p[0],y:p[1],radius:5,fill:v}))})),Ut={name:"Vertical Line",type:"vline",nPoints:1,category:"lines",params:[{name:"mode",val:"extendUpDown",vals:["extendUp","extendDown","extendUpDown"],type:"select"}],default:{params:[{icon:he.J}]},component:Yt},At=f.a.memo((function(e){var t=e.style,a=e.subcharts,n=e.subchartIdx,o=e.containerSize,r=e.calcXaxis,i=e.mode,l=e.xy,d=e.drawPixXy,c=e.yToPix,s=o.left,u=s+o.width,p=a[n],h=p.bottom,v=p.top,m=!!(null===d||void 0===d?void 0:d[0]);if(1!==l.length&&!m||!c||!r.xToPix)return null;var g=1===l.length?[r.xToPix(l[0][0]),c(l[0][1],n,0)]:(null===d||void 0===d?void 0:d[0])?d[0]:null;if(!g)return null;if((null===g||void 0===g?void 0:g[1])<v||(null===g||void 0===g?void 0:g[1])>h)return null;var y=(null===t||void 0===t?void 0:t.strokeColor)?t.strokeColor:"red",x=(null===t||void 0===t?void 0:t.anchorColor)?t.anchorColor:"#333",b=["extendRight","extendLeft","extendLeftRight","*extendToSecondPoint"].includes(null!==i&&void 0!==i?i:"")?i:"extendLeftRight",k=[["extendRight"===b?g[0]:s,g[1]],["extendLeft"===b?g[0]:u,g[1]]];return f.a.createElement(f.a.Fragment,null,f.a.createElement(S.c,{listening:!1,x:0,y:0,points:[k[0][0],k[0][1],k[1][0],k[1][1]],stroke:y,strokeWidth:1}),f.a.createElement(S.a,{x:g[0],y:k[0][1],radius:5,fill:x}))})),Rt={name:"Horizontal Line",type:"hline",nPoints:1,category:"lines",params:[{name:"mode",val:"extendLeftRight",vals:["extendRight","extendLeft","extendLeftRight"],type:"select"}],default:{params:[{icon:he.J}]},component:At},Wt=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Lt=f.a.memo((function(e){var t=e.style,a=e.mode,n=e.subcharts,o=e.subchartIdx,r=e.calcXaxis,i=e.xy,l=e.drawPixXy,d=e.yToPix,c=n[o],s=c.bottom,u=c.top;if(2!==i.length&&2!==(null===l||void 0===l?void 0:l.length)||!d||!r.xToPix)return null;var p=r.xToPix,h=2===i.length?i.map((function(e){return[p(e[0]),(t=e[1],d(t,o,0))];var t})):2===(null===l||void 0===l?void 0:l.length)?l:null;if(!h||2!==h.length)return null;var v=(null===t||void 0===t?void 0:t.strokeColor)?t.strokeColor:"red",m=(null===t||void 0===t?void 0:t.anchorColor)?t.anchorColor:"#333",g=["line","trendline","infiniteLine"].includes(null!==a&&void 0!==a?a:"")?a:"trendline",y=h[0][0]>h[1][0]?[h[1],h[0]]:h,x=[Wt([],y[0]),Wt([],y[1])];if("trendline"===g||"infiniteLine"===a){var b=x[1][0]-x[0][0],k=x[1][1]-x[0][1],w=k/b,T=k<0?u:s,C=x[0][1]-w*x[0][0],I=(T-C)/w;if(x[1][0]=I,x[1][1]=T,"infiniteLine"===a){var E=k<0?s:u,P=(E-C)/w;x[0][0]=P,x[0][1]=E}}return f.a.createElement(f.a.Fragment,null,f.a.createElement(S.c,{listening:!1,draggable:!1,x:0,y:0,points:x.flat(),stroke:v,strokeWidth:1}),f.a.createElement(S.a,{x:y[0][0],y:y[0][1],radius:5,fill:m}),f.a.createElement(S.a,{x:y[1][0],y:y[1][1],radius:5,fill:m}))})),Gt={name:"Trendline",type:"trendline",nPoints:2,category:"lines",params:[{name:"mode",val:"trendline",vals:["line","trendline","infiniteLine"],type:"select"}],default:{params:[{icon:he.J}]},component:Lt},Nt=[Rt,Ut,Gt],Vt=function(e){var t,a,n,o,r=e.subchartIdx,i=e.yaxisIdx,l=e.toolIdx,d=e.subCharts,c=e.Dispatch,s=e.handleToggleExpanded,u=null===(o=null===(n=null===(a=null===(t=null===d||void 0===d?void 0:d[r])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[i])||void 0===n?void 0:n.tools)||void 0===o?void 0:o[l],p=u||null,h=Object(ue.a)();if(!p)return null;return f.a.createElement(ze,{key:"tool-"+l,nodeId:"tool-"+r+"-"+l,labelText:"hline"===p.type?"horizontal line":"vline"===p.type?"vertical line":"trendline"===p.type?"Trendline":"Tool",typographyVariant:"body1",labelIcon:f.a.createElement("div",{style:{border:"1px solid "+("light"===h.palette.mode?"#333":"#fff"),borderRadius:5}},f.a.createElement(ye.a,{path:"hline"===p.type||"vline"===p.type||"trendline"===p.type?he.E:he.y,size:"24px",color:"light"===h.palette.mode?"#333":"#fff",rotate:"trendline"===p.type?-45:"vline"===p.type?90:0})),onClick:function(){null===s||void 0===s||s("tool-"+r+"-"+l)},bgColorSelected:h.palette.primary.light,labelInfo:f.a.createElement(Pe.a,{size:"small",onClick:function(e){e.preventDefault(),c({task:"removeTool",params:{subchartIdx:r,yaxisIdx:0,toolIdx:l}})}},f.a.createElement(ye.a,{path:he.m,size:1,color:"light"===h.palette.mode?"#333":"#fff"}))},"hline"===p.type?f.a.createElement(ze,{key:"tool-"+r+"-y0-"+l+"-hlinelevel",nodeId:"tool-"+r+"-y0-"+l+"-hlinelevel",labelText:"Y-Level",typographyVariant:"body1",labelIcon:f.a.createElement(Je,{path:he.e,size:"24px",color:"light"===h.palette.mode?"#333":"#fff"}),labelInfo:f.a.createElement(Ue.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},defaultValue:p.xy[0][1],onChange:function(e){var t=parseFloat(e.target.value);isNaN(t)||c({task:"setToolProp",params:{prop:"hLineYlevel",subchartIdx:r,yaxisIdx:0,toolIdx:l,newValue:t}})}})}):null,p.params?p.params.map((function(e,t){var a,n,o=null===(n=null===(a=Nt.find((function(e){return e.type===p.type})))||void 0===a?void 0:a.default)||void 0===n?void 0:n.params,d=o?o[t].icon:he.A;return f.a.createElement(ze,{key:"tool-s"+r+"-y0-t"+l+"-p"+t,nodeId:"tool-s"+r+"-y0-t"+l+"-p"+t,labelText:e.name,typographyVariant:"body1",labelIcon:f.a.createElement(Je,{path:d,size:"24px",color:"light"===h.palette.mode?"#333":"#fff"}),labelInfo:"select"===e.type?f.a.createElement(Qe.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:e.val,onChange:function(e){var a=e.target.value;c({task:"setToolProp",params:{prop:"toolParam",subchartIdx:r,yaxisIdx:i,toolIdx:l,toolParamIdx:t,newValue:a}})}},e.vals.map((function(e,a){return f.a.createElement(Se.a,{key:"tool-s"+r+"-y0-t"+l+"-p"+t+"-o"+a,value:e},e)}))):"number"===e.type?f.a.createElement(Ue.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,maxWidth:80}},value:e.val,onChange:function(e){var a=parseFloat(e.target.value);isNaN(a)||c({task:"setToolProp",params:{prop:"toolParam",subchartIdx:r,yaxisIdx:i,toolIdx:l,toolParamIdx:t,newValue:a}})}}):void 0})})):null,function(e){return[{text:"stroke color",icon:he.g,color:e.style.strokeColor,onColorSelected:function(e){c({task:"setToolProp",params:{prop:"strokeColor",subchartIdx:r,yaxisIdx:0,toolIdx:l,newValue:e}})}},{text:"anchor color",icon:he.i,color:e.style.anchorColor,onColorSelected:function(e){c({task:"setToolProp",params:{prop:"anchorColor",subchartIdx:r,yaxisIdx:0,toolIdx:l,newValue:e}})}}]}(p).map((function(e,t){return f.a.createElement(et,{nodeId:"settings-treeitem-tool-clrProp-"+r+"-y"+i+"-t"+l+"-p"+t,key:"settings-treeitem-tool-clrProp-"+r+"-y"+i+"-t"+l+"-p"+t,color:e.color,iconPath:e.icon,text:e.text,onColorSelected:e.onColorSelected})})))},Ht=function(){return(Ht=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Bt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Kt=f.a.forwardRef((function(e,t){var a=e.subchartIdx,n=e.subcharts,o=e.data,r=e.Dispatch,i=e.onSettingsExpand,l=e.additionalLabelInfo,d=Bt(e,["subchartIdx","subcharts","data","Dispatch","onSettingsExpand","additionalLabelInfo"]),c=Object(ue.a)(),s=n[a];return f.a.createElement(ze,Ht({ref:t},d,{key:"sub-"+a,nodeId:"sub-"+a,labelText:0===a?"Mainchart":"Subchart "+a,bgColorSelected:c.palette.primary.light,onClick:function(){null===i||void 0===i||i("sub-"+a)},labelIcon:f.a.createElement(Je,{path:he.j,size:"32px",color:c.palette.secondary.contrastText,background:c.palette.secondary.main}),labelInfo:0!==a?f.a.createElement(f.a.Fragment,null,l,f.a.createElement(Pe.a,{size:"small",onClick:function(e){e.preventDefault(),r({task:"removeSubchart",params:{subchartIdx:a}})}},f.a.createElement(ge.Icon,{path:he.m,size:1,color:"light"===c.palette.mode?"#333":"#fff"}))):void 0}),s.yaxis[0].graphs.map((function(e,t){return D(e)?f.a.createElement(Xt,{key:"editIndicator-sub-"+a+"-yaxis-0-graph-"+t,subCharts:n,Dispatch:r,subchartIdx:a,yaxisIdx:0,graphIdx:t,handleToggleExpanded:i,data:o}):z(e)?f.a.createElement(tt,{key:"graph-sub-"+a+"-y-0-graph-"+t+"-frag",subCharts:n,Dispatch:r,subchartIdx:a,yaxisIdx:0,graphIdx:t,onSettingsExpand:i,data:o}):null})),s.yaxis[0].tools.length>0?f.a.createElement(ze,{key:"tools-"+a+"-y0",nodeId:"tools-"+a+"-y0",labelIcon:f.a.createElement("div",{style:{background:c.palette.primary.main,width:32,height:32,border:"1px solid #666",borderRadius:5,marginRight:10}},f.a.createElement(ge.Icon,{path:he.F,size:"32px",color:c.palette.secondary.contrastText})),labelText:"Tools",onClick:function(){null===i||void 0===i||i("tools-"+a+"-y0")}},s.yaxis[0].tools.map((function(e,t){return f.a.createElement(Vt,{key:"editTool-sub-"+a+"-yaxis-0-tool-"+t,subCharts:n,Dispatch:r,subchartIdx:a,yaxisIdx:0,toolIdx:t,handleToggleExpanded:i})}))):null)}));Kt.displayName="SubchartTreeItem";var _t=function(){return(_t=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},qt=function(e){return f.a.createElement(Je,{path:e.iconPath,size:"24px",color:e.theme.palette.text.primary,style:{marginLeft:e.theme.spacing(1)},border:"light"===e.theme.palette.mode?"1px solid #bbb":void 0})},Jt=function(e){var t=e.subCharts,a=e.onNavigate,n=e.Dispatch,o=e.onSettingsExpand,r=e.ChartMenuState,i=e.style,l=e.data,d=Object(ue.a)(),c=f.a.useState(null),s=c[0],u=c[1],p=function(e){u(null),e&&(null===a||void 0===a||a(e))},h=[{category:void 0},{category:"xaxis",icon:he.a},{category:"yaxis",icon:he.b},{category:"grid",icon:he.x},{category:"crosshair",icon:he.o}],v=[{nodeId:"bgcolor",labelText:"background color",iconPath:he.N,labelInfo:f.a.createElement(Ne,{color:i.backgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"backgroundColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisFillColor",labelText:"fill color",iconPath:he.N,labelInfo:f.a.createElement(Ne,{color:i.xaxis.fillColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisFillColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisStrokeColor",labelText:"stroke color",iconPath:he.g,labelInfo:f.a.createElement(Ne,{color:i.xaxis.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisStrokeColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisTextColor",labelText:"text color",iconPath:he.u,labelInfo:f.a.createElement(Ne,{color:i.xaxis.fontColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisTextColor",newValue:e}})}})},{category:"yaxis",nodeId:"yaxisStrokeColor",labelText:"stroke color",iconPath:he.g,labelInfo:f.a.createElement(Ne,{color:i.yaxis.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"yAxisStrokeColor",newValue:e}})}})},{category:"yaxis",nodeId:"yaxisTextColor",labelText:"text color",iconPath:he.u,labelInfo:f.a.createElement(Ne,{color:i.yaxis.fontColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"yAxisTextColor",newValue:e}})}})},{category:"grid",nodeId:"useXGrid",labelText:"use x-axis grid",iconPath:he.x,labelInfo:f.a.createElement(we.a,{checked:i.grid.useGridX,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleGridX"}})}})},{category:"grid",nodeId:"useYGrid",labelText:"use y-axis grid",iconPath:he.x,labelInfo:f.a.createElement(we.a,{checked:i.grid.useGridY,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleGridY"}})}})},{category:"grid",nodeId:"gridStrokeColor",labelText:"stroke color",iconPath:he.g,labelInfo:f.a.createElement(Ne,{color:i.grid.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"gridStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"useCrosshair",labelText:"use crosshair",iconPath:he.o,labelInfo:f.a.createElement(we.a,{checked:i.crosshair.useCrosshair,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleCrosshair"}})}})},{category:"crosshair",nodeId:"crosshairStrokeColor",labelText:"stroke color",iconPath:he.g,labelInfo:f.a.createElement(Ne,{color:i.crosshair.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerBackground",labelText:"x-marker background",iconPath:he.N,labelInfo:f.a.createElement(Ne,{color:i.crosshair.xMarkerBackgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerBackgroundColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerStrokeColor",labelText:"x-marker stroke color",iconPath:he.g,labelInfo:f.a.createElement(Ne,{color:i.crosshair.xMarkerStrokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerTextColor",labelText:"x-marker text color",iconPath:he.u,labelInfo:f.a.createElement(Ne,{color:i.crosshair.xMarkerTextColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerTextColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerBackground",labelText:"y-marker background",iconPath:he.N,labelInfo:f.a.createElement(Ne,{color:i.crosshair.yMarkerBackgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerBackgroundColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerStrokeColor",labelText:"y-marker stroke color",iconPath:he.g,labelInfo:f.a.createElement(Ne,{color:i.crosshair.yMarkerStrokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerTextColor",labelText:"y-marker text color",iconPath:he.u,labelInfo:f.a.createElement(Ne,{color:i.crosshair.yMarkerTextColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerTextColor",newValue:e}})}})}];return f.a.createElement(f.a.Fragment,null,f.a.createElement(Te.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},f.a.createElement(Ce.a,{style:{border:"1px solid #666",borderRadius:50,padding:5,textTransform:"none",background:d.palette.secondary.light,color:d.palette.secondary.contrastText},onClick:function(e){u(e.currentTarget)}},f.a.createElement(C.a,null," Add...")),f.a.createElement(Ie.a,{id:"quick-add",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){return p(void 0)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},f.a.createElement(Se.a,{onClick:function(){return p("indicators")}},"Indicator"),f.a.createElement(Se.a,{onClick:function(){return p("tools")}},"Tool"))),f.a.createElement(Ke,{expanded:r.expandedSetting},f.a.createElement(ze,{nodeId:"1",labelText:"General",labelIcon:f.a.createElement(Je,{path:he.r,size:"32px",color:d.palette.secondary.contrastText,background:d.palette.secondary.main}),bgColorSelected:d.palette.primary.light,typographyVariant:"h6",onClick:function(){null===o||void 0===o||o("1")}},h.map((function(e,t){var a;return e.category?f.a.createElement(ze,{nodeId:"settings-treeitem-general-cat-"+t,key:"settings-treeitem-general-cat-"+t,labelText:null!==(a=e.category)&&void 0!==a?a:"",labelIcon:f.a.createElement(Je,{path:e.icon,size:"32px",color:d.palette.secondary.contrastText,background:d.palette.primary.main}),onClick:function(){null===o||void 0===o||o("settings-treeitem-general-cat-"+t)}},v.filter((function(t){return t.category===e.category})).map((function(e){return f.a.createElement(ze,{key:"settings-treeitem-general-cat-"+t+"-"+e.nodeId,nodeId:"settings-treeitem-general-cat-"+t+"-"+e.nodeId,labelText:e.labelText,typographyVariant:"body1",labelInfo:e.labelInfo,labelIcon:f.a.createElement(qt,{iconPath:e.iconPath,theme:d})})}))):v.filter((function(t){return t.category===e.category})).map((function(e){return f.a.createElement(ze,{key:"settings-treeitem-general-cat-"+t+"-"+e.nodeId,nodeId:"settings-treeitem-general-cat-"+t+"-"+e.nodeId,labelText:e.labelText,typographyVariant:"body1",labelInfo:e.labelInfo,labelIcon:f.a.createElement(qt,{iconPath:e.iconPath,theme:d})})}))}))),f.a.createElement(Kt,{subcharts:t,data:l,subchartIdx:0,Dispatch:n,onSettingsExpand:o}),f.a.createElement($e.a,{onDragEnd:function(e){var t;(null===(t=e.destination)||void 0===t?void 0:t.index)&&n({task:"swapSubcharts",params:{subchartIdx1:e.source.index,subchartIdx2:e.destination.index}})}},f.a.createElement($e.c,{droppableId:"droppable"},(function(e,a){return f.a.createElement(Ee.a,_t({},e.droppableProps,{ref:e.innerRef,sx:{background:a.isDraggingOver?d.palette.primary.light:"transparent",borderTopRightRadius:d.spacing(2),borderBottomRightRadius:d.spacing(2)}}),t.slice(1).map((function(e,a){var r=a+1;return f.a.createElement($e.b,{key:"sub-"+r,draggableId:"sub-"+r,index:r},(function(e,a){return f.a.createElement(Kt,_t({subcharts:t,data:l,subchartIdx:r,Dispatch:n,onSettingsExpand:o,ref:e.innerRef},e.draggableProps,{additionalLabelInfo:f.a.createElement(Pe.a,_t({size:"small"},e.dragHandleProps),f.a.createElement(ge.Icon,{path:he.f,size:1,color:"light"===d.palette.mode?"#333":"#fff"}))}))}))})),e.placeholder)})))))},$t=a(604),Qt=a(576),ea=a(571),ta=function(){return(ta=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},aa=f.a.forwardRef((function(e,t){return f.a.createElement(ea.a,ta({elevation:6,ref:t,variant:"filled"},e))})),na=function(e){var t=e.open,a=e.onClose,n=e.content,o=e.type,r=e.autoHideDuration,i=void 0===r?5e3:r,l=e.msgIdx,d=function(e,t){"clickaway"!==t&&(null===a||void 0===a||a())};return f.a.createElement(Qt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,autoHideDuration:i,onClose:d,sx:{bottom:24*(l+1)+48*l+"px !important",color:"red"}},f.a.createElement(aa,{severity:o,onClose:d},n))},oa=a(257),ra=a.n(oa),ia=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function i(e){try{d(n.next(e))}catch(t){r(t)}}function l(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}d((n=n.apply(e,t||[])).next())}))},la=function(e,t){var a,n,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(l){r=[6,l],n=0}finally{a=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},da=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e};function ca(e){return ia(this,void 0,void 0,(function(){return la(this,(function(t){switch(t.label){case 0:return[4,e.text().then((function(e){var t,a,n,o,r,i,l,d,c,s,u=[{chars:"\n",amt:null!==(a=null===(t=e.match(/\n/gm))||void 0===t?void 0:t.length)&&void 0!==a?a:0},{chars:"\r",amt:null!==(o=null===(n=e.match(/\r/gm))||void 0===n?void 0:n.length)&&void 0!==o?o:0},{chars:"\r\n",amt:null!==(i=null===(r=e.match(/\r\n/gm))||void 0===r?void 0:r.length)&&void 0!==i?i:0}],p=u.map((function(e){return e.amt})),h=u[p.indexOf(Math.max.apply(Math,p))].chars,v=e.split(h),m=[{chars:",",amt:null!==(d=null===(l=v[0].match(/,/gm))||void 0===l?void 0:l.length)&&void 0!==d?d:0},{chars:";",amt:null!==(s=null===(c=v[0].match(/;/gm))||void 0===c?void 0:c.length)&&void 0!==s?s:0}],f=m.map((function(e){return e.amt})),g=m[f.indexOf(Math.max.apply(Math,f))].chars,y={dots:0,commas:0};v.forEach((function(e){e.split(g).forEach((function(e){var t=e.lastIndexOf("."),a=e.lastIndexOf(",");-1!==t&&-1!==a?t>a?y.dots++:y.commas++:-1!==t&&-1===a?y.dots++:-1===t&&-1!==a&&y.commas++}))}));var x=y.dots<y.commas,b=y.dots>y.commas&&y.commas>0,k=x?e.replaceAll(".","").replaceAll(",","."):b?e.replaceAll(",",""):e,w=ra()(k.trim(),{delimiter:g,record_delimiter:h,cast:!0,trim:!0,cast_date:!0}).map((function(e){return{date:e[0],open:e[1],high:e[2],low:e[3],close:e[4],volume:e[5]}}));return w.shift(),w}))];case 1:return[2,t.sent()]}}))}))}var sa,ua=function(e){var t=e.Dispatch,a=f.a.useState([]),n=a[0],o=a[1],r=Object(ue.a)(),i=f.a.useRef(null),l=f.a.useState(!1),d=l[0],c=l[1],s=f.a.useState(""),u=s[0],p=s[1];function h(){return ia(this,void 0,void 0,(function(){var e,a,n,r;return la(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!u)throw new Error("url not provided");return[4,fetch(u)];case 1:if(!(e=i.sent()))throw new Error("cant download file from url");return[4,ca(e)];case 2:return a=i.sent(),n=u.substring(u.lastIndexOf("/")+1,u.lastIndexOf(".")),t({task:"addSubchart",params:{chartSeries:a,chartName:n,reset:!0,id:ut()()}}),o((function(e){return da(da([],e),[{type:"success",text:"Graph successfully loaded"}])})),c(!1),[3,4];case 3:return r=i.sent(),console.error("Error - could not download file from URL or File could not be parsed",r),o((function(e){return da(da([],e),[{type:"error",text:"Error - "+r}])})),[3,4];case 4:return[2]}}))}))}var v=f.a.useCallback((function(){c(!0)}),[c]),m=f.a.useCallback((function(){c(!1)}),[c]),g=f.a.useCallback((function(){var e,t;null===(t=null===(e=null===i||void 0===i?void 0:i.current)||void 0===e?void 0:e.click)||void 0===t||t.call(e)}),[i]);return f.a.createElement(f.a.Fragment,null,n.length>0?n.map((function(e,t){var a;return f.a.createElement(na,{key:"msg-"+t,autoHideDuration:5e3,type:null!==(a=e.type)&&void 0!==a?a:"error",open:n.length>0,onClose:function(){return o((function(e){return 1===e.length?[]:e.splice(1)}))},content:e.text,msgIdx:t})})):null,f.a.createElement("input",{type:"file",style:{visibility:"hidden",position:"absolute",top:0,height:0,width:0},ref:i,onChange:function(e){return ia(this,void 0,void 0,(function(){var a,n,r,i;return la(this,(function(l){switch(l.label){case 0:if(!(a=e.target.files))return[2];if(!(a.length>0))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,ca(a[0])];case 2:return n=l.sent(),r=a[0].name.substr(0,a[0].name.lastIndexOf(".")),t({task:"addSubchart",params:{chartSeries:n,chartName:r,reset:!0,id:ut()()}}),o((function(e){return da(da([],e),[{type:"success",text:"Graph successfully loaded"}])})),[3,4];case 3:return i=l.sent(),console.error("Error - could not parse provided local file",i),o((function(e){return da(da([],e),[{type:"error",text:"Error - could not parse provided local file"}])})),[3,4];case 4:return[2]}}))}))}}),f.a.createElement(pe.a,{sx:{pt:4}},f.a.createElement(be,{text:"CSV from device",id:"1",iconPath:he.s,iconColor:r.palette.secondary.contrastText,onClick:g}),f.a.createElement(be,{text:"CSV from URL",id:"2",iconPath:he.O,iconColor:r.palette.secondary.contrastText,onClick:v}),d?f.a.createElement("div",null,f.a.createElement(Ue.a,{helperText:"Enter/Paste URL",fullWidth:!0,onKeyUp:function(e){"Enter"===e.key&&"keyup"===e.type&&h()},value:u,onChange:function(e){return p(e.target.value)},sx:{p:1,pt:2,boxSizing:"border-box"},InputProps:{sx:{boxSizing:"border-box",pr:0},endAdornment:f.a.createElement($t.a,{position:"end"},f.a.createElement(Te.a,{direction:"row"},f.a.createElement(Pe.a,{onClick:h,size:"small"},f.a.createElement(ge.Icon,{path:he.d,size:1})),f.a.createElement(Pe.a,{onClick:m},f.a.createElement(ge.Icon,{path:he.m,size:1}))))}})):null))},pa=a(587),ha=a(605),va=function(e){var t=e.location,a=e.submenuContent,n=e.theme,o=e.onNavigate,r=e.amtIndicators;return f.a.createElement(Te.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},a,r>0?f.a.createElement(pa.a,{value:"indicatorModifyMode",exclusive:!0,size:"small"},f.a.createElement(ha.a,{value:"addIndicator",sx:{"&:hover":{background:"indicators"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"indicators"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===o||void 0===o||o("indicators")}},f.a.createElement(C.a,null," Add")),f.a.createElement(ha.a,{value:"editIndicator",sx:{"&:hover":{background:"editIndicator"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomRightRadius:50,borderTopRightRadius:50,background:"editIndicator"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===o||void 0===o||o("editIndicator")}},"Edit")):null)},ma={name:"EMA",category:"Average",params:[{name:"period",val:10},{name:"dataSeriesKey",val:void 0}],default:{params:[{name:"period",val:10},{name:"dataSeriesKey",val:void 0}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){for(var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=e.dataSeriesKey,l="string"===typeof i?i:"close",d="number"===typeof i?i:0,c=function(e){var t;return M(e)?l in e?e[l]:e.close:j(e)&&(null===(t=e.prices)||void 0===t?void 0:t[d])||0},s=n||[],u=null!==(t=null===s||void 0===s?void 0:s.length)&&void 0!==t?t:0;u<a.length;u++)if(u<r-1)s.push({prices:[null],date:a[u].date});else if(u===r-1){for(var p=0,h=0;h<r;h++){p+=c(a[h])}p/=r,s.push({prices:[p],date:a[u].date})}else{var v=2/(r+1),m=(c(a[u])-s[u-1].prices[0])*v+s[u-1].prices[0];s.push({prices:[m],date:a[u].date})}return s}},fa=function(){return(fa=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ga=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},ya=function(){return(ya=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xa={name:"RSI",category:"Oszillator",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0,decimals:2,fixedYScale:[0,100],graphProps:[{name:"areaTresholds",val:{lower:25,upper:75}}]},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a,n,o,r=e.chartData,i=e.prevData,l=e.period,d=void 0===l?14:l,c=i||[],s=i.length;s<r.length;s++)if(0!==s){var u=r[s],p=r[s-1],h=u.close-p.close,v=h>0?h:0,m=h<0?-h:0,f=1/d,g=null===(a=null===(t=null===c||void 0===c?void 0:c[(null===c||void 0===c?void 0:c.length)-1])||void 0===t?void 0:t.prices)||void 0===a?void 0:a[1],y=null===(o=null===(n=null===c||void 0===c?void 0:c[(null===c||void 0===c?void 0:c.length)-1])||void 0===n?void 0:n.prices)||void 0===o?void 0:o[2];if(s<d||X(g)||X(y))c.push({prices:[null,v,m],date:r[s].date});else{var x=v*f+(1-f)*g,b=m*f+(1-f)*y,k=0===b?100:100-100/(1+x/b);c.push({prices:[k,x,b],date:r[s].date})}}else c.push({prices:[null,null,null],date:r[s].date});return c}},ba=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},ka=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},wa={name:"KAMA",category:"Average",params:[{name:"erPeriod",val:21},{name:"fastEmaPeriod",val:2},{name:"slowEmaPeriod",val:30}],default:{params:[{name:"erPeriod",val:21},{name:"fastEmaPeriod",val:2},{name:"slowEmaPeriod",val:30}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){var t,a=e.chartData,n=e.prevData,o=e.erPeriod,r=void 0===o?20:o,i=e.fastEmaPeriod,l=void 0===i?2:i,d=e.slowEmaPeriod,c=void 0===d?30:d,s=ka([],n);return a.slice(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0).forEach((function(e,t){var o,i,d,u,p,h=t+(null!==(o=null===n||void 0===n?void 0:n.length)&&void 0!==o?o:0),v={prices:[null],date:e.date};if(h<r-1+1)s.push(v);else{var m=a[h],f=function(e){var t;return X(e)?null:M(e)?e.close:j(e)?null===(t=e.prices)||void 0===t?void 0:t[0]:null},g=f(m);if(g){var y=Math.abs(g-(null!==(i=f(null===a||void 0===a?void 0:a[h-r+1]))&&void 0!==i?i:g)),x=a.slice(h-r,h+1).map((function(e,t,a){if(0===t)return null;var n=f(e),o=f(a[t-1]);return X(n)||X(o)?null:Math.abs(n-o)})).filter((function(e){return null!==e})).reduce((function(e,t,a){return e+t}),0),b=0!==x?y/x:0,k=2/(c+1),w=2/(l+1),T=Math.pow(b*(w-k)+k,2),C=null!==(p=null===(u=null===(d=null===s||void 0===s?void 0:s[h-1])||void 0===d?void 0:d.prices)||void 0===u?void 0:u[0])&&void 0!==p?p:f(null===a||void 0===a?void 0:a[h-1]),I=X(C)?g:C+T*(g-C);s.push({prices:[I],date:e.date})}else s.push(v)}})),s}},Ta=[{name:"SMA",category:"Average",params:[{name:"period",val:10}],default:{params:[{name:"period",val:10}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=ba([],n);return a.slice(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0).forEach((function(e,t){var o,l=t+(null!==(o=null===n||void 0===n?void 0:n.length)&&void 0!==o?o:0);if(l<r-1)i.push({prices:[null],date:e.date});else{var d=0;a.slice(l-r+1,l+1).forEach((function(e,t,a){M(e)?d+=e.close:j(e)&&(d+=e.prices[0]?e.prices[0]:0)})),i.push({prices:[d/r],date:e.date})}})),i}},ma,xa,{name:"MACD",category:"Oszillator",params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],default:{params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],newSubchart:!0},graphTypes:[{type:"line",name:"MACD"},{type:"line",name:"Signal"},{type:"bars",name:"Histogram"}],indicatorFnType:"chartSeries",indicatorFn:function(e){var t,a,n,o,r,i,l,d=e.chartData,c=e.prevData,s=e.periodEmaShort,u=void 0===s?12:s,p=e.periodEmaLong,h=void 0===p?26:p,v=e.periodSignal,m=void 0===v?9:v,f=ma.indicatorFn,g=c?{macd:c.map((function(e,t){var a;return fa(fa({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[0]]})})),signal:c.map((function(e,t){var a;return fa(fa({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[1]]})})),emaShort:c.map((function(e){var t;return fa(fa({},e),{prices:[null===(t=null===e||void 0===e?void 0:e.prices)||void 0===t?void 0:t[3]]})})),emaLong:c.map((function(e,t){var a;return fa(fa({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[4]]})}))}:null,y=f({chartData:d,prevData:null!==(t=null===g||void 0===g?void 0:g.emaShort)&&void 0!==t?t:[],period:u}),x=f({chartData:d,prevData:null!==(a=null===g||void 0===g?void 0:g.emaLong)&&void 0!==a?a:[],period:h}),b=ga(ga([],null!==(n=null===g||void 0===g?void 0:g.macd)&&void 0!==n?n:[]),y.slice(null!==(r=null===(o=null===g||void 0===g?void 0:g.macd)||void 0===o?void 0:o.length)&&void 0!==r?r:0).map((function(e,t){var a,n,o=t+(null!==(n=null===(a=null===g||void 0===g?void 0:g.macd)||void 0===a?void 0:a.length)&&void 0!==n?n:0),r=x[o].prices[0],i=e.prices[0];return{prices:[X(i)||X(r)?null:i-r],date:d[o].date,priceLabels:["MACD"]}}))),k=f({chartData:b,prevData:null!==(i=null===g||void 0===g?void 0:g.signal)&&void 0!==i?i:[],period:m});return ga(ga([],c),b.slice(null!==(l=null===c||void 0===c?void 0:c.length)&&void 0!==l?l:0).map((function(e,t){var a,n=null!==(a=t+(null===c||void 0===c?void 0:c.length))&&void 0!==a?a:0,o=e.prices[0],r=k[n].prices[0],i=null===o||null===r?null:o-r,l=y[n].prices[0],d=x[n].prices[0];return fa(fa({},e),{prices:[o,r,i,l,d]})})))}},{name:"ATR",category:"Volatility",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=n||[],l=null!==(t=0+(null===n||void 0===n?void 0:n.length))&&void 0!==t?t:0;l<a.length;l++)if(l<r)i.push({prices:[null],date:a[l].date});else{for(var d=0,c=l-r+1;c<=l;c++){var s=a[c],u=a[c-1],p=0;if(O(s)&&O(u)){var h=s.high-s.low,v=Math.abs(s.high-u.close),m=Math.abs(s.low-u.close);p=Math.max(h,v,m)}else{p=Math.abs(s.close-u.close)}d+=p}i.push({prices:[d/r],date:a[l].date})}return i}},{name:"Volume",category:"Volume",params:[],default:{params:[],newSubchart:!0,decimals:0},graphTypes:[{type:"bars"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t=e.chartData,a=[],n=0;n<t.length;n++){var o=t[n];Z(o)?a.push({prices:[o.volume],date:o.date}):a.push({prices:[0],date:o.date})}return a}},{name:"OBV",category:"Volume",graphTypes:[{type:"line"}],params:[],default:{params:[],newSubchart:!0,decimals:0},indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a,n=e.chartData,o=e.prevData,r=o||[],i=null===r||void 0===r?void 0:r.length;i<n.length;i++){var l=n[i];if(0===i&&Z(l))r.push({prices:[l.volume],date:l.date});else{var d=n[i-1],c=null===r||void 0===r?void 0:r[i-1];if(Z(l)&&Z(d)){var s=(null!==(a=null===(t=null===c||void 0===c?void 0:c.prices)||void 0===t?void 0:t[0])&&void 0!==a?a:0)+Math.sign(l.close-d.close)*l.volume;r.push({prices:[s],date:n[i].date})}else r.push({prices:[null],date:n[i].date})}}return r}},wa],Ca=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Ia=[{name:"Average",icon:he.q},{name:"Oszillator",icon:he.k},{name:"Volatility",icon:he.c},{name:"Volume",icon:he.G}],Sa=function(e){var t,a,n=e.subCharts,o=e.onNavigate,r=e.location,i=e.Dispatch,l=e.settings,d=e.data,c=f.a.useState(!1),s=c[0],u=c[1],p=f.a.useState(0),h=p[0],v=p[1],m=null===n||void 0===n?void 0:n[0].yaxis[0].graphs[0],g=d.filter((function(e){return"indicator"===e.type})).length,y=d.find((function(e){return e.id===m.dataId})),x=null!==(t=null===y||void 0===y?void 0:y.data)&&void 0!==t?t:[],b=null!==(a=null===y||void 0===y?void 0:y.name)&&void 0!==a?a:"",k=null===y||void 0===y?void 0:y.id,w=Object(ue.a)(),T=f.a.useMemo((function(){return(null===l||void 0===l?void 0:l.additionalIndicators)?Ca(Ca([],Ta),l.additionalIndicators):Ta}),[null===l||void 0===l?void 0:l.additionalIndicators]),I=n.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,n){var o=d.find((function(t){return t.id===e.dataId})),r="indicator"===(null===o||void 0===o?void 0:o.type)?o.indicator.graphTypes:null,i=r?r.length:1;return Array(i).fill(0).map((function(i,l){var d,c=null===r||void 0===r?void 0:r[l],s=(null===c||void 0===c?void 0:c.name)?" - "+c.name:"";return{name:null!==(d=null===o||void 0===o?void 0:o.name)&&void 0!==d?d:"Graph No."+n,subchartIdx:t,yaxisIdx:a,graphIdx:n,graphLineIdx:l,fullName:"indicator"===(null===o||void 0===o?void 0:o.type)?o.fullName+s+"":null,type:e.type,dataId:e.dataId}})).flat()})).flat()})).flat()})).flat(),S=T.filter((function(e){var t,a;return"indicator"===(null===(t=null===I||void 0===I?void 0:I[h])||void 0===t?void 0:t.type)&&"dataSeries"===e.indicatorFnType||"chart"===(null===(a=null===I||void 0===I?void 0:I[h])||void 0===a?void 0:a.type)}));return f.a.createElement(f.a.Fragment,null,g>0&&f.a.createElement(va,{location:r,onNavigate:o,theme:w,amtIndicators:g,submenuContent:f.a.createElement(f.a.Fragment,null,f.a.createElement(Ue.a,{select:!0,SelectProps:{SelectDisplayProps:{style:{padding:8,paddingRight:32,paddingLeft:16}}},variant:"outlined",InputProps:{sx:{borderRadius:"18px"}},label:f.a.createElement(C.a,{color:"text.secondary"},"Source Graph"),value:h,onChange:function(e){var t="number"===typeof e.target.value?e.target.value:parseInt(e.target.value,10);isNaN(t)||v(t)}},I.map((function(e,t){var a;return f.a.createElement(Se.a,{value:t,key:"srcGraph-"+t},null!==(a=null===e||void 0===e?void 0:e.fullName)&&void 0!==a?a:e.name)}))),f.a.createElement(Pe.a,{size:"small",sx:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return u((function(e){return!e}))}},f.a.createElement(ge.Icon,{path:s?he.t:he.K,size:1,color:w.palette.primary.contrastText})))}),f.a.createElement(Ke,null,s?S.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){return f.a.createElement(ze,{key:"cat-indi-"+t,nodeId:(t+1).toString(),labelText:e.name,typographyVariant:"body1",onClick:(a=e,function(e){a.default.newSubchart?i({task:"addSubchart",params:{chartSeries:x,chartName:b,id:ut()(),indicator:a,indSrcId:k}}):i({task:"addGraph",params:{chartSeries:x,chartName:b,id:ut()(),indicator:a,subchartIdx:0,indSrcId:k}})})});var a})):Ia.map((function(e,t){var a=S.filter((function(t){return t.category===e.name}));return a.length>0&&f.a.createElement(ze,{key:"cat-"+t,nodeId:t.toString(),labelText:e.name,bgColorSelected:w.palette.primary.light,color:"#ff0000",labelIcon:f.a.createElement("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:w.palette.secondary.main,minWidth:32,height:32}},f.a.createElement(ge.Icon,{path:e.icon,size:"32px",color:w.palette.secondary.contrastText}))},a.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,a){return f.a.createElement(ze,{key:"cat-"+t+"-indi-"+a,nodeId:(100*(t+1)+(a+1)).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){var t,a,n=d.find((function(e){var t;return e.id===(null===(t=I[h])||void 0===t?void 0:t.dataId)}));if(n){var o=null!==(t=n.data)&&void 0!==t?t:[],r=null!==(a=n.name)&&void 0!==a?a:"Graph No."+(null===I||void 0===I?void 0:I[h].graphIdx);(null===e||void 0===e?void 0:e.default.newSubchart)?i({task:"addSubchart",params:{dataSeries:o,name:r,indicator:e,indSrcId:n.id,id:ut()()}}):i({task:"addGraph",params:{dataSeries:o,name:r,id:ut()(),indicator:e,subchartIdx:null===I||void 0===I?void 0:I[h].subchartIdx,indSrcId:n.id,indSrcLineIdx:null===I||void 0===I?void 0:I[h].graphLineIdx}})}}})})))}))))},Ea=a(588),Pa=a(562),Oa=function(){return(Oa=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ma=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Za="undefined"!==typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches,ja={isDrawing:!1,xy:[],params:[]},Da={isHovering:!1,move:{x:0,pixX:0,pixY:0,snapDatasets:[],subchartIdx:null,xDateString:"",pixXSnap:0,pixXUnlimSnap:0,xUnlimited:0},click:{clickedSubchartIdx:null}},za={isDarkMode:!1,borderColor:"#000",backgroundColor:"#fff",crosshair:{useCrosshair:!0,strokeColor:"#000",xMarkerBackgroundColor:"#fff",xMarkerFontName:"Arial",xMarkerFontSize:14,xMarkerTextColor:"#000",xMarkerStrokeColor:"#000",yMarkerBackgroundColor:"#fff",yMarkerStrokeColor:"#000",yMarkerTextColor:"#000",yMarkerFontName:"Arial",yMarkerFontSize:14},grid:{useGridX:!0,useGridY:!0,strokeColor:"rgba(51,51,51, 0.2)",strokeStyle:"FUTURE"},yaxis:{widthYAxis:80,widthTickmarkLines:5,fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:14,fontName:"Arial"},xaxis:{heightXAxis:36,heightTickMarkLines:8,fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:14,fontName:"Arial"},draw:{strokeColor:"red",anchorColor:"#333"}},Fa=Oa(Oa({},za),{isDarkMode:!0,crosshair:Oa(Oa({},za.crosshair),{strokeColor:"#bbb"}),borderColor:"#666",draw:{strokeColor:"red",anchorColor:"#ccc"},grid:Oa(Oa({},za.grid),{strokeColor:"rgba(153,153,153, 0.08)"}),yaxis:Oa(Oa({},za.yaxis),{fontColor:"#bbb",strokeColor:"#bbb"}),backgroundColor:"#333"}),Xa={data:[],subCharts:[],fullscreen:!1,draw:ja,containerSize:{top:0,left:0,width:300,height:300,init:!1},pointer:{isHovering:!1,move:{isMoving:!1,xy:[0,0]},wheel:{isWheeling:!1,delta:[0,0]},dragPointerUp:{isDragPointerUp:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0]},drag:{isDragging:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0],delta:[0,0],ctrlKey:!1},pinch:{isPinching:!1,first:!1,movementInitial:[0,0],origin:[0,0]}},calc:{subcharts:[],xaxis:{totalTranslatedX:0,scaledWidthPerTick:10,xStart:0,xEnd:0,xLast:0,xUnlimited:0,pixXStart:0,pixXEnd:0,optChartPeriod:null,initialWidthPerTick:10,curTicks:[]},pointer:Da},style:za},Ya=Oa(Oa({},Xa),{style:Fa}),Ua=["#666","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],Aa=["#bbb","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],Ra=function(e,t){return e[t%e.length]},Wa={candleStrokeColor:"transparent",candleWickStrokeColor:"#666",candleDownColor:"#c70039",candleUpColor:"#009688"},La={strokeColor:["#666"]},Ga={strokeColor:["#bbb"]},Na=function(e,t,a,n){return"indicator"===e?(console.log("IL",n,!n||n<=1),!n||n<=1?{strokeColor:[Ra(t?Aa:Ua,null!==a&&void 0!==a?a:0)]}:{strokeColor:(t?Aa:Ua).slice(0,n)}):Oa(Oa({},Wa),{strokeColor:Ra(t?Aa:Ua,null!==a&&void 0!==a?a:0)})},Va=function(){return(Va=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ha=function(e){var t=e.isDesktop,a=e.onClose,n=e.location,o=e.fullscreen,r=e.headerText,i=e.onNavigate,l=e.Dispatch,d=e.settings,c=e.content,s=Object(ue.a)(),u=f.a.useState(null),p=u[0],h=u[1],v=f.a.useState(null),m=v[0],g=v[1],y=f.a.useMemo((function(){var e;return null!==(e=d.themes)&&void 0!==e?e:[Va(Va({},za),{name:"light"}),Va(Va({},Fa),{name:"dark"})]}),[]),x=f.a.useCallback((function(){i("menu")}),[i]),b=f.a.useCallback((function(){l({task:"setGeneralProp",params:{prop:"toggleFullscreen"}})}),[l]),k=f.a.useCallback((function(e,t){"theme"===t&&h(e.currentTarget),"clear"===t&&g(e.currentTarget)}),[]),w=f.a.useCallback((function(){h(null),g(null)}),[]),T=f.a.useCallback((function(e){h(null);var t=y.find((function(t){return t.name===e}));t&&l({task:"setTheme",params:{theme:t}})}),[l,y]);return f.a.createElement(Ea.a,{anchor:t?"left":"bottom",open:!!n,disablePortal:o,onBackdropClick:a,onClose:a,PaperProps:{sx:t?{border:"1px solid #666",borderBottomRightRadius:10,borderTopRightRadius:10,minWidth:300,height:"100%"}:{border:"1px solid #666",borderTopLeftRadius:10,borderTopRightRadius:10,maxHeight:"75%",minHeight:"33%"}}},f.a.createElement(Ee.a,{sx:{position:"relative",top:0,height:"100%"}},f.a.createElement(Ee.a,{sx:{position:"sticky",top:0,height:48,width:"100%",bgcolor:"primary.main",p:1,boxSizing:"border-box",zIndex:1}},f.a.createElement(Te.a,{direction:"row",sx:{height:32,justifyItems:"center",justifyContent:"center",verticalAlign:"middle"}},f.a.createElement(C.a,{component:"div",variant:"h5",sx:{flexGrow:1,pt:.5,pr:1}},r||""),f.a.createElement(Ee.a,{sx:{margin:"-5px"}},!!n&&"menu"!==n&&f.a.createElement(Pe.a,{size:"small",onClick:x},f.a.createElement(ye.a,{path:he.z,size:"32px",color:s.palette.primary.contrastText})),!window.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&f.a.createElement(Pe.a,{size:"small",onClick:b},f.a.createElement(ye.a,{path:o?he.w:he.v,size:"32px",color:s.palette.primary.contrastText})),f.a.createElement(Pe.a,{size:"small",onClick:a},f.a.createElement(ye.a,{path:he.m,size:"32px",color:s.palette.primary.contrastText}))))),f.a.createElement(Ee.a,{sx:{position:"relative",top:0,mb:t?"48px":"96px",height:t?"calc(100% - 96px)":"auto",overflowY:"auto",p:1}},c),f.a.createElement(Ee.a,{sx:{position:t?"absolute":"fixed",bottom:0,height:48,width:"100%",bgcolor:"primary.main"}},f.a.createElement(Te.a,{direction:"row",sx:{alignItems:"center",alignContent:"center",pt:.5}},f.a.createElement(Ee.a,{sx:{flexGrow:1}}),f.a.createElement(Pe.a,{id:"clearMenuButton",size:"small",onClick:function(e){null===k||void 0===k||k(e,"clear")}},f.a.createElement(ye.a,{path:he.h,size:"32px",color:s.palette.primary.contrastText})),f.a.createElement(Ie.a,{id:"clear-menu",anchorEl:m,anchorOrigin:{horizontal:"center",vertical:"top"},transformOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(m),onClose:w,MenuListProps:{"aria-labelledby":"clearMenuButton"}},f.a.createElement(C.a,{variant:"h6",component:"div",sx:{textAlign:"center",pb:1,pl:1,pr:1,color:"primary.main"}},"Clear Chart"),f.a.createElement(Pa.a,null),["all","indicators","tools"].map((function(e,t){return f.a.createElement(Se.a,{key:"clearMenuItem-"+t,onClick:function(){l({task:"clearChart",params:{mode:e}})}},e)}))),f.a.createElement(Pe.a,{id:"themeMenuButton",size:"small",onClick:function(e){null===k||void 0===k||k(e,"theme")}},f.a.createElement(ye.a,{path:he.L,size:"32px",color:s.palette.primary.contrastText})),f.a.createElement(Ie.a,{id:"theme-menu",anchorEl:p,anchorOrigin:{horizontal:"center",vertical:"top"},transformOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(p),onClose:w,MenuListProps:{"aria-labelledby":"themeMenuButton"}},f.a.createElement(C.a,{variant:"h6",component:"div",sx:{textAlign:"center",pb:1,pl:1,pr:1,color:"primary.main"}},"Set Theme"),f.a.createElement(Pa.a,null),y.map((function(e,t){return f.a.createElement(Se.a,{key:"themeMenuItem-"+t,onClick:function(){T(e.name)}},e.name)}))),f.a.createElement(Pe.a,{size:"small",onClick:function(){null===a||void 0===a||a()}},f.a.createElement(ye.a,{path:he.m,size:"32px",color:s.palette.primary.contrastText}))))))},Ba=function(e){var t=e.subCharts,a=e.Dispatch,n=e.data,o=e.location,r=e.onNavigate,i=Object(ue.a)(),l=n.filter((function(e){return"indicator"===e.type})).length;return f.a.createElement(f.a.Fragment,null,f.a.createElement(va,{location:o,onNavigate:r,theme:i,amtIndicators:l}),f.a.createElement(Ke,null,t.map((function(e,o){return e.yaxis.map((function(e,r){return e.graphs.map((function(e,i){return D(e)?f.a.createElement(Xt,{key:"editIndicator-sub-"+o+"-yaxis-"+r+"-graph-"+i,subCharts:t,Dispatch:a,subchartIdx:o,yaxisIdx:r,graphIdx:i,data:n}):null}))}))}))))},Ka=function(e){var t=e.location,a=e.submenuContent,n=e.theme,o=e.onNavigate,r=e.subCharts.map((function(e){return e.yaxis.map((function(e){return e.tools.length}))})).flat().reduce((function(e,t){return e+t}));return f.a.createElement(Te.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},a,r>0?f.a.createElement(pa.a,{value:"toolModifyMode",exclusive:!0,size:"small"},f.a.createElement(ha.a,{value:"addTool",sx:{"&:hover":{background:"tools"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"tools"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===o||void 0===o||o("tools")}},f.a.createElement(C.a,null," Add")),f.a.createElement(ha.a,{value:"editTool",sx:{"&:hover":{background:"editTool"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomRightRadius:50,borderTopRightRadius:50,background:"editTool"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===o||void 0===o||o("editTool")}},"Edit")):null)},_a=[{name:"Lines",icon:he.H},{name:"Measure",icon:he.n},{name:"Upcoming",icon:he.I}],qa=[{name:"trendline",type:"trendline",category:"Lines"},{name:"horizontal",type:"hline",category:"Lines"},{name:"vertical",type:"vline",category:"Lines"}],Ja=function(e,t){e({task:"draw",params:{type:t,subchartIdx:0}})},$a=function(e){var t=e.Dispatch,a=e.onNavigate,n=e.subCharts,o=f.a.useState(!1),r=o[0],i=o[1],l=Object(ue.a)();return f.a.createElement(f.a.Fragment,null,f.a.createElement(Ka,{subCharts:n,location:"tools",onNavigate:a,theme:l,submenuContent:f.a.createElement(f.a.Fragment,null,f.a.createElement(Pe.a,{size:"small",sx:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return i((function(e){return!e}))}},f.a.createElement(ye.a,{path:r?he.t:he.K,size:1,color:l.palette.primary.contrastText})))}),f.a.createElement(Ke,null,r?qa.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,n){return f.a.createElement(ze,{key:"cat-tool-"+n,nodeId:(n+1).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){Ja(t,e.type),null===a||void 0===a||a(null)}})})):_a.map((function(e,n){return f.a.createElement(ze,{key:"cat-"+n,nodeId:n.toString(),labelText:e.name,labelIcon:f.a.createElement("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:l.palette.secondary.main,minWidth:32,height:32}},f.a.createElement(ye.a,{path:e.icon,size:"32px",color:l.palette.secondary.contrastText})),bgColorSelected:l.palette.primary.light},qa.filter((function(t){return t.category===e.name})).sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,o){return f.a.createElement(ze,{key:"cat-"+n+"-tool-"+o,nodeId:(100*(n+1)+(o+1)).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){Ja(t,e.type),null===a||void 0===a||a(null)}})})))}))))},Qa=function(e){var t=e.subCharts,a=e.Dispatch,n=e.onNavigate,o=Object(ue.a)();return f.a.createElement(f.a.Fragment,null,f.a.createElement(Ka,{subCharts:t,location:"editTool",onNavigate:n,theme:o}),f.a.createElement(Ke,null,t.map((function(e,n){return e.yaxis.map((function(e,o){return e.tools.map((function(e,r){return f.a.createElement(Vt,{key:"editIndicator-sub-"+n+"-yaxis-"+o+"-graph-"+r,subCharts:t,Dispatch:a,subchartIdx:n,yaxisIdx:o,toolIdx:r})}))}))}))))},en=f.a.memo((function(e){var t=e.onClose,a=e.ChartMenuState,n=e.subCharts,o=e.style,r=e.onNavigate,i=e.Dispatch,l=e.onSettingsExpand,d=e.fullscreen,c=e.settings,s=e.data,u=Object(se.a)("(min-width:600px)"),p=[{location:"menu",headerText:"Chart Menu",component:function(){return f.a.createElement(ke,{onNavigate:r})}},{location:"chart",headerText:"Chart",component:function(){return f.a.createElement(ua,{Dispatch:i})}},{location:"indicators",headerText:"Add Indicator",component:function(){return f.a.createElement(Sa,{subCharts:n,onNavigate:r,location:a.location,Dispatch:i,settings:c,data:s})}},{location:"editIndicator",headerText:"Edit Indicator",component:function(){return f.a.createElement(Ba,{subCharts:n,onNavigate:r,location:a.location,Dispatch:i,settings:c,data:s})}},{location:"tools",headerText:"Add Tool",component:function(){return f.a.createElement($a,{subCharts:n,Dispatch:i,onNavigate:r})}},{location:"editTool",headerText:"Edit Tool",component:function(){return f.a.createElement(Qa,{subCharts:n,Dispatch:i,onNavigate:r})}},{location:"settings",headerText:"Settings",component:function(){return f.a.createElement(Jt,{ChartMenuState:a,subCharts:n,style:o,Dispatch:i,onNavigate:r,onSettingsExpand:l,data:s})}}].find((function(e){return e.location===a.location}));if(!a.location||!p)return null;var h=p.component,v=p.headerText;return console.log("Chartmenu renders"),f.a.createElement(Ha,{headerText:v,isDesktop:u,settings:c,location:a.location,onNavigate:r,Dispatch:i,fullscreen:d,onClose:t,content:f.a.createElement(h,null)})})),tn=f.a.memo((function(e){var t=e.bottomY,a=e.onOpenClick;return f.a.createElement(Ee.a,{sx:{position:"absolute",top:t-48-10,left:10}},f.a.createElement(Ce.a,{color:"primary",variant:"contained",onClick:a,sx:{width:48,minWidth:48,height:48,textTransform:"none",borderRadius:2,opacity:.8,padding:0}},f.a.createElement(ge.Icon,{path:he.B,size:"48px",color:"#fff"})))})),an=function(e){var t=e.dataset,a=e.name,n=e.decimals,o=e.onClick,r=e.subchartIdx,i=e.graphIdx,l=e.graphTypes,d=f.a.useCallback((function(e){null===o||void 0===o||o(e,r,i)}),[o,r,i]);return t?f.a.createElement(Ce.a,{style:{textTransform:"none",textAlign:"left"},onClick:d,startIcon:f.a.createElement(ye.a,{path:j(t)?he.k:he.l,size:1})},j(t)?f.a.createElement(C.a,null,a+":"+(t.prices.map((function(e,t){var a,o;return e&&n&&["line","bars"].includes(null!==(o=null===(a=null===l||void 0===l?void 0:l[t])||void 0===a?void 0:a.type)&&void 0!==o?o:"")?null===e||void 0===e?void 0:e.toFixed(n):null})).filter((function(e){return null!==e})).join(", ")||"")):f.a.createElement(C.a,{variant:"body1"},O(t)?a+"\n                O:"+t.open.toFixed(n)+"\n                H:"+t.high.toFixed(n)+"\n                L:"+t.low.toFixed(n)+"\n                C:"+t.close.toFixed(n):a+"\n                C:"+t.close.toFixed(n))):null},nn=function(e){var t=e.data,a=e.calcPointer,n=e.calcSubcharts,o=e.subcharts,r=e.onGraphLabelClick;return f.a.createElement(f.a.Fragment,null,o.map((function(e,o){return f.a.createElement(Ee.a,{key:"chart-label-subarea-"+o,sx:{position:"absolute",top:e.top}},e.yaxis[0].graphs.map((function(e,i){var l,d,c,s,u,p,h,v,m,g,y,x,b=t.find((function(t){return t.id===e.dataId})),k=null!==(l=null===b||void 0===b?void 0:b.data)&&void 0!==l?l:[],w=null!==(d=null===b||void 0===b?void 0:b.decimals)&&void 0!==d?d:0,T=null===(p=null===(u=null===(s=null===(c=null===n||void 0===n?void 0:n[o])||void 0===c?void 0:c.yaxis)||void 0===s?void 0:s[0])||void 0===u?void 0:u.graphs)||void 0===p?void 0:p[i];if(!(null===T||void 0===T?void 0:T.lastDataset)||!b)return null;var C=D(e)&&"indicator"===b.type&&b.indicator.params.length>0?b.indicator.name+"("+b.indicator.params[0].val+")":D(e)&&"indicator"===b.type&&0===b.indicator.params.length?""+b.indicator.name:b.name,I=(a.isHovering&&o===(null===a||void 0===a?void 0:a.move.subchartIdx)&&(null===(v=null===(h=null===a||void 0===a?void 0:a.move.snapDatasets)||void 0===h?void 0:h[0])||void 0===v?void 0:v.graphIdx)===i?null===(y=null===(g=null===(m=null===a||void 0===a?void 0:a.move)||void 0===m?void 0:m.snapDatasets)||void 0===g?void 0:g[0])||void 0===y?void 0:y.data:a.isHovering&&null!==a.move.x?k[null===a||void 0===a?void 0:a.move.x]:T.lastDataset.data)||T.lastDataset.data;return f.a.createElement(an,{key:"chart-label-"+o+"-"+i,onClick:r,subchartIdx:o,graphIdx:i,name:C,dataset:I,decimals:D(e)&&"indicator"===b.type&&void 0!==b.indicator.default.decimals?b.indicator.default.decimals:w,graphTypes:"indicator"===(null===b||void 0===b?void 0:b.type)?null===(x=null===b||void 0===b?void 0:b.indicator)||void 0===x?void 0:x.graphTypes:void 0})})))})))},on=function(){return(on=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},rn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},ln=function(e){var t,a,n,o=e.subcharts,r=e.draw,i=e.calc,l=e.containerSize,d=e.drawStyle,c=i.pointer,s=i.subcharts,u=i.xaxis,p=i.yToPix,h=i.pixToY,v=u.xToPix,m=r.isDrawing&&r.type||null,g=Nt.find((function(e){return e.type===m})),y=null===g||void 0===g?void 0:g.component,x={};null===(t=null===g||void 0===g?void 0:g.params)||void 0===t||t.forEach((function(e){x[e.name]=e.val}));var b=null===(n=null===(a=null===c||void 0===c?void 0:c.move.snapDatasets)||void 0===a?void 0:a[0])||void 0===n?void 0:n.pixYSnap,k=c.move.subchartIdx,w=f.a.useMemo((function(){return X(k)?[]:rn(rn([],r.xy.map((function(e){return v&&p?[v(e[0]),p(e[1],k,0)]:e}))),[[c.move.x&&v?null===v||void 0===v?void 0:v(c.move.x):c.move.pixX,b||c.move.pixY]])}),[c.move.x,r.xy,b,c.move.pixX,c.move.pixY,k,v,p]);return r.isDrawing&&y&&!X(k)&&f.a.createElement(y,on({subcharts:o,subchartIdx:k,xy:r.xy,drawPixXy:w,containerSize:l,calcXaxis:u,calcSubcharts:s,yToPix:p,pixToY:h,style:d},x))||null},dn=a(65),cn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},sn=function(){return(sn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},un=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},pn=f.a.forwardRef((function(e,t){var a,n,o,r,i,l,d,c,s,u=e.settings,p=e.ChartState,h=e.Dispatch,v=e.rtTicks,m=void 0===v?[]:v,g=u.disableTheme,y=f.a.useRef(u),x=f.a.useState({location:null,expandedSetting:[]}),E=x[0],P=x[1],O=f.a.useCallback((function(){P((function(e){return sn(sn({},e),{location:"menu"})}))}),[]),M=f.a.useCallback((function(){P((function(e){return sn(sn({},e),{location:null})}))}),[]),Z=f.a.useCallback((function(e){P((function(t){return sn(sn({},t),{location:e})}))}),[]),j=f.a.useCallback((function(e){P((function(t){return t.expandedSetting.includes(e)?sn(sn({},t),{expandedSetting:t.expandedSetting.filter((function(t){return t!==e}))}):sn(sn({},t),{expandedSetting:un(un([],t.expandedSetting),[e])})}))}),[]),z=f.a.useCallback((function(e,t,a){X(t)||X(a)||P({location:"settings",expandedSetting:["graph-sub-"+t+"-y-0-graph-"+a,"sub-"+t]})}),[]),Y=p.style.isDarkMode,R=null===(i=null===(r=null===(o=null===(n=null===(a=null===p||void 0===p?void 0:p.subCharts)||void 0===a?void 0:a[0])||void 0===n?void 0:n.yaxis)||void 0===o?void 0:o[0])||void 0===r?void 0:r.graphs)||void 0===i?void 0:i[0],W="candles"===(null===R||void 0===R?void 0:R.chartType)?A:U,L=p.containerSize.init,G=p.style.xaxis.heightXAxis,N=p.containerSize.width-1,V=p.containerSize.height-1;return f.a.createElement(f.a.Fragment,null,f.a.createElement(dn.a,{styles:Object(dn.b)(sa||(sa=cn(["\n          .ChartContainer {\n            box-sizing: border-box;\n            position: relative;\n            top: 0;\n            z-index: 1000;\n            width: 100%;\n            height: 100%;\n            background: ",";\n          }\n          .ChartKonvaStage {\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n          }\n        "],["\n          .ChartContainer {\n            box-sizing: border-box;\n            position: relative;\n            top: 0;\n            z-index: 1000;\n            width: 100%;\n            height: 100%;\n            background: ",";\n          }\n          .ChartKonvaStage {\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n          }\n        "])),p.style.backgroundColor)}),f.a.createElement(b,{theme:Y?w:k,disableTheme:g},f.a.createElement("div",{ref:t,className:"ChartContainer"},R&&W&&L?f.a.createElement(f.a.Fragment,null,f.a.createElement(S.f,{width:p.containerSize.width,height:p.containerSize.height,className:"ChartKonvaStage",listening:!1},f.a.createElement(S.b,{listening:!1},f.a.createElement(S.d,{name:"xaxis-rect",listening:!1,x:.5,y:V-G+.5,width:N,height:G,fill:p.style.xaxis.fillColor,stroke:p.style.borderColor,strokeWidth:1}),p.subCharts.map((function(e,t){return f.a.createElement(f.a.Fragment,{key:"subchart-border-"+t},f.a.createElement(S.d,{name:"subchart rect "+t,listening:!1,x:.5,y:e.top+.5,width:N,height:e.bottom-e.top,stroke:p.style.borderColor,strokeWidth:1}))}))),f.a.createElement(S.b,{listening:!1},0 in p.subCharts?f.a.createElement(W,{subCharts:p.subCharts,calcXaxis:p.calc.xaxis,calcSubcharts:p.calc.subcharts,yToPix:p.calc.yToPix,pixToY:p.calc.pixToY,subchartIdx:0,yaxisIdx:0,graphIdx:0}):null,p.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,a){var n,o,r,i,l,d,c=p.data.find((function(t){return t.id===e.dataId}));return D(e)&&"indicator"===(null===c||void 0===c?void 0:c.type)&&(null!==(o=null===(n=null===c||void 0===c?void 0:c.data)||void 0===n?void 0:n.length)&&void 0!==o?o:0)>0?(null!==(d=null===(l=null===c||void 0===c?void 0:c.data[(null!==(i=null===(r=null===c||void 0===c?void 0:c.data)||void 0===r?void 0:r.length)&&void 0!==i?i:0)-1])||void 0===l?void 0:l.prices)&&void 0!==d?d:[]).map((function(e,n){var o,r,i,l,d,s,u,h=null!==(i=null===(r=null===(o=c.indicator.graphTypes)||void 0===o?void 0:o[n])||void 0===r?void 0:r.type)&&void 0!==i?i:"line",v="line"===h?U:"bars"===h?F:null;if(!v)return null;var m=null===(d=null===(l=c.indicator.default)||void 0===l?void 0:l.graphProps)||void 0===d?void 0:d.findIndex((function(e){return"areaTresholds"===e.name})),g="line"!==h||X(m)||-1===m?{}:{areaTresholds:null===(u=null===(s=c.indicator.default)||void 0===s?void 0:s.graphProps)||void 0===u?void 0:u[m].val};return f.a.createElement(v,sn({key:h+"-chart-s"+t+"-y0-g"+a+"-l"+n,subCharts:p.subCharts,subchartIdx:t,yaxisIdx:0,graphIdx:a,indSeriesIdx:n,calcXaxis:p.calc.xaxis,calcSubcharts:p.calc.subcharts,yToPix:p.calc.yToPix,pixToY:p.calc.pixToY},g))})):null}))}))})),f.a.createElement(de,{calcXaxis:p.calc.xaxis,containerSize:p.containerSize,style:p.style}),f.a.createElement(ce,{calcSubcharts:p.calc.subcharts,containerSize:p.containerSize,style:p.style,subcharts:p.subCharts})),f.a.createElement(S.b,{listening:!1},f.a.createElement(le,{rtTicks:m,style:p.style,containerSize:p.containerSize,xaxis:p.calc.xaxis}),p.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,n){var o,r,i,l,d;if("indicator"===e.type){var c=p.data.find((function(t){return t.id===e.dataId})),s=m.findIndex((function(e){return e.dataId===(null===c||void 0===c?void 0:c.id)}));return-1===s||("indicator"!==(null===c||void 0===c?void 0:c.type)||0===(null!==(r=null===(o=null===c||void 0===c?void 0:c.data)||void 0===o?void 0:o.length)&&void 0!==r?r:0))?null:(null===(i=null===c||void 0===c?void 0:c.indicator)||void 0===i?void 0:i.graphTypes).map((function(e,o){var r,i,l,d,u,h=null!==(l=null===(i=null===(r=c.indicator.graphTypes)||void 0===r?void 0:r[o])||void 0===i?void 0:i.type)&&void 0!==l?l:"line",v="line"===h?U:"bars"===h?F:null;return v?f.a.createElement(v,{key:"rtBars-s"+t+"-y"+a+"-g"+n+"-l"+o,subCharts:p.subCharts,subchartIdx:t,yaxisIdx:a,graphIdx:n,indSeriesIdx:o,calcXaxis:p.calc.xaxis,calcSubcharts:p.calc.subcharts,yToPix:p.calc.yToPix,pixToY:p.calc.pixToY,rtTicks:null!==(u=null===(d=null===m||void 0===m?void 0:m[s])||void 0===d?void 0:d.ticks)&&void 0!==u?u:void 0}):null}))}if("chart"===e.type){var u="candles"===e.chartType?A:"line"===e.chartType?U:null;return u?f.a.createElement(u,{key:"rtBars-s"+t+"-y"+a+"-g"+n,subCharts:p.subCharts,subchartIdx:t,yaxisIdx:a,graphIdx:n,calcXaxis:p.calc.xaxis,calcSubcharts:p.calc.subcharts,rtTicks:null!==(d=null===(l=null===m||void 0===m?void 0:m[0])||void 0===l?void 0:l.ticks)&&void 0!==d?d:void 0}):null}return null}))}))}))),f.a.createElement(S.b,{listening:!1},(null===(l=p.calc.xaxis)||void 0===l?void 0:l.xToPix)&&!!p.calc.yToPix&&p.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.tools.map((function(e,a){var n,o=Nt.find((function(t){return t.type===e.type})),r={};null===(n=e.params)||void 0===n||n.forEach((function(e){r[e.name]=e.val}));var i=o?o.component:null;return i&&o?f.a.createElement(i,sn({key:"trendline-sub-0-y-0-tool-"+a,subcharts:p.subCharts,subchartIdx:t,xy:e.xy,containerSize:p.containerSize,calcXaxis:p.calc.xaxis,calcSubcharts:p.calc.subcharts,yToPix:p.calc.yToPix,pixToY:p.calc.pixToY,style:e.style},r)):null}))}))}))),f.a.createElement(S.b,{listening:!1},p.calc.pointer.isHovering&&!y.current.disablePointerEvents&&p.style.crosshair.useCrosshair?f.a.createElement(ie,{subcharts:p.subCharts,data:p.data,containerSize:p.containerSize,calcPointer:p.calc.pointer,calcXaxis:p.calc.xaxis,style:p.style,pixToY:p.calc.pixToY,rtTicks:m,calcSubcharts:p.calc.subcharts}):null,f.a.createElement(ln,{subcharts:p.subCharts,containerSize:p.containerSize,draw:p.draw,calc:p.calc,drawStyle:p.style.draw}))),f.a.createElement(nn,{data:p.data,subcharts:p.subCharts,calcPointer:p.calc.pointer,calcSubcharts:p.calc.subcharts,onGraphLabelClick:z}),f.a.createElement(tn,{bottomY:null!==(s=null===(c=null===(d=p.subCharts)||void 0===d?void 0:d[p.subCharts.length-1])||void 0===c?void 0:c.bottom)&&void 0!==s?s:0,onOpenClick:O}),f.a.createElement(en,{ChartMenuState:E,onClose:M,onNavigate:Z,subCharts:p.subCharts,xaxis:p.calc.xaxis,style:p.style,fullscreen:p.fullscreen,Dispatch:h,onSettingsExpand:j,settings:y.current,data:p.data})):f.a.createElement("div",{style:{height:"100%",background:p.style.backgroundColor}},f.a.createElement(T.a,{sx:{color:"primary.main"},open:!0,invisible:!0},f.a.createElement(C.a,{variant:"h6",component:"div"},"Chart data is loaded.."),f.a.createElement(I.a,{color:"inherit"}))))))}));pn.displayName="CChart";var hn,vn=a(262),mn=a.n(vn),fn=function(){return(fn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gn=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},yn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},xn=function(e){var t=e.top,a=e.bottom,n=gn(e,["top","bottom"]),o=bn(n);return o?{yaxis:[o],top:t,bottom:a}:null},bn=function(e){var t=e.dataId,a=e.style,n=e.indicator,o=e.type;return"indicator"!==o||n?{graphs:["indicator"===o&&n?wn({dataId:t,style:a}):kn({dataId:t,style:a})],tools:[]}:null},kn=function(e){var t=e.dataId;return{style:e.style,type:"chart",chartType:"candles",dataId:t}},wn=function(e){return{type:"indicator",dataId:e.dataId,style:e.style}},Tn=function(e){var t=e.subCharts,a=e.removeSubchartIdx,n=e.addSubchart,o=e.subchartsHeight,r=150,i=null===n||void 0===n?void 0:n.data,l=X(a)?t:yn(yn([],t.slice(0,a)),t.slice(a+1)),d=l.length+(n?1:0),c=l.map((function(e,t){return e.bottom-e.top>0?e.bottom-e.top:0===t?o-(d-1)*r:r})),s=n?yn(yn([],c),[r]):c,u=s.slice(1).reduce((function(e,t){return e+t}),0);if(o>=250+u){var p=o-s[0]-u,h=s.map((function(e,t){return Math.max((0===t?250:r)-e,0)})),v=h.reduce((function(e,t){return e+t}),0),m=0===v?0:p>=v?1:p/v,f=s.map((function(e,t){return e+Math.floor(m*h[t])})),g=f.slice(1).reduce((function(e,t){return e+t}),0),y=l.reduce((function(e,t,a){return 0===a?[fn(fn({},t),{top:0,bottom:o-g})]:yn(yn([],e),[fn(fn({},t),{top:e[e.length-1].bottom,bottom:e[e.length-1].bottom+f[a]})])}),[]),x=i&&"indicator"===i.type?i.indicator.graphTypes.length:void 0;console.log(x);var b=(i&&0!==y.length?[xn({top:y[y.length-1].bottom,bottom:o,dataId:i.id,style:Na(i.type,n.darkMode,void 0,x),indicator:"indicator"===i.type?i.indicator:void 0,type:i.type})]:[]).filter((function(e){return null!==e}));return yn(yn([],y),b)}var k=o/(s[0]+u),w=s.slice(1).map((function(e){return Math.min(Math.ceil(e*k),150)})),T=w.reduce((function(e,t){return e+t}));y=l.reduce((function(e,t,a){return 0===a?[fn(fn({},t),{top:0,bottom:o-T})]:yn(yn([],e),[fn(fn({},t),{top:e[e.length-1].bottom,bottom:e[e.length-1].bottom+w[a-1]})])}),[]),x=i&&"indicator"===i.type?i.indicator.graphTypes.length:void 0,b=(i&&0!==y.length?[xn({top:y[y.length-1].bottom,bottom:o,dataId:i.id,style:Na(i.type,n.darkMode,void 0,x),indicator:"indicator"===i.type?i.indicator:void 0,type:i.type})]:[]).filter((function(e){return null!==e}));return yn(yn([],y),b)},Cn=function(){return(Cn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},In=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Sn=function(e,t,a,n){var o,r,i,l,d,c,s,u=e.calc,p=e.containerSize,h=e.stateControl,v=e.pointer,m=u.xaxis,f=h.shallUpdate,g=h.prevAction,y=p.width,x=p.height,b=null===g||void 0===g?void 0:g.drag,k=x-n,w=v.drag.first,T=v.drag.last,C=v.drag.isDragging,I=(!!(null===(r=null===(o=v.drag)||void 0===o?void 0:o.delta)||void 0===r?void 0:r[0])||!!(null===(l=null===(i=v.drag)||void 0===i?void 0:i.delta)||void 0===l?void 0:l[1]))&&!(null===(d=v.drag)||void 0===d?void 0:d.first)&&f.includes("drag");if((["drawTool","editTool","resizeSubchart"].includes(null!==(c=null===b||void 0===b?void 0:b.type)&&void 0!==c?c:"")||["translate","scale"].includes(null!==(s=null===b||void 0===b?void 0:b.type)&&void 0!==s?s:"")&&!v.drag.last)&&b)return Cn(Cn({},b),{shallUpdate:I,start:!1,end:T});if(C&&a)return{type:"drawTool",start:!0,end:!1,shallUpdate:!0};if(C&&!a){var S=v.drag.initial,E=function(e,t,a){if(!e)return null;var n=null!==a&&void 0!==a?a:10,o=t.find((function(t){return e[1]>=t.bottom-n&&e[1]<t.bottom+n}));if(!o)return null;var r=t.indexOf(o);return-1===r?null:r}(S,t);if(null!==E&&E!==t.length-1)return{type:"resizeSubchart",start:w,end:T,subchartIdx:E,bottomInitY:t[E].bottom,shallUpdate:!0};var P=function(e,t,a,n){if(!e||!t||!a)return[];var o=re(e,t);if(null===o)return[];var r=a.totalTranslatedX,i=a.scaledWidthPerTick;return t[o].yaxis.map((function(a,l){var d,c,s,u=null===(s=null===(c=null===(d=n.subcharts)||void 0===d?void 0:d[o])||void 0===c?void 0:c.yaxis)||void 0===s?void 0:s[l];return u?a.tools.map((function(a,n){return a.xy.map((function(a,d){var c=ee(a[0],r,i),s=ae(a[1],t[o].bottom,u.decimals,u.translatedY,u.heightPerPt);return e[0]>=c-10&&e[0]<=c+10&&e[1]>=s-10&&e[1]<=s+10?{subchartIdx:o,yaxisIdx:l,toolIdx:n,toolPtIdx:d}:null})).filter((function(e){return null!==e}))})).flat():[]})).flat()}(S,t,m,u);if(P.length>0){var O=P[0],M=O.subchartIdx,Z=O.yaxisIdx,j=O.toolIdx,D=O.toolPtIdx;return{type:"editTool",start:w,end:T,subchartIdx:M,yaxisIdx:Z,toolIdx:j,toolPtIdx:D,toolInitXy:t[M].yaxis[Z].tools[j].xy[D],shallUpdate:!0}}return S[0]>=0&&S[0]<0+y&&S[1]>=0&&S[1]<0+k?{type:"translate",start:w,end:T,shallUpdate:!0}:S[0]>=0&&S[0]<0+y&&S[1]>=0+k?{type:"scale",start:w,end:T,initScaledWidthPerTick:m.scaledWidthPerTick,initTranslatedX:m.totalTranslatedX,shallUpdate:!0}:null}return null},En=function(e,t,a){var n=e-1-a.xaxis.heightXAxis;return Tn({subchartsHeight:n,subCharts:t})},Pn=function(){return(Pn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},On=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Mn=function(e,t){var a=t.subchartIdx,n=e.subCharts[a].yaxis.map((function(e){return e.graphs.map((function(e){return e.dataId}))})).flat(),o=e.containerSize.height-e.style.xaxis.heightXAxis,r=Tn({subchartsHeight:o,subCharts:e.subCharts,removeSubchartIdx:a});return Pn(Pn({},e),{data:e.data.filter((function(e){return!n.includes(e.id)})),subCharts:r})},Zn=function(e,t){var a=t.dataSeries,n=t.graphName,o=t.subchartIdx,r=t.id,i=t.indSrcId,l=t.indicator,d=t.indSrcLineIdx,c=e.subCharts[o].yaxis[0].graphs.length;if(!i&&l||i&&!l)return e;var s=Tt(a,n,r,l,i,d);if(!s)return e;var u=s.id,p="indicator"===s.type?s.indicator.graphTypes.length:void 0,h=Na(s.type,e.style.isDarkMode,c,p),v="indicator"===s.type&&l&&i?wn({dataId:u,style:h}):kn({dataId:u,style:h});D(v)&&s.data[s.data.length-1].prices.length>1&&(v.style.strokeColor=s.data[s.data.length-1].prices.map((function(t,a){return function(t){return Ra(e.style.isDarkMode?Aa:Ua,t)}(a)})));var m=e.subCharts[o];return yt(yt(e,["data"],On(On([],e.data),[s])),["subCharts",o],Pn(Pn({},m),{yaxis:[Pn(Pn({},m.yaxis[0]),{graphs:On(On([],m.yaxis[0].graphs),[v])})]}))},jn=function(e,t){var a,n=t.datas,o=null===(a=null===n||void 0===n?void 0:n[0])||void 0===a?void 0:a.id,r=n.map((function(e,t){var a,n;return"chart"===e.type?e:Pn(Pn({},e),{indSrcId:null!==(a=e.indSrcId)&&void 0!==a?a:o,id:null!==(n=e.id)&&void 0!==n?n:"indi_"+t.toString().padStart(2,"0")})})),i=lt()(r.map((function(e,t){return"indicator"!==e.type||X(null===e||void 0===e?void 0:e.id)?null:Zt(r,e.id)})).flat().filter((function(e){return null!==e}))),l=r.map((function(e){return"chart"===e.type?It(e.data,e.name,e.id):null})),d=On([],l);i.forEach((function(e,t){var a=null===r||void 0===r?void 0:r.findIndex((function(t,a){return t.id===e})),n=null===r||void 0===r?void 0:r[a],o="indicator"===(null===n||void 0===n?void 0:n.type)?n:null,i=null===o||void 0===o?void 0:o.indSrcId,l=X(i)?null:null===d||void 0===d?void 0:d.find((function(e){return(null===e||void 0===e?void 0:e.id)===i}));"indicator"===(null===n||void 0===n?void 0:n.type)&&l&&o&&(d[a]=Ct(null===l||void 0===l?void 0:l.data,null===l||void 0===l?void 0:l.id,o.indicator,void 0,e,o.name))}));var c=d.filter((function(e){return null!==e}));c.length!==r.length&&console.warn("Warning - not all indicators could be initialized.");var s=n?function(e,t){var a=-1,n=0,o=t?t.map((function(t,o){var r,i,l,d,c,s,u,p,h,v,m,f,g,y;if(-1===a||X(null===(r=null===t||void 0===t?void 0:t.graphProps)||void 0===r?void 0:r.subchartIdx)&&("chart"===t.type||"indicator"===t.type&&t.indicator.default.newSubchart)?(a++,n=0):n++,"chart"===t.type){var x=null!==(i=["line","candles","area"].find((function(e){var a;return e===(null===(a=null===t||void 0===t?void 0:t.graphProps)||void 0===a?void 0:a.chartType)})))&&void 0!==i?i:"candles";return{dataId:t.id,dataIdx:o,type:"chart",chartType:x,style:Oa(Oa(Oa({},Wa),{strokeColor:e?Ga.strokeColor[0]:La.strokeColor[0]}),null===(l=null===t||void 0===t?void 0:t.graphProps)||void 0===l?void 0:l.style),subchartIdx:null!==(c=null===(d=null===t||void 0===t?void 0:t.graphProps)||void 0===d?void 0:d.subchartIdx)&&void 0!==c?c:a,yaxisIdx:0,graphIdx:null!==(u=null===(s=null===t||void 0===t?void 0:t.graphProps)||void 0===s?void 0:s.graphIdx)&&void 0!==u?u:n}}return"indicator"===t.type?{dataId:null!==(p=t.id)&&void 0!==p?p:"",dataIdx:o,type:"indicator",style:{strokeColor:(null===(v=null===(h=null===t||void 0===t?void 0:t.graphProps)||void 0===h?void 0:h.style)||void 0===v?void 0:v.strokeColor)?t.graphProps.style.strokeColor:t.indicator.graphTypes.length<=1?La.strokeColor:e?Aa.slice(0,t.indicator.graphTypes.length):Ua.slice(0,t.indicator.graphTypes.length)},subchartIdx:null!==(f=null===(m=null===t||void 0===t?void 0:t.graphProps)||void 0===m?void 0:m.subchartIdx)&&void 0!==f?f:a,yaxisIdx:0,graphIdx:null!==(y=null===(g=null===t||void 0===t?void 0:t.graphProps)||void 0===g?void 0:g.graphIdx)&&void 0!==y?y:n}:null})).filter((function(e){return!!e})).sort((function(e,t){return e&&t&&e.subchartIdx!==t.subchartIdx?e.subchartIdx-t.subchartIdx:e&&t&&e.subchartIdx===t.subchartIdx?e.graphIdx-t.graphIdx:0})):[];return lt()(null===o||void 0===o?void 0:o.map((function(e){return e.subchartIdx}))).map((function(e,t){return{top:0,bottom:0,yaxis:[0].map((function(e,a){return{tools:[],graphs:null===o||void 0===o?void 0:o.filter((function(e){return e.subchartIdx===t})).map((function(e){return e.subchartIdx,e.yaxisIdx,e.graphIdx,Ma(e,["subchartIdx","yaxisIdx","graphIdx"])}))}}))}}))}(e.style.isDarkMode,n):[],u=En(e.containerSize.height,s,e.style);return Pn(Pn({},e),{subCharts:u,data:c})},Dn=function(){return(Dn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},zn=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Fn=[{prop:"backgroundColor",path:["style","backgroundColor"]},{prop:"crosshairStrokeColor",path:["style","crosshair","strokeColor"]},{prop:"crosshairXmarkerBackgroundColor",path:["style","crosshair","xMarkerBackgroundColor"]},{prop:"crosshairXmarkerStrokeColor",path:["style","crosshair","xMarkerStrokeColor"]},{prop:"crosshairXmarkerTextColor",path:["style","crosshair","xMarkerTextColor"]},{prop:"crosshairYmarkerBackgroundColor",path:["style","crosshair","yMarkerBackgroundColor"]},{prop:"crosshairYmarkerStrokeColor",path:["style","crosshair","yMarkerStrokeColor"]},{prop:"crosshairYmarkerTextColor",path:["style","crosshair","yMarkerTextColor"]},{prop:"gridStrokeColor",path:["style","grid","strokeColor"]},{prop:"toggleCrosshair",path:["style","crosshair","useCrosshair"],toggle:!0},{prop:"toggleFullscreen",path:["fullscreen"],toggle:!0},{prop:"toggleGridX",path:["style","grid","useGridX"],toggle:!0},{prop:"toggleGridY",path:["style","grid","useGridY"],toggle:!0},{prop:"xAxisFillColor",path:["style","xaxis","fillColor"]},{prop:"xAxisStrokeColor",path:["style","xaxis","strokeColor"]},{prop:"xAxisTextColor",path:["style","xaxis","fontColor"]},{prop:"yAxisStrokeColor",path:["style","yaxis","strokeColor"]},{prop:"yAxisTextColor",path:["style","yaxis","fontColor"]}],Xn=function(e,t){var a;if(function(e){return"modifyIndicatorData"===e.task}(t)){var n=t.params,o=n.dataId,r=n.newIndSrcId,i=n.newParam,l=n.prevData,d=e.data.find((function(e){return e.id===o}));if("indicator"!==(null===d||void 0===d?void 0:d.type))return e;var c=i&&d.indicator.params.map((function(e,t){return t!==(null===i||void 0===i?void 0:i.paramIdx)?e:Dn(Dn({},e),{val:i.newValue})}));return Dn(Dn({},e),{data:zt(e,o,{newParams:c,newIndSrcId:r},l)})}if(function(e){return"modifyChartData"===e.task}(t)){var s=t.params,u=s.dataId,p=s.newDatasets;return St(e,u,p)}if(function(e){return"setToolProp"===e.task}(t)){var h=t.params,v=h.newValue,m=h.prop,f=h.subchartIdx,g=h.yaxisIdx,y=h.toolIdx,x=h.toolParamIdx,b=e.subCharts[f].yaxis[g].tools[y];return"strokeColor"===m||"anchorColor"===m?yt(e,["subCharts",f,"yaxis",g,"tools",y,"style",m],v):"hLineYlevel"===m?yt(e,["subCharts",f,"yaxis",g,"tools",y,"xy"],[[b.xy[0][0],v]]):"toolParam"!==m||X(x)?e:yt(e,["subCharts",f,"yaxis",g,"tools",y,"params",x,"val"],v)}if(function(e){return"setGraphProp"===e.task}(t)){var k=t.params,w=(v=k.newValue,m=k.prop,f=k.subchartIdx,g=k.yaxisIdx,k.graphIdx);return["strokeColor","candleDownColor","candleUpColor","candleStrokeColor","candleWickStrokeColor"].includes(m)?yt(e,["subCharts",f,"yaxis",g,"graphs",w,"style",m],v):"chartType"!==m||"line"!==v&&"candles"!==v?"dataId"===m?yt(e,["subCharts",f,"yaxis",g,"graphs",w,"dataId"],v):e:yt(e,["subCharts",f,"yaxis",g,"graphs",w,"chartType"],v)}if(function(e){return"setGeneralProp"===e.task}(t)){var T=t.params,C=T.newValue,I=T.prop,S=null===Fn||void 0===Fn?void 0:Fn.find((function(e){return e.prop===I}));if(!S)return e;var E=S.path;v=S.toggle?!function(e,t){if("object"!==typeof e)return null;var a=e;try{return t.forEach((function(e,t){if(!(e in a)||"number"!==typeof e&&"string"!==typeof e)throw new Error("path at position "+t+" '"+e+"' not found in src object/array -1");a=a[e]})),a}catch(n){console.error("Error at getStateProp(): ",n)}}(e,E):C;return yt(e,E,v)}if(function(e){return"addData"===e.task}(t))return jn(e,t.params);if(function(e){return"addSubchart"===e.task}(t))return function(e,t){var a=t.dataSeries,n=t.graphName,o=t.id,r=t.indicator,i=t.reset,l=t.indSrcId,d=e.containerSize.height,c=Tt(a,n,o,r,l);if(!c)return e;var s="indicator"===c.type?c.indicator.graphTypes.length:void 0,u=Na(c.type,e.style.isDarkMode,void 0,s),p=c.id;if(0===e.subCharts.length||i){var h=d-e.style.xaxis.heightXAxis,v=xn({top:0,bottom:h,dataId:p,style:u,indicator:r,type:c.type});return v?Pn(Pn({},e),{data:[c],subCharts:[v]}):e}var m=d-e.style.xaxis.heightXAxis,f=Tn({subchartsHeight:m,subCharts:e.subCharts,addSubchart:{data:c,darkMode:e.style.isDarkMode}});return Pn(Pn({},e),{data:On(On([],e.data),[c]),subCharts:f})}(e,t.params);if(function(e){return"removeSubchart"===e.task}(t))return Mn(e,t.params);if(function(e){return"addGraph"===e.task}(t))return Zn(e,t.params);if(function(e){return"removeGraph"===e.task}(t))return function(e,t){var a=t.subchartIdx,n=t.yaxisIdx,o=t.graphIdx,r=e.subCharts[a].yaxis[n].graphs[o].dataId,i=e.subCharts[a];return 0===o&&1===i.yaxis[n].graphs.length?Mn(e,{subchartIdx:a}):yt(xt(e,["subCharts",a,"yaxis",n,"graphs",o]),["data"],e.data.filter((function(e){return e.id!==r})))}(e,t.params);if(function(e){return"swapSubcharts"===e.task}(t))return function(e,t){var a=t.subchartIdx1,n=t.subchartIdx2,o=a<=n?a:n,r=a>n?a:n,i=e.subCharts[o],l=e.subCharts[r],d=i.bottom-i.top,c=l.bottom-l.top,s=c-d;return o===r||X(o)||X(r)||r>=e.subCharts.length?e:fn(fn({},e),{subCharts:yn(yn(yn(yn(yn([],e.subCharts.slice(0,o)),[fn(fn({},l),{bottom:i.top+c,top:i.top})]),e.subCharts.slice(o+1,r).map((function(e,t){return fn(fn({},e),{top:e.top+s,bottom:e.bottom+s})}))),[fn(fn({},i),{top:l.top+s,bottom:l.bottom})]),e.subCharts.slice(r+1))})}(e,t.params);if(function(e){return"removeTool"===e.task}(t)){var P=t.params;f=P.subchartIdx,g=P.yaxisIdx,y=P.toolIdx;return xt(e,["subCharts",f,"yaxis",g,"tools",y])}if(function(e){return"clearChart"===e.task}(t))return function(e,t){var a=t.mode,n=Pn(Pn({},e.subCharts[0]),{top:0,bottom:"tools"!==a?e.containerSize.height-1-e.style.xaxis.heightXAxis:e.subCharts[0].bottom,yaxis:[Pn(Pn({},e.subCharts[0].yaxis[0]),{graphs:"all"===a||"indicators"===a?[e.subCharts[0].yaxis[0].graphs[0]]:e.subCharts[0].yaxis[0].graphs,tools:"all"===a||"tools"===a?[]:e.subCharts[0].yaxis[0].tools})]});return"all"===a||"indicators"===a?yt(yt(e,["subCharts"],[n]),["data"],[e.data.find((function(t){var a,n,o,r,i,l;return t.id===(null===(l=null===(i=null===(r=null===(o=null===(n=null===(a=e.subCharts)||void 0===a?void 0:a[0])||void 0===n?void 0:n.yaxis)||void 0===o?void 0:o[0])||void 0===r?void 0:r.graphs)||void 0===i?void 0:i[0])||void 0===l?void 0:l.dataId)}))]):"tools"===a?yt(e,["subCharts"],On([n],e.subCharts)):e}(e,t.params);if(function(e){return"setTheme"===e.task}(t)){var O=t.params.theme,M=(O.name,zn(O,["name"])),Z=M.isDarkMode?Fa:za;return Dn(Dn({},e),{style:Dn(Dn(Dn({},Z),M),{crosshair:Dn(Dn({},Z.crosshair),M.crosshair),draw:Dn(Dn({},Z.draw),M.draw),grid:Dn(Dn({},Z.grid),M.grid),xaxis:Dn(Dn({},Z.xaxis),M.xaxis),yaxis:Dn(Dn({},Z.yaxis),M.yaxis)})})}if(function(e){return"draw"===e.task}(t)){var j=t.params.xy;return(null===(a=Nt.find((function(e){return e.type===t.params.type})))||void 0===a?void 0:a.nPoints)&&t.params.type?!j&&t.params.type?Dn(Dn({},e),{draw:Dn(Dn({},e.draw),{isDrawing:!0,xy:[],type:t.params.type})}):e:Dn(Dn({},e),{draw:ja})}if(function(e){return"updateInteractionState"===e.task}(t)){var D=ht()(e.calc.xaxis,t.params.newState.calc.xaxis)?{}:{xaxis:Dn(Dn({},e.calc.xaxis),t.params.newState.calc.xaxis)},z=ht()(e.subCharts,t.params.newState.subCharts)?{}:{subCharts:t.params.newState.subCharts},F=ht()(e.containerSize,t.params.newState.containerSize)?{}:{containerSize:t.params.newState.containerSize};return Dn(Dn(Dn(Dn({},e),F),z),{pointer:t.params.newState.pointer,draw:t.params.newState.draw,calc:Dn(Dn(Dn({},e.calc),t.params.newState.calc),D)})}return e},Yn=function(){return(Yn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Un=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},An=function(e,t,a,n){var o=1/Math.pow(10,a),r=(e-t)/o/n,i=Math.floor(Math.log10(r))||0;return parseFloat(Array(6).fill(0).map((function(a,r){var l,d=o*Math.pow(10,i+Math.floor(r/3))*(r%3===0?1:r%3===1?2.5:r%3===2?5:0);return{intervalStep:d,optimum:(l=d,Math.abs((e-t)/l-n))}})).reduce((function(e,t){return t.optimum<(null===e||void 0===e?void 0:e.optimum)?t:e})).intervalStep.toFixed(a))},Rn=function(e,t,a,n,o){var r=o.xStart,i=o.xEnd,l=o.pixXEnd,d=t[a],c=d.top,s=d.bottom,u=Math.max(Math.round((s-c)/75),3);return t[a].yaxis[n].graphs.map((function(t){var a,n,o,d,c,s=e.find((function(e){return e.id===t.dataId}));if(!(null===s||void 0===s?void 0:s.data))return null;var p,h,v,m=null!==(a=null===s||void 0===s?void 0:s.data)&&void 0!==a?a:[],f=null===(n=s)||void 0===n?void 0:n.indicator,g=m.slice(r,i+1),y=(p=g,h=null===(o=null===f||void 0===f?void 0:f.default)||void 0===o?void 0:o.fixedYScale,v=null===f||void 0===f?void 0:f.graphTypes,j(p[0])&&h?h[1]:Math.max.apply(Math,p.map((function(e){if(j(e)){var t=Math.max.apply(Math,e.prices.filter((function(e,t){var a,n;return null!==e&&["line","bars"].includes(null!==(n=null===(a=null===v||void 0===v?void 0:v[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")})));return X(t)?0:t}return O(e)?e.high:e.close})))),x=function(e,t,a){return j(e[0])&&t?t[0]:Math.min.apply(Math,e.map((function(e){if(j(e)){var t=Math.min.apply(Math,e.prices.filter((function(e,t){var n,o;return null!==e&&["line","bars"].includes(null!==(o=null===(n=null===a||void 0===a?void 0:a[t])||void 0===n?void 0:n.type)&&void 0!==o?o:"")})));return X(t)?0:t}return O(e)?e.low:e.close})))}(g,null===(d=null===f||void 0===f?void 0:f.default)||void 0===d?void 0:d.fixedYScale,null===f||void 0===f?void 0:f.graphTypes),b=null!==(c=null===s||void 0===s?void 0:s.decimals)&&void 0!==c?c:0,k=An(y,x,b,u);return{lastDataset:{data:m[i],x:i,pixX:l,dateString:""},curData:g,yMaxExact:y,yMax:Math.ceil(y/k)*k,yMinExact:x,yMin:Math.floor(x/k)*k}}))},Wn=function(e,t,a,n,o){var r,i,l=n.map((function(e,a){return e.yaxis.map((function(e,n){return e.graphs.map((function(e,o){return e.dataId===t?{subchartIdx:a,yaxisIdx:n,graphIdx:o}:null}))})).flat()})).flat().filter((function(e){return null!==e})),d=null===l||void 0===l?void 0:l[0];if(!d||!o)return null;var c=function(e){return o(e,d.subchartIdx,d.yaxisIdx)},s=null===(i=null===(r=a.find((function(e){return e.id===t&&"indicator"===e.type})))||void 0===r?void 0:r.indicator)||void 0===i?void 0:i.graphTypes;return j(e)?{pixPrices:e.prices.map((function(e,t){var a,n;return e&&["line","bars"].includes(null!==(n=null===(a=null===s||void 0===s?void 0:s[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")?c(e):null}))}:O(e)?{pixOpen:c(e.open),pixHigh:c(e.high),pixLow:c(e.low),pixClose:c(e.close)}:M(e)?{pixClose:c(e.close)}:null},Ln=function(){return(Ln=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Gn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Nn=function(e,t,a){return e&&t&&a?Ln(Ln({},t),{xy:Gn(Gn([],t.xy),[a])}):ja},Vn=function(e,t,a,n){var o,r,i=a.xy,l=null!==(r=null===(o=Nt.find((function(e){return e.type===a.type})))||void 0===o?void 0:o.params)&&void 0!==r?r:[];return function(e,t,a){return gt(e,t,a,"add")}(e,[t,"yaxis",0,"tools"],{xy:i,type:a.type,style:n.draw,params:l})},Hn=function(e,t,a,n){var o,r,i,l,d,c,s,u,p,h,v,m,f,g,y,x,b,k,w,T,C,I,S,E,P,O,M,Z,j,D;if(!a||!n||!t)return null;var z=n.name,F=n.multiply,Y=function(e){return{minute:Q(e,"minutes"),hour:Q(e,"hours"),day:Q(e,"days"),week:Q(e,"weeks"),month:Q(e,"months"),year:Q(e,"years")}}(e),U=Y.minute,A=Y.hour,R=Y.day,W=Y.week,L=Y.month,G=Y.year,N=t.years.findIndex((function(e){return e.year===G})),V=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[N])||void 0===r?void 0:r.months)||void 0===i?void 0:i.findIndex((function(e){return e.month===L})),H=null===(u=null===(s=null===(c=null===(d=null===(l=t.years)||void 0===l?void 0:l[N])||void 0===d?void 0:d.months)||void 0===c?void 0:c[V])||void 0===s?void 0:s.weeks)||void 0===u?void 0:u.findIndex((function(e){return e.week===W})),B=null===(y=null===(g=null===(f=null===(m=null===(v=null===(h=null===(p=t.years)||void 0===p?void 0:p[N])||void 0===h?void 0:h.months)||void 0===v?void 0:v[V])||void 0===m?void 0:m.weeks)||void 0===f?void 0:f[H])||void 0===g?void 0:g.days)||void 0===y?void 0:y.findIndex((function(e){return e.day===R})),K=null===(I=null===(C=null===(T=null===(w=null===(k=null===(b=null===(x=t.years)||void 0===x?void 0:x[N])||void 0===b?void 0:b.months)||void 0===k?void 0:k[V])||void 0===w?void 0:w.weeks)||void 0===T?void 0:T[H])||void 0===C?void 0:C.days)||void 0===I?void 0:I[B];if(-1===N||-1===V||-1===H||-1===B||!K)return null;var _=a.period<(null===(E=null===(S=null===J||void 0===J?void 0:J[2])||void 0===S?void 0:S.range)||void 0===E?void 0:E[0]),q=a.period<(null===(O=null===(P=null===J||void 0===J?void 0:J[1])||void 0===P?void 0:P.range)||void 0===O?void 0:O[0]),$=_?null===K||void 0===K?void 0:K.hours.findIndex((function(e){return e.hour===A})):void 0,ee=_&&!X($)&&-1!==(null===(Z=null===(M=null===K||void 0===K?void 0:K.hours)||void 0===M?void 0:M[$])||void 0===Z?void 0:Z.minutes.findIndex((function(e){return e.minute===U})))?null===(D=null===(j=null===K||void 0===K?void 0:K.hours)||void 0===j?void 0:j[$])||void 0===D?void 0:D.minutes.findIndex((function(e){return e.minute===U})):void 0;if(_&&X($)||q&&X(ee))return null;if(a.name===z&&1===F)return z;var te={yearIdx:N,monthIdx:V,weekIdx:H,dayIdx:B,hourIdx:$,minuteIdx:ee},ae=!$&&!ee,ne="months"===z?F:1,oe="weeks"===z?F:1,re="days"===z?F:1,ie="hours"===z?F:1;return!Bn(Y,t,te)||$||ee?"years"!==z&&Kn(Y,t,te,ne)&&ae?"months":!["years","months"].includes(z)&&_n(Y,t,te,oe)&&ae?"weeks":!["years","months","weeks"].includes(z)&&qn(Y,t,te,re)&&ae?"days":["years","months","weeks","days"].includes(z)||!Jn(Y,t,te,ie)||ee?"minutes"===z&&$n(Y,t,te,F)?"minutes":null:"hours":"years"},Bn=function(e,t,a){var n,o,r,i=e.day,l=e.week,d=e.month,c=a.yearIdx;if(!t)return!1;var s=null===(r=null===(o=null===(n=t.years)||void 0===n?void 0:n[c])||void 0===o?void 0:o.months)||void 0===r?void 0:r[0];return s.weeks[0].days[0].day===i&&s.weeks[0].week===l&&s.month===d},Kn=function(e,t,a,n){void 0===n&&(n=1);var o=e.day,r=e.week,i=a.yearIdx,l=a.monthIdx;return!((l+1)%n!==0||-1===i||-1===l||!t)&&(t.years[i].months[l].weeks[0].days[0].day===o&&t.years[i].months[l].weeks[0].week===r)},_n=function(e,t,a,n){void 0===n&&(n=1);var o=e.day,r=e.week,i=a.yearIdx,l=a.monthIdx,d=a.weekIdx;if(!t)return!1;if(t.years[i].months[l].weeks[d].days[0].day===o&&t.years[i].months[l].weeks[d].week===r){if(2===n){var c=0;t.years[i].months[l].weeks.forEach((function(e){return c+=e.days.length}));for(var s=0,u=0,p=0,h=Math.round(c/2),v=0;v<t.years[i].months[l].weeks.length;v++){var m=t.years[i].months[l].weeks[v];Math.abs(s+m.days.length-h)<Math.abs(u-h)&&(u=s+m.days.length,p=v+1),s+=m.days.length}return d===p}if(1===n)return!(1===d&&t.years[i].months[l].weeks[0].days.length<3)&&!(d===t.years[i].months[l].weeks.length-1&&t.years[i].months[l].weeks[d].days.length<3)}return!1},qn=function(e,t,a,n){var o,r,i,l,d,c,s;void 0===n&&(n=1);var u=e.day,p=a.yearIdx,h=a.monthIdx,v=a.weekIdx,m=a.dayIdx;if(!t)return!1;var f=null===(s=null===(c=null===(d=null===(l=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[p])||void 0===r?void 0:r.months)||void 0===i?void 0:i[h])||void 0===l?void 0:l.weeks)||void 0===d?void 0:d[v])||void 0===c?void 0:c.days)||void 0===s?void 0:s[m];if(-1===m||-1===v||-1===h||-1===p||!f)return!1;if(f.day===u&&1===n)return!0;if(f.day===u&&2===n){if(t.years[p].months[h].weeks[v].days.length<=3)return!1;if(4===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m)||5===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m)||6===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m||4===m)||7===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m||5===m))return!0}return!1},Jn=function(e,t,a,n){var o,r,i,l,d,c,s,u;void 0===n&&(n=1);var p=e.hour,h=a.yearIdx,v=a.monthIdx,m=a.weekIdx,f=a.dayIdx,g=a.hourIdx;if(!t)return!1;var y=null===(s=null===(c=null===(d=null===(l=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[h])||void 0===r?void 0:r.months)||void 0===i?void 0:i[v])||void 0===l?void 0:l.weeks)||void 0===d?void 0:d[m])||void 0===c?void 0:c.days)||void 0===s?void 0:s[f],x=X(g)?null:null===(u=null===y||void 0===y?void 0:y.hours)||void 0===u?void 0:u[g];return!(-1===f||-1===m||-1===v||-1===h||-1===g||!x||X(g))&&(g%n===0&&x.hour===p)},$n=function(e,t,a,n){void 0===n&&(n=1);var o=e.minute,r=a.yearIdx,i=a.monthIdx,l=a.weekIdx,d=a.dayIdx,c=a.hourIdx,s=a.minuteIdx;if(!t)return!1;var u=t.years[r].months[i].weeks[l].days[d];if(-1===r||-1===i||-1===l||-1===d)return!1;if(X(c)||-1===c||X(s)||-1===s)return!1;var p=u.hours[c].minutes[s];return s%n===0&&p.minute===o},Qn=function(){return(Qn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},eo=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},to=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},ao=function(e,t,a){return e>=0?Math.min(t*(1+Math.abs(e)/(a/2)),a/3):Math.max(t/(1+Math.abs(e)/(a/2)),1)},no=function(e,t,a,n,o){var r,i,l=e?-t/e:0,d=Math.max(Math.ceil(l),0),c=d*e+t,s={xStart:d,pixXStart:c,xEnd:0,xLast:0,xUnlimited:0,pixXEnd:0,curTicks:[],optChartPeriod:null},u=o.find((function(e){return e.id===(null===n||void 0===n?void 0:n.dataId)}));if(!a||!n||!e||!u||!u.dateStat||0===(null===(r=null===u||void 0===u?void 0:u.data)||void 0===r?void 0:r.length))return s;var p=null!==(i=u.data.length)&&void 0!==i?i:0,h=Math.min(a,p*e+t),v=a,m=Math.floor((v-t)/e),f=Math.min(m,p-1),g=function(e,t,a,n){if(!e.chartPeriod||!t)return null;var o=e.chartPeriod,r=o.name,i=o.multiply,l=J.findIndex((function(e){return e.name===r}));if(-1===l)return null;var d=te(a,0,n),c=Qn({},t.accAmt);Object.entries(c).forEach((function(e){var t=e[0],a=t;t!==r?c[a]=c[a]*d/c[r]:c[r]=d}));var s=Math.max(Math.round(a/50),4),u=function(e,t){return Math.abs(e/t-s)},p=J.slice(l).map((function(e,t){var a=e.name,n=0===t?to([1],e.scaleMultiplys).filter((function(e){return e>=i})).map((function(e){return e/i})):to([1],e.scaleMultiplys);return to([1],n).map((function(t,n){var o=c[a],r=e.period;return{name:a,multiply:t,amt:o,period:r}}))})).flat().reduce((function(e,t,a){return u(t.amt,t.multiply)<u(e.amt,e.multiply)?t:e}));return p.amt,eo(p,["amt"])}(u.meta,u.dateStat,a,e),y=u.meta.chartPeriod,x=null===u||void 0===u?void 0:u.dateStat,b=g&&y&&!X(x)?Array(f-d+1).fill(0).map((function(t,a){var n=d+a,o=Hn(u.data[n].date,x,y,Qn({},g));if(o){var r=$(u.data[n].date,o);return{x:c+e*a,dateString:r}}return null})).filter((function(e){return null!==e})):[];return{xLast:p-1,xStart:d,pixXStart:c,xEnd:f,xUnlimited:m,pixXEnd:h,curTicks:b,optChartPeriod:g,xToPix:function(a,n){return ee(a,null!==n&&void 0!==n?n:t,e)},pixToX:function(a,n){return te(a,null!==n&&void 0!==n?n:t,e)}}},oo=a(258),ro=a(261),io=function(){return(io=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},lo=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},co=function(e,t,a,n,o,r,i,l,d,c){var s,u,p,h,v,m=n,g=o,y=f.a.useRef({calc:{subcharts:[],pointer:(v=t).calc.pointer,xaxis:v.calc.xaxis},containerSize:v.containerSize,pointer:v.pointer,stateControl:{prevAction:null,lastMainChartData:[],lastUpdate:new Date,shallUpdate:[],customEffectChartState:null}}),x=null!==(u=null===(s=null===e||void 0===e?void 0:e.current)||void 0===s?void 0:s.getBoundingClientRect())&&void 0!==u?u:{},b=x.top,k=x.left;f.a.useEffect((function(){var t=e;if((null===t||void 0===t?void 0:t.current)&&!c&&"static"===l&&!X(b)&&!X(k)){var a=y.current,n=t.current,o=n.clientWidth,r=n.clientHeight,i={top:b,left:k,width:"static"===l&&void 0!==m?m:o,height:"static"===l&&void 0!==g?g:r,init:!0};t.current.style.position="relative",t.current.style.width="static"===l&&void 0!==m?m+"px":"100%",t.current.style.height="static"===l&&void 0!==g?g+"px":"100%",t.current.style.top="0px",t.current.style.left="0px",y.current=io(io({},a),{stateControl:io(io({},a.stateControl),{shallUpdate:lo(lo([],a.stateControl.shallUpdate),["containerResize"])}),containerSize:i})}}),[l,e,c,m,g,k,b]),f.a.useEffect((function(){var t=e;if(null===t||void 0===t?void 0:t.current)if(d)t.current.style.pointerEvents="none";else if(t.current.style.pointerEvents="auto",c){var a=y.current,n=function(e){if(t&&t.current){var n=window.innerWidth,o=window.innerHeight;y.current=io(io({},a),{stateControl:io(io({},a.stateControl),{shallUpdate:lo(lo([],a.stateControl.shallUpdate),["containerResize"])}),containerSize:{top:0,left:0,width:n,height:o,init:!0}})}};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),function(){window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}}}),[e,c,d]);var w=f.a.useCallback((function(t,a){var n;if(!("responsive"!==l||X(t)||X(a)||c)&&(null===(n=null===e||void 0===e?void 0:e.current)||void 0===n?void 0:n.parentElement)){var o=y.current,r=e.current.parentElement.getBoundingClientRect(),i=r.top,d=r.left;console.log("VM",l,i,d,t,a),y.current=io(io({},o),{stateControl:io(io({},o.stateControl),{shallUpdate:lo(lo([],o.stateControl.shallUpdate),["containerResize"])}),containerSize:{top:i,left:d,width:t,height:a,init:!0}})}}),[c,l,e]);Object(oo.a)({targetRef:null!==(h={current:null===(p=e.current)||void 0===p?void 0:p.parentElement})&&void 0!==h?h:void 0,onResize:w});var T=function(e){return[e[0]-0,e[1]-0]};return Object(ro.a)({onPinch:function(e){var t=e.active,a=e.origin,n=e.movement,o=e.first;e.offset;y.current.pointer=io(io({},y.current.pointer),{pinch:{isPinching:t,origin:T(a),movementInitial:n,first:o}}),y.current.stateControl.shallUpdate=lo(lo([],y.current.stateControl.shallUpdate.filter((function(e){return"pointerMove"!==e}))),["pinch"])},onDrag:function(e){var t=y.current.stateControl.shallUpdate.includes("drag"),a=y.current.pointer.drag.delta,n=t&&a?a[0]+e.delta[0]:e.delta[0],o=t&&a?a[1]+e.delta[1]:e.delta[1],r=e.xy,i=e.initial,l=e.movement,d=e.first,c=e.last,s=e.active,u=e.ctrlKey,p=t&&y.current.pointer.drag.first||d,h=t&&y.current.pointer.drag.last||c;(!s||p||e.delta[0]||e.delta[1])&&(y.current=io(io({},y.current),{pointer:io(io({},y.current.pointer),{drag:{isDragging:s,xy:T(r),initial:T(i),movementInitial:l,last:h,first:p,delta:[n,o],ctrlKey:u}}),stateControl:io(io({},y.current.stateControl),{shallUpdate:lo(lo([],y.current.stateControl.shallUpdate),["drag"]),lastUpdate:y.current.stateControl.lastUpdate})}))},onMove:function(e){(!e.active||e.first||e.delta[0]||e.delta[1])&&(y.current=io(io({},y.current),{pointer:io(io({},y.current.pointer),{move:{isMoving:e.active,xy:T(e.xy)}}),stateControl:io(io({},y.current.stateControl),{shallUpdate:lo(lo([],y.current.stateControl.shallUpdate),["pointerMove"])})}))},onHover:function(e){y.current=io(io({},y.current),{pointer:io(io({},y.current.pointer),{isHovering:e.active}),stateControl:io(io({},y.current.stateControl),{shallUpdate:lo(lo([],y.current.stateControl.shallUpdate),["pointerMove"])})})},onWheel:function(e){var t=y.current.stateControl.shallUpdate.includes("wheel"),a=y.current.pointer.wheel.delta,n=t&&a?a[0]+e.delta[0]:e.delta[0],o=t&&a?a[1]+e.delta[1]:e.delta[1];y.current=io(io({},y.current),{pointer:io(io({},y.current.pointer),{wheel:{delta:[n,o],isWheeling:e.active}}),stateControl:io(io({},y.current.stateControl),{shallUpdate:lo(lo([],y.current.stateControl.shallUpdate),["wheel"])})})},onDragEnd:function(e){var t=e.xy,a=(e.initial,e.first),n=e.last,o=e.movement;y.current=io(io({},y.current),{pointer:io(io({},y.current.pointer),{dragPointerUp:{isDragPointerUp:!0,xy:T(t),initial:T(t),movementInitial:o,last:n,first:a}}),stateControl:io(io({},y.current.stateControl),{shallUpdate:lo(lo([],y.current.stateControl.shallUpdate),["dragEnd"])})})}},{domTarget:c?document.body:e,transform:function(e){var t=e[0],a=e[1];return[t-(null!==k&&void 0!==k?k:0),a-(null!==b&&void 0!==b?b:0)]},drag:{experimental_preventWindowScrollY:!0,useTouch:!0},enabled:!d&&y.current.containerSize.init,eventOptions:{passive:!1,capture:!1},pinch:{transform:function(e){return[e[0],e[1]]}},wheel:{transform:function(e){return[e[0],e[1]]}}}),y},so=function(){return(so=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},uo=function(e,t,a,n){var o,r,i,l,d=e.move,c=e.dragPointerUp,s=e.isHovering,u=t.xaxis,p=(null===(l=null===(i=null===(r=null===(o=null===a||void 0===a?void 0:a[0])||void 0===o?void 0:o.yaxis)||void 0===r?void 0:r[0])||void 0===i?void 0:i.graphs)||void 0===l?void 0:l[0])&&z(a[0].yaxis[0].graphs[0])?a[0].yaxis[0].graphs[0]:null,h=null===d||void 0===d?void 0:d.xy;if(!p||!d||!a||!h)return null;var v=re(h,a);if(null===v)return Da;var m=function(e,t,a,n){if("chart"!==(null===t||void 0===t?void 0:t.type)||!n)return null;var o=a.find((function(e){return e.id===t.dataId}));if("chart"!==(null===o||void 0===o?void 0:o.type))return null;var r=o.meta,i=o.dateStat,l=e.scaledWidthPerTick,d=e.totalTranslatedX,c=Math.round(te(null===n||void 0===n?void 0:n.xy[0],d,l)),s=ee(c,d,l);if(c<0||c>o.data.length-1||!i)return{xUnlimited:c,pixXUnlimSnap:s};var u=Math.abs(Math.round(c)),p=e.optChartPeriod;if(!p||!r.chartPeriod||!i)return{xUnlimited:c,pixXUnlimSnap:s};var h=Hn(o.data[u].date,i,r.chartPeriod,so({},p)),v=ee(u,d,l);return{x:u,xDateString:$(o.data[u].date,h||r.chartPeriod.name),pixXSnap:v,xUnlimited:c,pixXUnlimSnap:s}}(u,p,n,d);if(!m)return null;if(!("x"in m))return function(e,t,a){return{isHovering:s,move:{pixX:h[0],pixXUnlimSnap:t,pixXSnap:0,pixY:h[1],x:null,xUnlimited:e,subchartIdx:a,snapDatasets:[],xDateString:""},click:{clickedSubchartIdx:null}}}(m.xUnlimited,m.pixXUnlimSnap,v);var f=m.xUnlimited,g=m.x,y=m.xDateString,x=m.pixXSnap,b=m.pixXUnlimSnap,k=c&&c.xy?re(c.xy,a):null,w=a[v].yaxis.map((function(e,o){return e.graphs.map((function(e,r){var i,l=null===(i=n.find((function(t){return t.id===(null===e||void 0===e?void 0:e.dataId)})))||void 0===i?void 0:i.data,d=l?oe(h[1],l[g],a,v,o,t.subcharts):null,c=d&&d.length>0?d[0].pixY:null,s=d&&d.length>0?d[0].y:null,u=t.subcharts[v].yaxis[o],p=u.decimals,m=u.translatedY,f=u.heightPerPt;return{yaxisIdx:o,graphIdx:r,data:null===l||void 0===l?void 0:l[g],y:ne(h[1],a[v].bottom,p,m,f),ySnap:s,pixYSnap:c,dateString:y}}))})).flat().sort((function(e,t){return null===e.ySnap&&null===t.ySnap?0:null===e.ySnap&&null!==t.ySnap||null!==e.ySnap&&null!==t.ySnap&&Math.abs(parseFloat(e.ySnap)-e.y)>Math.abs(parseFloat(t.ySnap)-t.y)?1:null!==e.ySnap&&null===t.ySnap||null!==e.ySnap&&null!==t.ySnap&&Math.abs(parseFloat(e.ySnap)-e.y)<Math.abs(parseFloat(t.ySnap)-t.y)?-1:0}));return{isHovering:s,move:{pixX:h[0],pixXSnap:x,pixXUnlimSnap:b,pixY:h[1],x:g,xUnlimited:f,subchartIdx:v,snapDatasets:w,xDateString:y},click:{clickedSubchartIdx:k}}},po=function(){return(po=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ho=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},vo=function(){return(vo=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mo=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},fo=function(e){var t=e.ContainerRef,a=e.data,n=e.rtData,o=e.width,r=e.height,i=e.settings,l=f.a.useMemo((function(){return function(e,t){var a=Za&&void 0===(null===e||void 0===e?void 0:e.isDarkMode)||(null===e||void 0===e?void 0:e.isDarkMode)?Ya:Xa,n=t?yt(a,["calc","xaxis"],Oa(Oa({},a.calc.xaxis),{initialWidthPerTick:t,scaledWidthPerTick:t})):a;return Oa(Oa({},n),{subCharts:[],style:Oa(Oa(Oa({},e),n.style),{grid:Oa(Oa({},n.style.grid),null===e||void 0===e?void 0:e.grid),yaxis:Oa(Oa({},n.style.yaxis),null===e||void 0===e?void 0:e.yaxis),xaxis:Oa(Oa({},n.style.xaxis),null===e||void 0===e?void 0:e.xaxis),crosshair:Oa(Oa({},n.style.crosshair),null===e||void 0===e?void 0:e.crosshair),draw:Oa(Oa({},n.style.draw),null===e||void 0===e?void 0:e.draw)})})}(i.initialState,i.initWidthPerTick)}),[]),d=i.maxUpdatesPerSec?i.maxUpdatesPerSec:15,c=i.disablePointerEvents,s=("static"!==i.containerMode||r&&o)&&i.containerMode?i.containerMode:"responsive",u=o,p=r,h=f.a.useReducer(Xn,l),v=h[0],m=h[1],g=co(t,l,0,u,p,v.containerSize.left,v.containerSize.top,s,c,v.fullscreen);n&&(g.current.rtData=n),mn()(t,v.fullscreen,{onClose:function(){return m({task:"setGeneralProp",params:{prop:"toggleFullscreen"}})}});var y=v.draw,x=y.xy,b=mo(y,["xy"]),k={subcharts:v.subCharts.map((function(e){return{yaxis:e.yaxis}})),draw:vo(vo({},b),{nPixXy:x.length})};ht()(g.current.stateControl.customEffectChartState,k)||(g.current.stateControl.customEffectChartState=k),f.a.useEffect((function(){var e=function(){var e,t,a,n,o,r,i,l,d,s,u,p=g.current,h=p.stateControl;if(c)p.pointer.drag=vo(vo({},p.pointer.drag),{delta:[0,0],movementInitial:[0,0]});else{var f=v.subCharts,y=!1;if(p.rtData&&p.rtData.length>0&&f.length===p.calc.subcharts.length&&p.calc.xaxis.xUnlimited>p.calc.xaxis.xLast&&p.calc.subcharts.forEach((function(e,t){var a,n,o=f[t],r=null!==(n=null===(a=p.rtData)||void 0===a?void 0:a.filter((function(e){return o.yaxis.map((function(e){return e.graphs.map((function(e){return e.dataId}))})).flat().includes(e.dataId)})).map((function(e){return vo(vo({},e),{data:e.data.slice(1,p.calc.xaxis.xUnlimited-p.calc.xaxis.xLast+1)})})))&&void 0!==n?n:[],i=Math.max.apply(Math,e.yaxis.map((function(e){return e.yMaxExact}))),l=r&&0!==r.length?Math.max.apply(Math,r.map((function(e){return e.data.map((function(e){var t;return O(e)&&null!==(t=e.high)&&void 0!==t?t:e.close}))})).flat()):0,d=Math.min.apply(Math,e.yaxis.map((function(e){return e.yMinExact}))),c=r&&0!==r.length?Math.min.apply(Math,r.map((function(e){return e.data.map((function(e){var t;return O(e)&&null!==(t=e.low)&&void 0!==t?t:e.close}))})).flat()):l;r&&(l>i||c<d)&&(y=!0,console.log("RT-DATA OUT OF Y-RANGE! -> rtMax:",p.rtData,l,", rtMin:",c,", curMax:",i,", curMin:",d))})),h.shallUpdate.length>0||y){h.shallUpdate.includes("dragEnd")||(p.pointer.dragPointerUp.isDragPointerUp=!1);var x=v.style.xaxis.heightXAxis,b=p.containerSize.width-1,k=(null===(n=null===(a=null===(t=null===(e=null===f||void 0===f?void 0:f[0])||void 0===e?void 0:e.yaxis)||void 0===t?void 0:t[0])||void 0===a?void 0:a.graphs)||void 0===n?void 0:n[0])&&z(f[0].yaxis[0].graphs[0])?f[0].yaxis[0].graphs[0]:null,w=v.data.find((function(e){return e.id===(null===k||void 0===k?void 0:k.dataId)})),T=v.draw.isDrawing,C=function(e,t,a,n){var o,r,i,l,d,c,s,u=e.stateControl,p=e.pointer,h=u.shallUpdate,v=u.customEffectChartState,m=u.prevAction,f=e.calc.xaxis,g="drawTool"===(null===(o=null===m||void 0===m?void 0:m.drag)||void 0===o?void 0:o.type)&&!a,y=null===(r=p.wheel)||void 0===r?void 0:r.delta[1],x=(null===(i=p.wheel)||void 0===i?void 0:i.isWheeling)&&h.includes("wheel")&&y?{wheelDeltaY:y,type:"wheelScale"}:null,b=Sn(e,t,a,n),k=h.includes("containerResize")&&t.length>0,w=(null===m||void 0===m?void 0:m.pinch)&&e.pointer.pinch.isPinching?m.pinch:h.includes("pinch")&&e.pointer.pinch.isPinching?{type:"pinchScale",initScaledWidthPerTick:f.scaledWidthPerTick,initTranslatedX:f.totalTranslatedX}:null,T=h.includes("deps"),C=!p.drag.isDragging&&["resizeSubchart","editTool"].includes(null!==(l=null===b||void 0===b?void 0:b.type)&&void 0!==l?l:"")||k,I=!p.drag.isDragging&&["resizeSubchart","editTool"].includes(null!==(d=null===b||void 0===b?void 0:b.type)&&void 0!==d?d:""),S={drag:b,pinch:w,wheel:x,containerResize:k,deps:T,shallUpdateCalcSubcharts:["scale","translate"].includes(null!==(c=null===b||void 0===b?void 0:b.type)&&void 0!==c?c:"")&&(null===b||void 0===b?void 0:b.shallUpdate)||"resizeSubchart"===(null===b||void 0===b?void 0:b.type)||k||T||!!x,shallUpdateXaxis:null!==(s=!!x||T||!!w||(null===b||void 0===b?void 0:b.shallUpdate)&&("translate"===b.type||"scale"===b.type))&&void 0!==s&&s};return{action:S,stateControl:Cn(Cn({},u),{prevAction:Cn(Cn({},S),{drag:I||g?null:b}),customEffectChartState:C?null:v})}}(p,f,T,x),I=C.action,S=C.stateControl;h=vo(vo({},S),{prevAction:I?vo({},I):null}),g.current.stateControl=S;var E=I.containerResize?En(p.containerSize.height,f,v.style):f,P="resizeSubchart"===(null===(o=null===I||void 0===I?void 0:I.drag)||void 0===o?void 0:o.type)?function(e,t,a){var n;if("resizeSubchart"!==(null===(n=null===e||void 0===e?void 0:e.drag)||void 0===n?void 0:n.type))return t;var o=e.drag,r=o.subchartIdx,i=Math.min(Math.max(o.bottomInitY+a.movementInitial[1],t[r].top+10,0===r?50:0),t[r+1].bottom-10),l=i-o.bottomInitY;return a.ctrlKey&&0!==r?In(In(In([],t.slice(0,r).map((function(e,t){return Cn(Cn({},e),{bottom:e.bottom+l})})).map((function(e,t,a){return 0===t?e:Cn(Cn({},e),{top:a[t-1].bottom})}))),[Cn(Cn({},t[r]),{bottom:i,top:t[r].top+l}),Cn(Cn({},t[r+1]),{top:i})]),t.slice(r+2)):In(In(In([],t.slice(0,r)),[Cn(Cn({},t[r]),{bottom:i}),Cn(Cn({},t[r+1]),{top:i})]),t.slice(r+2))}(I,E,p.pointer.drag):E;null!==(r=h.lastMainChartData!==(null===w||void 0===w?void 0:w.data))&&void 0!==r&&r&&"chart"===(null===w||void 0===w?void 0:w.type)&&(p.calc.xaxis=function(e,t,a){return Qn(Qn({},e),{totalTranslatedX:-(t.length+10-a/e.scaledWidthPerTick)*e.scaledWidthPerTick})}(p.calc.xaxis,w.data,b));var Z=I.shallUpdateXaxis?function(e,t,a,n){var o,r,i,l,d,c,s,u,p,h,v=e.calc.xaxis,m=e.pointer,f=e.containerSize.width-1,g=null===(o=m.wheel)||void 0===o?void 0:o.delta[1],y=!!t.wheel,x=!!t.pinch,b=null===(r=m.move)||void 0===r?void 0:r.xy,k=null===(i=null===t||void 0===t?void 0:t.drag)||void 0===i?void 0:i.shallUpdate,w="translate"===(null===(l=null===t||void 0===t?void 0:t.drag)||void 0===l?void 0:l.type)&&k,T="scale"===(null===(d=null===t||void 0===t?void 0:t.drag)||void 0===d?void 0:d.type)&&k,C=n.find((function(e){return e.id===(null===a||void 0===a?void 0:a.dataId)})),I=null===(c=m.drag)||void 0===c?void 0:c.initial;if(!C||!(null===(s=t.drag)||void 0===s?void 0:s.shallUpdate)&&!t.wheel&&!t.deps&&!t.containerResize||!I&&(null===(u=t.drag)||void 0===u?void 0:u.shallUpdate))return v;var S=C.data.length;if(x){var E=t.pinch,P=E.initScaledWidthPerTick,O=E.initTranslatedX;if("pinchScale"!==E.type||X(P)||X(O))return v;var M=ao(null===(p=null===m||void 0===m?void 0:m.pinch)||void 0===p?void 0:p.movementInitial[0],P,f),Z=O,j=I[0],D=O-(F=(z=(I[0]-Z)/P)*M+Z)+j;return Qn(Qn(Qn({},v),{scaledWidthPerTick:M,totalTranslatedX:D}),no(M,D,f,a,n))}if(y){M=ao(g/2,v.scaledWidthPerTick,f),Z=v.totalTranslatedX,j=b?b[0]:0;var z=((b?b[0]:0)-Z)/v.scaledWidthPerTick,F=Math.round(z)*M+v.totalTranslatedX;return D=v.totalTranslatedX-F+j,Qn(Qn(Qn({},v),{scaledWidthPerTick:M,totalTranslatedX:D}),no(M,D,f,a,n))}if(w)return D=Math.max(Math.min(m.drag.delta[0]+v.totalTranslatedX,f-2*v.scaledWidthPerTick),-(S-3)*v.scaledWidthPerTick),Qn(Qn(Qn({},v),{totalTranslatedX:D}),no(v.scaledWidthPerTick,D,f,a,n));if(T){var Y=t.drag;return O=Y.initTranslatedX,(P=Y.initScaledWidthPerTick)?(M=ao(null===(h=null===m||void 0===m?void 0:m.drag)||void 0===h?void 0:h.movementInitial[0],P,f),Z=O,j=I[0],D=O-(F=(z=(I[0]-Z)/P)*M+Z)+j,Qn(Qn(Qn({},v),{scaledWidthPerTick:M,totalTranslatedX:D}),no(M,D,f,a,n))):v}return t.deps?Qn(Qn({},v),no(v.scaledWidthPerTick,v.totalTranslatedX,f,a,n)):v}(p,I,k,v.data):p.calc.xaxis;p.calc.xaxis=Z;var D=I.shallUpdateCalcSubcharts||y?function(e,t,a,n){return e&&t&&a?0===e.length||0===a.length?null:e.map((function(o,r){var i=o.bottom,l=o.top,d=Math.max(Math.round((i-l)/75),3);return{yaxis:o.yaxis.map((function(o,c){var s,u,p,h,v,m,f,g=Rn(a,e,r,c,t),y=null!==(p=Math.max.apply(Math,Un(Un([],g.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.yMaxExact)&&void 0!==t?t:null})).filter((function(e){return null!==e}))),null!==(u=null===(s=null===n||void 0===n?void 0:n.filter)||void 0===s?void 0:s.call(n,(function(e){return o.graphs.map((function(e,t){return e.dataId})).includes(e.dataId)})).map((function(e){return e.data.map((function(e){var t;return O(e)&&null!==(t=e.high)&&void 0!==t?t:e.close}))})).flat())&&void 0!==u?u:[])))&&void 0!==p?p:0,x=null!==(m=Math.min.apply(Math,Un(Un([],g.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.yMinExact)&&void 0!==t?t:null})).filter((function(e){return null!==e}))),null!==(v=null===(h=null===n||void 0===n?void 0:n.filter)||void 0===h?void 0:h.call(n,(function(e){return o.graphs.map((function(e,t){return e.dataId})).includes(e.dataId)})).map((function(e){return e.data.map((function(e){var t;return O(e)&&null!==(t=e.low)&&void 0!==t?t:e.close}))})).flat())&&void 0!==v?v:[])))&&void 0!==m?m:0,b=null!==(f=Math.max.apply(Math,o.graphs.map((function(e){var t,n;return null!==(n=null===(t=a.find((function(t){return t.id===e.dataId})))||void 0===t?void 0:t.decimals)&&void 0!==n?n:0}))))&&void 0!==f?f:0,k=An(y,x,b,d),w=Math.ceil(y/k)*k,T=Math.floor(x/k)*k,C=(i-l)/((w||0)-(T||0))/Math.pow(10,b),I=-ae(T||0,i,b,0,C)+i,S=function(e){return ae(e,i,b,I,C)},E=ne(i,i,b,I,C),P=S(Math.ceil(E/k)*k),Z=C*k/Math.pow(10,-b),D=Math.floor((P-10-l-10)/Z),z=!D||D<0?[]:Array(D).fill(0).map((function(e,t){var a=P-(t+1)*Z,n=ne(a,i,b,I,C);return{pixY:a,label:(Math.round(n*Math.pow(10,b))/Math.pow(10,b)).toString()}})),F=g&&g.map((function(e,n){if(!(null===e||void 0===e?void 0:e.curData))return e;var r=e.curData.map((function(e,r){var i,l,d=null===(l=null===(i=a.find((function(e){var t;return e.id===(null===(t=o.graphs)||void 0===t?void 0:t[n].dataId)&&"indicator"===e.type})))||void 0===i?void 0:i.indicator)||void 0===l?void 0:l.graphTypes,c=j(e)?{pixPrices:e.prices.map((function(e,t){var a,n;return e&&["line","bars"].includes(null!==(n=null===(a=null===d||void 0===d?void 0:d[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")?S(e):null}))}:O(e)?{pixOpen:S(e.open),pixHigh:S(e.high),pixLow:S(e.low),pixClose:S(e.close)}:M(e)?{pixClose:S(e.close)}:null;return{pixX:t.scaledWidthPerTick*r,pixY:c}}));return Yn(Yn({},e),{curTicks:r})}));return{pixY0:S(0),yMaxExact:y,yMinExact:x,yMax:w,yMin:T,heightPerPt:C,decimals:b,optIntervalY:k,translatedY:I,graphs:F,drawTicks:z}}))}})):null}(P,p.calc.xaxis,v.data,y?p.rtData:void 0):null;D&&(p.calc.subcharts=D);var F=h.shallUpdate.includes("pointerMove")?uo(p.pointer,p.calc,f,v.data):null;F&&(p.calc.pointer=F);var Y="editTool"===(null===(i=null===I||void 0===I?void 0:I.drag)||void 0===i?void 0:i.type)&&(null===(l=null===I||void 0===I?void 0:I.drag)||void 0===l?void 0:l.shallUpdate)?function(e,t,a){var n,o,r,i=e.pointer,l=e.calc,d=l.pointer;if("editTool"!==(null===(n=null===a||void 0===a?void 0:a.drag)||void 0===n?void 0:n.type))return t;var c=null===a||void 0===a?void 0:a.drag,s=c.subchartIdx,u=c.yaxisIdx,p=t[s],h=l.subcharts[s].yaxis[u],v=d.move.snapDatasets.length>0&&!!d.move.snapDatasets[0].ySnap,m=null!==(o=d.move.x)&&void 0!==o?o:d.move.xUnlimited,f=v?parseFloat(null!==(r=d.move.snapDatasets[0].ySnap)&&void 0!==r?r:""):ne(i.drag.xy[1],p.bottom,h.decimals,h.translatedY,h.heightPerPt),g=c.toolIdx,y=c.toolPtIdx;return yt(t,[s,"yaxis",u,"tools",g,"xy",y],[m,f])}(p,P,I):P,U="drawTool"===(null===(d=null===I||void 0===I?void 0:I.drag)||void 0===d?void 0:d.type)?function(e,t,a,n){var o,r,i;if(!e.pointer.dragPointerUp.isDragPointerUp)return{subcharts:t,draw:a};var l=e.calc,d=l.pointer,c=l.xaxis,s=e.pointer,u=a.type,p=null===(o=Nt.find((function(e){return e.type===u})))||void 0===o?void 0:o.nPoints,h=re(s.drag.initial,t);if(!u||!p||X(h))return{draw:ja,subcharts:t};var v=null===(r=l.subcharts)||void 0===r?void 0:r[h],m=null===(i=null===v||void 0===v?void 0:v.yaxis)||void 0===i?void 0:i[0];if(!v||!m)return{draw:ja,subcharts:t};var f=d.move.pixXSnap?d.move.pixXSnap:s.drag.xy[0],g=d.move.snapDatasets.length>0&&d.move.snapDatasets[0].pixYSnap?d.move.snapDatasets[0].pixYSnap:s.drag.xy[1],y=te(f,c.totalTranslatedX,c.scaledWidthPerTick),x=m.decimals,b=m.translatedY,k=m.heightPerPt,w=ne(g,t[h].bottom,x,b,k);return a.xy.length<p-1?{draw:Nn(a.type,a,[y,w]),subcharts:t}:{draw:ja,subcharts:Vn(t,h,Nn(a.type,a,[y,w]),n)}}(p,Y,v.draw,v.style):{subcharts:Y,draw:v.draw},A=U.subcharts,R=U.draw,W=A,L=(p.stateControl,mo(p,["stateControl"])),G=D?vo({subcharts:D},function(e,t){return{yToPix:function(a,n,o,r){var i,l;if(!(null===(l=null===(i=null===e||void 0===e?void 0:e[n])||void 0===i?void 0:i.yaxis)||void 0===l?void 0:l[o]))return 0;var d=t[n].yaxis[o],c=d.heightPerPt,s=d.decimals,u=d.translatedY,p=void 0!==r?r:u;return e[n].bottom-a*Math.pow(10,s)*c+p},pixToY:function(a,n,o,r){var i,l;if(!(null===(l=null===(i=null===e||void 0===e?void 0:e[n])||void 0===i?void 0:i.yaxis)||void 0===l?void 0:l[o]))return 0;var d=t[n].yaxis[o],c=d.heightPerPt,s=d.decimals,u=d.translatedY,p=void 0!==r?r:u;return(e[n].bottom+p-a)/c*Math.pow(10,-s)}}}(W,D)):null,N=F?{pointer:F}:null;m({task:"updateInteractionState",params:{newState:vo(vo({},L),{calc:vo(vo({xaxis:Z},N),G),subCharts:W,draw:R})}});var V=null===(s=v.data.find((function(e){var t;return e.id===(null===(t=v.subCharts)||void 0===t?void 0:t[0].yaxis[0].graphs[0].dataId)})))||void 0===s?void 0:s.data;g.current=vo(vo({},g.current),{stateControl:vo(vo({},g.current.stateControl),{lastUpdate:new Date,shallUpdate:[],lastMainChartData:null!==(u=V)&&void 0!==u?u:null})})}}};g.current.stateControl.shallUpdate.push("deps"),e(),console.log("updated Timer");var t=window.setInterval(e,Math.round(1e3/d));return function(){window.clearInterval(t)}}),[g.current.stateControl.customEffectChartState,d,c,v.style,v.data]);var w=function(e,t,a,n){var o,r,i,l,d,c,s,u,p,h,v,m,f,g;if(!e||!n.yToPix)return[];var y=null===(s=null===(c=null===(d=null===(l=null===(i=null===(r=null===(o=n.subcharts)||void 0===o?void 0:o[0])||void 0===r?void 0:r.yaxis)||void 0===i?void 0:i[0])||void 0===l?void 0:l.graphs)||void 0===d?void 0:d[0])||void 0===c?void 0:c.curTicks)||void 0===s?void 0:s[(null===(f=null===(m=null===(v=null===(h=null===(p=null===(u=n.subcharts)||void 0===u?void 0:u[0])||void 0===p?void 0:p.yaxis)||void 0===h?void 0:h[0])||void 0===v?void 0:v.graphs)||void 0===m?void 0:m[0])||void 0===f?void 0:f.curTicks.length)-1],x=null!==(g=n.yToPix&&e&&y&&e.reduce((function(e,o,r){var i;return ho(ho([],e),[{data:(null===o||void 0===o?void 0:o.data)?null===o||void 0===o?void 0:o.data.map((function(e,t){return po(po({},e),{x:n.xaxis.xLast+t})})):[],dataId:null===(i=null===t||void 0===t?void 0:t[null===o||void 0===o?void 0:o.dataIdx])||void 0===i?void 0:i.id,ticks:o.data.map((function(e,r){var i;return{pixX:y.pixX+(r+0)*n.xaxis.scaledWidthPerTick,pixY:Wn(e,null===(i=null===t||void 0===t?void 0:t[null===o||void 0===o?void 0:o.dataIdx])||void 0===i?void 0:i.id,t,a,n.yToPix)}}))}])}),[]))&&void 0!==g?g:[];return x.map((function(e){return jt(t,e.dataId)})).flat().reduce((function(e,o,r){var i,l,d,c,s,u,p,h=t.find((function(e){return e.id===o&&"indicator"===e.type}));if(!h||"indicator"!==(null===h||void 0===h?void 0:h.type))return e;var v=h.indicator.indicatorFn,m=h.indSrcId,f=h.indicator.params,g=ho(ho([],null!==(l=null===(i=t.find((function(e){return e.id===m})))||void 0===i?void 0:i.data)&&void 0!==l?l:[]),null!==(u=null===(s=null===(c=null===(d=e.find)||void 0===d?void 0:d.call(e,(function(e){return(null===e||void 0===e?void 0:e.dataId)===m})))||void 0===c?void 0:c.data)||void 0===s?void 0:s.slice(1))&&void 0!==u?u:[]),x=ho([],null!==(p=h.data)&&void 0!==p?p:[]);if(!v||!(null===g||void 0===g?void 0:g.length)||!y)return e;var b=v(po({chartData:g,prevData:x},f.reduce((function(e,t){var a;return po(po({},e),((a={})[t.name]=t.val,a))}),{}))).slice(h.data.length-1),k={data:b.map((function(e,t){return po(po({},e),{x:x.length-1+t})})),dataId:o,ticks:b.map((function(e,r){return{pixX:y.pixX+r*n.xaxis.scaledWidthPerTick,pixY:Wn(e,o,t,a,n.yToPix)}}))};return ho(ho([],e),[k])}),x)}(n,v.data,v.subCharts,v.calc);return f.a.useEffect((function(){var e,t,n,o;if(v.containerSize.init){var r=null===a||void 0===a?void 0:a[0];if("chart"===(null===r||void 0===r?void 0:r.type)&&(null===(e=null===r||void 0===r?void 0:r.data)||void 0===e?void 0:e.length)){var i=null===(t=v.data)||void 0===t?void 0:t[0];if(0===v.data.length)return console.log("Chart is initialized."),void m({task:"addData",params:{datas:a}});if(i.id===r.id&&"chart"===i.type){if(r.data.length===i.data.length)return;r.data.length>i.data.length?(console.log("Chart is updated"),m({task:"modifyChartData",params:{dataId:i.id,newDatasets:null===(o=null===(n=null===w||void 0===w?void 0:w[0])||void 0===n?void 0:n.data)||void 0===o?void 0:o.slice(1,-1)}})):r.data.length<i.data.length&&console.log("HERE THERE SHOULD BE LOADED A NEW GRAPH")}}}}),[a,v.containerSize.init,v.data,v.subCharts]),[v,m,w]},go=a(141),yo=a(591),xo=a(592),bo=a(593),ko=a(581),wo=a(140),To=a(564),Co=Object(To.a)(yo.a)((function(e){return{color:e.theme.palette.primary.main}})),Io=function(e){var t=e.setDarkMode,a=Object(s.a)();return Object(h.jsxs)(u.a,{id:"layoutRoot",sx:{height:"100%"},children:[Object(h.jsx)(xo.a,{sx:{height:64,bgcolor:a.palette.background.paper,boxShadow:"10px 10px"},children:Object(h.jsxs)(bo.a,{sx:{pr:1},children:[Object(h.jsx)(p.a,{variant:"h6",sx:{flexGrow:1},color:"primary",children:Object(h.jsx)("a",{href:"/",children:"react-tech-chart"})}),Object(h.jsx)(ko.a,{sx:{color:a.palette.primary.main},children:Object(h.jsx)(p.a,{children:"Docs"})}),Object(h.jsx)(Co,{"aria-label":"menu",onClick:function(){return t((function(e){return!e}))},children:Object(h.jsx)(wo.Icon,{path:go.c,size:1.2})}),Object(h.jsx)(Co,{edge:"start","aria-label":"menu",children:Object(h.jsx)(wo.Icon,{path:go.a,size:1.2})}),Object(h.jsx)(Co,{edge:"start","aria-label":"menu",children:Object(h.jsx)(wo.Icon,{path:go.b,size:1.2})})]})}),e.children]})},So=[{name:"Meta Platforms",data:[{date:"2021-01-05T00:00:00.000Z",open:268.290009,high:272.399994,low:268.209991,close:270.970001,volume:9871600},{date:"2021-01-06T00:00:00.000Z",open:262,high:267.75,low:260.01001,close:263.309998,volume:24354100},{date:"2021-01-07T00:00:00.000Z",open:265.899994,high:271.609985,low:264.779999,close:268.73999,volume:15789800},{date:"2021-01-08T00:00:00.000Z",open:268.309998,high:268.950012,low:263.179993,close:267.570007,volume:18528300},{date:"2021-01-11T00:00:00.000Z",open:260.480011,high:263.470001,low:255.899994,close:256.839996,volume:30412300},{date:"2021-01-12T00:00:00.000Z",open:256.630005,high:259.720001,low:250.300003,close:251.089996,volume:26383500},{date:"2021-01-13T00:00:00.000Z",open:251.550003,high:253.949997,low:249.199997,close:251.639999,volume:19528900},{date:"2021-01-14T00:00:00.000Z",open:253.399994,high:255.029999,low:244.610001,close:245.639999,volume:29739400},{date:"2021-01-15T00:00:00.000Z",open:247.899994,high:253.860001,low:247.160004,close:251.360001,volume:24942900},{date:"2021-01-19T00:00:00.000Z",open:256.899994,high:262.200012,low:252.720001,close:261.100006,volume:28028500},{date:"2021-01-20T00:00:00.000Z",open:268.929993,high:270.320007,low:263.600006,close:267.480011,volume:25199900},{date:"2021-01-21T00:00:00.000Z",open:269.26001,high:273.600006,low:267.48999,close:272.869995,volume:20838700},{date:"2021-01-22T00:00:00.000Z",open:272.01001,high:278.470001,low:272,close:274.5,volume:21954e3},{date:"2021-01-25T00:00:00.000Z",open:278.140015,high:280.100006,low:271.51001,close:278.01001,volume:19087e3},{date:"2021-01-26T00:00:00.000Z",open:278.140015,high:285.390015,low:277.809998,close:282.049988,volume:19373600},{date:"2021-01-27T00:00:00.000Z",open:282.529999,high:283.450012,low:268.119995,close:272.140015,volume:35346200},{date:"2021-01-28T00:00:00.000Z",open:277.179993,high:286.790009,low:264.700012,close:265,volume:37758800},{date:"2021-01-29T00:00:00.000Z",open:265.299988,high:266.559998,low:254.850006,close:258.329987,volume:30389500},{date:"2021-02-01T00:00:00.000Z",open:259.519989,high:264.170013,low:254.910004,close:262.01001,volume:22914300},{date:"2021-02-02T00:00:00.000Z",open:264,high:268.850006,low:263.269989,close:267.079987,volume:17320800},{date:"2021-02-03T00:00:00.000Z",open:265.619995,high:269.200012,low:263.839996,close:266.649994,volume:14223400},{date:"2021-02-04T00:00:00.000Z",open:267.01001,high:268.160004,low:264,close:266.48999,volume:1606e4},{date:"2021-02-05T00:00:00.000Z",open:266.799988,high:269.170013,low:265.670013,close:268.100006,volume:12454400},{date:"2021-02-08T00:00:00.000Z",open:268.75,high:269.859985,low:265,close:266.579987,volume:13755200},{date:"2021-02-09T00:00:00.000Z",open:266.440002,high:273.390015,low:265.75,close:269.450012,volume:14613400},{date:"2021-02-10T00:00:00.000Z",open:272.450012,high:273.799988,low:267.720001,close:271.869995,volume:14687200},{date:"2021-02-11T00:00:00.000Z",open:271.890015,high:273.579987,low:268.48999,close:270.390015,volume:12828600},{date:"2021-02-12T00:00:00.000Z",open:270.519989,high:271.179993,low:268.339996,close:270.5,volume:9097600},{date:"2021-02-16T00:00:00.000Z",open:270.799988,high:276.600006,low:270.049988,close:273.970001,volume:15417200},{date:"2021-02-17T00:00:00.000Z",open:271.23999,high:273.970001,low:269.579987,close:273.570007,volume:12763200},{date:"2021-02-18T00:00:00.000Z",open:269.570007,high:271.950012,low:266.029999,close:269.390015,volume:15249100},{date:"2021-02-19T00:00:00.000Z",open:269.859985,high:270.269989,low:260.149994,close:261.559998,volume:25622600},{date:"2021-02-22T00:00:00.000Z",open:257.950012,high:263.070007,low:257.529999,close:260.329987,volume:17434900},{date:"2021-02-23T00:00:00.000Z",open:259.5,high:267.459991,low:254.960007,close:265.859985,volume:21924600},{date:"2021-02-24T00:00:00.000Z",open:262.329987,high:266.380005,low:258.390015,close:264.309998,volume:15736100},{date:"2021-02-25T00:00:00.000Z",open:262.299988,high:266.940002,low:254.039993,close:254.690002,volume:19053100},{date:"2021-02-26T00:00:00.000Z",open:256.470001,high:265.549988,low:256.470001,close:257.619995,volume:26619500},{date:"2021-03-01T00:00:00.000Z",open:260.820007,high:266.649994,low:257.899994,close:264.910004,volume:22157300},{date:"2021-03-02T00:00:00.000Z",open:265.779999,high:266.709991,low:258.649994,close:259,volume:15191700},{date:"2021-03-03T00:00:00.000Z",open:260.290009,high:260.98999,low:255.100006,close:255.410004,volume:15513500},{date:"2021-03-04T00:00:00.000Z",open:256.470001,high:266.48999,low:253.5,close:257.640015,volume:31626500},{date:"2021-03-05T00:00:00.000Z",open:260.670013,high:265.450012,low:255.610001,close:264.279999,volume:26820100},{date:"2021-03-08T00:00:00.000Z",open:265.549988,high:265.579987,low:255.050003,close:255.309998,volume:18391800},{date:"2021-03-09T00:00:00.000Z",open:261.179993,high:268.529999,low:259.809998,close:265.73999,volume:22039700},{date:"2021-03-10T00:00:00.000Z",open:268.640015,high:268.970001,low:262.869995,close:264.899994,volume:14210300},{date:"2021-03-11T00:00:00.000Z",open:268.109985,high:277.899994,low:267.820007,close:273.880005,volume:21834e3},{date:"2021-03-12T00:00:00.000Z",open:269.140015,high:269.73999,low:264.019989,close:268.399994,volume:20600200},{date:"2021-03-15T00:00:00.000Z",open:269.079987,high:275.959991,low:268.5,close:273.75,volume:16844800},{date:"2021-03-16T00:00:00.000Z",open:276.079987,high:282.140015,low:274.799988,close:279.279999,volume:22437700},{date:"2021-03-17T00:00:00.000Z",open:275.709991,high:286.230011,low:275.410004,close:284.01001,volume:21315e3},{date:"2021-03-18T00:00:00.000Z",open:279.869995,high:285.190002,low:278.279999,close:278.619995,volume:18728300},{date:"2021-03-19T00:00:00.000Z",open:281.220001,high:292.799988,low:281.200012,close:290.109985,volume:38930500},{date:"2021-03-22T00:00:00.000Z",open:290.450012,high:299.709991,low:286.75,close:293.540009,volume:28273100},{date:"2021-03-23T00:00:00.000Z",open:293.149994,high:298,low:289.809998,close:290.630005,volume:23000900},{date:"2021-03-24T00:00:00.000Z",open:291,high:291.720001,low:281.160004,close:282.140015,volume:18675e3},{date:"2021-03-25T00:00:00.000Z",open:280.980011,high:288.059998,low:277.75,close:278.73999,volume:24505600},{date:"2021-03-26T00:00:00.000Z",open:278.299988,high:284.5,low:277.769989,close:283.019989,volume:17629200},{date:"2021-03-29T00:00:00.000Z",open:285.769989,high:293.179993,low:284.700012,close:290.820007,volume:21718800},{date:"2021-03-30T00:00:00.000Z",open:289.829987,high:292.470001,low:286.700012,close:288,volume:17474500},{date:"2021-03-31T00:00:00.000Z",open:289.98999,high:296.5,low:288.609985,close:294.529999,volume:19498200},{date:"2021-04-01T00:00:00.000Z",open:298.399994,high:302.399994,low:296.600006,close:298.660004,volume:17616e3},{date:"2021-04-05T00:00:00.000Z",open:300.890015,high:310.769989,low:300.679993,close:308.910004,volume:28237e3},{date:"2021-04-06T00:00:00.000Z",open:308.839996,high:311.350006,low:305.25,close:306.26001,volume:17335200},{date:"2021-04-07T00:00:00.000Z",open:306.339996,high:314.25,low:305.5,close:313.089996,volume:22855200},{date:"2021-04-08T00:00:00.000Z",open:314.850006,high:315.880005,low:310.049988,close:313.019989,volume:20894100},{date:"2021-04-09T00:00:00.000Z",open:311.399994,high:314.73999,low:310.329987,close:312.459991,volume:15988600},{date:"2021-04-12T00:00:00.000Z",open:311.049988,high:312.149994,low:307.929993,close:311.540009,volume:10881900},{date:"2021-04-13T00:00:00.000Z",open:312.209991,high:314.429993,low:309.320007,close:309.76001,volume:14036900},{date:"2021-04-14T00:00:00.000Z",open:307.299988,high:308.029999,low:301.950012,close:302.820007,volume:17421400},{date:"2021-04-15T00:00:00.000Z",open:306.339996,high:310.140015,low:304.100006,close:307.820007,volume:14558300},{date:"2021-04-16T00:00:00.000Z",open:308.170013,high:308.950012,low:304.609985,close:306.179993,volume:13059200},{date:"2021-04-19T00:00:00.000Z",open:305.01001,high:307.700012,low:300.559998,close:302.23999,volume:14553500},{date:"2021-04-20T00:00:00.000Z",open:301.98999,high:305.100006,low:297.209991,close:302.649994,volume:16796400},{date:"2021-04-21T00:00:00.000Z",open:301.950012,high:301.980011,low:297.390015,close:301.470001,volume:14863500},{date:"2021-04-22T00:00:00.000Z",open:301.329987,high:302.920013,low:296.040009,close:296.519989,volume:16375400},{date:"2021-04-23T00:00:00.000Z",open:298.76001,high:302.589996,low:297.149994,close:301.130005,volume:17536800},{date:"2021-04-26T00:00:00.000Z",open:303.339996,high:305.799988,low:301.559998,close:303.040009,volume:16172600},{date:"2021-04-27T00:00:00.000Z",open:304.279999,high:305.339996,low:301.109985,close:303.570007,volume:15309300},{date:"2021-04-28T00:00:00.000Z",open:307.359985,high:310.920013,low:305.369995,close:307.100006,volume:33907200},{date:"2021-04-29T00:00:00.000Z",open:330.119995,high:331.809998,low:321.609985,close:329.51001,volume:56526800},{date:"2021-04-30T00:00:00.000Z",open:326.140015,high:329.820007,low:324.5,close:325.079987,volume:26332400},{date:"2021-05-03T00:00:00.000Z",open:326.170013,high:328.549988,low:321.839996,close:322.579987,volume:18719500},{date:"2021-05-04T00:00:00.000Z",open:320.019989,high:322.190002,low:313.119995,close:318.359985,volume:24032600},{date:"2021-05-05T00:00:00.000Z",open:318.190002,high:321.059998,low:314.48999,close:315.019989,volume:15577600},{date:"2021-05-06T00:00:00.000Z",open:314.519989,high:320.23999,low:313.269989,close:320.019989,volume:19012200},{date:"2021-05-07T00:00:00.000Z",open:322.380005,high:322.940002,low:318.75,close:319.079987,volume:15916700},{date:"2021-05-10T00:00:00.000Z",open:314.350006,high:314.579987,low:304.829987,close:305.970001,volume:24239200},{date:"2021-05-11T00:00:00.000Z",open:300.75,high:306.839996,low:299.690002,close:306.529999,volume:18920100},{date:"2021-05-12T00:00:00.000Z",open:301.130005,high:304.959991,low:298.190002,close:302.549988,volume:24645500},{date:"2021-05-13T00:00:00.000Z",open:306.079987,high:308.859985,low:302.769989,close:305.26001,volume:18079200},{date:"2021-05-14T00:00:00.000Z",open:309.540009,high:316.850006,low:309.079987,close:315.940002,volume:19245700},{date:"2021-05-17T00:00:00.000Z",open:313.549988,high:315.679993,low:311.579987,close:315.459991,volume:15401300},{date:"2021-05-18T00:00:00.000Z",open:315.589996,high:316.5,low:309.809998,close:309.959991,volume:14522400},{date:"2021-05-19T00:00:00.000Z",open:304.190002,high:314.660004,low:303.570007,close:313.589996,volume:19106200},{date:"2021-05-20T00:00:00.000Z",open:313.579987,high:319.25,low:313.160004,close:318.609985,volume:17320200},{date:"2021-05-21T00:00:00.000Z",open:319.290009,high:319.929993,low:315.809998,close:316.230011,volume:13600900},{date:"2021-05-24T00:00:00.000Z",open:318.209991,high:325.950012,low:318.029999,close:324.630005,volume:16445400},{date:"2021-05-25T00:00:00.000Z",open:327.079987,high:329.179993,low:324.799988,close:327.790009,volume:16437e3},{date:"2021-05-26T00:00:00.000Z",open:328.350006,high:329.829987,low:325.820007,close:327.660004,volume:9686900},{date:"2021-05-27T00:00:00.000Z",open:328,high:333.779999,low:326.76001,close:332.75,volume:20477700},{date:"2021-05-28T00:00:00.000Z",open:331,high:332.869995,low:328.329987,close:328.730011,volume:12037400},{date:"2021-06-01T00:00:00.000Z",open:330.149994,high:331.420013,low:326.640015,close:329.130005,volume:11765900},{date:"2021-06-02T00:00:00.000Z",open:330.380005,high:331.869995,low:327.119995,close:329.149994,volume:11654300},{date:"2021-06-03T00:00:00.000Z",open:325.779999,high:327.380005,low:323.480011,close:326.040009,volume:12610800},{date:"2021-06-04T00:00:00.000Z",open:325.899994,high:332.459991,low:325.179993,close:330.350006,volume:13289400},{date:"2021-06-07T00:00:00.000Z",open:329.480011,high:337.690002,low:328.929993,close:336.579987,volume:20136700},{date:"2021-06-08T00:00:00.000Z",open:336.700012,high:338.299988,low:332.23999,close:333.679993,volume:14580500},{date:"2021-06-09T00:00:00.000Z",open:335.73999,high:336.799988,low:330,close:330.25,volume:13727900},{date:"2021-06-10T00:00:00.000Z",open:330.790009,high:333.940002,low:328.549988,close:332.459991,volume:13240200},{date:"2021-06-11T00:00:00.000Z",open:332.579987,high:332.829987,low:328.929993,close:331.26001,volume:13587900},{date:"2021-06-14T00:00:00.000Z",open:331.899994,high:336.820007,low:329.809998,close:336.769989,volume:12250800},{date:"2021-06-15T00:00:00.000Z",open:336.98999,high:339.920013,low:335.029999,close:336.75,volume:15795200},{date:"2021-06-16T00:00:00.000Z",open:336.700012,high:337.549988,low:328.720001,close:331.079987,volume:17232200},{date:"2021-06-17T00:00:00.000Z",open:330.48999,high:337.980011,low:330.149994,close:336.51001,volume:17794100},{date:"2021-06-18T00:00:00.000Z",open:334.529999,high:336.149994,low:329,close:329.660004,volume:23039500},{date:"2021-06-21T00:00:00.000Z",open:331.089996,high:332.920013,low:327.649994,close:332.290009,volume:11337500},{date:"2021-06-22T00:00:00.000Z",open:332.690002,high:339.920013,low:332.600006,close:339.029999,volume:15345300},{date:"2021-06-23T00:00:00.000Z",open:339.350006,high:343.420013,low:338.200012,close:340.589996,volume:14817800},{date:"2021-06-24T00:00:00.000Z",open:341.850006,high:344.899994,low:341.790009,close:343.179993,volume:12329100},{date:"2021-06-25T00:00:00.000Z",open:342.589996,high:344.119995,low:339.679993,close:341.369995,volume:14594400},{date:"2021-06-28T00:00:00.000Z",open:342.459991,high:358.140015,low:341.769989,close:355.640015,volume:29156100},{date:"2021-06-29T00:00:00.000Z",open:356.269989,high:356.73999,low:349.049988,close:351.890015,volume:21417300},{date:"2021-06-30T00:00:00.000Z",open:352.170013,high:352.920013,low:347.170013,close:347.709991,volume:15107500},{date:"2021-07-01T00:00:00.000Z",open:346.820007,high:354.670013,low:346.5,close:354.390015,volume:17137e3},{date:"2021-07-02T00:00:00.000Z",open:355.100006,high:356.440002,low:352.619995,close:354.700012,volume:11521300},{date:"2021-07-06T00:00:00.000Z",open:356.5,high:358.790009,low:349.179993,close:352.779999,volume:13488500},{date:"2021-07-07T00:00:00.000Z",open:355.26001,high:356.48999,low:350,close:350.48999,volume:14218900},{date:"2021-07-08T00:00:00.000Z",open:345.730011,high:348.329987,low:342.559998,close:345.649994,volume:14406500},{date:"2021-07-09T00:00:00.000Z",open:345.320007,high:350.709991,low:345.269989,close:350.420013,volume:13018700},{date:"2021-07-12T00:00:00.000Z",open:351.230011,high:354.190002,low:349.640015,close:353.160004,volume:10018600},{date:"2021-07-13T00:00:00.000Z",open:351.5,high:358.48999,low:348.799988,close:352.089996,volume:11456e3},{date:"2021-07-14T00:00:00.000Z",open:354.559998,high:355.200012,low:346.730011,close:347.630005,volume:13894200},{date:"2021-07-15T00:00:00.000Z",open:349.230011,high:349.230011,low:340.220001,close:344.459991,volume:14781600},{date:"2021-07-16T00:00:00.000Z",open:344.910004,high:345.98999,low:340.140015,close:341.160004,volume:11026100},{date:"2021-07-19T00:00:00.000Z",open:337.570007,high:339.790009,low:334.540009,close:336.950012,volume:14372300},{date:"2021-07-20T00:00:00.000Z",open:338.799988,high:343.450012,low:334.5,close:341.660004,volume:11024300},{date:"2021-07-21T00:00:00.000Z",open:341.5,high:346.519989,low:341.25,close:346.230011,volume:9279700},{date:"2021-07-22T00:00:00.000Z",open:346.679993,high:351.540009,low:345.209991,close:351.190002,volume:12385400},{date:"2021-07-23T00:00:00.000Z",open:360.910004,high:375.329987,low:357.190002,close:369.790009,volume:33694300},{date:"2021-07-26T00:00:00.000Z",open:369.579987,high:374.440002,low:368.220001,close:372.459991,volume:14925200},{date:"2021-07-27T00:00:00.000Z",open:371.910004,high:373.149994,low:364.549988,close:367.809998,volume:15705400},{date:"2021-07-28T00:00:00.000Z",open:374.559998,high:377.549988,low:366.929993,close:373.279999,volume:29676900},{date:"2021-07-29T00:00:00.000Z",open:361,high:365.519989,low:356.73999,close:358.320007,volume:33413200},{date:"2021-07-30T00:00:00.000Z",open:354,high:360.730011,low:352.940002,close:356.299988,volume:15966700},{date:"2021-08-02T00:00:00.000Z",open:358.100006,high:359.399994,low:350.73999,close:351.950012,volume:13180400},{date:"2021-08-03T00:00:00.000Z",open:352.730011,high:353.769989,low:347.700012,close:351.23999,volume:12406100},{date:"2021-08-04T00:00:00.000Z",open:352.420013,high:360.480011,low:351.51001,close:358.920013,volume:14180600},{date:"2021-08-05T00:00:00.000Z",open:359.640015,high:363.899994,low:356.899994,close:362.970001,volume:10247200},{date:"2021-08-06T00:00:00.000Z",open:361.399994,high:365.149994,low:361.399994,close:363.51001,volume:8918100},{date:"2021-08-09T00:00:00.000Z",open:363.76001,high:365.779999,low:360.75,close:361.609985,volume:7798900},{date:"2021-08-10T00:00:00.000Z",open:361.829987,high:364.100006,low:359.040009,close:361.130005,volume:7469900},{date:"2021-08-11T00:00:00.000Z",open:362.100006,high:362.359985,low:357.809998,close:359.959991,volume:8400300},{date:"2021-08-12T00:00:00.000Z",open:358.450012,high:363,low:357.109985,close:362.649994,volume:7170700},{date:"2021-08-13T00:00:00.000Z",open:362.970001,high:364.660004,low:361.480011,close:363.179993,volume:7192500},{date:"2021-08-16T00:00:00.000Z",open:362.519989,high:366.950012,low:357.380005,close:366.559998,volume:11222100},{date:"2021-08-17T00:00:00.000Z",open:362.980011,high:364.670013,low:355.070007,close:358.450012,volume:12328700},{date:"2021-08-18T00:00:00.000Z",open:356.25,high:359.859985,low:355.149994,close:355.450012,volume:10042400},{date:"2021-08-19T00:00:00.000Z",open:351.350006,high:357.570007,low:351,close:355.119995,volume:12004500},{date:"2021-08-20T00:00:00.000Z",open:354.600006,high:359.98999,low:353.309998,close:359.369995,volume:8693500},{date:"2021-08-23T00:00:00.000Z",open:359.440002,high:365.690002,low:359.100006,close:363.350006,volume:10942e3},{date:"2021-08-24T00:00:00.000Z",open:363.660004,high:367.959991,low:361.839996,close:365.51001,volume:9235100},{date:"2021-08-25T00:00:00.000Z",open:365.600006,high:370.859985,low:365.399994,close:368.390015,volume:9684500},{date:"2021-08-26T00:00:00.000Z",open:368.380005,high:369.440002,low:364.130005,close:364.380005,volume:7888700},{date:"2021-08-27T00:00:00.000Z",open:365.100006,high:373.73999,low:364.079987,close:372.630005,volume:11214200},{date:"2021-08-30T00:00:00.000Z",open:372.559998,high:381.48999,low:370.519989,close:380.660004,volume:13547300},{date:"2021-08-31T00:00:00.000Z",open:379.950012,high:382.76001,low:378.799988,close:379.380005,volume:12345400},{date:"2021-09-01T00:00:00.000Z",open:379.589996,high:384.329987,low:378.809998,close:382.049988,volume:11567200},{date:"2021-09-02T00:00:00.000Z",open:381.5,high:381.75,low:374.059998,close:375.279999,volume:14832900},{date:"2021-09-03T00:00:00.000Z",open:374.75,high:377.160004,low:373.109985,close:376.26001,volume:7509600},{date:"2021-09-07T00:00:00.000Z",open:375.880005,high:382.959991,low:373.149994,close:382.179993,volume:10793800},{date:"2021-09-08T00:00:00.000Z",open:380.160004,high:380.869995,low:374.790009,close:377.570007,volume:11067200},{date:"2021-09-09T00:00:00.000Z",open:377.640015,high:379.829987,low:376.570007,close:378,volume:9098900},{date:"2021-09-10T00:00:00.000Z",open:381.359985,high:383.790009,low:378.26001,close:378.690002,volume:11537600},{date:"2021-09-13T00:00:00.000Z",open:381.679993,high:381.75,low:374.350006,close:376.51001,volume:13026300},{date:"2021-09-14T00:00:00.000Z",open:377.399994,high:378.589996,low:375.109985,close:376.529999,volume:8711600},{date:"2021-09-15T00:00:00.000Z",open:377,high:377.559998,low:367.670013,close:373.920013,volume:17940300},{date:"2021-09-16T00:00:00.000Z",open:372.790009,high:373.559998,low:369.709991,close:373.059998,volume:11934200},{date:"2021-09-17T00:00:00.000Z",open:371.410004,high:371.410004,low:361.589996,close:364.720001,volume:26299e3},{date:"2021-09-20T00:00:00.000Z",open:359.299988,high:361.029999,low:349.799988,close:355.700012,volume:19822800},{date:"2021-09-21T00:00:00.000Z",open:358.5,high:360.040009,low:355.190002,close:357.480011,volume:11751900},{date:"2021-09-22T00:00:00.000Z",open:347.230011,high:349.839996,low:340.690002,close:343.209991,volume:43692900},{date:"2021-09-23T00:00:00.000Z",open:345.359985,high:349.670013,low:343,close:345.959991,volume:21806300},{date:"2021-09-24T00:00:00.000Z",open:343.23999,high:354.350006,low:342.369995,close:352.959991,volume:18801900},{date:"2021-09-27T00:00:00.000Z",open:349.809998,high:355.149994,low:347.079987,close:353.579987,volume:15205800},{date:"2021-09-28T00:00:00.000Z",open:347.970001,high:349.600006,low:338.920013,close:340.649994,volume:21710300},{date:"2021-09-29T00:00:00.000Z",open:343.149994,high:345.230011,low:338.880005,close:339.609985,volume:14452200},{date:"2021-09-30T00:00:00.000Z",open:340.450012,high:342.799988,low:338.149994,close:339.390015,volume:16547100},{date:"2021-10-01T00:00:00.000Z",open:341.609985,high:345.019989,low:338.640015,close:343.01001,volume:14905300},{date:"2021-10-04T00:00:00.000Z",open:335.529999,high:335.940002,low:322.700012,close:326.230011,volume:42885e3},{date:"2021-10-05T00:00:00.000Z",open:328.579987,high:335.179993,low:326.160004,close:332.959991,volume:35377900},{date:"2021-10-06T00:00:00.000Z",open:329.73999,high:334.380005,low:325.799988,close:333.640015,volume:26443e3},{date:"2021-10-07T00:00:00.000Z",open:337,high:338.839996,low:328.980011,close:329.220001,volume:28307500},{date:"2021-10-08T00:00:00.000Z",open:331.51001,high:333.399994,low:328.709991,close:330.049988,volume:15934300},{date:"2021-10-11T00:00:00.000Z",open:327.630005,high:330.459991,low:325.309998,close:325.450012,volume:14708200},{date:"2021-10-12T00:00:00.000Z",open:323.029999,high:324.380005,low:317.369995,close:323.769989,volume:31658700},{date:"2021-10-13T00:00:00.000Z",open:326.970001,high:327,low:322.660004,close:324.540009,volume:14761500},{date:"2021-10-14T00:00:00.000Z",open:328.359985,high:330.519989,low:327.100006,close:328.529999,volume:14302200},{date:"2021-10-15T00:00:00.000Z",open:328.679993,high:329.070007,low:322.51001,close:324.76001,volume:21575100},{date:"2021-10-18T00:00:00.000Z",open:328.950012,high:335.890015,low:327.5,close:335.339996,volume:21585e3},{date:"2021-10-19T00:00:00.000Z",open:339.649994,high:342.459991,low:337.279999,close:339.98999,volume:18786300},{date:"2021-10-20T00:00:00.000Z",open:343.450012,high:343.980011,low:339.450012,close:340.779999,volume:13639500},{date:"2021-10-21T00:00:00.000Z",open:340.279999,high:342.309998,low:337.799988,close:341.880005,volume:16354400},{date:"2021-10-22T00:00:00.000Z",open:326.350006,high:329.630005,low:321.109985,close:324.609985,volume:35224500},{date:"2021-10-25T00:00:00.000Z",open:320.299988,high:329.559998,low:319.720001,close:328.690002,volume:38409e3},{date:"2021-10-26T00:00:00.000Z",open:328.26001,high:330.209991,low:309.600006,close:315.809998,volume:65654e3},{date:"2021-10-27T00:00:00.000Z",open:314.190002,high:319.25,low:312.059998,close:312.220001,volume:29971800},{date:"2021-10-28T00:00:00.000Z",open:312.98999,high:325.519989,low:308.109985,close:316.920013,volume:50806800},{date:"2021-10-29T00:00:00.000Z",open:320.190002,high:326,low:319.600006,close:323.570007,volume:37059400},{date:"2021-11-01T00:00:00.000Z",open:326.040009,high:333.450012,low:326,close:329.980011,volume:31518900},{date:"2021-11-02T00:00:00.000Z",open:331.380005,high:334.790009,low:323.799988,close:328.079987,volume:28353e3},{date:"2021-11-03T00:00:00.000Z",open:327.48999,high:332.149994,low:323.200012,close:331.619995,volume:20786500},{date:"2021-11-04T00:00:00.000Z",open:334.01001,high:337.269989,low:332.649994,close:335.850006,volume:22495300},{date:"2021-11-05T00:00:00.000Z",open:340.309998,high:346.790009,low:339.640015,close:341.130005,volume:26852100},{date:"2021-11-08T00:00:00.000Z",open:344.420013,high:344.790009,low:338.339996,close:338.619995,volume:18342500},{date:"2021-11-09T00:00:00.000Z",open:340,high:341.309998,low:334.470001,close:335.369995,volume:17556700},{date:"2021-11-10T00:00:00.000Z",open:332.48999,high:333.190002,low:325.51001,close:327.640015,volume:21872600},{date:"2021-11-11T00:00:00.000Z",open:329.820007,high:332.459991,low:327,close:327.73999,volume:12376600},{date:"2021-11-12T00:00:00.000Z",open:330.179993,high:341.859985,low:329.779999,close:340.890015,volume:25387200},{date:"2021-11-15T00:00:00.000Z",open:344.339996,high:353.649994,low:343.200012,close:347.559998,volume:25076600},{date:"2021-11-16T00:00:00.000Z",open:343.829987,high:346.649994,low:340.869995,close:342.959991,volume:18181100},{date:"2021-11-17T00:00:00.000Z",open:344.23999,high:347.299988,low:340.100006,close:340.769989,volume:13602800},{date:"2021-11-18T00:00:00.000Z",open:339.720001,high:342.459991,low:335.299988,close:338.690002,volume:17487200},{date:"2021-11-19T00:00:00.000Z",open:342.200012,high:352.100006,low:339.899994,close:345.299988,volume:26441e3},{date:"2021-11-22T00:00:00.000Z",open:349.049988,high:353.829987,low:340.51001,close:341.01001,volume:27116800},{date:"2021-11-23T00:00:00.000Z",open:338.929993,high:341.399994,low:333.5,close:337.25,volume:17211500}].map((function(e){return Object(d.a)(Object(d.a)({},e),{},{date:new Date(e.date)})})),RtData:void 0,type:"chart",id:"mainchart-fb2021"},{id:"kama_01",type:"indicator",indicator:wa,graphProps:{style:{strokeColor:["#0693E3"]}}},{type:"indicator",indicator:(hn={period:5},ya(ya({},xa),{params:xa.params.map((function(e){return"period"!==e.name||X(null===hn||void 0===hn?void 0:hn.period)?e:ya(ya({},e),{val:hn.period})}))})),id:"rsi_01"},{id:"ema_rsi_01",type:"indicator",indSrcId:"rsi_01",indicator:ma,graphProps:{style:{strokeColor:["#0693E3"]}}}],Eo={disableTheme:!1,initWidthPerTick:8};var Po=function(){var e=o.a.useRef(null),t=o.a.useState(!0),a=Object(l.a)(t,2),n=a[0],r=a[1];console.log("production mode"),console.log=function(){};var i=fo({ContainerRef:e,data:So,settings:Eo}),d=Object(l.a)(i,3),s=d[0],u=d[1],p=d[2],m=o.a.useCallback((function(){u({task:"setTheme",params:{theme:n?za:Fa}}),r((function(e){return!e}))}),[u,n]);return Object(h.jsx)(o.a.Fragment,{children:Object(h.jsx)(c.a,{theme:w,children:Object(h.jsx)(Io,{setDarkMode:m,children:Object(h.jsx)(v,{setDarkMode:m,children:Object(h.jsx)(pn,{ref:e,ChartState:s,Dispatch:u,rtTicks:p,settings:Eo})})})})})},Oo=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,606)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),o(e),r(e),i(e)}))};i.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(Po,{})}),document.getElementById("root")),Oo()}},[[482,1,2]]]);
//# sourceMappingURL=main.5ab0d0de.chunk.js.map