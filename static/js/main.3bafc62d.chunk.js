/*! For license information please see main.3bafc62d.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-techchart"]=this["webpackJsonpreact-techchart"]||[]).push([[0],{286:function(e,t,a){},473:function(e,t){},475:function(e,t){},495:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(43),l=a.n(o),i=(a(286),a(14)),d=a(181),s=a(581),u=a(564),c=a(567),p=a(583),h=a(2),f=function(e){e.setDarkMode;var t=Object(u.a)();return Object(h.jsxs)(c.a,{sx:{height:"100%",label:"homeRoot"},children:[Object(h.jsx)("div",{style:{minHeight:128,backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.default),backgroundImage:"url(https://github.com/carmnk/resources/raw/main/icons/logo512.png)",backgroundRepeat:"no-repeat",backgroundSize:128,backgroundPosition:"50% 35%"}}),Object(h.jsxs)("div",{style:{backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.default),textAlign:"center",paddingBottom:"8px"},children:[Object(h.jsx)(p.a,{children:"a flexible and extensible react charting tool dedicated to technical chart analysis."}),Object(h.jsx)(p.a,{color:"secondary.main",children:"experimental in early development phase."})]}),Object(h.jsx)("div",{style:{flexGrow:1,border:"1px solid red"},children:e.children})]})},m=a(62),v=a(139),g=a(584),x=a(585),y=a(586),b=a(580),_=a(138),k=a(577),C=Object(k.a)(g.a)((function(e){return{color:e.theme.palette.primary.main}})),w=function(e){var t=e.setDarkMode,a=Object(u.a)();return Object(h.jsxs)(c.a,{id:"layoutRoot",sx:{height:"100%"},children:[Object(h.jsx)(x.a,{sx:{height:64,bgcolor:a.palette.background.paper,boxShadow:"10px 10px"},children:Object(h.jsxs)(y.a,{sx:{pr:1},children:[Object(h.jsx)(p.a,{variant:"h6",sx:{flexGrow:1},color:"primary",children:Object(h.jsx)("a",{href:"/",children:"react-tech-chart"})}),Object(h.jsx)(b.a,{sx:{color:a.palette.primary.main},children:Object(h.jsx)(p.a,{children:"Docs"})}),Object(h.jsx)(C,{"aria-label":"menu",onClick:function(){return t((function(e){return!e}))},children:Object(h.jsx)(_.Icon,{path:v.c,size:1.2})}),Object(h.jsx)(C,{edge:"start","aria-label":"menu",children:Object(h.jsx)(_.Icon,{path:v.a,size:1.2})}),Object(h.jsx)(C,{edge:"start","aria-label":"menu",children:Object(h.jsx)(_.Icon,{path:v.b,size:1.2})})]})}),e.children]})},T=[{name:"Meta Platforms",data:[{date:"2021-01-05T00:00:00.000Z",open:268.290009,high:272.399994,low:268.209991,close:270.970001,volume:9871600},{date:"2021-01-06T00:00:00.000Z",open:262,high:267.75,low:260.01001,close:263.309998,volume:24354100},{date:"2021-01-07T00:00:00.000Z",open:265.899994,high:271.609985,low:264.779999,close:268.73999,volume:15789800},{date:"2021-01-08T00:00:00.000Z",open:268.309998,high:268.950012,low:263.179993,close:267.570007,volume:18528300},{date:"2021-01-11T00:00:00.000Z",open:260.480011,high:263.470001,low:255.899994,close:256.839996,volume:30412300},{date:"2021-01-12T00:00:00.000Z",open:256.630005,high:259.720001,low:250.300003,close:251.089996,volume:26383500},{date:"2021-01-13T00:00:00.000Z",open:251.550003,high:253.949997,low:249.199997,close:251.639999,volume:19528900},{date:"2021-01-14T00:00:00.000Z",open:253.399994,high:255.029999,low:244.610001,close:245.639999,volume:29739400},{date:"2021-01-15T00:00:00.000Z",open:247.899994,high:253.860001,low:247.160004,close:251.360001,volume:24942900},{date:"2021-01-19T00:00:00.000Z",open:256.899994,high:262.200012,low:252.720001,close:261.100006,volume:28028500},{date:"2021-01-20T00:00:00.000Z",open:268.929993,high:270.320007,low:263.600006,close:267.480011,volume:25199900},{date:"2021-01-21T00:00:00.000Z",open:269.26001,high:273.600006,low:267.48999,close:272.869995,volume:20838700},{date:"2021-01-22T00:00:00.000Z",open:272.01001,high:278.470001,low:272,close:274.5,volume:21954e3},{date:"2021-01-25T00:00:00.000Z",open:278.140015,high:280.100006,low:271.51001,close:278.01001,volume:19087e3},{date:"2021-01-26T00:00:00.000Z",open:278.140015,high:285.390015,low:277.809998,close:282.049988,volume:19373600},{date:"2021-01-27T00:00:00.000Z",open:282.529999,high:283.450012,low:268.119995,close:272.140015,volume:35346200},{date:"2021-01-28T00:00:00.000Z",open:277.179993,high:286.790009,low:264.700012,close:265,volume:37758800},{date:"2021-01-29T00:00:00.000Z",open:265.299988,high:266.559998,low:254.850006,close:258.329987,volume:30389500},{date:"2021-02-01T00:00:00.000Z",open:259.519989,high:264.170013,low:254.910004,close:262.01001,volume:22914300},{date:"2021-02-02T00:00:00.000Z",open:264,high:268.850006,low:263.269989,close:267.079987,volume:17320800},{date:"2021-02-03T00:00:00.000Z",open:265.619995,high:269.200012,low:263.839996,close:266.649994,volume:14223400},{date:"2021-02-04T00:00:00.000Z",open:267.01001,high:268.160004,low:264,close:266.48999,volume:1606e4},{date:"2021-02-05T00:00:00.000Z",open:266.799988,high:269.170013,low:265.670013,close:268.100006,volume:12454400},{date:"2021-02-08T00:00:00.000Z",open:268.75,high:269.859985,low:265,close:266.579987,volume:13755200},{date:"2021-02-09T00:00:00.000Z",open:266.440002,high:273.390015,low:265.75,close:269.450012,volume:14613400},{date:"2021-02-10T00:00:00.000Z",open:272.450012,high:273.799988,low:267.720001,close:271.869995,volume:14687200},{date:"2021-02-11T00:00:00.000Z",open:271.890015,high:273.579987,low:268.48999,close:270.390015,volume:12828600},{date:"2021-02-12T00:00:00.000Z",open:270.519989,high:271.179993,low:268.339996,close:270.5,volume:9097600},{date:"2021-02-16T00:00:00.000Z",open:270.799988,high:276.600006,low:270.049988,close:273.970001,volume:15417200},{date:"2021-02-17T00:00:00.000Z",open:271.23999,high:273.970001,low:269.579987,close:273.570007,volume:12763200},{date:"2021-02-18T00:00:00.000Z",open:269.570007,high:271.950012,low:266.029999,close:269.390015,volume:15249100},{date:"2021-02-19T00:00:00.000Z",open:269.859985,high:270.269989,low:260.149994,close:261.559998,volume:25622600},{date:"2021-02-22T00:00:00.000Z",open:257.950012,high:263.070007,low:257.529999,close:260.329987,volume:17434900},{date:"2021-02-23T00:00:00.000Z",open:259.5,high:267.459991,low:254.960007,close:265.859985,volume:21924600},{date:"2021-02-24T00:00:00.000Z",open:262.329987,high:266.380005,low:258.390015,close:264.309998,volume:15736100},{date:"2021-02-25T00:00:00.000Z",open:262.299988,high:266.940002,low:254.039993,close:254.690002,volume:19053100},{date:"2021-02-26T00:00:00.000Z",open:256.470001,high:265.549988,low:256.470001,close:257.619995,volume:26619500},{date:"2021-03-01T00:00:00.000Z",open:260.820007,high:266.649994,low:257.899994,close:264.910004,volume:22157300},{date:"2021-03-02T00:00:00.000Z",open:265.779999,high:266.709991,low:258.649994,close:259,volume:15191700},{date:"2021-03-03T00:00:00.000Z",open:260.290009,high:260.98999,low:255.100006,close:255.410004,volume:15513500},{date:"2021-03-04T00:00:00.000Z",open:256.470001,high:266.48999,low:253.5,close:257.640015,volume:31626500},{date:"2021-03-05T00:00:00.000Z",open:260.670013,high:265.450012,low:255.610001,close:264.279999,volume:26820100},{date:"2021-03-08T00:00:00.000Z",open:265.549988,high:265.579987,low:255.050003,close:255.309998,volume:18391800},{date:"2021-03-09T00:00:00.000Z",open:261.179993,high:268.529999,low:259.809998,close:265.73999,volume:22039700},{date:"2021-03-10T00:00:00.000Z",open:268.640015,high:268.970001,low:262.869995,close:264.899994,volume:14210300},{date:"2021-03-11T00:00:00.000Z",open:268.109985,high:277.899994,low:267.820007,close:273.880005,volume:21834e3},{date:"2021-03-12T00:00:00.000Z",open:269.140015,high:269.73999,low:264.019989,close:268.399994,volume:20600200},{date:"2021-03-15T00:00:00.000Z",open:269.079987,high:275.959991,low:268.5,close:273.75,volume:16844800},{date:"2021-03-16T00:00:00.000Z",open:276.079987,high:282.140015,low:274.799988,close:279.279999,volume:22437700},{date:"2021-03-17T00:00:00.000Z",open:275.709991,high:286.230011,low:275.410004,close:284.01001,volume:21315e3},{date:"2021-03-18T00:00:00.000Z",open:279.869995,high:285.190002,low:278.279999,close:278.619995,volume:18728300},{date:"2021-03-19T00:00:00.000Z",open:281.220001,high:292.799988,low:281.200012,close:290.109985,volume:38930500},{date:"2021-03-22T00:00:00.000Z",open:290.450012,high:299.709991,low:286.75,close:293.540009,volume:28273100},{date:"2021-03-23T00:00:00.000Z",open:293.149994,high:298,low:289.809998,close:290.630005,volume:23000900},{date:"2021-03-24T00:00:00.000Z",open:291,high:291.720001,low:281.160004,close:282.140015,volume:18675e3},{date:"2021-03-25T00:00:00.000Z",open:280.980011,high:288.059998,low:277.75,close:278.73999,volume:24505600},{date:"2021-03-26T00:00:00.000Z",open:278.299988,high:284.5,low:277.769989,close:283.019989,volume:17629200},{date:"2021-03-29T00:00:00.000Z",open:285.769989,high:293.179993,low:284.700012,close:290.820007,volume:21718800},{date:"2021-03-30T00:00:00.000Z",open:289.829987,high:292.470001,low:286.700012,close:288,volume:17474500},{date:"2021-03-31T00:00:00.000Z",open:289.98999,high:296.5,low:288.609985,close:294.529999,volume:19498200},{date:"2021-04-01T00:00:00.000Z",open:298.399994,high:302.399994,low:296.600006,close:298.660004,volume:17616e3},{date:"2021-04-05T00:00:00.000Z",open:300.890015,high:310.769989,low:300.679993,close:308.910004,volume:28237e3},{date:"2021-04-06T00:00:00.000Z",open:308.839996,high:311.350006,low:305.25,close:306.26001,volume:17335200},{date:"2021-04-07T00:00:00.000Z",open:306.339996,high:314.25,low:305.5,close:313.089996,volume:22855200},{date:"2021-04-08T00:00:00.000Z",open:314.850006,high:315.880005,low:310.049988,close:313.019989,volume:20894100},{date:"2021-04-09T00:00:00.000Z",open:311.399994,high:314.73999,low:310.329987,close:312.459991,volume:15988600},{date:"2021-04-12T00:00:00.000Z",open:311.049988,high:312.149994,low:307.929993,close:311.540009,volume:10881900},{date:"2021-04-13T00:00:00.000Z",open:312.209991,high:314.429993,low:309.320007,close:309.76001,volume:14036900},{date:"2021-04-14T00:00:00.000Z",open:307.299988,high:308.029999,low:301.950012,close:302.820007,volume:17421400},{date:"2021-04-15T00:00:00.000Z",open:306.339996,high:310.140015,low:304.100006,close:307.820007,volume:14558300},{date:"2021-04-16T00:00:00.000Z",open:308.170013,high:308.950012,low:304.609985,close:306.179993,volume:13059200},{date:"2021-04-19T00:00:00.000Z",open:305.01001,high:307.700012,low:300.559998,close:302.23999,volume:14553500},{date:"2021-04-20T00:00:00.000Z",open:301.98999,high:305.100006,low:297.209991,close:302.649994,volume:16796400},{date:"2021-04-21T00:00:00.000Z",open:301.950012,high:301.980011,low:297.390015,close:301.470001,volume:14863500},{date:"2021-04-22T00:00:00.000Z",open:301.329987,high:302.920013,low:296.040009,close:296.519989,volume:16375400},{date:"2021-04-23T00:00:00.000Z",open:298.76001,high:302.589996,low:297.149994,close:301.130005,volume:17536800},{date:"2021-04-26T00:00:00.000Z",open:303.339996,high:305.799988,low:301.559998,close:303.040009,volume:16172600},{date:"2021-04-27T00:00:00.000Z",open:304.279999,high:305.339996,low:301.109985,close:303.570007,volume:15309300},{date:"2021-04-28T00:00:00.000Z",open:307.359985,high:310.920013,low:305.369995,close:307.100006,volume:33907200},{date:"2021-04-29T00:00:00.000Z",open:330.119995,high:331.809998,low:321.609985,close:329.51001,volume:56526800},{date:"2021-04-30T00:00:00.000Z",open:326.140015,high:329.820007,low:324.5,close:325.079987,volume:26332400},{date:"2021-05-03T00:00:00.000Z",open:326.170013,high:328.549988,low:321.839996,close:322.579987,volume:18719500},{date:"2021-05-04T00:00:00.000Z",open:320.019989,high:322.190002,low:313.119995,close:318.359985,volume:24032600},{date:"2021-05-05T00:00:00.000Z",open:318.190002,high:321.059998,low:314.48999,close:315.019989,volume:15577600},{date:"2021-05-06T00:00:00.000Z",open:314.519989,high:320.23999,low:313.269989,close:320.019989,volume:19012200},{date:"2021-05-07T00:00:00.000Z",open:322.380005,high:322.940002,low:318.75,close:319.079987,volume:15916700},{date:"2021-05-10T00:00:00.000Z",open:314.350006,high:314.579987,low:304.829987,close:305.970001,volume:24239200},{date:"2021-05-11T00:00:00.000Z",open:300.75,high:306.839996,low:299.690002,close:306.529999,volume:18920100},{date:"2021-05-12T00:00:00.000Z",open:301.130005,high:304.959991,low:298.190002,close:302.549988,volume:24645500},{date:"2021-05-13T00:00:00.000Z",open:306.079987,high:308.859985,low:302.769989,close:305.26001,volume:18079200},{date:"2021-05-14T00:00:00.000Z",open:309.540009,high:316.850006,low:309.079987,close:315.940002,volume:19245700},{date:"2021-05-17T00:00:00.000Z",open:313.549988,high:315.679993,low:311.579987,close:315.459991,volume:15401300},{date:"2021-05-18T00:00:00.000Z",open:315.589996,high:316.5,low:309.809998,close:309.959991,volume:14522400},{date:"2021-05-19T00:00:00.000Z",open:304.190002,high:314.660004,low:303.570007,close:313.589996,volume:19106200},{date:"2021-05-20T00:00:00.000Z",open:313.579987,high:319.25,low:313.160004,close:318.609985,volume:17320200},{date:"2021-05-21T00:00:00.000Z",open:319.290009,high:319.929993,low:315.809998,close:316.230011,volume:13600900},{date:"2021-05-24T00:00:00.000Z",open:318.209991,high:325.950012,low:318.029999,close:324.630005,volume:16445400},{date:"2021-05-25T00:00:00.000Z",open:327.079987,high:329.179993,low:324.799988,close:327.790009,volume:16437e3},{date:"2021-05-26T00:00:00.000Z",open:328.350006,high:329.829987,low:325.820007,close:327.660004,volume:9686900},{date:"2021-05-27T00:00:00.000Z",open:328,high:333.779999,low:326.76001,close:332.75,volume:20477700},{date:"2021-05-28T00:00:00.000Z",open:331,high:332.869995,low:328.329987,close:328.730011,volume:12037400},{date:"2021-06-01T00:00:00.000Z",open:330.149994,high:331.420013,low:326.640015,close:329.130005,volume:11765900},{date:"2021-06-02T00:00:00.000Z",open:330.380005,high:331.869995,low:327.119995,close:329.149994,volume:11654300},{date:"2021-06-03T00:00:00.000Z",open:325.779999,high:327.380005,low:323.480011,close:326.040009,volume:12610800},{date:"2021-06-04T00:00:00.000Z",open:325.899994,high:332.459991,low:325.179993,close:330.350006,volume:13289400},{date:"2021-06-07T00:00:00.000Z",open:329.480011,high:337.690002,low:328.929993,close:336.579987,volume:20136700},{date:"2021-06-08T00:00:00.000Z",open:336.700012,high:338.299988,low:332.23999,close:333.679993,volume:14580500},{date:"2021-06-09T00:00:00.000Z",open:335.73999,high:336.799988,low:330,close:330.25,volume:13727900},{date:"2021-06-10T00:00:00.000Z",open:330.790009,high:333.940002,low:328.549988,close:332.459991,volume:13240200},{date:"2021-06-11T00:00:00.000Z",open:332.579987,high:332.829987,low:328.929993,close:331.26001,volume:13587900},{date:"2021-06-14T00:00:00.000Z",open:331.899994,high:336.820007,low:329.809998,close:336.769989,volume:12250800},{date:"2021-06-15T00:00:00.000Z",open:336.98999,high:339.920013,low:335.029999,close:336.75,volume:15795200},{date:"2021-06-16T00:00:00.000Z",open:336.700012,high:337.549988,low:328.720001,close:331.079987,volume:17232200},{date:"2021-06-17T00:00:00.000Z",open:330.48999,high:337.980011,low:330.149994,close:336.51001,volume:17794100},{date:"2021-06-18T00:00:00.000Z",open:334.529999,high:336.149994,low:329,close:329.660004,volume:23039500},{date:"2021-06-21T00:00:00.000Z",open:331.089996,high:332.920013,low:327.649994,close:332.290009,volume:11337500},{date:"2021-06-22T00:00:00.000Z",open:332.690002,high:339.920013,low:332.600006,close:339.029999,volume:15345300},{date:"2021-06-23T00:00:00.000Z",open:339.350006,high:343.420013,low:338.200012,close:340.589996,volume:14817800},{date:"2021-06-24T00:00:00.000Z",open:341.850006,high:344.899994,low:341.790009,close:343.179993,volume:12329100},{date:"2021-06-25T00:00:00.000Z",open:342.589996,high:344.119995,low:339.679993,close:341.369995,volume:14594400},{date:"2021-06-28T00:00:00.000Z",open:342.459991,high:358.140015,low:341.769989,close:355.640015,volume:29156100},{date:"2021-06-29T00:00:00.000Z",open:356.269989,high:356.73999,low:349.049988,close:351.890015,volume:21417300},{date:"2021-06-30T00:00:00.000Z",open:352.170013,high:352.920013,low:347.170013,close:347.709991,volume:15107500},{date:"2021-07-01T00:00:00.000Z",open:346.820007,high:354.670013,low:346.5,close:354.390015,volume:17137e3},{date:"2021-07-02T00:00:00.000Z",open:355.100006,high:356.440002,low:352.619995,close:354.700012,volume:11521300},{date:"2021-07-06T00:00:00.000Z",open:356.5,high:358.790009,low:349.179993,close:352.779999,volume:13488500},{date:"2021-07-07T00:00:00.000Z",open:355.26001,high:356.48999,low:350,close:350.48999,volume:14218900},{date:"2021-07-08T00:00:00.000Z",open:345.730011,high:348.329987,low:342.559998,close:345.649994,volume:14406500},{date:"2021-07-09T00:00:00.000Z",open:345.320007,high:350.709991,low:345.269989,close:350.420013,volume:13018700},{date:"2021-07-12T00:00:00.000Z",open:351.230011,high:354.190002,low:349.640015,close:353.160004,volume:10018600},{date:"2021-07-13T00:00:00.000Z",open:351.5,high:358.48999,low:348.799988,close:352.089996,volume:11456e3},{date:"2021-07-14T00:00:00.000Z",open:354.559998,high:355.200012,low:346.730011,close:347.630005,volume:13894200},{date:"2021-07-15T00:00:00.000Z",open:349.230011,high:349.230011,low:340.220001,close:344.459991,volume:14781600},{date:"2021-07-16T00:00:00.000Z",open:344.910004,high:345.98999,low:340.140015,close:341.160004,volume:11026100},{date:"2021-07-19T00:00:00.000Z",open:337.570007,high:339.790009,low:334.540009,close:336.950012,volume:14372300},{date:"2021-07-20T00:00:00.000Z",open:338.799988,high:343.450012,low:334.5,close:341.660004,volume:11024300},{date:"2021-07-21T00:00:00.000Z",open:341.5,high:346.519989,low:341.25,close:346.230011,volume:9279700},{date:"2021-07-22T00:00:00.000Z",open:346.679993,high:351.540009,low:345.209991,close:351.190002,volume:12385400},{date:"2021-07-23T00:00:00.000Z",open:360.910004,high:375.329987,low:357.190002,close:369.790009,volume:33694300},{date:"2021-07-26T00:00:00.000Z",open:369.579987,high:374.440002,low:368.220001,close:372.459991,volume:14925200},{date:"2021-07-27T00:00:00.000Z",open:371.910004,high:373.149994,low:364.549988,close:367.809998,volume:15705400},{date:"2021-07-28T00:00:00.000Z",open:374.559998,high:377.549988,low:366.929993,close:373.279999,volume:29676900},{date:"2021-07-29T00:00:00.000Z",open:361,high:365.519989,low:356.73999,close:358.320007,volume:33413200},{date:"2021-07-30T00:00:00.000Z",open:354,high:360.730011,low:352.940002,close:356.299988,volume:15966700},{date:"2021-08-02T00:00:00.000Z",open:358.100006,high:359.399994,low:350.73999,close:351.950012,volume:13180400},{date:"2021-08-03T00:00:00.000Z",open:352.730011,high:353.769989,low:347.700012,close:351.23999,volume:12406100},{date:"2021-08-04T00:00:00.000Z",open:352.420013,high:360.480011,low:351.51001,close:358.920013,volume:14180600},{date:"2021-08-05T00:00:00.000Z",open:359.640015,high:363.899994,low:356.899994,close:362.970001,volume:10247200},{date:"2021-08-06T00:00:00.000Z",open:361.399994,high:365.149994,low:361.399994,close:363.51001,volume:8918100},{date:"2021-08-09T00:00:00.000Z",open:363.76001,high:365.779999,low:360.75,close:361.609985,volume:7798900},{date:"2021-08-10T00:00:00.000Z",open:361.829987,high:364.100006,low:359.040009,close:361.130005,volume:7469900},{date:"2021-08-11T00:00:00.000Z",open:362.100006,high:362.359985,low:357.809998,close:359.959991,volume:8400300},{date:"2021-08-12T00:00:00.000Z",open:358.450012,high:363,low:357.109985,close:362.649994,volume:7170700},{date:"2021-08-13T00:00:00.000Z",open:362.970001,high:364.660004,low:361.480011,close:363.179993,volume:7192500},{date:"2021-08-16T00:00:00.000Z",open:362.519989,high:366.950012,low:357.380005,close:366.559998,volume:11222100},{date:"2021-08-17T00:00:00.000Z",open:362.980011,high:364.670013,low:355.070007,close:358.450012,volume:12328700},{date:"2021-08-18T00:00:00.000Z",open:356.25,high:359.859985,low:355.149994,close:355.450012,volume:10042400},{date:"2021-08-19T00:00:00.000Z",open:351.350006,high:357.570007,low:351,close:355.119995,volume:12004500},{date:"2021-08-20T00:00:00.000Z",open:354.600006,high:359.98999,low:353.309998,close:359.369995,volume:8693500},{date:"2021-08-23T00:00:00.000Z",open:359.440002,high:365.690002,low:359.100006,close:363.350006,volume:10942e3},{date:"2021-08-24T00:00:00.000Z",open:363.660004,high:367.959991,low:361.839996,close:365.51001,volume:9235100},{date:"2021-08-25T00:00:00.000Z",open:365.600006,high:370.859985,low:365.399994,close:368.390015,volume:9684500},{date:"2021-08-26T00:00:00.000Z",open:368.380005,high:369.440002,low:364.130005,close:364.380005,volume:7888700},{date:"2021-08-27T00:00:00.000Z",open:365.100006,high:373.73999,low:364.079987,close:372.630005,volume:11214200},{date:"2021-08-30T00:00:00.000Z",open:372.559998,high:381.48999,low:370.519989,close:380.660004,volume:13547300},{date:"2021-08-31T00:00:00.000Z",open:379.950012,high:382.76001,low:378.799988,close:379.380005,volume:12345400},{date:"2021-09-01T00:00:00.000Z",open:379.589996,high:384.329987,low:378.809998,close:382.049988,volume:11567200},{date:"2021-09-02T00:00:00.000Z",open:381.5,high:381.75,low:374.059998,close:375.279999,volume:14832900},{date:"2021-09-03T00:00:00.000Z",open:374.75,high:377.160004,low:373.109985,close:376.26001,volume:7509600},{date:"2021-09-07T00:00:00.000Z",open:375.880005,high:382.959991,low:373.149994,close:382.179993,volume:10793800},{date:"2021-09-08T00:00:00.000Z",open:380.160004,high:380.869995,low:374.790009,close:377.570007,volume:11067200},{date:"2021-09-09T00:00:00.000Z",open:377.640015,high:379.829987,low:376.570007,close:378,volume:9098900},{date:"2021-09-10T00:00:00.000Z",open:381.359985,high:383.790009,low:378.26001,close:378.690002,volume:11537600},{date:"2021-09-13T00:00:00.000Z",open:381.679993,high:381.75,low:374.350006,close:376.51001,volume:13026300},{date:"2021-09-14T00:00:00.000Z",open:377.399994,high:378.589996,low:375.109985,close:376.529999,volume:8711600},{date:"2021-09-15T00:00:00.000Z",open:377,high:377.559998,low:367.670013,close:373.920013,volume:17940300},{date:"2021-09-16T00:00:00.000Z",open:372.790009,high:373.559998,low:369.709991,close:373.059998,volume:11934200},{date:"2021-09-17T00:00:00.000Z",open:371.410004,high:371.410004,low:361.589996,close:364.720001,volume:26299e3},{date:"2021-09-20T00:00:00.000Z",open:359.299988,high:361.029999,low:349.799988,close:355.700012,volume:19822800},{date:"2021-09-21T00:00:00.000Z",open:358.5,high:360.040009,low:355.190002,close:357.480011,volume:11751900},{date:"2021-09-22T00:00:00.000Z",open:347.230011,high:349.839996,low:340.690002,close:343.209991,volume:43692900},{date:"2021-09-23T00:00:00.000Z",open:345.359985,high:349.670013,low:343,close:345.959991,volume:21806300},{date:"2021-09-24T00:00:00.000Z",open:343.23999,high:354.350006,low:342.369995,close:352.959991,volume:18801900},{date:"2021-09-27T00:00:00.000Z",open:349.809998,high:355.149994,low:347.079987,close:353.579987,volume:15205800},{date:"2021-09-28T00:00:00.000Z",open:347.970001,high:349.600006,low:338.920013,close:340.649994,volume:21710300},{date:"2021-09-29T00:00:00.000Z",open:343.149994,high:345.230011,low:338.880005,close:339.609985,volume:14452200},{date:"2021-09-30T00:00:00.000Z",open:340.450012,high:342.799988,low:338.149994,close:339.390015,volume:16547100},{date:"2021-10-01T00:00:00.000Z",open:341.609985,high:345.019989,low:338.640015,close:343.01001,volume:14905300},{date:"2021-10-04T00:00:00.000Z",open:335.529999,high:335.940002,low:322.700012,close:326.230011,volume:42885e3},{date:"2021-10-05T00:00:00.000Z",open:328.579987,high:335.179993,low:326.160004,close:332.959991,volume:35377900},{date:"2021-10-06T00:00:00.000Z",open:329.73999,high:334.380005,low:325.799988,close:333.640015,volume:26443e3},{date:"2021-10-07T00:00:00.000Z",open:337,high:338.839996,low:328.980011,close:329.220001,volume:28307500},{date:"2021-10-08T00:00:00.000Z",open:331.51001,high:333.399994,low:328.709991,close:330.049988,volume:15934300},{date:"2021-10-11T00:00:00.000Z",open:327.630005,high:330.459991,low:325.309998,close:325.450012,volume:14708200},{date:"2021-10-12T00:00:00.000Z",open:323.029999,high:324.380005,low:317.369995,close:323.769989,volume:31658700},{date:"2021-10-13T00:00:00.000Z",open:326.970001,high:327,low:322.660004,close:324.540009,volume:14761500},{date:"2021-10-14T00:00:00.000Z",open:328.359985,high:330.519989,low:327.100006,close:328.529999,volume:14302200},{date:"2021-10-15T00:00:00.000Z",open:328.679993,high:329.070007,low:322.51001,close:324.76001,volume:21575100},{date:"2021-10-18T00:00:00.000Z",open:328.950012,high:335.890015,low:327.5,close:335.339996,volume:21585e3},{date:"2021-10-19T00:00:00.000Z",open:339.649994,high:342.459991,low:337.279999,close:339.98999,volume:18786300},{date:"2021-10-20T00:00:00.000Z",open:343.450012,high:343.980011,low:339.450012,close:340.779999,volume:13639500},{date:"2021-10-21T00:00:00.000Z",open:340.279999,high:342.309998,low:337.799988,close:341.880005,volume:16354400},{date:"2021-10-22T00:00:00.000Z",open:326.350006,high:329.630005,low:321.109985,close:324.609985,volume:35224500},{date:"2021-10-25T00:00:00.000Z",open:320.299988,high:329.559998,low:319.720001,close:328.690002,volume:38409e3},{date:"2021-10-26T00:00:00.000Z",open:328.26001,high:330.209991,low:309.600006,close:315.809998,volume:65654e3},{date:"2021-10-27T00:00:00.000Z",open:314.190002,high:319.25,low:312.059998,close:312.220001,volume:29971800},{date:"2021-10-28T00:00:00.000Z",open:312.98999,high:325.519989,low:308.109985,close:316.920013,volume:50806800},{date:"2021-10-29T00:00:00.000Z",open:320.190002,high:326,low:319.600006,close:323.570007,volume:37059400},{date:"2021-11-01T00:00:00.000Z",open:326.040009,high:333.450012,low:326,close:329.980011,volume:31518900},{date:"2021-11-02T00:00:00.000Z",open:331.380005,high:334.790009,low:323.799988,close:328.079987,volume:28353e3},{date:"2021-11-03T00:00:00.000Z",open:327.48999,high:332.149994,low:323.200012,close:331.619995,volume:20786500},{date:"2021-11-04T00:00:00.000Z",open:334.01001,high:337.269989,low:332.649994,close:335.850006,volume:22495300},{date:"2021-11-05T00:00:00.000Z",open:340.309998,high:346.790009,low:339.640015,close:341.130005,volume:26852100},{date:"2021-11-08T00:00:00.000Z",open:344.420013,high:344.790009,low:338.339996,close:338.619995,volume:18342500},{date:"2021-11-09T00:00:00.000Z",open:340,high:341.309998,low:334.470001,close:335.369995,volume:17556700},{date:"2021-11-10T00:00:00.000Z",open:332.48999,high:333.190002,low:325.51001,close:327.640015,volume:21872600},{date:"2021-11-11T00:00:00.000Z",open:329.820007,high:332.459991,low:327,close:327.73999,volume:12376600},{date:"2021-11-12T00:00:00.000Z",open:330.179993,high:341.859985,low:329.779999,close:340.890015,volume:25387200},{date:"2021-11-15T00:00:00.000Z",open:344.339996,high:353.649994,low:343.200012,close:347.559998,volume:25076600},{date:"2021-11-16T00:00:00.000Z",open:343.829987,high:346.649994,low:340.869995,close:342.959991,volume:18181100},{date:"2021-11-17T00:00:00.000Z",open:344.23999,high:347.299988,low:340.100006,close:340.769989,volume:13602800},{date:"2021-11-18T00:00:00.000Z",open:339.720001,high:342.459991,low:335.299988,close:338.690002,volume:17487200},{date:"2021-11-19T00:00:00.000Z",open:342.200012,high:352.100006,low:339.899994,close:345.299988,volume:26441e3},{date:"2021-11-22T00:00:00.000Z",open:349.049988,high:353.829987,low:340.51001,close:341.01001,volume:27116800},{date:"2021-11-23T00:00:00.000Z",open:338.929993,high:341.399994,low:333.5,close:337.25,volume:17211500}].map((function(e){return Object(d.a)(Object(d.a)({},e),{},{date:new Date(e.date)})})),RtData:void 0,type:"chart",id:"mainchart-fb2021"},{id:"kama_01",type:"indicator",indicator:m.iKAMA,graphProps:{style:{strokeColor:["#0693E3"]}}},{type:"indicator",indicator:Object(m.createIRSI)({period:5}),id:"rsi_01"},{id:"ema_rsi_01",type:"indicator",indSrcId:"rsi_01",indicator:m.iEMA,graphProps:{style:{strokeColor:["#0693E3"]}}}],I={disableTheme:!1,initWidthPerTick:8};var S=function(){var e=r.a.useRef(null),t=r.a.useState(!0),a=Object(i.a)(t,2),n=a[0],o=a[1];console.log("production mode"),console.log=function(){};var l=Object(m.useChartState)({ContainerRef:e,data:T,settings:I}),d=Object(i.a)(l,3),u=d[0],c=d[1],p=d[2],v=r.a.useCallback((function(){c({task:"setTheme",params:{theme:n?m.defaultLightTheme:m.defaultDarkTheme}}),o((function(e){return!e}))}),[c,n]);return Object(h.jsx)(r.a.Fragment,{children:Object(h.jsx)(s.a,{theme:m.muiDarkTheme,children:Object(h.jsx)(w,{setDarkMode:v,children:Object(h.jsx)(f,{setDarkMode:v,children:Object(h.jsx)(m.CChart,{ref:e,ChartState:u,Dispatch:c,rtTicks:p,settings:I})})})})})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,589)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)}))};l.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root")),E()},62:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(190),r=a(0),o=a(178),l=a(511),i=a(500),d=a(191),s=a(193),u=a(507),c=a(501),p=a(489),h=a(512),f=a(203),m=a(30),v=a(336),g=a(496),x=a(252),y=a(5),b=a(337),_=a(508),k=a(502),C=a(492),w=a(205),T=a(338),I=a(503),S=a(513),E=a(494),P=a(504),M=a(208),A=a(497),D=a(491),Z=a(499),z=a(490),F=a(209),X=a(341),Y=a(414),L=a(423),R=a(424),U=a(448),O=a(449),j=a(509),W=a(498),G=a(493),N=a(450),B=a(505),V=a(510),H=a(506),K=a(253),q=a(64),$=a(484),J=a(487),Q=a(488);function ee(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var te=ee(r),ae=function(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}(r),ne=ee(o),re=ee(l),oe=ee(i),le=ee(d),ie=ee(s),de=ee(u),se=ee(h),ue=ee(f),ce=ee(m),pe=ee(g),he=ee(x),fe=ee(y),me=ee(b),ve=ee(_),ge=ee(k),xe=ee(C),ye=ee(w),be=ee(T),_e=ee(I),ke=ee(S),Ce=ee(E),we=ee(P),Te=ee(M),Ie=ee(A),Se=ee(D),Ee=ee(Z),Pe=ee(F),Me=ee(X),Ae=ee(Y),De=ee(L),Ze=ee(R),ze=ee(U),Fe=ee(O),Xe=ee(j),Ye=ee(W),Le=ee(G),Re=ee(N),Ue=ee(B),Oe=ee(V),je=ee(H),We=ee(K),Ge=ee($),Ne=function(e){var t=e.disableTheme,a=e.theme;return te.default.createElement(te.default.Fragment,null,t?e.children:te.default.createElement(oe.default,{theme:a},e.children))},Be=re.default(ne.default({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},mode:"light"},typography:{h1:{fontWeight:600,fontSize:"3rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h2:{fontWeight:600,fontSize:"2.5rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h3:{fontWeight:600,fontSize:"2.1rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h4:{fontWeight:600,fontSize:"1.8rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h5:{fontSize:"1.4rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h6:{fontSize:"1.25rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},fontFamily:"'Quattrocento Sans', sans-serif"}})),Ve=re.default(ne.default({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},mode:"dark",background:{paper:"#424242"}},typography:{h1:{fontWeight:600,fontSize:"3rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h2:{fontWeight:600,fontSize:"2.5rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h3:{fontWeight:600,fontSize:"2.1rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h4:{fontWeight:600,fontSize:"1.8rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h5:{fontSize:"1.4rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h6:{fontSize:"1.25rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},fontFamily:"'Quattrocento Sans', sans-serif"}})),He=function(e){return!!(null==e?void 0:e.pixY)&&"pixOpen"in e.pixY&&"pixHigh"in e.pixY&&"pixLow"in e.pixY&&"pixClose"in e.pixY},Ke=function(e){return!!(null==e?void 0:e.pixY)&&"pixClose"in e.pixY},qe=function(e){return!!(null==e?void 0:e.pixY)&&"pixPrices"in e.pixY},$e=function(e){return"open"in e&&"high"in e&&"low"in e&&"close"in e},Je=function(e){return"close"in e},Qe=function(e){return"volume"in e},et=function(e){return"prices"in e},tt=function(e){if(!e)return!1;var t=e[e.length-1];return!!t.close&&!!t.date},at=function(e){return"indicator"===e.type},nt=function(e){return"chart"===e.type},rt=function(e){return"setGeneralProp"===e.task},ot=function(e){return"setGraphProp"===e.task},lt=function(e){return"setToolProp"===e.task},it=function(e){return"addSubchart"===e.task},dt=function(e){return"addGraph"===e.task},st=function(e){return"draw"===e.task},ut=function(e){return"removeSubchart"===e.task},ct=function(e){return"removeGraph"===e.task},pt=function(e){return"removeTool"===e.task},ht=function(e){return"updateInteractionState"===e.task},ft=function(e){return"clearChart"===e.task},mt=function(e){return"swapSubcharts"===e.task},vt=function(e){return"addData"===e.task},gt=function(e){return"modifyChartData"===e.task},xt=function(e){return"modifyIndicatorData"===e.task},yt=function(e){return"setTheme"===e.task},bt=Object.freeze({__proto__:null,isCandleChartDataset:$e,isLineChartDataset:Je,isVolumeDataset:Qe,isIndicatorDataset:et,isChartDataSeries:tt,isIndicatorDataSeries:function(e){var t=e[e.length-1];return!!t.prices&&t.prices.length>0},isCandleChartPixDataset:He,isIndicatorPixDataset:qe,isLineChartPixDataset:Ke,isChartGraph:nt,isIndicatorGraph:at,isAddDataAction:vt,isAddGraphAction:dt,isAddSubchartAction:it,isClearChartAction:ft,isDrawAction:st,isRemoveGraphAction:ct,isRemoveSubchartAction:ut,isRemoveToolAction:pt,isSetGeneralPropAction:rt,isSetGraphPropAction:ot,isSetToolPropAction:lt,isSwapSubchartsAction:mt,isUpdateInteractionState:ht,isModifyChartDataAction:gt,isModifyIndicatorDataAction:xt,isSetThemeAction:yt}),_t=te.default.memo((function(e){var t,a,n,r=e.subCharts,o=e.subchartIdx,l=e.yaxisIdx,i=e.graphIdx,d=e.calcXaxis,s=e.calcSubcharts,u=e.indSeriesIdx,p=e.rtTicks,h=r[o].yaxis[l].graphs[i],f=null===(a=null===(t=null==s?void 0:s[o])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[l],m=null===(n=null==f?void 0:f.graphs)||void 0===n?void 0:n[i],v=te.default.useMemo((function(){return p||((null==m?void 0:m.curTicks)?m.curTicks:[])}),[null==m?void 0:m.curTicks,p]);return v&&0!==v.length?te.default.createElement(te.default.Fragment,null,v.map((function(e,t){var a;if(!qe(e))return null;var n=e.pixY,r=null==f?void 0:f.pixY0,s=null!==(a=null==n?void 0:n.pixPrices[null!=u?u:0])&&void 0!==a?a:r,p=e.pixX+d.pixXStart;return te.default.createElement(c.Line,{key:"barchart-".concat(o,"-").concat(l,"-").concat(i,"-line-").concat(t),points:[p+.5,r+.5,p+.5,s+.5],listening:!1,x:0,y:0,stroke:at(h)?h.style.strokeColor[null!=u?u:0]:h.style.strokeColor,strokeWidth:1})})).filter((function(e){return null!==e}))):null})),kt=function(e){return null==e||!("number"!=typeof e||!isNaN(e))},Ct=function(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0},wt=te.default.memo((function(e){var t,a,n,r,o=e.subCharts,l=e.subchartIdx,i=e.yaxisIdx,d=e.graphIdx,s=e.indSeriesIdx,u=void 0===s?0:s,p=e.calcXaxis,h=e.calcSubcharts,f=e.rtTicks,m=o[l].yaxis[i].graphs[d],v=null===(r=null===(n=null===(a=null===(t=null==h?void 0:h[l])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[i])||void 0===n?void 0:n.graphs)||void 0===r?void 0:r[d],g=f||(null==v?void 0:v.curTicks),x=g?g.map((function(e){var t;if(!e.pixY)return null;var a=qe(e)?null===(t=e.pixY.pixPrices)||void 0===t?void 0:t[u]:Ke(e)?e.pixY.pixClose:null;return kt(a)?null:[e.pixX,a]})).flat().filter((function(e){return null!==e})):[];return(null==x?void 0:x.length)>0?te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Line,{listening:!1,key:"sub".concat(l,"_graph").concat(d,"-").concat(u),x:p.pixXStart,y:0,points:x,stroke:at(m)?m.style.strokeColor[u]:m.style.strokeColor,strokeWidth:1})):null})),Tt=te.default.memo((function(e){var t,a,n,r,o,l,i=e.subCharts,d=e.calcXaxis,s=e.calcSubcharts,u=e.subchartIdx,p=void 0===u?0:u,h=e.yaxisIdx,f=void 0===h?0:h,m=e.graphIdx,v=void 0===m?0:m,g=e.rtTicks,x=null===(a=null===(t=null==i?void 0:i[p])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[f],y=null==x?void 0:x.graphs[v],b=null===(l=null===(o=null===(r=null===(n=null==s?void 0:s[p])||void 0===n?void 0:n.yaxis)||void 0===r?void 0:r[f])||void 0===o?void 0:o.graphs)||void 0===l?void 0:l[v],_=te.default.useMemo((function(){return g?g.slice(1):(null==b?void 0:b.curTicks)?b.curTicks:[]}),[null==b?void 0:b.curTicks,g]),k=te.default.useMemo((function(){return(null==d?void 0:d.scaledWidthPerTick)>2?Math.floor(.35*(d.scaledWidthPerTick-1)):0}),[d.scaledWidthPerTick]);return y&&nt(y)&&_?te.default.createElement(te.default.Fragment,null,_.map((function(e,t){var a=e.pixX+d.pixXStart;if(!He(e))return null;var n=e.pixY,r=n.pixOpen,o=n.pixHigh,l=n.pixLow,i=n.pixClose,s=2*k;return te.default.createElement(te.default.Fragment,{key:"candle-".concat(t)},te.default.createElement(c.Line,{listening:!1,x:0,y:0,points:[a+.5,o+.5,a+.5,l+.5],stroke:y.style.candleWickStrokeColor,strokeWidth:1}),i!==r?0!==k?te.default.createElement(c.Rect,{listening:!1,draggable:!1,x:a+.5-k,y:r+.5,width:s,height:i-r,stroke:y.style.candleStrokeColor,fill:i<r?y.style.candleUpColor:y.style.candleDownColor,strokeWidth:1}):te.default.createElement(c.Line,{listening:!1,draggable:!1,x:0,y:0,points:[a+.5,r+.5,a+.5,i+.5],stroke:i<r?y.style.candleUpColor:y.style.candleDownColor,strokeWidth:1}):te.default.createElement(c.Line,{listening:!1,draggable:!1,x:0,y:0,points:[a+.5-k,i+.5,a+.5+k,i+.5],stroke:y.style.candleStrokeColor,strokeWidth:1}))}))):null})),It=te.default.memo((function(e){var t=e.valign,a=e.halign,n=e.text,r=e.x,o=e.y,l=e.fontColor,i=e.fontSize,d=e.fontName,s=e.name,u=te.default.useCallback((function(e,s){var u=e._context;u.font=(null!=i?i:12)+"px "+(null!=d?d:"Arial"),u.fillStyle=null!=l?l:"black",u.textAlign=null!=a?a:"left",u.textBaseline=null!=t?t:"middle",u.fillText(n,r,o),e.fillStrokeShape(s)}),[d,l,i,a,t,r,o,n]);return te.default.createElement(c.Shape,{name:s,listening:!1,sceneFunc:u})})),St=864e5,Et=[{name:"minutes",period:6e4,scaleMultiplys:[2,5,15,30],range:[6e4,18e5]},{name:"hours",period:36e5,scaleMultiplys:[2,4,12],range:[36e5,432e5]},{name:"days",period:St,scaleMultiplys:[2],range:[St,St]},{name:"weeks",period:6048e5,scaleMultiplys:[2],range:[3*St,11*St]},{name:"months",period:26784e5,scaleMultiplys:[2,3,6],range:[28*St,31*St]},{name:"years",period:31536e6,scaleMultiplys:[],range:[365*St,366*St]}],Pt=function(e,t){switch(t){case"minutes":return p.format(e,"HH:mm");case"hours":return p.format(e,"HH:00");case"days":case"weeks":return p.format(e,"dd");case"months":return p.format(e,"MMM");case"years":return p.format(e,"yyyy");default:return""}},Mt=function(e,t){switch(t){case"minutes":return p.getMinutes(e);case"hours":return p.getHours(e);case"days":return p.getDate(e);case"weeks":return p.getISOWeek(e);case"months":return p.getMonth(e);case"years":return p.getYear(e);default:return 0}},At=function(e,t,a){return e*a+t},Dt=function(e,t,a){return(e-t)/a},Zt=function(e,t,a,n,r){return t-e*Math.pow(10,a)*r+n},zt=function(e,t,a,n,r){return(t+n-e)/r*Math.pow(10,-a)},Ft=function(e,t,a){return et(e[0])&&t?t[1]:Math.max.apply(Math,e.map((function(e){if(et(e)){var t=Math.max.apply(Math,e.prices.filter((function(e,t){var n,r;return null!==e&&["line","bars"].includes(null!==(r=null===(n=null==a?void 0:a[t])||void 0===n?void 0:n.type)&&void 0!==r?r:"")})));return kt(t)?0:t}return $e(e)?e.high:e.close})))},Xt=function(e,t,a){return et(e[0])&&t?t[0]:Math.min.apply(Math,e.map((function(e){if(et(e)){var t=Math.min.apply(Math,e.prices.filter((function(e,t){var n,r;return null!==e&&["line","bars"].includes(null!==(r=null===(n=null==a?void 0:a[t])||void 0===n?void 0:n.type)&&void 0!==r?r:"")})));return kt(t)?0:t}return $e(e)?e.low:e.close})))},Yt=function(e,t,a,n,r,o,l){var i=l||10;if(kt(e)||kt(a)||kt(n)||kt(r)||kt(t)||kt(t))return null;var d=et(t)?t.prices.filter((function(e){return null!==e})):$e(t)?[t.open,t.high,t.low,t.close]:Je(t)?[t.close]:[];if(0===d.length)return null;var s=o[n].yaxis[r];return d.map((function(e){return{pixY:Zt(e,a[n].bottom,s.decimals,s.translatedY,s.heightPerPt),y:e.toFixed(Ct(e))}})).filter((function(t){return t.pixY>=e-i&&t.pixY<=e+i})).sort((function(t,a){return Math.abs(t.pixY-e)<Math.abs(a.pixY-e)?-1:Math.abs(t.pixY-e)>Math.abs(a.pixY-e)?1:0}))},Lt=function(e,t){if(!e||!t)return null;var a=t.find((function(t){return e[1]>=t.top&&e[1]<t.bottom}));if(!a)return null;var n=t.indexOf(a);return-1===n?null:n},Rt=function(e,t,a,n){if(!e||!t||!a)return[];var r=Lt(e,t);if(null===r)return[];var o=a.totalTranslatedX,l=a.scaledWidthPerTick;return t[r].yaxis.map((function(a,i){var d,s,u,c=null===(u=null===(s=null===(d=n.subcharts)||void 0===d?void 0:d[r])||void 0===s?void 0:s.yaxis)||void 0===u?void 0:u[i];return c?a.tools.map((function(a,n){return a.xy.map((function(a,d){var s=At(a[0],o,l),u=Zt(a[1],t[r].bottom,c.decimals,c.translatedY,c.heightPerPt);return e[0]>=s-10&&e[0]<=s+10&&e[1]>=u-10&&e[1]<=u+10?{subchartIdx:r,yaxisIdx:i,toolIdx:n,toolPtIdx:d}:null})).filter((function(e){return null!==e}))})).flat():[]})).flat()},Ut=function(e){var t=e.map((function(e){return $e(e)?Math.max.apply(Math,[Ct(e.close),Ct(e.open),Ct(e.high),Ct(e.low)]):Je(e)?Ct(e.close):et(e)?Ct(Math.max.apply(Math,e.prices.map((function(e){return kt(e)?0:Ct(e)})))):0}));return Math.max.apply(Math,t)},Ot=te.default.memo((function(e){var t,a,n,r,o,l,i,d,s,u,p,h=e.disableSnapX,f=e.disableSnapGraphs,m=e.containerSize,v=e.style,g=e.subcharts,x=e.data,y=e.calcSubcharts,b=e.calcPointer,_=e.calcXaxis,k=e.pixToY,C=e.rtTicks,w=m.width-1,T=m.height-1,I=v.yaxis.widthYAxis,S=v.xaxis,E=S.heightXAxis,P=S.heightTickMarkLines,M=b.move,A=M.pixXSnap,D=M.xUnlimited,Z=M.pixXUnlimSnap,z=_.xEnd,F=_.xLast,X=b.move.subchartIdx,Y=null===(t=b.move.snapDatasets)||void 0===t?void 0:t[0],L=Y?Y.yaxisIdx:null,R=Y?Y.graphIdx:null,U=kt(L)||kt(R)||kt(X)?null:null===(r=null===(n=null===(a=g[X].yaxis)||void 0===a?void 0:a[L])||void 0===n?void 0:n.graphs)||void 0===r?void 0:r[R],O=x.find((function(e){return e.id===(null==U?void 0:U.dataId)})),j=(!h||(null==Y?void 0:Y.ySnap)&&!f)&&A?A:null!=Z?Z:0,W="chart"===(null==x?void 0:x[0].type)?x[0]:null,G=Y?Y.dateString:D>F&&D<=F+(null!==(l=null===(o=null==C?void 0:C[0])||void 0===o?void 0:o.data.length)&&void 0!==l?l:1)-1&&(null===(i=null==W?void 0:W.meta)||void 0===i?void 0:i.chartPeriod)?function(){var e,t,a,n=null===(a=null===(t=null===(e=null==C?void 0:C[0])||void 0===e?void 0:e.data)||void 0===t?void 0:t[D-z])||void 0===a?void 0:a.date,r=W.meta.chartPeriod;return n&&r?Pt(n,r.name):""}():"",N=D>F&&D<=F+(null!==(s=null===(d=null==C?void 0:C[0])||void 0===d?void 0:d.data.length)&&void 0!==s?s:1)-1&&!kt(X)&&!kt(b.move.pixY)&&C?C.map((function(e){var t,a,n;return null!==(n=null===(a=Yt(b.move.pixY,null===(t=null==e?void 0:e.data)||void 0===t?void 0:t[D-z],g,X,0,y))||void 0===a?void 0:a.filter((function(e){return null!==e})))&&void 0!==n?n:[]})).flat():null,B=kt(null==Y?void 0:Y.pixYSnap)?!kt(N)&&N.length>0?N[0].pixY:kt(b.move.pixY)?null:b.move.pixY:Y.pixYSnap,V=kt(null==Y?void 0:Y.ySnap)||f?!kt(N)&&N.length>0?N[0].y:(null==Y?void 0:Y.y)?Y.y.toString():k&&!kt(X)?k(b.move.pixY,X,0).toString():null:Y.ySnap,H=U&&!kt(V)&&at(U)&&"indicator"===(null==O?void 0:O.type)&&O.indicator.default.decimals?parseFloat(V).toFixed(O.indicator.default.decimals).toString():V;return B&&g.length>0?te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Line,{name:"crosshair-x",listening:!1,x:0,y:0,points:[j+.5,.5,j+.5,T-E+P+.5],stroke:v.crosshair.strokeColor,strokeWidth:1}),b.move.pixY<=g[g.length-1].bottom?te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Line,{name:"crosshair-y",listening:!1,x:0,y:0,points:[.5,B+.5,w-I+.5,B+.5],stroke:v.crosshair.strokeColor,strokeWidth:1}),te.default.createElement(c.Line,{name:"y-marker-polygon",listening:!1,draggable:!1,x:0,y:0,points:[w-I,B,w-I+10,B+10,w,B+10,w,B-10,w-I+10,B-10],stroke:v.crosshair.yMarkerStrokeColor,fill:v.crosshair.yMarkerBackgroundColor,strokeWidth:1,closed:!0}),te.default.createElement(It,{name:"y-marker text",listening:!1,text:null!=H?H:"",halign:"left",valign:"middle",fontColor:v.crosshair.yMarkerTextColor,fontSize:v.crosshair.yMarkerFontSize,fontName:v.crosshair.yMarkerFontName,x:w-I+v.yaxis.widthTickmarkLines+5,y:B})):null,D>=0&&D<=z+(null!==(p=null===(u=null==C?void 0:C[0])||void 0===u?void 0:u.data.length)&&void 0!==p?p:1)-1?te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Rect,{name:"x-marker rect",listening:!1,x:j-25,y:T-E+P+.5,width:50,height:25,fill:v.crosshair.xMarkerBackgroundColor,stroke:v.crosshair.xMarkerStrokeColor,strokeWidth:1}),te.default.createElement(It,{name:"x-marker text",listening:!1,fontSize:v.crosshair.xMarkerFontSize,fontName:v.crosshair.xMarkerFontName,fontColor:v.crosshair.xMarkerTextColor,halign:"center",valign:"top",text:G,x:j,y:T-E+P+5+.5})):null):null})),jt=te.default.memo((function(e){var t,a,n,r,o,l,i,d,s,u,p,h,f,m,v,g=e.rtTicks,x=e.containerSize,y=e.style,b=e.indSeriesIdx,_=e.xaxis,k=null===(a=null===(t=null==g?void 0:g[0])||void 0===t?void 0:t.ticks)||void 0===a?void 0:a[(null===(r=null===(n=null==g?void 0:g[0])||void 0===n?void 0:n.ticks)||void 0===r?void 0:r.length)-1],C=null===(l=null===(o=null==g?void 0:g[0])||void 0===o?void 0:o.data)||void 0===l?void 0:l[(null===(d=null===(i=null==g?void 0:g[0])||void 0===i?void 0:i.data)||void 0===d?void 0:d.length)-1];if(!g||!k||!C)return null;var w=x.width,T=y.yaxis.widthYAxis,I=null==k?void 0:k.pixY,S=k.pixX,E=I&&Ke(k)?null===(s=null==k?void 0:k.pixY)||void 0===s?void 0:s.pixClose:qe(k)?null===(p=null===(u=null==k?void 0:k.pixY)||void 0===u?void 0:u.pixPrices)||void 0===p?void 0:p[null!=b?b:0]:null,P=Je(C)?null===(h=C)||void 0===h?void 0:h.close:et(C)?null===(m=null===(f=C)||void 0===f?void 0:f.prices)||void 0===m?void 0:m[null!=b?b:0]:null;return kt(E)||kt(P)?null:te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Line,{name:"graphmarkerLineY",listening:!1,x:_.pixXStart,y:0,points:[Math.round(S)+.5,Math.round(E)+.5,w-T+.5,Math.round(E)+.5],stroke:"rgba(102,102,102,0.5)",strokeWidth:1}),te.default.createElement(c.Line,{name:"graphMarkerPolygonY",listening:!1,draggable:!1,x:0,y:0,points:[Math.round(w-T)+.5,Math.round(E)+.5,Math.round(w-T+10)+.5,Math.round(E+10)+.5,Math.round(w)+.5,Math.round(E+10)+.5,Math.round(w)+.5,Math.round(E-10)+.5,Math.round(w-T+10)+.5,Math.round(E-10)+.5],stroke:y.crosshair.yMarkerStrokeColor,fill:y.crosshair.yMarkerBackgroundColor,strokeWidth:1,closed:!0}),te.default.createElement(It,{name:"graphMarkerPolygonYText",listening:!1,text:null!==(v=P.toString())&&void 0!==v?v:"",halign:"left",valign:"middle",fontColor:y.crosshair.yMarkerTextColor,fontSize:y.crosshair.yMarkerFontSize,fontName:y.crosshair.yMarkerFontName,x:Math.round(w-T+y.yaxis.widthTickmarkLines+5)+.5,y:Math.round(E)+.5}))})),Wt=te.default.memo((function(e){var t=e.calcXaxis,a=e.style,n=e.containerSize,r=a.xaxis,o=r.heightXAxis,l=r.heightTickMarkLines;return te.default.createElement(te.default.Fragment,null,t.curTicks.map((function(e,t){return te.default.createElement(te.default.Fragment,{key:"xaxis-ticks-".concat(t)},te.default.createElement(c.Line,{name:"x-tickmark-".concat(t),listening:!1,x:e.x,y:n.height-1-o+.5,points:[0,0,0,l],stroke:a.xaxis.strokeColor,strokeWidth:1}),a.grid.useGridX?te.default.createElement(c.Line,{name:"x-gridline-".concat(t),listening:!1,x:e.x,y:.5,points:[0,0,0,n.height-1-o+.5],stroke:a.grid.strokeColor,strokeWidth:1}):null,te.default.createElement(It,{text:e.dateString,halign:"center",valign:"top",fontColor:a.xaxis.fontColor,fontName:a.xaxis.fontName,fontSize:a.xaxis.fontSize,x:e.x+.5,y:n.height-1-o+l+.5+8}))})))})),Gt=te.default.memo((function(e){var t=e.subcharts,a=e.calcSubcharts,n=e.style,r=e.containerSize,o=n.yaxis.widthTickmarkLines;return te.default.createElement(te.default.Fragment,null,t.map((function(e,t){return e.yaxis.map((function(e,l){var i,d,s,u=null===(d=null===(i=null==a?void 0:a[t])||void 0===i?void 0:i.yaxis)||void 0===d?void 0:d[l];return(null!==(s=null==u?void 0:u.drawTicks)&&void 0!==s?s:[]).map((function(e,t){return te.default.createElement(te.default.Fragment,{key:"yaxis-ticks-".concat(t)},te.default.createElement(c.Line,{name:"y-tickmark-".concat(t),listening:!1,x:r.width-1+.5-n.yaxis.widthTickmarkLines,y:e.pixY+.5,points:[0,0,o,0],stroke:n.yaxis.strokeColor,strokeWidth:1}),n.grid.useGridY?te.default.createElement(c.Line,{name:"y-gridline-".concat(t),listening:!1,x:.5,y:e.pixY+.5,points:[0,0,r.width-1+.5,0],stroke:n.grid.strokeColor,strokeWidth:1}):null,te.default.createElement(It,{text:e.label,halign:"right",valign:"middle",fontColor:n.yaxis.fontColor,fontName:n.yaxis.fontName,fontSize:n.yaxis.fontSize,x:r.width-1-n.yaxis.widthTickmarkLines+.5,y:e.pixY}))}))}))})))})),Nt=fe.default(he.default)((function(e){return{border:"1px solid #666",borderRadius:5,marginRight:10,background:e.theme.palette.secondary.main,minWidth:32,height:32,position:"relative",top:0}})),Bt=te.default.memo((function(e){var t=e.text,a=e.id,n=e.iconPath,r=e.onClick,o=e.iconColor,l=e.textColor,i=e.addIcons,d=e.iconBgColor,s=null!=i?i:[];return te.default.createElement(pe.default,{button:!0,onClick:r,key:a+"_listitem"},te.default.createElement(Nt,{sx:{background:null!=d?d:"secondary.main"}},te.default.createElement(me.default,{path:n,size:"32px",color:null!=o?o:"#fff"}),s),te.default.createElement(ie.default,{variant:"h6",component:"div",color:null!=l?l:"text.primary"},t))})),Vt=function(e){var t=e.onNavigate,a=ce.default(),n=te.default.useCallback((function(){null==t||t("chart")}),[t]),r=te.default.useCallback((function(){null==t||t("indicators")}),[t]),o=te.default.useCallback((function(){null==t||t("tools")}),[t]),l=te.default.useCallback((function(){null==t||t("settings")}),[t]);return te.default.createElement(ue.default,{sx:{pt:4}},te.default.createElement(Bt,{id:"0",text:"Chart",iconPath:v.mdiChartLine,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:n}),te.default.createElement(Bt,{text:"Indicators",id:"1",iconPath:v.mdiChartBellCurve,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:r}),te.default.createElement(Bt,{id:"2",text:"Tools",iconPath:v.mdiPencilRuler,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:o}),te.default.createElement(Bt,{id:"3",text:"Settings",iconPath:v.mdiTune,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:l}))},Ht=fe.default(Ce.default)((function(e){var t,a,n,r=e.theme;return(t={})["& .".concat(E.treeItemClasses.content)]=((a={boxSizing:"border-box",borderTopRightRadius:r.spacing(2),borderBottomRightRadius:r.spacing(2),paddingTop:r.spacing(1),paddingBottom:r.spacing(1),paddingRight:r.spacing(2),"&:hover":{backgroundColor:r.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"var(--tree-view-bg-color, ".concat(r.palette.action.selected,")"),color:"var(--tree-view-color)"}})["& .".concat(E.treeItemClasses.label)]={color:"inherit"},a),t["& .".concat(E.treeItemClasses.group)]=((n={marginLeft:r.spacing(1)})["& .".concat(E.treeItemClasses.content)]={paddingLeft:r.spacing(1)},n),t})),Kt=te.default.forwardRef((function(e,t){var a=e.bgColorSelected,r=e.colorSelected,o=e.labelIcon,l=e.labelInfo,i=e.labelText,d=e.typographyVariant,s=n.__rest(e,["bgColorSelected","colorSelected","labelIcon","labelInfo","labelText","typographyVariant"]);return te.default.createElement(Ht,n.__assign({ref:t,label:te.default.createElement(ke.default,{direction:"row",sx:{alignItems:"center",alignContent:"center"}},te.default.createElement(ve.default,{component:"span",sx:{mr:1,lineHeight:0}},o),te.default.createElement(ie.default,{variant:null!=d?d:"h6",component:"div",sx:{flexGrow:1}},i),te.default.createElement(ie.default,{variant:"caption",component:"div"},l)),sx:{color:"text.primary"},style:{"--tree-view-color":r,"--tree-view-bg-color":a}},s))}));Kt.displayName="CTreeItem";var qt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},$t=function(e){return e in qt?Jt(qt.name):null},Jt=function(e){if(!e)return null;e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,a,n){return t+t+a+a+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},Qt=["0, 0, 0","102, 102, 102","187, 187, 187","255, 255, 255","144, 19, 254","189, 16, 224","63, 81, 181","6, 147, 227","142, 209, 252","0, 128, 128","0, 208, 132","123, 220, 181","184, 0, 0","245, 0, 87","247, 141, 167","121, 85, 72","255, 105, 0","252, 185, 0"],ea=function(e){var t=e.color,a=e.width,r=void 0===a?24:a,o=e.height,l=void 0===o?24:o,i=e.BoxProps,d=void 0===i?{}:i;return te.default.createElement(ve.default,n.__assign({},d,{sx:n.__assign({minWidth:r,minHeight:l,boxSizing:"border-box",background:t,borderRadius:1,border:"2px solid #000"},null==d?void 0:d.sx)}))},ta=function(e){var t=e.color,a=e.onColorSelected,n=te.default.useState(!1),r=n[0],o=n[1],l=te.default.useState(null),i=l[0],d=l[1],s=te.default.useRef(null),u=/((^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$))/i.test(t),c=u&&"string"==typeof t?Jt(t):null,p="string"==typeof t?t.match(/^(rgb)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/):null,h=!!p&&2 in p&&"a"===p[2],f=p&&3 in p&&4 in p&&5 in p?[parseFloat(p[3]),parseFloat(p[4]),parseFloat(p[5])]:u&&c?[c.r,c.g,c.b]:[];if(0===f.length){var m=$t(t);m&&f.push(m.r,m.g,m.b)}var v=h&&p&&6 in p?100*parseFloat(p[6]):100,g=te.default.useState(v),x=g[0],y=g[1];return te.default.createElement(te.default.Fragment,null,te.default.createElement(ye.default,{color:"primary",style:{padding:0},onClick:function(){o(!0)},ref:s},te.default.createElement(ea,{color:t})),te.default.createElement(Te.default,{id:"colorpicker-popover",open:r,anchorEl:s.current,onClose:function(){o(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{sx:{width:300,p:1}}},te.default.createElement(we.default,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},Qt.map((function(e,t){return te.default.createElement(we.default,{item:!0,xs:2,key:t},te.default.createElement(ye.default,{color:"default",style:{padding:0},onMouseOver:function(e){d("rgba(".concat(Qt[t],",").concat(x,")"))},onMouseLeave:function(){d(null)},onClick:function(){a("rgba("+Qt[t]+","+x/100+")")}},te.default.createElement(ea,{color:"rgba("+e+",1)",width:24,height:24})))})),te.default.createElement(we.default,{item:!0,xs:3},te.default.createElement(ie.default,null,"Alpha")),te.default.createElement(we.default,{item:!0,xs:6,style:{padding:"0px 10px"}},te.default.createElement(Ie.default,{value:x,onChange:function(e,t){y(Array.isArray(t)?t[0]:t),a("rgba(".concat(f[0],",").concat(f[1],",").concat(f[2],",").concat((Array.isArray(t)?t[0]:t)/100,")"))}})),te.default.createElement(we.default,{item:!0,xs:3},te.default.createElement(Se.default,{margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:"5px 5px 5px 10px"}},value:x,onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)&&(t=0),t<0||t>100||(y(t),a("rgba(".concat(f[0],",").concat(f[1],",").concat(f[2],",").concat(t/100,")")))}}))),te.default.createElement(we.default,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(ie.default,{component:"div",align:"center"},"R")),te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(ie.default,{component:"div",align:"center"},"G")),te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(ie.default,{component:"div",align:"center"},"B")),te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(ie.default,{component:"div",align:"center"},"A")),te.default.createElement(we.default,{item:!0,xs:2}),te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(ea,{color:i||t,width:24,height:24,BoxProps:{maxWidth:24,maxHeight:24}}))),te.default.createElement(we.default,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(Se.default,{disabled:!0,value:f?f[0]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(184, 0, 0, ".concat(f?f[0]/255:1,")")}}})),te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(Se.default,{disabled:!0,value:f?f[1]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(0, 208, 132, ".concat(f?f[1]/255:1,")")}},fullWidth:!0})),te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(Se.default,{disabled:!0,value:f?f[2]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(6, 147, 227, ".concat(f?f[2]/255:1,")")}}})),te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(Se.default,{disabled:!0,value:x,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"#bbb"}}})),te.default.createElement(we.default,{item:!0,xs:2}),te.default.createElement(we.default,{item:!0,xs:2},te.default.createElement(ge.default,{color:"secondary",variant:"contained",size:"small",style:{minWidth:0},onClick:function(){return o(!1)}},"OK")))))},aa=function(e){var t=n.__rest(e,[]),a=ce.default();return ae.createElement(Ee.default,n.__assign({"aria-label":"treeview",defaultCollapseIcon:ae.createElement(me.default,{path:v.mdiMenuDown,size:1,color:"light"===a.palette.mode?"#333":"#fff"}),defaultExpandIcon:ae.createElement(me.default,{path:v.mdiMenuRight,size:1,color:"light"===a.palette.mode?"#333":"#fff"}),defaultEndIcon:ae.createElement("div",{style:{width:24}}),sx:{overflowY:"auto",pt:1,pb:1}},t),e.children)},na=function(e){var t=e.path,a=e.size,r=e.style,o=e.background,l=e.border,i=n.__rest(e,["path","size","style","background","border"]);return te.default.createElement(me.default,n.__assign({path:t,size:a},i,{style:n.__assign({background:o,border:null!=l?l:"1px solid #666",borderRadius:5,marginRight:10,boxSizing:"border-box"},r)}))},ra=function(e){var t=e.nodeId,a=e.onColorSelected,n=e.color,r=e.iconPath,o=e.text,l=ce.default();return te.default.createElement(Kt,{key:t,nodeId:t,labelText:o,typographyVariant:"body1",labelIcon:te.default.createElement(na,{path:r,size:"24px",color:l.palette.text.primary,border:"dark"===l.palette.mode?void 0:"1px solid #bbb"}),labelInfo:te.default.createElement(ta,{color:"string"==typeof n?n:n[0],onColorSelected:a})})},oa=function(e){var t,a,n,r,o,l=e.subchartIdx,i=e.yaxisIdx,d=e.graphIdx,s=e.subCharts,u=e.Dispatch,c=e.onSettingsExpand,p=e.data,h=null===(r=null===(n=null===(a=null===(t=null==s?void 0:s[l])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[i])||void 0===n?void 0:n.graphs)||void 0===r?void 0:r[d],f=ce.default(),m=p.find((function(e){return e.id===(null==h?void 0:h.dataId)}));return nt(h)?te.default.createElement(Kt,{onClick:function(){var e="graph-sub-".concat(l,"-y-").concat(i,"-graph-").concat(d);null==c||c(e)},key:"graph-sub-".concat(l,"-y-").concat(i,"-graph-").concat(d),nodeId:"graph-sub-".concat(l,"-y-").concat(i,"-graph-").concat(d),labelText:null!==(o=null==m?void 0:m.name)&&void 0!==o?o:"Graph No."+d,bgColorSelected:f.palette.primary.light,labelIcon:te.default.createElement(na,{path:v.mdiChartLine,size:"32px",color:f.palette.secondary.contrastText,background:f.palette.primary.main}),labelInfo:0!==l||0!==d?te.default.createElement(ye.default,{size:"small",onClick:function(e){e.preventDefault(),u({task:"removeGraph",params:{subchartIdx:l,yaxisIdx:i,graphIdx:d}})}},te.default.createElement(me.default,{path:v.mdiClose,size:1,color:"light"===f.palette.mode?"#333":"#fff"})):void 0},"chart"===h.type&&"candlechart"===(null==m?void 0:m.meta.type)?te.default.createElement(Kt,{key:"chart-s".concat(l,"-y").concat(i,"-g").concat(d,"-chartType"),nodeId:"chart-s".concat(l,"-y").concat(i,"-g").concat(d,"-chartType"),labelText:"chart type",typographyVariant:"body1",labelIcon:te.default.createElement(na,{path:v.mdiSetLeft,size:"24px",color:"light"===f.palette.mode?"#333":"#fff"}),labelInfo:te.default.createElement(Pe.default,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:h.chartType,onChange:function(e){var t=e.target.value;u({task:"setGraphProp",params:{prop:"chartType",subchartIdx:l,yaxisIdx:i,graphIdx:d,newValue:t}})}},["line","candles"].map((function(e,t){return te.default.createElement(_e.default,{key:"chart-s".concat(l,"-y").concat(i,"-g").concat(d,"-chartType-o-").concat(t),value:e},e)})))}):null,function(e){return nt(e)&&"chart"===(null==m?void 0:m.type)?"candles"===e.chartType?[{text:"candle up color",icon:v.mdiBorderColor,color:e.style.candleUpColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleUpColor",subchartIdx:l,yaxisIdx:i,graphIdx:d,newValue:e}})}},{text:"candle down color",icon:v.mdiBorderColor,color:e.style.candleDownColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleDownColor",subchartIdx:l,yaxisIdx:i,graphIdx:d,newValue:e}})}},{text:"candle stroke color",icon:v.mdiBorderColor,color:e.style.candleStrokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleStrokeColor",subchartIdx:l,yaxisIdx:i,graphIdx:d,newValue:e}})}},{text:"candle wick color",icon:v.mdiBorderColor,color:e.style.candleWickStrokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleWickStrokeColor",subchartIdx:l,yaxisIdx:i,graphIdx:d,newValue:e}})}}]:[{text:"line stroke color",icon:v.mdiBorderColor,color:e.style.strokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"strokeColor",subchartIdx:l,yaxisIdx:i,graphIdx:d,newValue:e}})}}]:[]}(h).map((function(e,t){return te.default.createElement(ra,{key:"settings-treeitem-chartGraph-s".concat(l,"-y").concat(i,"-g").concat(d,"-p").concat(t),nodeId:"settings-treeitem-chartGraph-s".concat(l,"-y").concat(i,"-g").concat(d,"-p").concat(t),text:e.text,color:e.color,iconPath:e.icon,onColorSelected:e.onColorSelected})}))):null},la=function(e,t,a,r){if("object"!=typeof e)return null;var o=Array.isArray(e)?n.__spreadArray([],e,!0):n.__assign({},e),l=e,i=o;try{t.forEach((function(e,d){if(!(e in l)||"number"!=typeof e&&"string"!=typeof e)throw o=null,new Error("path at position ".concat(d," '").concat(e,"' not found in src object/array -1"));if(d<t.length-1){if("number"==typeof e&&!Array.isArray(l)||"string"==typeof e&&"object"!=typeof l)throw o=null,new Error("path at position ".concat(d," '").concat(e,"' not found in src object/array -2"));if(Array.isArray(l),i[e]=Array.isArray(l[e])?n.__spreadArray([],l[e],!0):n.__assign({},l[e]),"remove"===r&&d===t.length-2){var s=t[t.length-1];if("number"==typeof s&&Array.isArray(l[e]))i[e]=n.__spreadArray(n.__spreadArray([],l[e].slice(0,t[t.length-1]),!0),l[e].slice(s+1),!0);else if("string"==typeof s&&(l[e],1)){var u=l[e],c=s,p=(u[c],n.__rest(u,["symbol"==typeof c?c:c+""]));i[e]=n.__assign({},p)}}else i=i[e];l=l[e]}else if("remove"!==r){if(!(e in l)&&"add"!==r)throw o=null,new Error("path at position ".concat(d," '").concat(e,"' not found in src object/array -3"));"add"===r&&Array.isArray(l[e])?i[e]=n.__spreadArray(n.__spreadArray([],l[e],!0),[a],!1):i[e]=a}}))}catch(n){return console.error("Error at setStateProp(): ",n),null}return o},ia=function(e,t,a){return la(e,t,a,"edit")},da=function(e,t,a){return la(e,t,a,"add")},sa=function(e,t){return la(e,t,null,"remove")},ua=function(e,t){if("object"!=typeof e)return null;var a=e;try{return t.forEach((function(e,t){if(!(e in a)||"number"!=typeof e&&"string"!=typeof e)throw new Error("path at position ".concat(t," '").concat(e,"' not found in src object/array -1"));a=a[e]})),a}catch(e){console.error("Error at getStateProp(): ",e)}},ca=function(e,t,a,n,r,o){return n&&r?pa(e,r,n,o,a,t):tt(e)?ha(e,t,a):null},pa=function(e,t,a,r,o,l){var i,d=Ze.default(a),s=d.params.findIndex((function(e){return"dataSeriesKey"===e.name}));-1===s||kt(r)||(d.params[s].val=r);var u=null===(i=a.indicatorFn)||void 0===i?void 0:i(n.__assign({chartData:e,prevData:[]},d.params.reduce((function(e,t){var a;return n.__assign(n.__assign({},e),((a={})[t.name]=t.val,a))}),{}))),c=d.default.decimals?d.default.decimals:2,p=o||ze.default(),h=null!=l?l:d.name;return{data:u,name:h,fullName:h+"("+d.params.map((function(e){return"dataSeriesKey"!==e.name?e.val:null})).filter((function(e){return null!==e})).join(",")+")",type:"indicator",decimals:c,indicator:d,indSrcId:t,id:p}},ha=function(e,t,a){var r=ma(e),o=r.decimals,l=r.isDescending,i=n.__rest(r,["decimals","isDescending"]);l&&e.reverse();var d=kt(null==i?void 0:i.chartPeriod)?null:va(e,null==i?void 0:i.chartPeriod);return kt(d)?null:{id:a,data:e,meta:i,dateStat:d,type:"chart",name:t,decimals:o}},fa=function(e){var t=e.slice(1).map((function(t,a){return n=e[a+1],r=e[a],(null==n?void 0:n.date)&&(null==r?void 0:r.date)?n.date.valueOf()-r.date.valueOf():0;var n,r})),a=Me.default(t),r=Object.entries(a).map((function(e){var t=e[0],a=e[1];return{dT:parseInt(t,10),amt:a}})),o=r.map((function(e){return e.amt})),l=o.indexOf(Math.max.apply(Math,o)),i=Math.abs(r[l].dT);return{dataPeriod:i,dataPeriodConfidence:r[l].amt/e.length,chartPeriod:function(e){var t=Et.find((function(t){return e===t.period||e>=t.range[0]&&e<=t.range[1]}));if(!t)return null;t.scaleMultiplys,t.range;var a=n.__rest(t,["scaleMultiplys","range"]),r=Math.round(e/t.period);return n.__assign(n.__assign({},a),{multiply:r})}(i),isDescending:r[l].dT<0}},ma=function(e){var t=fa(e),a=t.dataPeriod,n=t.dataPeriodConfidence,r=t.chartPeriod,o=t.isDescending;return{dataPeriod:a,chartPeriod:r,dataPeriodConfidence:n,type:"candlechart",decimals:Ut(e),isDescending:o}},va=function(e,t,a){var r,o=Et.map((function(e){return e.name})),l=o.slice(o.findIndex((function(e){return e===t.name}))),i=l.map((function(e){return e.slice(0,e.length-1)})),d=e.map((function(e){var t={};return i.forEach((function(a,n){t[a]=Mt(e.date,l[n])})),t})),s=d.reduce((function(e,t){return{years:e.lastData?e.lastData.year!==t.year?e.years+1:e.years:1,months:e.lastData?e.lastData.month!==t.month?e.months+1:e.months:"month"in t?1:0,weeks:e.lastData?e.lastData.week!==t.week?e.weeks+1:e.weeks:"week"in t?1:0,days:e.lastData?e.lastData.day!==t.day?e.days+1:e.days:"day"in t?1:0,hours:e.lastData?e.lastData.hour!==t.hour?e.hours+1:e.hours:"hour"in t?1:0,minutes:e.lastData?e.lastData.minute!==t.minute?e.minutes+1:e.minutes:"minute"in t?1:0,lastData:t}}),a?a.accAmt:{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,lastData:null}),u=n.__rest(s,[]),c=null===(r=function e(t,a){var n=function(e,t){return kt(e)||"years"===t?d:d.filter((function(a){return a.year===(null==e?void 0:e.year)&&(a.month===(null==e?void 0:e.month)||["months"].includes(t))&&(a.week===(null==e?void 0:e.week)||["months","weeks"].includes(t))&&(a.day===(null==e?void 0:e.day)||["months","weeks","days"].includes(t))&&(a.hour===(null==e?void 0:e.hour)||"minutes"!==t)}))}(a||null,t);return"minutes"===t?{minutes:Ae.default(n,(function(e){return"".concat(e.minute)})).map((function(e){return{minute:e.minute}}))}:"hours"===t?{hours:Ae.default(n,(function(e){return"".concat(e.hour)})).map((function(t){return{hour:t.hour,minutes:"minute"in t?e("minutes",t).minutes:[]}}))}:"days"===t?{days:Ae.default(n,(function(e){return"".concat((e.year,e.month,e.week,e.day))})).map((function(t){return{day:t.day,hours:"hour"in t?e("hours",t).hours:[]}}))}:"weeks"===t?{weeks:Ae.default(n,(function(e){return"".concat((e.year,e.month,e.week))})).map((function(t){return{week:t.week,days:"day"in t?e("days",t).days:[]}}))}:"months"===t?{months:Ae.default(n,(function(e){return"".concat((e.year,e.month))})).map((function(t){return{month:t.month,weeks:"week"in t?e("weeks",t).weeks:[]}}))}:"years"===t?{years:Ae.default(d,"year").map((function(t){return{year:t.year,months:"month"in t?e("months",t).months:[]}}))}:null}("years"))||void 0===r?void 0:r.years;return{years:a?function e(t,a){var r,o,l=null!==(r=null==t?void 0:t[t.length-1])&&void 0!==r?r:null,i=null!==(o=null==a?void 0:a[0])&&void 0!==o?o:null;if(!l||!i)return n.__spreadArray(n.__spreadArray([],t,!0),a,!0);var d="year"in l?"year":"month"in l?"month":"week"in l?"week":"day"in l?"day":"hour"in l?"hour":"minute"in l?"minute":null,s="year"in l&&"months"in l&&"months"in i?{year:l.year,months:e(l.months,i.months)}:"month"in l&&"weeks"in l&&"weeks"in i?{month:l.month,weeks:e(l.weeks,i.weeks)}:"week"in l&&"days"in l&&"days"in i?{week:l.week,days:e(l.days,i.days)}:"day"in l&&"hours"in l&&"hours"in i?{day:l.day,hours:e(l.hours,i.hours)}:"hour"in l&&"minutes"in l&&"minutes"in i?{hour:l.hour,minutes:e(l.minutes,i.minutes)}:null,u=d&&d in l?l[d]:null,c=d&&d in i?i[d]:null;return u===c&&!kt(u)&&!kt(c)&&d&&s?n.__spreadArray(n.__spreadArray(n.__spreadArray([],t.slice(0,t.length-1),!0),[s],!1),a.slice(1),!0):n.__spreadArray(n.__spreadArray([],t,!0),a,!0)}(a.years,c):c,accAmt:u}},ga=function(e,t,a,r){var o,l,i=null!=a?a:{},d=i.newIndSrcId,s=i.newParams,u=e.find((function(e){return e.id===t&&"indicator"===e.type}));if("indicator"!==(null==u?void 0:u.type))return null;var c=null===(o=u.indicator)||void 0===o?void 0:o.indicatorFn,p=d||u.indSrcId,h=null===(l=e.find((function(e){return e.id===p})))||void 0===l?void 0:l.data;if(!c||!h)return null;var f=s||u.indicator.params;return n.__assign(n.__assign({},u),{data:c(n.__assign({chartData:h,prevData:null!=r?r:[]},f.reduce((function(e,t){var a;return n.__assign(n.__assign({},e),((a={})[t.name]=t.val,a))}),{}))),fullName:s?u.name+"("+s.map((function(e){return e.val})).join(",")+")":u.fullName,indSrcId:p,indicator:n.__assign(n.__assign({},u.indicator),{params:f})})},xa=function e(t,a,r){var o=null!=r?r:[];if(o.includes(a))return[];var l=t.find((function(e){return(null==e?void 0:e.id)===a&&"indicator"===(null==e?void 0:e.type)}));if("indicator"!==(null==l?void 0:l.type))return[];var i=t.find((function(e){return e.id===l.indSrcId}));return"chart"===(null==i?void 0:i.type)?[l.id]:"indicator"===(null==i?void 0:i.type)?n.__spreadArray(n.__spreadArray([],e(t,i.id,n.__spreadArray(n.__spreadArray([],o,!0),[l.id],!1)),!0),[l.id],!1):[]},ya=function e(t,a){return t.filter((function(e){return"indicator"===e.type&&e.indSrcId===a})).map((function(a){return n.__spreadArray([a.id],e(t,a.id),!0)})).flat()},ba=function(e,t,a){return xa(e,a).includes(t)},_a=function(e,t,a,r){var o=e.data,l=null!=a?a:{},i=l.newIndSrcId,d=l.newParams;if(i&&ba(o,t,i))return o;var s=De.default(n.__spreadArray([t],ya(o,t),!0)),u=n.__spreadArray([],o,!0);return s.forEach((function(e,a){var n=u.findIndex((function(t){return t.id===e})),o=ga(u,e,e===t?{newIndSrcId:i,newParams:d}:void 0,null!=r?r:[]);o&&(u[n]=o)})),u},ka=function(e){var t,a=e.subchartIdx,r=e.yaxisIdx,o=e.graphIdx,l=e.subCharts,i=e.Dispatch,d=e.handleToggleExpanded,s=e.data,u=l[a].yaxis[r].graphs[o],c=at(u)?u:null,p=ce.default(),h=s.find((function(e){return e.id===(null==c?void 0:c.dataId)}));return c&&"indicator"===(null==h?void 0:h.type)?te.default.createElement(Kt,{key:"settings-treeitem-indiGraph-s".concat(a,"-y").concat(r,"-g").concat(o),nodeId:"settings-treeitem-indiGraph-s".concat(a,"-y").concat(r,"-g").concat(o),bgColorSelected:p.palette.primary.light,onClick:function(){var e="settings-treeitem-indiGraph-s".concat(a,"-y").concat(r,"-g").concat(o);null==d||d(e)},labelIcon:te.default.createElement(na,{path:v.mdiChartBellCurve,size:"32px",color:p.palette.secondary.contrastText,background:p.palette.primary.main}),labelText:h.fullName,labelInfo:0!==a||0!==o?te.default.createElement(ye.default,{size:"small",onClick:function(e){e.preventDefault(),i({task:"removeGraph",params:{subchartIdx:a,yaxisIdx:0,graphIdx:o}})}},te.default.createElement(me.default,{path:v.mdiClose,size:1,color:"light"===p.palette.mode?"#333":"#fff"})):void 0},te.default.createElement(Kt,{key:"settings-treeitem-indiGraph-src-s".concat(a,"-y").concat(r,"-g").concat(o),nodeId:"settings-treeitem-indiGraph-src-s".concat(a,"-y").concat(r,"-g").concat(o),labelIcon:te.default.createElement(na,{path:v.mdiDatabaseExportOutline,size:"24px",color:p.palette.text.primary}),labelText:"Source",typographyVariant:"body1",labelInfo:te.default.createElement(Pe.default,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:h.indSrcId,onChange:function(e){var t=e.target.value;i({task:"modifyIndicatorData",params:{dataId:h.id,newIndSrcId:t}})}},["dataSeries","chartSeries"].includes(h.indicator.indicatorFnType)?(t=l[a].yaxis[r].graphs.map((function(e){return e.dataId})),(h.indicator.default.newSubchart?"dataSeries"===h.indicator.indicatorFnType?s:"chartSeries"===h.indicator.indicatorFnType?s.filter((function(e){return"chart"===e.type})):[]:s.filter((function(e){return t.includes(e.id)}))).map((function(e){return e.id===h.id||ba(s,h.id,e.id)?null:te.default.createElement(_e.default,{key:"settings-treeitem-indiGraph-src-menuitem-s".concat(a,"-y").concat(r,"-g").concat(o,"-").concat(e.id),value:e.id},e.name)}))):null)}),h.indicator.graphTypes.map((function(e,t){var d,s,u=c.style.strokeColor;return te.default.createElement(ra,{nodeId:"settings-treeitem-indiGraph-clrProps-".concat(a,"-y").concat(r,"-g").concat(o,"-gt").concat(t),key:"settings-treeitem-indiGraph-clrProps-".concat(a,"-y").concat(r,"-g").concat(o,"-gt").concat(t),color:null===(s=null===(d=l[a].yaxis[0].graphs[o].style)||void 0===d?void 0:d.strokeColor)||void 0===s?void 0:s[t],iconPath:v.mdiBorderColor,text:"line stroke color",onColorSelected:function(e){i({task:"setGraphProp",params:{subchartIdx:a,yaxisIdx:0,graphIdx:o,newValue:n.__spreadArray(n.__spreadArray(n.__spreadArray([],u.slice(0,t),!0),[e],!1),u.slice(t+1),!0),prop:"strokeColor"}})}})})),h.indicator.params.map((function(e,t){return te.default.createElement(Kt,{key:"sub-".concat(a,"-yaxis-").concat(r,"-graph-").concat(o,"-").concat(t),nodeId:"".concat(2+a,"00-").concat(o,"-").concat(t),labelIcon:te.default.createElement(na,{path:v.mdiIframeVariableOutline,size:"24px",color:p.palette.text.primary}),labelText:e.name,typographyVariant:"body1",labelInfo:te.default.createElement(Se.default,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},value:e.val,onChange:function(e){var a=parseFloat(e.target.value);isNaN(a)||i({task:"modifyIndicatorData",params:{dataId:h.id,newParam:{paramIdx:t,newValue:a}}})}})})}))):null},Ca=te.default.memo((function(e){var t,a=e.style,n=e.subcharts,r=e.subchartIdx,o=e.mode,l=e.calcXaxis,i=e.xy,d=e.drawPixXy,s=e.yToPix,u=n[r].top,p=!!(null==d?void 0:d[0]);if(1!==i.length&&!p||!s||!l.xToPix)return null;var h=1===i.length?[l.xToPix(i[0][0]),s(i[0][1],r,0)]:(null==d?void 0:d[0])?d[0]:null;if(!h)return null;var f=(null==a?void 0:a.strokeColor)?a.strokeColor:"red",m=(null==a?void 0:a.anchorColor)?a.anchorColor:"#333",v=["extendUp","extendDown","extendUpDown","*extendToSecondPoint"].includes(null!=o?o:"")?o:"extendUpDown",g=null===(t=null==n?void 0:n[Math.max(n.length-1,0)])||void 0===t?void 0:t.bottom,x=[[h[0],"extendDown"===v?h[1]:u],[h[0],"extendUp"===v?h[1]:g]];return te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Line,{listening:!1,x:0,y:0,points:x.flat(),stroke:f,strokeWidth:1}),te.default.createElement(c.Circle,{x:h[0],y:h[1],radius:5,fill:m}))})),wa={name:"Vertical Line",type:"vline",nPoints:1,category:"lines",params:[{name:"mode",val:"extendUpDown",vals:["extendUp","extendDown","extendUpDown"],type:"select"}],default:{params:[{icon:v.mdiSetLeft}]},component:Ca},Ta=te.default.memo((function(e){var t=e.style,a=e.subcharts,n=e.subchartIdx,r=e.containerSize,o=e.calcXaxis,l=e.mode,i=e.xy,d=e.drawPixXy,s=e.yToPix,u=r.left,p=u+r.width,h=a[n],f=h.bottom,m=h.top,v=!!(null==d?void 0:d[0]);if(1!==i.length&&!v||!s||!o.xToPix)return null;var g=1===i.length?[o.xToPix(i[0][0]),s(i[0][1],n,0)]:(null==d?void 0:d[0])?d[0]:null;if(!g)return null;if((null==g?void 0:g[1])<m||(null==g?void 0:g[1])>f)return null;var x=(null==t?void 0:t.strokeColor)?t.strokeColor:"red",y=(null==t?void 0:t.anchorColor)?t.anchorColor:"#333",b=["extendRight","extendLeft","extendLeftRight","*extendToSecondPoint"].includes(null!=l?l:"")?l:"extendLeftRight",_=[["extendRight"===b?g[0]:u,g[1]],["extendLeft"===b?g[0]:p,g[1]]];return te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Line,{listening:!1,x:0,y:0,points:[_[0][0],_[0][1],_[1][0],_[1][1]],stroke:x,strokeWidth:1}),te.default.createElement(c.Circle,{x:g[0],y:_[0][1],radius:5,fill:y}))})),Ia={name:"Horizontal Line",type:"hline",nPoints:1,category:"lines",params:[{name:"mode",val:"extendLeftRight",vals:["extendRight","extendLeft","extendLeftRight"],type:"select"}],default:{params:[{icon:v.mdiSetLeft}]},component:Ta},Sa=te.default.memo((function(e){var t=e.style,a=e.mode,r=e.subcharts,o=e.subchartIdx,l=e.calcXaxis,i=e.xy,d=e.drawPixXy,s=e.yToPix,u=r[o],p=u.bottom,h=u.top;if(2!==i.length&&2!==(null==d?void 0:d.length)||!s||!l.xToPix)return null;var f=l.xToPix,m=2===i.length?i.map((function(e){return[f(e[0]),(t=e[1],s(t,o,0))];var t})):2===(null==d?void 0:d.length)?d:null;if(!m||2!==m.length)return null;var v=(null==t?void 0:t.strokeColor)?t.strokeColor:"red",g=(null==t?void 0:t.anchorColor)?t.anchorColor:"#333",x=["line","trendline","infiniteLine"].includes(null!=a?a:"")?a:"trendline",y=m[0][0]>m[1][0]?[m[1],m[0]]:m,b=[n.__spreadArray([],y[0],!0),n.__spreadArray([],y[1],!0)];if("trendline"===x||"infiniteLine"===a){var _=b[1][0]-b[0][0],k=b[1][1]-b[0][1],C=k/_,w=k<0?h:p,T=b[0][1]-C*b[0][0],I=(w-T)/C;if(b[1][0]=I,b[1][1]=w,"infiniteLine"===a){var S=k<0?p:h,E=(S-T)/C;b[0][0]=E,b[0][1]=S}}return te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Line,{listening:!1,draggable:!1,x:0,y:0,points:b.flat(),stroke:v,strokeWidth:1}),te.default.createElement(c.Circle,{x:y[0][0],y:y[0][1],radius:5,fill:g}),te.default.createElement(c.Circle,{x:y[1][0],y:y[1][1],radius:5,fill:g}))})),Ea=[Ia,wa,{name:"Trendline",type:"trendline",nPoints:2,category:"lines",params:[{name:"mode",val:"trendline",vals:["line","trendline","infiniteLine"],type:"select"}],default:{params:[{icon:v.mdiSetLeft}]},component:Sa}],Pa=function(e){var t,a,n,r,o=e.subchartIdx,l=e.yaxisIdx,i=e.toolIdx,d=e.subCharts,s=e.Dispatch,u=e.handleToggleExpanded,c=(null===(r=null===(n=null===(a=null===(t=null==d?void 0:d[o])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[l])||void 0===n?void 0:n.tools)||void 0===r?void 0:r[i])||null,p=ce.default();return c?te.default.createElement(Kt,{key:"tool-".concat(i),nodeId:"tool-".concat(o,"-").concat(i),labelText:"hline"===c.type?"horizontal line":"vline"===c.type?"vertical line":"trendline"===c.type?"Trendline":"Tool",typographyVariant:"body1",labelIcon:te.default.createElement("div",{style:{border:"1px solid ".concat("light"===p.palette.mode?"#333":"#fff"),borderRadius:5}},te.default.createElement(me.default,{path:"hline"===c.type||"vline"===c.type||"trendline"===c.type?v.mdiMinus:v.mdiHelp,size:"24px",color:"light"===p.palette.mode?"#333":"#fff",rotate:"trendline"===c.type?-45:"vline"===c.type?90:0})),onClick:function(){var e="tool-".concat(o,"-").concat(i);null==u||u(e)},bgColorSelected:p.palette.primary.light,labelInfo:te.default.createElement(ye.default,{size:"small",onClick:function(e){e.preventDefault(),s({task:"removeTool",params:{subchartIdx:o,yaxisIdx:0,toolIdx:i}})}},te.default.createElement(me.default,{path:v.mdiClose,size:1,color:"light"===p.palette.mode?"#333":"#fff"}))},"hline"===c.type?te.default.createElement(Kt,{key:"tool-".concat(o,"-y0-").concat(i,"-hlinelevel"),nodeId:"tool-".concat(o,"-y0-").concat(i,"-hlinelevel"),labelText:"Y-Level",typographyVariant:"body1",labelIcon:te.default.createElement(na,{path:v.mdiArrowSplitHorizontal,size:"24px",color:"light"===p.palette.mode?"#333":"#fff"}),labelInfo:te.default.createElement(Se.default,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},defaultValue:c.xy[0][1],onChange:function(e){var t=parseFloat(e.target.value);isNaN(t)||s({task:"setToolProp",params:{prop:"hLineYlevel",subchartIdx:o,yaxisIdx:0,toolIdx:i,newValue:t}})}})}):null,c.params?c.params.map((function(e,t){var a,n,r=null===(n=null===(a=Ea.find((function(e){return e.type===c.type})))||void 0===a?void 0:a.default)||void 0===n?void 0:n.params,d=r?r[t].icon:v.mdiIframeVariableOutline;return te.default.createElement(Kt,{key:"tool-s".concat(o,"-y0-t").concat(i,"-p").concat(t),nodeId:"tool-s".concat(o,"-y0-t").concat(i,"-p").concat(t),labelText:e.name,typographyVariant:"body1",labelIcon:te.default.createElement(na,{path:d,size:"24px",color:"light"===p.palette.mode?"#333":"#fff"}),labelInfo:"select"===e.type?te.default.createElement(Pe.default,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:e.val,onChange:function(e){var a=e.target.value;s({task:"setToolProp",params:{prop:"toolParam",subchartIdx:o,yaxisIdx:l,toolIdx:i,toolParamIdx:t,newValue:a}})}},e.vals.map((function(e,a){return te.default.createElement(_e.default,{key:"tool-s".concat(o,"-y0-t").concat(i,"-p").concat(t,"-o").concat(a),value:e},e)}))):"number"===e.type?te.default.createElement(Se.default,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,maxWidth:80}},value:e.val,onChange:function(e){var a=parseFloat(e.target.value);isNaN(a)||s({task:"setToolProp",params:{prop:"toolParam",subchartIdx:o,yaxisIdx:l,toolIdx:i,toolParamIdx:t,newValue:a}})}}):void 0})})):null,function(e){return[{text:"stroke color",icon:v.mdiBorderColor,color:e.style.strokeColor,onColorSelected:function(e){s({task:"setToolProp",params:{prop:"strokeColor",subchartIdx:o,yaxisIdx:0,toolIdx:i,newValue:e}})}},{text:"anchor color",icon:v.mdiBullseye,color:e.style.anchorColor,onColorSelected:function(e){s({task:"setToolProp",params:{prop:"anchorColor",subchartIdx:o,yaxisIdx:0,toolIdx:i,newValue:e}})}}]}(c).map((function(e,t){return te.default.createElement(ra,{nodeId:"settings-treeitem-tool-clrProp-".concat(o,"-y").concat(l,"-t").concat(i,"-p").concat(t),key:"settings-treeitem-tool-clrProp-".concat(o,"-y").concat(l,"-t").concat(i,"-p").concat(t),color:e.color,iconPath:e.icon,text:e.text,onColorSelected:e.onColorSelected})}))):null},Ma=te.default.forwardRef((function(e,t){var a=e.subchartIdx,r=e.subcharts,o=e.data,l=e.Dispatch,i=e.onSettingsExpand,d=e.additionalLabelInfo,s=n.__rest(e,["subchartIdx","subcharts","data","Dispatch","onSettingsExpand","additionalLabelInfo"]),u=ce.default(),c=r[a];return te.default.createElement(Kt,n.__assign({ref:t},s,{key:"sub-".concat(a),nodeId:"sub-".concat(a),labelText:0===a?"Mainchart":"Subchart ".concat(a),bgColorSelected:u.palette.primary.light,onClick:function(){var e="sub-".concat(a);null==i||i(e)},labelIcon:te.default.createElement(na,{path:v.mdiChartAreaspline,size:"32px",color:u.palette.secondary.contrastText,background:u.palette.secondary.main}),labelInfo:0!==a?te.default.createElement(te.default.Fragment,null,d,te.default.createElement(ye.default,{size:"small",onClick:function(e){e.preventDefault(),l({task:"removeSubchart",params:{subchartIdx:a}})}},te.default.createElement(b.Icon,{path:v.mdiClose,size:1,color:"light"===u.palette.mode?"#333":"#fff"}))):void 0}),c.yaxis[0].graphs.map((function(e,t){return at(e)?te.default.createElement(ka,{key:"editIndicator-sub-".concat(a,"-yaxis-").concat(0,"-graph-").concat(t),subCharts:r,Dispatch:l,subchartIdx:a,yaxisIdx:0,graphIdx:t,handleToggleExpanded:i,data:o}):nt(e)?te.default.createElement(oa,{key:"graph-sub-".concat(a,"-y-").concat(0,"-graph-").concat(t,"-frag"),subCharts:r,Dispatch:l,subchartIdx:a,yaxisIdx:0,graphIdx:t,onSettingsExpand:i,data:o}):null})),c.yaxis[0].tools.length>0?te.default.createElement(Kt,{key:"tools-".concat(a,"-y0"),nodeId:"tools-".concat(a,"-y0"),labelIcon:te.default.createElement("div",{style:{background:u.palette.primary.main,width:32,height:32,border:"1px solid #666",borderRadius:5,marginRight:10}},te.default.createElement(b.Icon,{path:v.mdiPencilRuler,size:"32px",color:u.palette.secondary.contrastText})),labelText:"Tools",onClick:function(){var e="tools-".concat(a,"-y0");null==i||i(e)}},c.yaxis[0].tools.map((function(e,t){return te.default.createElement(Pa,{key:"editTool-sub-".concat(a,"-yaxis-").concat(0,"-tool-").concat(t),subCharts:r,Dispatch:l,subchartIdx:a,yaxisIdx:0,toolIdx:t,handleToggleExpanded:i})}))):null)}));Ma.displayName="SubchartTreeItem";var Aa=function(e){return te.default.createElement(na,{path:e.iconPath,size:"24px",color:e.theme.palette.text.primary,style:{marginLeft:e.theme.spacing(1)},border:"light"===e.theme.palette.mode?"1px solid #bbb":void 0})},Da=function(e){var t=e.subCharts,a=e.onNavigate,r=e.Dispatch,o=e.onSettingsExpand,l=e.ChartMenuState,i=e.style,d=e.data,s=ce.default(),u=te.default.useState(null),c=u[0],p=u[1],h=function(e){p(null),e&&(null==a||a(e))},f=[{category:void 0},{category:"xaxis",icon:v.mdiArrowExpandRight},{category:"yaxis",icon:v.mdiArrowExpandUp},{category:"grid",icon:v.mdiGrid},{category:"crosshair",icon:v.mdiCrosshairs}],m=[{nodeId:"bgcolor",labelText:"background color",iconPath:v.mdiWater,labelInfo:te.default.createElement(ta,{color:i.backgroundColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"backgroundColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisFillColor",labelText:"fill color",iconPath:v.mdiWater,labelInfo:te.default.createElement(ta,{color:i.xaxis.fillColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"xAxisFillColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisStrokeColor",labelText:"stroke color",iconPath:v.mdiBorderColor,labelInfo:te.default.createElement(ta,{color:i.xaxis.strokeColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"xAxisStrokeColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisTextColor",labelText:"text color",iconPath:v.mdiFormatText,labelInfo:te.default.createElement(ta,{color:i.xaxis.fontColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"xAxisTextColor",newValue:e}})}})},{category:"yaxis",nodeId:"yaxisStrokeColor",labelText:"stroke color",iconPath:v.mdiBorderColor,labelInfo:te.default.createElement(ta,{color:i.yaxis.strokeColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"yAxisStrokeColor",newValue:e}})}})},{category:"yaxis",nodeId:"yaxisTextColor",labelText:"text color",iconPath:v.mdiFormatText,labelInfo:te.default.createElement(ta,{color:i.yaxis.fontColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"yAxisTextColor",newValue:e}})}})},{category:"grid",nodeId:"useXGrid",labelText:"use x-axis grid",iconPath:v.mdiGrid,labelInfo:te.default.createElement(xe.default,{checked:i.grid.useGridX,size:"small",style:{padding:0,width:24,height:24},onChange:function(){r({task:"setGeneralProp",params:{prop:"toggleGridX"}})}})},{category:"grid",nodeId:"useYGrid",labelText:"use y-axis grid",iconPath:v.mdiGrid,labelInfo:te.default.createElement(xe.default,{checked:i.grid.useGridY,size:"small",style:{padding:0,width:24,height:24},onChange:function(){r({task:"setGeneralProp",params:{prop:"toggleGridY"}})}})},{category:"grid",nodeId:"gridStrokeColor",labelText:"stroke color",iconPath:v.mdiBorderColor,labelInfo:te.default.createElement(ta,{color:i.grid.strokeColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"gridStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"useCrosshair",labelText:"use crosshair",iconPath:v.mdiCrosshairs,labelInfo:te.default.createElement(xe.default,{checked:i.crosshair.useCrosshair,size:"small",style:{padding:0,width:24,height:24},onChange:function(){r({task:"setGeneralProp",params:{prop:"toggleCrosshair"}})}})},{category:"crosshair",nodeId:"crosshairStrokeColor",labelText:"stroke color",iconPath:v.mdiBorderColor,labelInfo:te.default.createElement(ta,{color:i.crosshair.strokeColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"crosshairStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerBackground",labelText:"x-marker background",iconPath:v.mdiWater,labelInfo:te.default.createElement(ta,{color:i.crosshair.xMarkerBackgroundColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"crosshairXmarkerBackgroundColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerStrokeColor",labelText:"x-marker stroke color",iconPath:v.mdiBorderColor,labelInfo:te.default.createElement(ta,{color:i.crosshair.xMarkerStrokeColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"crosshairXmarkerStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerTextColor",labelText:"x-marker text color",iconPath:v.mdiFormatText,labelInfo:te.default.createElement(ta,{color:i.crosshair.xMarkerTextColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"crosshairXmarkerTextColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerBackground",labelText:"y-marker background",iconPath:v.mdiWater,labelInfo:te.default.createElement(ta,{color:i.crosshair.yMarkerBackgroundColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"crosshairYmarkerBackgroundColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerStrokeColor",labelText:"y-marker stroke color",iconPath:v.mdiBorderColor,labelInfo:te.default.createElement(ta,{color:i.crosshair.yMarkerStrokeColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"crosshairYmarkerStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerTextColor",labelText:"y-marker text color",iconPath:v.mdiFormatText,labelInfo:te.default.createElement(ta,{color:i.crosshair.yMarkerTextColor,onColorSelected:function(e){r({task:"setGeneralProp",params:{prop:"crosshairYmarkerTextColor",newValue:e}})}})}];return te.default.createElement(te.default.Fragment,null,te.default.createElement(ke.default,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},te.default.createElement(ge.default,{style:{border:"1px solid #666",borderRadius:50,padding:5,textTransform:"none",background:s.palette.secondary.light,color:s.palette.secondary.contrastText},onClick:function(e){p(e.currentTarget)}},te.default.createElement(ie.default,null," Add...")),te.default.createElement(be.default,{id:"quick-add",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:function(){return h(void 0)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},te.default.createElement(_e.default,{onClick:function(){return h("indicators")}},"Indicator"),te.default.createElement(_e.default,{onClick:function(){return h("tools")}},"Tool"))),te.default.createElement(aa,{expanded:l.expandedSetting},te.default.createElement(Kt,{nodeId:"1",labelText:"General",labelIcon:te.default.createElement(na,{path:v.mdiFileChartOutline,size:"32px",color:s.palette.secondary.contrastText,background:s.palette.secondary.main}),bgColorSelected:s.palette.primary.light,typographyVariant:"h6",onClick:function(){null==o||o("1")}},f.map((function(e,t){var a;return e.category?te.default.createElement(Kt,{nodeId:"settings-treeitem-general-cat-".concat(t),key:"settings-treeitem-general-cat-".concat(t),labelText:null!==(a=e.category)&&void 0!==a?a:"",labelIcon:te.default.createElement(na,{path:e.icon,size:"32px",color:s.palette.secondary.contrastText,background:s.palette.primary.main}),onClick:function(){null==o||o("settings-treeitem-general-cat-".concat(t))}},m.filter((function(t){return t.category===e.category})).map((function(e){return te.default.createElement(Kt,{key:"settings-treeitem-general-cat-".concat(t,"-").concat(e.nodeId),nodeId:"settings-treeitem-general-cat-".concat(t,"-").concat(e.nodeId),labelText:e.labelText,typographyVariant:"body1",labelInfo:e.labelInfo,labelIcon:te.default.createElement(Aa,{iconPath:e.iconPath,theme:s})})}))):m.filter((function(t){return t.category===e.category})).map((function(e){return te.default.createElement(Kt,{key:"settings-treeitem-general-cat-".concat(t,"-").concat(e.nodeId),nodeId:"settings-treeitem-general-cat-".concat(t,"-").concat(e.nodeId),labelText:e.labelText,typographyVariant:"body1",labelInfo:e.labelInfo,labelIcon:te.default.createElement(Aa,{iconPath:e.iconPath,theme:s})})}))}))),te.default.createElement(Ma,{subcharts:t,data:d,subchartIdx:0,Dispatch:r,onSettingsExpand:o}),te.default.createElement(z.DragDropContext,{onDragEnd:function(e){var t;(null===(t=e.destination)||void 0===t?void 0:t.index)&&r({task:"swapSubcharts",params:{subchartIdx1:e.source.index,subchartIdx2:e.destination.index}})}},te.default.createElement(z.Droppable,{droppableId:"droppable"},(function(e,a){return te.default.createElement(ve.default,n.__assign({},e.droppableProps,{ref:e.innerRef,sx:{background:a.isDraggingOver?s.palette.primary.light:"transparent",borderTopRightRadius:s.spacing(2),borderBottomRightRadius:s.spacing(2)}}),t.slice(1).map((function(e,a){var l=a+1;return te.default.createElement(z.Draggable,{key:"sub-".concat(l),draggableId:"sub-".concat(l),index:l},(function(e,a){return te.default.createElement(Ma,n.__assign({subcharts:t,data:d,subchartIdx:l,Dispatch:r,onSettingsExpand:o,ref:e.innerRef},e.draggableProps,{additionalLabelInfo:te.default.createElement(ye.default,n.__assign({size:"small"},e.dragHandleProps),te.default.createElement(b.Icon,{path:v.mdiArrowUpDownBold,size:1,color:"light"===s.palette.mode?"#333":"#fff"}))}))}))})),e.placeholder)})))))},Za=te.default.forwardRef((function(e,t){return te.default.createElement(Le.default,n.__assign({elevation:6,ref:t,variant:"filled"},e))})),za=function(e){var t=e.open,a=e.onClose,n=e.content,r=e.type,o=e.autoHideDuration,l=void 0===o?5e3:o,i=e.msgIdx,d=function(e,t){"clickaway"!==t&&(null==a||a())};return te.default.createElement(Ye.default,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,autoHideDuration:l,onClose:d,sx:{bottom:"".concat(24*(i+1)+48*i,"px !important"),color:"red"}},te.default.createElement(Za,{severity:r,onClose:d},n))};function Fa(e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,e.text().then((function(e){var t,a,n,r,o,l,i,d,s,u,c=[{chars:"\n",amt:null!==(a=null===(t=e.match(/\n/gm))||void 0===t?void 0:t.length)&&void 0!==a?a:0},{chars:"\r",amt:null!==(r=null===(n=e.match(/\r/gm))||void 0===n?void 0:n.length)&&void 0!==r?r:0},{chars:"\r\n",amt:null!==(l=null===(o=e.match(/\r\n/gm))||void 0===o?void 0:o.length)&&void 0!==l?l:0}],p=c.map((function(e){return e.amt})),h=c[p.indexOf(Math.max.apply(Math,p))].chars,f=e.split(h),m=[{chars:",",amt:null!==(d=null===(i=f[0].match(/,/gm))||void 0===i?void 0:i.length)&&void 0!==d?d:0},{chars:";",amt:null!==(u=null===(s=f[0].match(/;/gm))||void 0===s?void 0:s.length)&&void 0!==u?u:0}],v=m.map((function(e){return e.amt})),g=m[v.indexOf(Math.max.apply(Math,v))].chars,x={dots:0,commas:0};f.forEach((function(e){e.split(g).forEach((function(e){var t=e.lastIndexOf("."),a=e.lastIndexOf(",");-1!==t&&-1!==a?t>a?x.dots++:x.commas++:-1!==t&&-1===a?x.dots++:-1===t&&-1!==a&&x.commas++}))}));var y=x.dots<x.commas,b=x.dots>x.commas&&x.commas>0,_=y?e.replaceAll(".","").replaceAll(",","."):b?e.replaceAll(",",""):e,k=Re.default(_.trim(),{delimiter:g,record_delimiter:h,cast:!0,trim:!0,cast_date:!0}).map((function(e){return{date:e[0],open:e[1],high:e[2],low:e[3],close:e[4],volume:e[5]}}));return k.shift(),k}))];case 1:return[2,t.sent()]}}))}))}var Xa,Ya=function(e){var t=e.Dispatch,a=te.default.useState([]),r=a[0],o=a[1],l=ce.default(),i=te.default.useRef(null),d=te.default.useState(!1),s=d[0],u=d[1],c=te.default.useState(""),p=c[0],h=c[1];function f(){return n.__awaiter(this,void 0,void 0,(function(){var e,a,r,l;return n.__generator(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!p)throw new Error("url not provided");return[4,fetch(p)];case 1:if(!(e=i.sent()))throw new Error("cant download file from url");return[4,Fa(e)];case 2:return a=i.sent(),r=p.substring(p.lastIndexOf("/")+1,p.lastIndexOf(".")),t({task:"addSubchart",params:{chartSeries:a,chartName:r,reset:!0,id:ze.default()}}),o((function(e){return n.__spreadArray(n.__spreadArray([],e,!0),[{type:"success",text:"Graph successfully loaded"}],!1)})),u(!1),[3,4];case 3:return l=i.sent(),console.error("Error - could not download file from URL or File could not be parsed",l),o((function(e){return n.__spreadArray(n.__spreadArray([],e,!0),[{type:"error",text:"Error - "+l}],!1)})),[3,4];case 4:return[2]}}))}))}var m=te.default.useCallback((function(){u(!0)}),[u]),g=te.default.useCallback((function(){u(!1)}),[u]),x=te.default.useCallback((function(){var e,t;null===(t=null===(e=null==i?void 0:i.current)||void 0===e?void 0:e.click)||void 0===t||t.call(e)}),[i]);return te.default.createElement(te.default.Fragment,null,r.length>0?r.map((function(e,t){var a;return te.default.createElement(za,{key:"msg-".concat(t),autoHideDuration:5e3,type:null!==(a=e.type)&&void 0!==a?a:"error",open:r.length>0,onClose:function(){return o((function(e){return 1===e.length?[]:e.splice(1)}))},content:e.text,msgIdx:t})})):null,te.default.createElement("input",{type:"file",style:{visibility:"hidden",position:"absolute",top:0,height:0,width:0},ref:i,onChange:function(e){return n.__awaiter(this,void 0,void 0,(function(){var a,r,l,i;return n.__generator(this,(function(d){switch(d.label){case 0:if(!(a=e.target.files))return[2];if(!(a.length>0))return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Fa(a[0])];case 2:return r=d.sent(),l=a[0].name.substr(0,a[0].name.lastIndexOf(".")),t({task:"addSubchart",params:{chartSeries:r,chartName:l,reset:!0,id:ze.default()}}),o((function(e){return n.__spreadArray(n.__spreadArray([],e,!0),[{type:"success",text:"Graph successfully loaded"}],!1)})),[3,4];case 3:return i=d.sent(),console.error("Error - could not parse provided local file",i),o((function(e){return n.__spreadArray(n.__spreadArray([],e,!0),[{type:"error",text:"Error - could not parse provided local file"}],!1)})),[3,4];case 4:return[2]}}))}))}}),te.default.createElement(ue.default,{sx:{pt:4}},te.default.createElement(Bt,{text:"CSV from device",id:"1",iconPath:v.mdiFileDelimitedOutline,iconColor:l.palette.secondary.contrastText,onClick:x}),te.default.createElement(Bt,{text:"CSV from URL",id:"2",iconPath:v.mdiWeb,iconColor:l.palette.secondary.contrastText,onClick:m}),s?te.default.createElement("div",null,te.default.createElement(Se.default,{helperText:"Enter/Paste URL",fullWidth:!0,onKeyUp:function(e){"Enter"===e.key&&"keyup"===e.type&&f()},value:p,onChange:function(e){return h(e.target.value)},sx:{p:1,pt:2,boxSizing:"border-box"},InputProps:{sx:{boxSizing:"border-box",pr:0},endAdornment:te.default.createElement(Xe.default,{position:"end"},te.default.createElement(ke.default,{direction:"row"},te.default.createElement(ye.default,{onClick:f,size:"small"},te.default.createElement(b.Icon,{path:v.mdiArrowRightThick,size:1})),te.default.createElement(ye.default,{onClick:g},te.default.createElement(b.Icon,{path:v.mdiClose,size:1}))))}})):null))},La=function(e){var t=e.location,a=e.submenuContent,n=e.theme,r=e.onNavigate,o=e.amtIndicators;return te.default.createElement(ke.default,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},a,o>0?te.default.createElement(Ue.default,{value:"indicatorModifyMode",exclusive:!0,size:"small"},te.default.createElement(Oe.default,{value:"addIndicator",sx:{"&:hover":{background:"indicators"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"indicators"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null==r||r("indicators")}},te.default.createElement(ie.default,null," Add")),te.default.createElement(Oe.default,{value:"editIndicator",sx:{"&:hover":{background:"editIndicator"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomRightRadius:50,borderTopRightRadius:50,background:"editIndicator"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null==r||r("editIndicator")}},"Edit")):null)},Ra={name:"ATR",category:"Volatility",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a=e.chartData,n=e.prevData,r=e.period,o=void 0===r?20:r,l=n||[],i=null!==(t=0+(null==n?void 0:n.length))&&void 0!==t?t:0;i<a.length;i++)if(i<o)l.push({prices:[null],date:a[i].date});else{for(var d=0,s=i-o+1;s<=i;s++){var u=a[s],c=a[s-1],p=0;if($e(u)&&$e(c)){var h=u.high-u.low,f=Math.abs(u.high-c.close),m=Math.abs(u.low-c.close);p=Math.max(h,f,m)}else p=Math.abs(u.close-c.close);d+=p}l.push({prices:[d/o],date:a[i].date})}return l}},Ua={name:"EMA",category:"Average",params:[{name:"period",val:10},{name:"dataSeriesKey",val:void 0}],default:{params:[{name:"period",val:10},{name:"dataSeriesKey",val:void 0}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){for(var t,a=e.chartData,n=e.prevData,r=e.period,o=void 0===r?20:r,l=e.dataSeriesKey,i="string"==typeof l?l:"close",d="number"==typeof l?l:0,s=function(e){var t;return Je(e)?i in e?e[i]:e.close:et(e)&&(null===(t=e.prices)||void 0===t?void 0:t[d])||0},u=n||[],c=null!==(t=null==u?void 0:u.length)&&void 0!==t?t:0;c<a.length;c++)if(c<o-1)u.push({prices:[null],date:a[c].date});else if(c===o-1){for(var p=0,h=0;h<o;h++)p+=s(a[h]);p/=o,u.push({prices:[p],date:a[c].date})}else{var f=2/(o+1),m=(s(a[c])-u[c-1].prices[0])*f+u[c-1].prices[0];u.push({prices:[m],date:a[c].date})}return u}},Oa={name:"MACD",category:"Oszillator",params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],default:{params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],newSubchart:!0},graphTypes:[{type:"line",name:"MACD"},{type:"line",name:"Signal"},{type:"bars",name:"Histogram"}],indicatorFnType:"chartSeries",indicatorFn:function(e){var t,a,r,o,l,i,d,s=e.chartData,u=e.prevData,c=e.periodEmaShort,p=void 0===c?12:c,h=e.periodEmaLong,f=void 0===h?26:h,m=e.periodSignal,v=void 0===m?9:m,g=Ua.indicatorFn,x=u?{macd:u.map((function(e,t){var a;return n.__assign(n.__assign({},e),{prices:[null===(a=null==e?void 0:e.prices)||void 0===a?void 0:a[0]]})})),signal:u.map((function(e,t){var a;return n.__assign(n.__assign({},e),{prices:[null===(a=null==e?void 0:e.prices)||void 0===a?void 0:a[1]]})})),emaShort:u.map((function(e){var t;return n.__assign(n.__assign({},e),{prices:[null===(t=null==e?void 0:e.prices)||void 0===t?void 0:t[3]]})})),emaLong:u.map((function(e,t){var a;return n.__assign(n.__assign({},e),{prices:[null===(a=null==e?void 0:e.prices)||void 0===a?void 0:a[4]]})}))}:null,y=g({chartData:s,prevData:null!==(t=null==x?void 0:x.emaShort)&&void 0!==t?t:[],period:p}),b=g({chartData:s,prevData:null!==(a=null==x?void 0:x.emaLong)&&void 0!==a?a:[],period:f}),_=n.__spreadArray(n.__spreadArray([],null!==(r=null==x?void 0:x.macd)&&void 0!==r?r:[],!0),y.slice(null!==(l=null===(o=null==x?void 0:x.macd)||void 0===o?void 0:o.length)&&void 0!==l?l:0).map((function(e,t){var a,n,r=t+(null!==(n=null===(a=null==x?void 0:x.macd)||void 0===a?void 0:a.length)&&void 0!==n?n:0),o=b[r].prices[0],l=e.prices[0];return{prices:[kt(l)||kt(o)?null:l-o],date:s[r].date,priceLabels:["MACD"]}})),!0),k=g({chartData:_,prevData:null!==(i=null==x?void 0:x.signal)&&void 0!==i?i:[],period:v});return n.__spreadArray(n.__spreadArray([],u,!0),_.slice(null!==(d=null==u?void 0:u.length)&&void 0!==d?d:0).map((function(e,t){var a,r=null!==(a=t+(null==u?void 0:u.length))&&void 0!==a?a:0,o=e.prices[0],l=k[r].prices[0],i=null===o||null===l?null:o-l,d=y[r].prices[0],s=b[r].prices[0];return n.__assign(n.__assign({},e),{prices:[o,l,i,d,s]})})),!0)}},ja={name:"OBV",category:"Volume",graphTypes:[{type:"line"}],params:[],default:{params:[],newSubchart:!0,decimals:0},indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a,n=e.chartData,r=e.prevData||[],o=null==r?void 0:r.length;o<n.length;o++){var l=n[o];if(0===o&&Qe(l))r.push({prices:[l.volume],date:l.date});else{var i=n[o-1],d=null==r?void 0:r[o-1];if(Qe(l)&&Qe(i)){var s=(null!==(a=null===(t=null==d?void 0:d.prices)||void 0===t?void 0:t[0])&&void 0!==a?a:0)+Math.sign(l.close-i.close)*l.volume;r.push({prices:[s],date:n[o].date})}else r.push({prices:[null],date:n[o].date})}}return r}},Wa={name:"RSI",category:"Oszillator",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0,decimals:2,fixedYScale:[0,100],graphProps:[{name:"areaTresholds",val:{lower:25,upper:75}}]},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a,n,r,o=e.chartData,l=e.prevData,i=e.period,d=void 0===i?14:i,s=l||[],u=l.length;u<o.length;u++)if(0!==u){var c=o[u],p=o[u-1],h=c.close-p.close,f=h>0?h:0,m=h<0?-h:0,v=1/d,g=null===(a=null===(t=null==s?void 0:s[(null==s?void 0:s.length)-1])||void 0===t?void 0:t.prices)||void 0===a?void 0:a[1],x=null===(r=null===(n=null==s?void 0:s[(null==s?void 0:s.length)-1])||void 0===n?void 0:n.prices)||void 0===r?void 0:r[2];if(u<d||kt(g)||kt(x))s.push({prices:[null,f,m],date:o[u].date});else{var y=f*v+(1-v)*g,b=m*v+(1-v)*x,_=0===b?100:100-100/(1+y/b);s.push({prices:[_,y,b],date:o[u].date})}}else s.push({prices:[null,null,null],date:o[u].date});return s}},Ga={name:"SMA",category:"Average",params:[{name:"period",val:10}],default:{params:[{name:"period",val:10}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){var t,a=e.chartData,r=e.prevData,o=e.period,l=void 0===o?20:o,i=n.__spreadArray([],r,!0);return a.slice(null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0).forEach((function(e,t){var n,o=t+(null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0);if(o<l-1)i.push({prices:[null],date:e.date});else{var d=0;a.slice(o-l+1,o+1).forEach((function(e,t,a){Je(e)?d+=e.close:et(e)&&(d+=e.prices[0]?e.prices[0]:0)})),i.push({prices:[d/l],date:e.date})}})),i}},Na={name:"Volume",category:"Volume",params:[],default:{params:[],newSubchart:!0,decimals:0},graphTypes:[{type:"bars"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t=e.chartData,a=[],n=0;n<t.length;n++){var r=t[n];Qe(r)?a.push({prices:[r.volume],date:r.date}):a.push({prices:[0],date:r.date})}return a}},Ba={name:"KAMA",category:"Average",params:[{name:"erPeriod",val:21},{name:"fastEmaPeriod",val:2},{name:"slowEmaPeriod",val:30}],default:{params:[{name:"erPeriod",val:21},{name:"fastEmaPeriod",val:2},{name:"slowEmaPeriod",val:30}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){var t,a=e.chartData,r=e.prevData,o=e.erPeriod,l=void 0===o?20:o,i=e.fastEmaPeriod,d=void 0===i?2:i,s=e.slowEmaPeriod,u=void 0===s?30:s,c=n.__spreadArray([],r,!0);return a.slice(null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0).forEach((function(e,t){var n,o,i,s,p,h=t+(null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0),f={prices:[null],date:e.date};if(h<l-1+1)c.push(f);else{var m=a[h],v=function(e){var t;return kt(e)?null:Je(e)?e.close:et(e)?null===(t=e.prices)||void 0===t?void 0:t[0]:null},g=v(m);if(g){var x=Math.abs(g-(null!==(o=v(null==a?void 0:a[h-l+1]))&&void 0!==o?o:g)),y=a.slice(h-l,h+1).map((function(e,t,a){if(0===t)return null;var n=v(e),r=v(a[t-1]);return kt(n)||kt(r)?null:Math.abs(n-r)})).filter((function(e){return null!==e})).reduce((function(e,t,a){return e+t}),0),b=0!==y?x/y:0,_=2/(u+1),k=2/(d+1),C=Math.pow(b*(k-_)+_,2),w=null!==(p=null===(s=null===(i=null==c?void 0:c[h-1])||void 0===i?void 0:i.prices)||void 0===s?void 0:s[0])&&void 0!==p?p:v(null==a?void 0:a[h-1]),T=kt(w)?g:w+C*(g-w);c.push({prices:[T],date:e.date})}else c.push(f)}})),c}},Va=[Ga,Ua,Wa,Oa,Ra,Na,ja,Ba],Ha=[{name:"Average",icon:v.mdiDiameterVariant},{name:"Oszillator",icon:v.mdiChartBellCurve},{name:"Volatility",icon:v.mdiArrowExpandVertical},{name:"Volume",icon:v.mdiPoll}],Ka=function(e){var t,a,r=e.subCharts,o=e.onNavigate,l=e.location,i=e.Dispatch,d=e.settings,s=e.data,u=te.default.useState(!1),c=u[0],p=u[1],h=te.default.useState(0),f=h[0],m=h[1],g=null==r?void 0:r[0].yaxis[0].graphs[0],x=s.filter((function(e){return"indicator"===e.type})).length,y=s.find((function(e){return e.id===g.dataId})),_=null!==(t=null==y?void 0:y.data)&&void 0!==t?t:[],k=null!==(a=null==y?void 0:y.name)&&void 0!==a?a:"",C=null==y?void 0:y.id,w=ce.default(),T=te.default.useMemo((function(){return(null==d?void 0:d.additionalIndicators)?n.__spreadArray(n.__spreadArray([],Va,!0),d.additionalIndicators,!0):Va}),[null==d?void 0:d.additionalIndicators]),I=r.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,n){var r=s.find((function(t){return t.id===e.dataId})),o="indicator"===(null==r?void 0:r.type)?r.indicator.graphTypes:null,l=o?o.length:1;return Array(l).fill(0).map((function(l,i){var d,s=null==o?void 0:o[i],u=(null==s?void 0:s.name)?" - "+s.name:"";return{name:null!==(d=null==r?void 0:r.name)&&void 0!==d?d:"Graph No."+n,subchartIdx:t,yaxisIdx:a,graphIdx:n,graphLineIdx:i,fullName:"indicator"===(null==r?void 0:r.type)?r.fullName+u+"":null,type:e.type,dataId:e.dataId}})).flat()})).flat()})).flat()})).flat(),S=T.filter((function(e){var t,a;return"indicator"===(null===(t=null==I?void 0:I[f])||void 0===t?void 0:t.type)&&"dataSeries"===e.indicatorFnType||"chart"===(null===(a=null==I?void 0:I[f])||void 0===a?void 0:a.type)}));return te.default.createElement(te.default.Fragment,null,x>0&&te.default.createElement(La,{location:l,onNavigate:o,theme:w,amtIndicators:x,submenuContent:te.default.createElement(te.default.Fragment,null,te.default.createElement(Se.default,{select:!0,SelectProps:{SelectDisplayProps:{style:{padding:8,paddingRight:32,paddingLeft:16}}},variant:"outlined",InputProps:{sx:{borderRadius:"18px"}},label:te.default.createElement(ie.default,{color:"text.secondary"},"Source Graph"),value:f,onChange:function(e){var t="number"==typeof e.target.value?e.target.value:parseInt(e.target.value,10);isNaN(t)||m(t)}},I.map((function(e,t){var a;return te.default.createElement(_e.default,{value:t,key:"srcGraph-"+t},null!==(a=null==e?void 0:e.fullName)&&void 0!==a?a:e.name)}))),te.default.createElement(ye.default,{size:"small",sx:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return p((function(e){return!e}))}},te.default.createElement(b.Icon,{path:c?v.mdiFilter:v.mdiSortAlphabeticalAscending,size:1,color:w.palette.primary.contrastText})))}),te.default.createElement(aa,null,c?S.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){return te.default.createElement(Kt,{key:"cat-indi-".concat(t),nodeId:(t+1).toString(),labelText:e.name,typographyVariant:"body1",onClick:(a=e,function(e){a.default.newSubchart?i({task:"addSubchart",params:{chartSeries:_,chartName:k,id:ze.default(),indicator:a,indSrcId:C}}):i({task:"addGraph",params:{chartSeries:_,chartName:k,id:ze.default(),indicator:a,subchartIdx:0,indSrcId:C}})})});var a})):Ha.map((function(e,t){var a=S.filter((function(t){return t.category===e.name}));return a.length>0&&te.default.createElement(Kt,{key:"cat-".concat(t),nodeId:t.toString(),labelText:e.name,bgColorSelected:w.palette.primary.light,color:"#ff0000",labelIcon:te.default.createElement("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:w.palette.secondary.main,minWidth:32,height:32}},te.default.createElement(b.Icon,{path:e.icon,size:"32px",color:w.palette.secondary.contrastText}))},a.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,a){return te.default.createElement(Kt,{key:"cat-".concat(t,"-indi-").concat(a),nodeId:(100*(t+1)+(a+1)).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){var t,a,n=s.find((function(e){var t;return e.id===(null===(t=I[f])||void 0===t?void 0:t.dataId)}));if(n){var r=null!==(t=n.data)&&void 0!==t?t:[],o=null!==(a=n.name)&&void 0!==a?a:"Graph No."+(null==I?void 0:I[f].graphIdx);(null==e?void 0:e.default.newSubchart)?i({task:"addSubchart",params:{dataSeries:r,name:o,indicator:e,indSrcId:n.id,id:ze.default()}}):i({task:"addGraph",params:{dataSeries:r,name:o,id:ze.default(),indicator:e,subchartIdx:null==I?void 0:I[f].subchartIdx,indSrcId:n.id,indSrcLineIdx:null==I?void 0:I[f].graphLineIdx}})}}})})))}))))},qa="undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches,$a={top:0,left:0,width:300,height:300,init:!1},Ja={isHovering:!1,move:{isMoving:!1,xy:[0,0]},wheel:{isWheeling:!1,delta:[0,0]},dragPointerUp:{isDragPointerUp:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0]},drag:{isDragging:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0],delta:[0,0],ctrlKey:!1},pinch:{isPinching:!1,first:!1,movementInitial:[0,0],origin:[0,0]}},Qa={isDrawing:!1,xy:[],params:[]},en={totalTranslatedX:0,scaledWidthPerTick:10,xStart:0,xEnd:0,xLast:0,xUnlimited:0,pixXStart:0,pixXEnd:0,optChartPeriod:null,initialWidthPerTick:10,curTicks:[]},tn={isHovering:!1,move:{x:0,pixX:0,pixY:0,snapDatasets:[],subchartIdx:null,xDateString:"",pixXSnap:0,pixXUnlimSnap:0,xUnlimited:0},click:{clickedSubchartIdx:null}},an={isDarkMode:!1,borderColor:"#000",backgroundColor:"#fff",crosshair:{useCrosshair:!0,strokeColor:"#000",xMarkerBackgroundColor:"#fff",xMarkerFontName:"Arial",xMarkerFontSize:14,xMarkerTextColor:"#000",xMarkerStrokeColor:"#000",yMarkerBackgroundColor:"#fff",yMarkerStrokeColor:"#000",yMarkerTextColor:"#000",yMarkerFontName:"Arial",yMarkerFontSize:14},grid:{useGridX:!0,useGridY:!0,strokeColor:"rgba(51,51,51, 0.2)",strokeStyle:"FUTURE"},yaxis:{widthYAxis:80,widthTickmarkLines:5,fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:14,fontName:"Arial"},xaxis:{heightXAxis:36,heightTickMarkLines:8,fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:14,fontName:"Arial"},draw:{strokeColor:"red",anchorColor:"#333"}},nn=n.__assign(n.__assign({},an),{isDarkMode:!0,crosshair:n.__assign(n.__assign({},an.crosshair),{strokeColor:"#bbb"}),borderColor:"#666",draw:{strokeColor:"red",anchorColor:"#ccc"},grid:n.__assign(n.__assign({},an.grid),{strokeColor:"rgba(153,153,153, 0.08)"}),yaxis:n.__assign(n.__assign({},an.yaxis),{fontColor:"#bbb",strokeColor:"#bbb"}),backgroundColor:"#333"}),rn={data:[],subCharts:[],fullscreen:!1,draw:Qa,containerSize:$a,pointer:Ja,calc:{subcharts:[],xaxis:en,pointer:tn},style:an},on=n.__assign(n.__assign({},rn),{style:nn}),ln=function(e,t){var a=-1,r=0,o=t?t.map((function(t,o){var l,i,d,s,u,c,p,h,f,m,v,g,x,y;if(-1===a||kt(null===(l=null==t?void 0:t.graphProps)||void 0===l?void 0:l.subchartIdx)&&("chart"===t.type||"indicator"===t.type&&t.indicator.default.newSubchart)?(a++,r=0):r++,"chart"===t.type){var b=null!==(i=["line","candles","area"].find((function(e){var a;return e===(null===(a=null==t?void 0:t.graphProps)||void 0===a?void 0:a.chartType)})))&&void 0!==i?i:"candles";return{dataId:t.id,dataIdx:o,type:"chart",chartType:b,style:n.__assign(n.__assign(n.__assign({},hn),{strokeColor:e?mn.strokeColor[0]:fn.strokeColor[0]}),null===(d=null==t?void 0:t.graphProps)||void 0===d?void 0:d.style),subchartIdx:null!==(u=null===(s=null==t?void 0:t.graphProps)||void 0===s?void 0:s.subchartIdx)&&void 0!==u?u:a,yaxisIdx:0,graphIdx:null!==(p=null===(c=null==t?void 0:t.graphProps)||void 0===c?void 0:c.graphIdx)&&void 0!==p?p:r}}return"indicator"===t.type?{dataId:null!==(h=t.id)&&void 0!==h?h:"",dataIdx:o,type:"indicator",style:{strokeColor:(null===(m=null===(f=null==t?void 0:t.graphProps)||void 0===f?void 0:f.style)||void 0===m?void 0:m.strokeColor)?t.graphProps.style.strokeColor:t.indicator.graphTypes.length<=1?fn.strokeColor:e?cn.slice(0,t.indicator.graphTypes.length):un.slice(0,t.indicator.graphTypes.length)},subchartIdx:null!==(g=null===(v=null==t?void 0:t.graphProps)||void 0===v?void 0:v.subchartIdx)&&void 0!==g?g:a,yaxisIdx:0,graphIdx:null!==(y=null===(x=null==t?void 0:t.graphProps)||void 0===x?void 0:x.graphIdx)&&void 0!==y?y:r}:null})).filter((function(e){return!!e})).sort((function(e,t){return e&&t&&e.subchartIdx!==t.subchartIdx?e.subchartIdx-t.subchartIdx:e&&t&&e.subchartIdx===t.subchartIdx?e.graphIdx-t.graphIdx:0})):[];return De.default(null==o?void 0:o.map((function(e){return e.subchartIdx}))).map((function(e,t){return{top:0,bottom:0,yaxis:[0].map((function(e,a){return{tools:[],graphs:null==o?void 0:o.filter((function(e){return e.subchartIdx===t})).map((function(e){return e.subchartIdx,e.yaxisIdx,e.graphIdx,n.__rest(e,["subchartIdx","yaxisIdx","graphIdx"])}))}}))}}))},dn=function(e,t){var a=qa&&void 0===(null==e?void 0:e.isDarkMode)||(null==e?void 0:e.isDarkMode)?on:rn,r=t?ia(a,["calc","xaxis"],n.__assign(n.__assign({},a.calc.xaxis),{initialWidthPerTick:t,scaledWidthPerTick:t})):a;return n.__assign(n.__assign({},r),{subCharts:[],style:n.__assign(n.__assign(n.__assign({},e),r.style),{grid:n.__assign(n.__assign({},r.style.grid),null==e?void 0:e.grid),yaxis:n.__assign(n.__assign({},r.style.yaxis),null==e?void 0:e.yaxis),xaxis:n.__assign(n.__assign({},r.style.xaxis),null==e?void 0:e.xaxis),crosshair:n.__assign(n.__assign({},r.style.crosshair),null==e?void 0:e.crosshair),draw:n.__assign(n.__assign({},r.style.draw),null==e?void 0:e.draw)})})},sn=function(e){return{calc:{subcharts:[],pointer:e.calc.pointer,xaxis:e.calc.xaxis},containerSize:e.containerSize,pointer:e.pointer,stateControl:{prevAction:null,lastMainChartData:[],lastUpdate:new Date,shallUpdate:[],customEffectChartState:null}}},un=["#666","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],cn=["#bbb","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],pn=function(e,t){return e[t%e.length]},hn={candleStrokeColor:"transparent",candleWickStrokeColor:"#666",candleDownColor:"#c70039",candleUpColor:"#009688"},fn={strokeColor:["#666"]},mn={strokeColor:["#bbb"]},vn=function(e,t,a,r){return"indicator"===e?(console.log("IL",r,!r||r<=1),!r||r<=1?{strokeColor:[pn(t?cn:un,null!=a?a:0)]}:{strokeColor:(t?cn:un).slice(0,r)}):n.__assign(n.__assign({},hn),{strokeColor:pn(t?cn:un,null!=a?a:0)})},gn=function(e){var t=e.isDesktop,a=e.onClose,r=e.location,o=e.fullscreen,l=e.headerText,i=e.onNavigate,d=e.Dispatch,s=e.settings,u=e.content,c=ce.default(),p=te.default.useState(null),h=p[0],f=p[1],m=te.default.useState(null),g=m[0],x=m[1],y=te.default.useMemo((function(){var e;return null!==(e=s.themes)&&void 0!==e?e:[n.__assign(n.__assign({},an),{name:"light"}),n.__assign(n.__assign({},nn),{name:"dark"})]}),[]),b=te.default.useCallback((function(){i("menu")}),[i]),_=te.default.useCallback((function(){d({task:"setGeneralProp",params:{prop:"toggleFullscreen"}})}),[d]),k=te.default.useCallback((function(e,t){"theme"===t&&f(e.currentTarget),"clear"===t&&x(e.currentTarget)}),[]),C=te.default.useCallback((function(){f(null),x(null)}),[]),w=te.default.useCallback((function(e){f(null);var t=y.find((function(t){return t.name===e}));t&&d({task:"setTheme",params:{theme:t}})}),[d,y]);return te.default.createElement(je.default,{anchor:t?"left":"bottom",open:!!r,disablePortal:o,onBackdropClick:a,onClose:a,PaperProps:{sx:t?{border:"1px solid #666",borderBottomRightRadius:10,borderTopRightRadius:10,minWidth:300,height:"100%"}:{border:"1px solid #666",borderTopLeftRadius:10,borderTopRightRadius:10,maxHeight:"75%",minHeight:"33%"}}},te.default.createElement(ve.default,{sx:{position:"relative",top:0,height:"100%"}},te.default.createElement(ve.default,{sx:{position:"sticky",top:0,height:48,width:"100%",bgcolor:"primary.main",p:1,boxSizing:"border-box",zIndex:1}},te.default.createElement(ke.default,{direction:"row",sx:{height:32,justifyItems:"center",justifyContent:"center",verticalAlign:"middle"}},te.default.createElement(ie.default,{component:"div",variant:"h5",sx:{flexGrow:1,pt:.5,pr:1}},l||""),te.default.createElement(ve.default,{sx:{margin:"-5px"}},!!r&&"menu"!==r&&te.default.createElement(ye.default,{size:"small",onClick:b},te.default.createElement(me.default,{path:v.mdiHome,size:"32px",color:c.palette.primary.contrastText})),!window.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&te.default.createElement(ye.default,{size:"small",onClick:_},te.default.createElement(me.default,{path:o?v.mdiFullscreenExit:v.mdiFullscreen,size:"32px",color:c.palette.primary.contrastText})),te.default.createElement(ye.default,{size:"small",onClick:a},te.default.createElement(me.default,{path:v.mdiClose,size:"32px",color:c.palette.primary.contrastText}))))),te.default.createElement(ve.default,{sx:{position:"relative",top:0,mb:t?"48px":"96px",height:t?"calc(100% - 96px)":"auto",overflowY:"auto",p:1}},u),te.default.createElement(ve.default,{sx:{position:t?"absolute":"fixed",bottom:0,height:48,width:"100%",bgcolor:"primary.main"}},te.default.createElement(ke.default,{direction:"row",sx:{alignItems:"center",alignContent:"center",pt:.5}},te.default.createElement(ve.default,{sx:{flexGrow:1}}),te.default.createElement(ye.default,{id:"clearMenuButton",size:"small",onClick:function(e){null==k||k(e,"clear")}},te.default.createElement(me.default,{path:v.mdiBroom,size:"32px",color:c.palette.primary.contrastText})),te.default.createElement(be.default,{id:"clear-menu",anchorEl:g,anchorOrigin:{horizontal:"center",vertical:"top"},transformOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(g),onClose:C,MenuListProps:{"aria-labelledby":"clearMenuButton"}},te.default.createElement(ie.default,{variant:"h6",component:"div",sx:{textAlign:"center",pb:1,pl:1,pr:1,color:"primary.main"}},"Clear Chart"),te.default.createElement(We.default,null),["all","indicators","tools"].map((function(e,t){return te.default.createElement(_e.default,{key:"clearMenuItem-".concat(t),onClick:function(){d({task:"clearChart",params:{mode:e}})}},e)}))),te.default.createElement(ye.default,{id:"themeMenuButton",size:"small",onClick:function(e){null==k||k(e,"theme")}},te.default.createElement(me.default,{path:v.mdiThemeLightDark,size:"32px",color:c.palette.primary.contrastText})),te.default.createElement(be.default,{id:"theme-menu",anchorEl:h,anchorOrigin:{horizontal:"center",vertical:"top"},transformOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(h),onClose:C,MenuListProps:{"aria-labelledby":"themeMenuButton"}},te.default.createElement(ie.default,{variant:"h6",component:"div",sx:{textAlign:"center",pb:1,pl:1,pr:1,color:"primary.main"}},"Set Theme"),te.default.createElement(We.default,null),y.map((function(e,t){return te.default.createElement(_e.default,{key:"themeMenuItem-".concat(t),onClick:function(){w(e.name)}},e.name)}))),te.default.createElement(ye.default,{size:"small",onClick:function(){null==a||a()}},te.default.createElement(me.default,{path:v.mdiClose,size:"32px",color:c.palette.primary.contrastText}))))))},xn=function(e){var t=e.subCharts,a=e.Dispatch,n=e.data,r=e.location,o=e.onNavigate,l=ce.default(),i=n.filter((function(e){return"indicator"===e.type})).length;return te.default.createElement(te.default.Fragment,null,te.default.createElement(La,{location:r,onNavigate:o,theme:l,amtIndicators:i}),te.default.createElement(aa,null,t.map((function(e,r){return e.yaxis.map((function(e,o){return e.graphs.map((function(e,l){return at(e)?te.default.createElement(ka,{key:"editIndicator-sub-".concat(r,"-yaxis-").concat(o,"-graph-").concat(l),subCharts:t,Dispatch:a,subchartIdx:r,yaxisIdx:o,graphIdx:l,data:n}):null}))}))}))))},yn=function(e){var t=e.location,a=e.submenuContent,n=e.theme,r=e.onNavigate,o=e.subCharts.map((function(e){return e.yaxis.map((function(e){return e.tools.length}))})).flat().reduce((function(e,t){return e+t}));return te.default.createElement(ke.default,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},a,o>0?te.default.createElement(Ue.default,{value:"toolModifyMode",exclusive:!0,size:"small"},te.default.createElement(Oe.default,{value:"addTool",sx:{"&:hover":{background:"tools"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"tools"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null==r||r("tools")}},te.default.createElement(ie.default,null," Add")),te.default.createElement(Oe.default,{value:"editTool",sx:{"&:hover":{background:"editTool"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomRightRadius:50,borderTopRightRadius:50,background:"editTool"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null==r||r("editTool")}},"Edit")):null)},bn=[{name:"Lines",icon:v.mdiRuler},{name:"Measure",icon:v.mdiCrop},{name:"Upcoming",icon:v.mdiRulerSquareCompass}],_n=[{name:"trendline",type:"trendline",category:"Lines"},{name:"horizontal",type:"hline",category:"Lines"},{name:"vertical",type:"vline",category:"Lines"}],kn=function(e,t){e({task:"draw",params:{type:t,subchartIdx:0}})},Cn=function(e){var t=e.Dispatch,a=e.onNavigate,n=e.subCharts,r=te.default.useState(!1),o=r[0],l=r[1],i=ce.default();return te.default.createElement(te.default.Fragment,null,te.default.createElement(yn,{subCharts:n,location:"tools",onNavigate:a,theme:i,submenuContent:te.default.createElement(te.default.Fragment,null,te.default.createElement(ye.default,{size:"small",sx:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return l((function(e){return!e}))}},te.default.createElement(me.default,{path:o?v.mdiFilter:v.mdiSortAlphabeticalAscending,size:1,color:i.palette.primary.contrastText})))}),te.default.createElement(aa,null,o?_n.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,n){return te.default.createElement(Kt,{key:"cat-tool-".concat(n),nodeId:(n+1).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){kn(t,e.type),null==a||a(null)}})})):bn.map((function(e,n){return te.default.createElement(Kt,{key:"cat-".concat(n),nodeId:n.toString(),labelText:e.name,labelIcon:te.default.createElement("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:i.palette.secondary.main,minWidth:32,height:32}},te.default.createElement(me.default,{path:e.icon,size:"32px",color:i.palette.secondary.contrastText})),bgColorSelected:i.palette.primary.light},_n.filter((function(t){return t.category===e.name})).sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,r){return te.default.createElement(Kt,{key:"cat-".concat(n,"-tool-").concat(r),nodeId:(100*(n+1)+(r+1)).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){kn(t,e.type),null==a||a(null)}})})))}))))},wn=function(e){var t=e.subCharts,a=e.Dispatch,n=e.onNavigate,r=ce.default();return te.default.createElement(te.default.Fragment,null,te.default.createElement(yn,{subCharts:t,location:"editTool",onNavigate:n,theme:r}),te.default.createElement(aa,null,t.map((function(e,n){return e.yaxis.map((function(e,r){return e.tools.map((function(e,o){return te.default.createElement(Pa,{key:"editIndicator-sub-".concat(n,"-yaxis-").concat(r,"-graph-").concat(o),subCharts:t,Dispatch:a,subchartIdx:n,yaxisIdx:r,toolIdx:o})}))}))}))))},Tn=te.default.memo((function(e){var t=e.onClose,a=e.ChartMenuState,n=e.subCharts,r=e.style,o=e.onNavigate,l=e.Dispatch,i=e.onSettingsExpand,d=e.fullscreen,s=e.settings,u=e.data,c=se.default("(min-width:600px)"),p=[{location:"menu",headerText:"Chart Menu",component:function(){return te.default.createElement(Vt,{onNavigate:o})}},{location:"chart",headerText:"Chart",component:function(){return te.default.createElement(Ya,{Dispatch:l})}},{location:"indicators",headerText:"Add Indicator",component:function(){return te.default.createElement(Ka,{subCharts:n,onNavigate:o,location:a.location,Dispatch:l,settings:s,data:u})}},{location:"editIndicator",headerText:"Edit Indicator",component:function(){return te.default.createElement(xn,{subCharts:n,onNavigate:o,location:a.location,Dispatch:l,settings:s,data:u})}},{location:"tools",headerText:"Add Tool",component:function(){return te.default.createElement(Cn,{subCharts:n,Dispatch:l,onNavigate:o})}},{location:"editTool",headerText:"Edit Tool",component:function(){return te.default.createElement(wn,{subCharts:n,Dispatch:l,onNavigate:o})}},{location:"settings",headerText:"Settings",component:function(){return te.default.createElement(Da,{ChartMenuState:a,subCharts:n,style:r,Dispatch:l,onNavigate:o,onSettingsExpand:i,data:u})}}].find((function(e){return e.location===a.location}));if(!a.location||!p)return null;var h=p.component,f=p.headerText;return console.log("Chartmenu renders"),te.default.createElement(gn,{headerText:f,isDesktop:c,settings:s,location:a.location,onNavigate:o,Dispatch:l,fullscreen:d,onClose:t,content:te.default.createElement(h,null)})})),In=te.default.memo((function(e){var t=e.bottomY,a=e.onOpenClick;return te.default.createElement(ve.default,{sx:{position:"absolute",top:t-48-10,left:10}},te.default.createElement(ge.default,{color:"primary",variant:"contained",onClick:a,sx:{width:48,minWidth:48,height:48,textTransform:"none",borderRadius:2,opacity:.8,padding:0}},te.default.createElement(b.Icon,{path:v.mdiMenu,size:"48px",color:"#fff"})))})),Sn=function(e){var t=e.dataset,a=e.name,n=e.decimals,r=e.onClick,o=e.subchartIdx,l=e.graphIdx,i=e.graphTypes,d=te.default.useCallback((function(e){null==r||r(e,o,l)}),[r,o,l]);return t?te.default.createElement(ge.default,{style:{textTransform:"none",textAlign:"left"},onClick:d,startIcon:te.default.createElement(me.default,{path:et(t)?v.mdiChartBellCurve:v.mdiChartLine,size:1})},et(t)?te.default.createElement(ie.default,null,"".concat(a,":").concat(t.prices.map((function(e,t){var a,r;return e&&n&&["line","bars"].includes(null!==(r=null===(a=null==i?void 0:i[t])||void 0===a?void 0:a.type)&&void 0!==r?r:"")?null==e?void 0:e.toFixed(n):null})).filter((function(e){return null!==e})).join(", ")||"")):te.default.createElement(ie.default,{variant:"body1"},$e(t)?"".concat(a,"\n                O:").concat(t.open.toFixed(n),"\n                H:").concat(t.high.toFixed(n),"\n                L:").concat(t.low.toFixed(n),"\n                C:").concat(t.close.toFixed(n)):"".concat(a,"\n                C:").concat(t.close.toFixed(n)))):null},En=function(e){var t=e.data,a=e.calcPointer,n=e.calcSubcharts,r=e.subcharts,o=e.onGraphLabelClick;return te.default.createElement(te.default.Fragment,null,r.map((function(e,r){return te.default.createElement(ve.default,{key:"chart-label-subarea-".concat(r),sx:{position:"absolute",top:e.top}},e.yaxis[0].graphs.map((function(e,l){var i,d,s,u,c,p,h,f,m,v,g,x,y=t.find((function(t){return t.id===e.dataId})),b=null!==(i=null==y?void 0:y.data)&&void 0!==i?i:[],_=null!==(d=null==y?void 0:y.decimals)&&void 0!==d?d:0,k=null===(p=null===(c=null===(u=null===(s=null==n?void 0:n[r])||void 0===s?void 0:s.yaxis)||void 0===u?void 0:u[0])||void 0===c?void 0:c.graphs)||void 0===p?void 0:p[l];if(!(null==k?void 0:k.lastDataset)||!y)return null;var C=at(e)&&"indicator"===y.type&&y.indicator.params.length>0?"".concat(y.indicator.name,"(").concat(y.indicator.params[0].val,")"):at(e)&&"indicator"===y.type&&0===y.indicator.params.length?"".concat(y.indicator.name):y.name,w=(a.isHovering&&r===(null==a?void 0:a.move.subchartIdx)&&(null===(f=null===(h=null==a?void 0:a.move.snapDatasets)||void 0===h?void 0:h[0])||void 0===f?void 0:f.graphIdx)===l?null===(g=null===(v=null===(m=null==a?void 0:a.move)||void 0===m?void 0:m.snapDatasets)||void 0===v?void 0:v[0])||void 0===g?void 0:g.data:a.isHovering&&null!==a.move.x?b[null==a?void 0:a.move.x]:k.lastDataset.data)||k.lastDataset.data;return te.default.createElement(Sn,{key:"chart-label-".concat(r,"-").concat(l),onClick:o,subchartIdx:r,graphIdx:l,name:C,dataset:w,decimals:at(e)&&"indicator"===y.type&&void 0!==y.indicator.default.decimals?y.indicator.default.decimals:_,graphTypes:"indicator"===(null==y?void 0:y.type)?null===(x=null==y?void 0:y.indicator)||void 0===x?void 0:x.graphTypes:void 0})})))})))},Pn=function(e){var t,a,r,o=e.subcharts,l=e.draw,i=e.calc,d=e.containerSize,s=e.drawStyle,u=i.pointer,c=i.subcharts,p=i.xaxis,h=i.yToPix,f=i.pixToY,m=p.xToPix,v=l.isDrawing&&l.type||null,g=Ea.find((function(e){return e.type===v})),x=null==g?void 0:g.component,y={};null===(t=null==g?void 0:g.params)||void 0===t||t.forEach((function(e){y[e.name]=e.val}));var b=null===(r=null===(a=null==u?void 0:u.move.snapDatasets)||void 0===a?void 0:a[0])||void 0===r?void 0:r.pixYSnap,_=u.move.subchartIdx,k=te.default.useMemo((function(){return kt(_)?[]:n.__spreadArray(n.__spreadArray([],l.xy.map((function(e){return m&&h?[m(e[0]),h(e[1],_,0)]:e})),!0),[[u.move.x&&m?null==m?void 0:m(u.move.x):u.move.pixX,b||u.move.pixY]],!1)}),[u.move.x,l.xy,b,u.move.pixX,u.move.pixY,_,m,h]);return l.isDrawing&&x&&!kt(_)&&te.default.createElement(x,n.__assign({subcharts:o,subchartIdx:_,xy:l.xy,drawPixXy:k,containerSize:d,calcXaxis:p,calcSubcharts:c,yToPix:h,pixToY:f,style:s},y))||null},Mn=te.default.forwardRef((function(e,t){var a,r,o,l,i,d,s,u,p,h=e.settings,f=e.ChartState,m=e.Dispatch,v=e.rtTicks,g=void 0===v?[]:v,x=h.disableTheme,y=te.default.useRef(h),b=te.default.useState({location:null,expandedSetting:[]}),_=b[0],k=b[1],C=te.default.useCallback((function(){k((function(e){return n.__assign(n.__assign({},e),{location:"menu"})}))}),[]),w=te.default.useCallback((function(){k((function(e){return n.__assign(n.__assign({},e),{location:null})}))}),[]),T=te.default.useCallback((function(e){k((function(t){return n.__assign(n.__assign({},t),{location:e})}))}),[]),I=te.default.useCallback((function(e){k((function(t){return t.expandedSetting.includes(e)?n.__assign(n.__assign({},t),{expandedSetting:t.expandedSetting.filter((function(t){return t!==e}))}):n.__assign(n.__assign({},t),{expandedSetting:n.__spreadArray(n.__spreadArray([],t.expandedSetting,!0),[e],!1)})}))}),[]),S=te.default.useCallback((function(e,t,a){kt(t)||kt(a)||k({location:"settings",expandedSetting:["graph-sub-".concat(t,"-y-0-graph-").concat(a),"sub-".concat(t)]})}),[]),E=f.style.isDarkMode,P=null===(i=null===(l=null===(o=null===(r=null===(a=null==f?void 0:f.subCharts)||void 0===a?void 0:a[0])||void 0===r?void 0:r.yaxis)||void 0===o?void 0:o[0])||void 0===l?void 0:l.graphs)||void 0===i?void 0:i[0],M="candles"===(null==P?void 0:P.chartType)?Tt:wt,A=f.containerSize.init,D=f.style.xaxis.heightXAxis,Z=f.containerSize.width-1,z=f.containerSize.height-1;return te.default.createElement(te.default.Fragment,null,te.default.createElement(q.Global,{styles:q.css(Xa||(Xa=n.__makeTemplateObject(["\n          .ChartContainer {\n            box-sizing: border-box;\n            position: relative;\n            top: 0;\n            z-index: 1000;\n            width: 100%;\n            height: 100%;\n            background: ",";\n          }\n          .ChartKonvaStage {\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n          }\n        "],["\n          .ChartContainer {\n            box-sizing: border-box;\n            position: relative;\n            top: 0;\n            z-index: 1000;\n            width: 100%;\n            height: 100%;\n            background: ",";\n          }\n          .ChartKonvaStage {\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n          }\n        "])),f.style.backgroundColor)}),te.default.createElement(Ne,{theme:E?Ve:Be,disableTheme:x},te.default.createElement("div",{ref:t,className:"ChartContainer"},P&&M&&A?te.default.createElement(te.default.Fragment,null,te.default.createElement(c.Stage,{width:f.containerSize.width,height:f.containerSize.height,className:"ChartKonvaStage",listening:!1},te.default.createElement(c.Layer,{listening:!1},te.default.createElement(c.Rect,{name:"xaxis-rect",listening:!1,x:.5,y:z-D+.5,width:Z,height:D,fill:f.style.xaxis.fillColor,stroke:f.style.borderColor,strokeWidth:1}),f.subCharts.map((function(e,t){return te.default.createElement(te.default.Fragment,{key:"subchart-border-".concat(t)},te.default.createElement(c.Rect,{name:"subchart rect "+t,listening:!1,x:.5,y:e.top+.5,width:Z,height:e.bottom-e.top,stroke:f.style.borderColor,strokeWidth:1}))}))),te.default.createElement(c.Layer,{listening:!1},0 in f.subCharts?te.default.createElement(M,{subCharts:f.subCharts,calcXaxis:f.calc.xaxis,calcSubcharts:f.calc.subcharts,yToPix:f.calc.yToPix,pixToY:f.calc.pixToY,subchartIdx:0,yaxisIdx:0,graphIdx:0}):null,f.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,a){var r,o,l,i,d,s,u=f.data.find((function(t){return t.id===e.dataId}));return at(e)&&"indicator"===(null==u?void 0:u.type)&&(null!==(o=null===(r=null==u?void 0:u.data)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>0?(null!==(s=null===(d=null==u?void 0:u.data[(null!==(i=null===(l=null==u?void 0:u.data)||void 0===l?void 0:l.length)&&void 0!==i?i:0)-1])||void 0===d?void 0:d.prices)&&void 0!==s?s:[]).map((function(e,r){var o,l,i,d,s,c,p,h=null!==(i=null===(l=null===(o=u.indicator.graphTypes)||void 0===o?void 0:o[r])||void 0===l?void 0:l.type)&&void 0!==i?i:"line",m="line"===h?wt:"bars"===h?_t:null;if(!m)return null;var v=null===(s=null===(d=u.indicator.default)||void 0===d?void 0:d.graphProps)||void 0===s?void 0:s.findIndex((function(e){return"areaTresholds"===e.name})),g="line"!==h||kt(v)||-1===v?{}:{areaTresholds:null===(p=null===(c=u.indicator.default)||void 0===c?void 0:c.graphProps)||void 0===p?void 0:p[v].val};return te.default.createElement(m,n.__assign({key:"".concat(h,"-chart-s").concat(t,"-y0-g").concat(a,"-l").concat(r),subCharts:f.subCharts,subchartIdx:t,yaxisIdx:0,graphIdx:a,indSeriesIdx:r,calcXaxis:f.calc.xaxis,calcSubcharts:f.calc.subcharts,yToPix:f.calc.yToPix,pixToY:f.calc.pixToY},g))})):null}))}))})),te.default.createElement(Wt,{calcXaxis:f.calc.xaxis,containerSize:f.containerSize,style:f.style}),te.default.createElement(Gt,{calcSubcharts:f.calc.subcharts,containerSize:f.containerSize,style:f.style,subcharts:f.subCharts})),te.default.createElement(c.Layer,{listening:!1},te.default.createElement(jt,{rtTicks:g,style:f.style,containerSize:f.containerSize,xaxis:f.calc.xaxis}),f.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,n){var r,o,l,i,d;if("indicator"===e.type){var s=f.data.find((function(t){return t.id===e.dataId})),u=g.findIndex((function(e){return e.dataId===(null==s?void 0:s.id)}));return-1===u||"indicator"!==(null==s?void 0:s.type)||0===(null!==(o=null===(r=null==s?void 0:s.data)||void 0===r?void 0:r.length)&&void 0!==o?o:0)?null:(null===(l=null==s?void 0:s.indicator)||void 0===l?void 0:l.graphTypes).map((function(e,r){var o,l,i,d,c,p=null!==(i=null===(l=null===(o=s.indicator.graphTypes)||void 0===o?void 0:o[r])||void 0===l?void 0:l.type)&&void 0!==i?i:"line",h="line"===p?wt:"bars"===p?_t:null;return h?te.default.createElement(h,{key:"rtBars-s".concat(t,"-y").concat(a,"-g").concat(n,"-l").concat(r),subCharts:f.subCharts,subchartIdx:t,yaxisIdx:a,graphIdx:n,indSeriesIdx:r,calcXaxis:f.calc.xaxis,calcSubcharts:f.calc.subcharts,yToPix:f.calc.yToPix,pixToY:f.calc.pixToY,rtTicks:null!==(c=null===(d=null==g?void 0:g[u])||void 0===d?void 0:d.ticks)&&void 0!==c?c:void 0}):null}))}if("chart"===e.type){var c="candles"===e.chartType?Tt:"line"===e.chartType?wt:null;return c?te.default.createElement(c,{key:"rtBars-s".concat(t,"-y").concat(a,"-g").concat(n),subCharts:f.subCharts,subchartIdx:t,yaxisIdx:a,graphIdx:n,calcXaxis:f.calc.xaxis,calcSubcharts:f.calc.subcharts,rtTicks:null!==(d=null===(i=null==g?void 0:g[0])||void 0===i?void 0:i.ticks)&&void 0!==d?d:void 0}):null}return null}))}))}))),te.default.createElement(c.Layer,{listening:!1},(null===(d=f.calc.xaxis)||void 0===d?void 0:d.xToPix)&&!!f.calc.yToPix&&f.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.tools.map((function(e,a){var r,o=Ea.find((function(t){return t.type===e.type})),l={};null===(r=e.params)||void 0===r||r.forEach((function(e){l[e.name]=e.val}));var i=o?o.component:null;return i&&o?te.default.createElement(i,n.__assign({key:"trendline-sub-0-y-0-tool-".concat(a),subcharts:f.subCharts,subchartIdx:t,xy:e.xy,containerSize:f.containerSize,calcXaxis:f.calc.xaxis,calcSubcharts:f.calc.subcharts,yToPix:f.calc.yToPix,pixToY:f.calc.pixToY,style:e.style},l)):null}))}))}))),te.default.createElement(c.Layer,{listening:!1},f.calc.pointer.isHovering&&!y.current.disablePointerEvents&&f.style.crosshair.useCrosshair?te.default.createElement(Ot,{subcharts:f.subCharts,data:f.data,containerSize:f.containerSize,calcPointer:f.calc.pointer,calcXaxis:f.calc.xaxis,style:f.style,pixToY:f.calc.pixToY,rtTicks:g,calcSubcharts:f.calc.subcharts}):null,te.default.createElement(Pn,{subcharts:f.subCharts,containerSize:f.containerSize,draw:f.draw,calc:f.calc,drawStyle:f.style.draw}))),te.default.createElement(En,{data:f.data,subcharts:f.subCharts,calcPointer:f.calc.pointer,calcSubcharts:f.calc.subcharts,onGraphLabelClick:S}),te.default.createElement(In,{bottomY:null!==(p=null===(u=null===(s=f.subCharts)||void 0===s?void 0:s[f.subCharts.length-1])||void 0===u?void 0:u.bottom)&&void 0!==p?p:0,onOpenClick:C}),te.default.createElement(Tn,{ChartMenuState:_,onClose:w,onNavigate:T,subCharts:f.subCharts,xaxis:f.calc.xaxis,style:f.style,fullscreen:f.fullscreen,Dispatch:m,onSettingsExpand:I,settings:y.current,data:f.data})):te.default.createElement("div",{style:{height:"100%",background:f.style.backgroundColor}},te.default.createElement(le.default,{sx:{color:"primary.main"},open:!0,invisible:!0},te.default.createElement(ie.default,{variant:"h6",component:"div"},"Chart data is loaded.."),te.default.createElement(de.default,{color:"inherit"}))))))}));Mn.displayName="CChart";var An=function(e){var t=e.top,a=e.bottom,r=n.__rest(e,["top","bottom"]),o=Dn(r);return o?{yaxis:[o],top:t,bottom:a}:null},Dn=function(e){var t=e.dataId,a=e.style,n=e.indicator,r=e.type;return"indicator"!==r||n?{graphs:["indicator"===r&&n?zn({dataId:t,style:a}):Zn({dataId:t,style:a})],tools:[]}:null},Zn=function(e){var t=e.dataId;return{style:e.style,type:"chart",chartType:"candles",dataId:t}},zn=function(e){return{type:"indicator",dataId:e.dataId,style:e.style}},Fn=function(e){var t=e.subCharts,a=e.removeSubchartIdx,r=e.addSubchart,o=e.subchartsHeight,l=150,i=null==r?void 0:r.data,d=kt(a)?t:n.__spreadArray(n.__spreadArray([],t.slice(0,a),!0),t.slice(a+1),!0),s=d.length+(r?1:0),u=d.map((function(e,t){return e.bottom-e.top>0?e.bottom-e.top:0===t?o-(s-1)*l:l})),c=r?n.__spreadArray(n.__spreadArray([],u,!0),[l],!1):u,p=c.slice(1).reduce((function(e,t){return e+t}),0);if(o>=250+p){var h=o-c[0]-p,f=c.map((function(e,t){return Math.max((0===t?250:l)-e,0)})),m=f.reduce((function(e,t){return e+t}),0),v=0===m?0:h>=m?1:h/m,g=c.map((function(e,t){return e+Math.floor(v*f[t])})),x=g.slice(1).reduce((function(e,t){return e+t}),0),y=d.reduce((function(e,t,a){return 0===a?[n.__assign(n.__assign({},t),{top:0,bottom:o-x})]:n.__spreadArray(n.__spreadArray([],e,!0),[n.__assign(n.__assign({},t),{top:e[e.length-1].bottom,bottom:e[e.length-1].bottom+g[a]})],!1)}),[]),b=i&&"indicator"===i.type?i.indicator.graphTypes.length:void 0;console.log(b);var _=(i&&0!==y.length?[An({top:y[y.length-1].bottom,bottom:o,dataId:i.id,style:vn(i.type,r.darkMode,void 0,b),indicator:"indicator"===i.type?i.indicator:void 0,type:i.type})]:[]).filter((function(e){return null!==e}));return n.__spreadArray(n.__spreadArray([],y,!0),_,!0)}var k=o/(c[0]+p),C=c.slice(1).map((function(e){return Math.min(Math.ceil(e*k),150)})),w=C.reduce((function(e,t){return e+t}));return y=d.reduce((function(e,t,a){return 0===a?[n.__assign(n.__assign({},t),{top:0,bottom:o-w})]:n.__spreadArray(n.__spreadArray([],e,!0),[n.__assign(n.__assign({},t),{top:e[e.length-1].bottom,bottom:e[e.length-1].bottom+C[a-1]})],!1)}),[]),b=i&&"indicator"===i.type?i.indicator.graphTypes.length:void 0,_=(i&&0!==y.length?[An({top:y[y.length-1].bottom,bottom:o,dataId:i.id,style:vn(i.type,r.darkMode,void 0,b),indicator:"indicator"===i.type?i.indicator:void 0,type:i.type})]:[]).filter((function(e){return null!==e})),n.__spreadArray(n.__spreadArray([],y,!0),_,!0)},Xn=function(e,t,a){var n=e-1-a.xaxis.heightXAxis;return Fn({subchartsHeight:n,subCharts:t})},Yn=function(e,t){var a=t.subchartIdx,r=e.subCharts[a].yaxis.map((function(e){return e.graphs.map((function(e){return e.dataId}))})).flat(),o=e.containerSize.height-e.style.xaxis.heightXAxis,l=Fn({subchartsHeight:o,subCharts:e.subCharts,removeSubchartIdx:a});return n.__assign(n.__assign({},e),{data:e.data.filter((function(e){return!r.includes(e.id)})),subCharts:l})},Ln=[{prop:"backgroundColor",path:["style","backgroundColor"]},{prop:"crosshairStrokeColor",path:["style","crosshair","strokeColor"]},{prop:"crosshairXmarkerBackgroundColor",path:["style","crosshair","xMarkerBackgroundColor"]},{prop:"crosshairXmarkerStrokeColor",path:["style","crosshair","xMarkerStrokeColor"]},{prop:"crosshairXmarkerTextColor",path:["style","crosshair","xMarkerTextColor"]},{prop:"crosshairYmarkerBackgroundColor",path:["style","crosshair","yMarkerBackgroundColor"]},{prop:"crosshairYmarkerStrokeColor",path:["style","crosshair","yMarkerStrokeColor"]},{prop:"crosshairYmarkerTextColor",path:["style","crosshair","yMarkerTextColor"]},{prop:"gridStrokeColor",path:["style","grid","strokeColor"]},{prop:"toggleCrosshair",path:["style","crosshair","useCrosshair"],toggle:!0},{prop:"toggleFullscreen",path:["fullscreen"],toggle:!0},{prop:"toggleGridX",path:["style","grid","useGridX"],toggle:!0},{prop:"toggleGridY",path:["style","grid","useGridY"],toggle:!0},{prop:"xAxisFillColor",path:["style","xaxis","fillColor"]},{prop:"xAxisStrokeColor",path:["style","xaxis","strokeColor"]},{prop:"xAxisTextColor",path:["style","xaxis","fontColor"]},{prop:"yAxisStrokeColor",path:["style","yaxis","strokeColor"]},{prop:"yAxisTextColor",path:["style","yaxis","fontColor"]}],Rn=function(e,t){var a;if(xt(t)){var r=t.params,o=r.dataId,l=r.newIndSrcId,i=r.newParam,d=r.prevData,s=e.data.find((function(e){return e.id===o}));if("indicator"!==(null==s?void 0:s.type))return e;var u=i&&s.indicator.params.map((function(e,t){return t!==(null==i?void 0:i.paramIdx)?e:n.__assign(n.__assign({},e),{val:i.newValue})}));return n.__assign(n.__assign({},e),{data:_a(e,o,{newParams:u,newIndSrcId:l},d)})}if(gt(t)){var c=t.params;return function(e,t,a){var r=e.data,o=r.findIndex((function(e){return e.id===t})),l=null==r?void 0:r[o];if("chart"!==(null==l?void 0:l.type)||!a||0===a.length)return e;var i,d,s,u=(d=a,(s=(i=l).meta.chartPeriod)?n.__assign(n.__assign({},i),{data:n.__spreadArray(n.__spreadArray([],i.data,!0),d,!0),dateStat:va(d,s,i.dateStat)}):i),c=ya(r,t),p=n.__spreadArray([],ia(e.data,[o],u),!0);return c.forEach((function(e,t){var a=p.findIndex((function(t){return t.id===e})),n=null==p?void 0:p[a];if("indicator"===(null==n?void 0:n.type)){var r=ga(p,e,void 0,n.data);r&&(p[a]=r)}})),n.__assign(n.__assign({},e),{data:p})}(e,c.dataId,c.newDatasets)}if(lt(t)){var p=t.params,h=p.newValue,f=p.prop,m=p.subchartIdx,v=p.yaxisIdx,g=p.toolIdx,x=p.toolParamIdx,y=e.subCharts[m].yaxis[v].tools[g];return"strokeColor"===f||"anchorColor"===f?ia(e,["subCharts",m,"yaxis",v,"tools",g,"style",f],h):"hLineYlevel"===f?ia(e,["subCharts",m,"yaxis",v,"tools",g,"xy"],[[y.xy[0][0],h]]):"toolParam"!==f||kt(x)?e:ia(e,["subCharts",m,"yaxis",v,"tools",g,"params",x,"val"],h)}if(ot(t)){var b=t.params,_=(h=b.newValue,f=b.prop,m=b.subchartIdx,v=b.yaxisIdx,b.graphIdx);return["strokeColor","candleDownColor","candleUpColor","candleStrokeColor","candleWickStrokeColor"].includes(f)?ia(e,["subCharts",m,"yaxis",v,"graphs",_,"style",f],h):"chartType"!==f||"line"!==h&&"candles"!==h?"dataId"===f?ia(e,["subCharts",m,"yaxis",v,"graphs",_,"dataId"],h):e:ia(e,["subCharts",m,"yaxis",v,"graphs",_,"chartType"],h)}if(rt(t)){var k=t.params,C=k.newValue,w=k.prop,T=null==Ln?void 0:Ln.find((function(e){return e.prop===w}));if(!T)return e;var I=T.path;return h=T.toggle?!ua(e,I):C,ia(e,I,h)}if(vt(t))return function(e,t){var a,r=t.datas,o=null===(a=null==r?void 0:r[0])||void 0===a?void 0:a.id,l=r.map((function(e,t){var a,r;return"chart"===e.type?e:n.__assign(n.__assign({},e),{indSrcId:null!==(a=e.indSrcId)&&void 0!==a?a:o,id:null!==(r=e.id)&&void 0!==r?r:"indi_"+t.toString().padStart(2,"0")})})),i=De.default(l.map((function(e,t){return"indicator"!==e.type||kt(null==e?void 0:e.id)?null:xa(l,e.id)})).flat().filter((function(e){return null!==e}))),d=l.map((function(e){return"chart"===e.type?ha(e.data,e.name,e.id):null})),s=n.__spreadArray([],d,!0);i.forEach((function(e,t){var a=null==l?void 0:l.findIndex((function(t,a){return t.id===e})),n=null==l?void 0:l[a],r="indicator"===(null==n?void 0:n.type)?n:null,o=null==r?void 0:r.indSrcId,i=kt(o)?null:null==s?void 0:s.find((function(e){return(null==e?void 0:e.id)===o}));"indicator"===(null==n?void 0:n.type)&&i&&r&&(s[a]=pa(null==i?void 0:i.data,null==i?void 0:i.id,r.indicator,void 0,e,r.name))}));var u=s.filter((function(e){return null!==e}));u.length!==l.length&&console.warn("Warning - not all indicators could be initialized.");var c=r?ln(e.style.isDarkMode,r):[],p=Xn(e.containerSize.height,c,e.style);return n.__assign(n.__assign({},e),{subCharts:p,data:u})}(e,t.params);if(it(t))return function(e,t){var a=t.dataSeries,r=t.graphName,o=t.id,l=t.indicator,i=t.reset,d=t.indSrcId,s=e.containerSize.height,u=ca(a,r,o,l,d);if(!u)return e;var c="indicator"===u.type?u.indicator.graphTypes.length:void 0,p=vn(u.type,e.style.isDarkMode,void 0,c),h=u.id;if(0===e.subCharts.length||i){var f=s-e.style.xaxis.heightXAxis,m=An({top:0,bottom:f,dataId:h,style:p,indicator:l,type:u.type});return m?n.__assign(n.__assign({},e),{data:[u],subCharts:[m]}):e}var v=s-e.style.xaxis.heightXAxis,g=Fn({subchartsHeight:v,subCharts:e.subCharts,addSubchart:{data:u,darkMode:e.style.isDarkMode}});return n.__assign(n.__assign({},e),{data:n.__spreadArray(n.__spreadArray([],e.data,!0),[u],!1),subCharts:g})}(e,t.params);if(ut(t))return Yn(e,t.params);if(dt(t))return function(e,t){var a=t.dataSeries,r=t.graphName,o=t.subchartIdx,l=t.id,i=t.indSrcId,d=t.indicator,s=t.indSrcLineIdx,u=e.subCharts[o].yaxis[0].graphs.length;if(!i&&d||i&&!d)return e;var c=ca(a,r,l,d,i,s);if(!c)return e;var p=c.id,h="indicator"===c.type?c.indicator.graphTypes.length:void 0,f=vn(c.type,e.style.isDarkMode,u,h),m="indicator"===c.type&&d&&i?zn({dataId:p,style:f}):Zn({dataId:p,style:f});at(m)&&c.data[c.data.length-1].prices.length>1&&(m.style.strokeColor=c.data[c.data.length-1].prices.map((function(t,a){return function(t){return pn(e.style.isDarkMode?cn:un,t)}(a)})));var v=e.subCharts[o];return ia(ia(e,["data"],n.__spreadArray(n.__spreadArray([],e.data,!0),[c],!1)),["subCharts",o],n.__assign(n.__assign({},v),{yaxis:[n.__assign(n.__assign({},v.yaxis[0]),{graphs:n.__spreadArray(n.__spreadArray([],v.yaxis[0].graphs,!0),[m],!1)})]}))}(e,t.params);if(ct(t))return function(e,t){var a=t.subchartIdx,n=t.yaxisIdx,r=t.graphIdx,o=e.subCharts[a].yaxis[n].graphs[r].dataId,l=e.subCharts[a];return 0===r&&1===l.yaxis[n].graphs.length?Yn(e,{subchartIdx:a}):ia(sa(e,["subCharts",a,"yaxis",n,"graphs",r]),["data"],e.data.filter((function(e){return e.id!==o})))}(e,t.params);if(mt(t))return function(e,t){var a=t.subchartIdx1,r=t.subchartIdx2,o=a<=r?a:r,l=a>r?a:r,i=e.subCharts[o],d=e.subCharts[l],s=i.bottom-i.top,u=d.bottom-d.top,c=u-s;return o===l||kt(o)||kt(l)||l>=e.subCharts.length?e:n.__assign(n.__assign({},e),{subCharts:n.__spreadArray(n.__spreadArray(n.__spreadArray(n.__spreadArray(n.__spreadArray([],e.subCharts.slice(0,o),!0),[n.__assign(n.__assign({},d),{bottom:i.top+u,top:i.top})],!1),e.subCharts.slice(o+1,l).map((function(e,t){return n.__assign(n.__assign({},e),{top:e.top+c,bottom:e.bottom+c})})),!0),[n.__assign(n.__assign({},i),{top:d.top+c,bottom:d.bottom})],!1),e.subCharts.slice(l+1),!0)})}(e,t.params);if(pt(t)){var S=t.params;return m=S.subchartIdx,v=S.yaxisIdx,g=S.toolIdx,sa(e,["subCharts",m,"yaxis",v,"tools",g])}if(ft(t))return function(e,t){var a=t.mode,r=n.__assign(n.__assign({},e.subCharts[0]),{top:0,bottom:"tools"!==a?e.containerSize.height-1-e.style.xaxis.heightXAxis:e.subCharts[0].bottom,yaxis:[n.__assign(n.__assign({},e.subCharts[0].yaxis[0]),{graphs:"all"===a||"indicators"===a?[e.subCharts[0].yaxis[0].graphs[0]]:e.subCharts[0].yaxis[0].graphs,tools:"all"===a||"tools"===a?[]:e.subCharts[0].yaxis[0].tools})]});return"all"===a||"indicators"===a?ia(ia(e,["subCharts"],[r]),["data"],[e.data.find((function(t){var a,n,r,o,l,i;return t.id===(null===(i=null===(l=null===(o=null===(r=null===(n=null===(a=e.subCharts)||void 0===a?void 0:a[0])||void 0===n?void 0:n.yaxis)||void 0===r?void 0:r[0])||void 0===o?void 0:o.graphs)||void 0===l?void 0:l[0])||void 0===i?void 0:i.dataId)}))]):"tools"===a?ia(e,["subCharts"],n.__spreadArray([r],e.subCharts,!0)):e}(e,t.params);if(yt(t)){var E=t.params.theme;E.name;var P=n.__rest(E,["name"]),M=P.isDarkMode?nn:an;return n.__assign(n.__assign({},e),{style:n.__assign(n.__assign(n.__assign({},M),P),{crosshair:n.__assign(n.__assign({},M.crosshair),P.crosshair),draw:n.__assign(n.__assign({},M.draw),P.draw),grid:n.__assign(n.__assign({},M.grid),P.grid),xaxis:n.__assign(n.__assign({},M.xaxis),P.xaxis),yaxis:n.__assign(n.__assign({},M.yaxis),P.yaxis)})})}if(st(t)){var A=t.params.xy;return(null===(a=Ea.find((function(e){return e.type===t.params.type})))||void 0===a?void 0:a.nPoints)&&t.params.type?!A&&t.params.type?n.__assign(n.__assign({},e),{draw:n.__assign(n.__assign({},e.draw),{isDrawing:!0,xy:[],type:t.params.type})}):e:n.__assign(n.__assign({},e),{draw:Qa})}if(ht(t)){var D=Fe.default(e.calc.xaxis,t.params.newState.calc.xaxis)?{}:{xaxis:n.__assign(n.__assign({},e.calc.xaxis),t.params.newState.calc.xaxis)},Z=Fe.default(e.subCharts,t.params.newState.subCharts)?{}:{subCharts:t.params.newState.subCharts},z=Fe.default(e.containerSize,t.params.newState.containerSize)?{}:{containerSize:t.params.newState.containerSize};return n.__assign(n.__assign(n.__assign(n.__assign({},e),z),Z),{pointer:t.params.newState.pointer,draw:t.params.newState.draw,calc:n.__assign(n.__assign(n.__assign({},e.calc),t.params.newState.calc),D)})}return e},Un=function(e,t,a,n){var r=1/Math.pow(10,a),o=(e-t)/r/n,l=Math.floor(Math.log10(o))||0;return parseFloat(Array(6).fill(0).map((function(a,o){var i,d=r*Math.pow(10,l+Math.floor(o/3))*(o%3==0?1:o%3==1?2.5:o%3==2?5:0);return{intervalStep:d,optimum:(i=d,Math.abs((e-t)/i-n))}})).reduce((function(e,t){return t.optimum<(null==e?void 0:e.optimum)?t:e})).intervalStep.toFixed(a))},On=function(e,t,a,n,r){var o,l,i=n.map((function(e,a){return e.yaxis.map((function(e,n){return e.graphs.map((function(e,r){return e.dataId===t?{subchartIdx:a,yaxisIdx:n,graphIdx:r}:null}))})).flat()})).flat().filter((function(e){return null!==e})),d=null==i?void 0:i[0];if(!d||!r)return null;var s=function(e){return r(e,d.subchartIdx,d.yaxisIdx)},u=null===(l=null===(o=a.find((function(e){return e.id===t&&"indicator"===e.type})))||void 0===o?void 0:o.indicator)||void 0===l?void 0:l.graphTypes;return et(e)?{pixPrices:e.prices.map((function(e,t){var a,n;return e&&["line","bars"].includes(null!==(n=null===(a=null==u?void 0:u[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")?s(e):null}))}:$e(e)?{pixOpen:s(e.open),pixHigh:s(e.high),pixLow:s(e.low),pixClose:s(e.close)}:Je(e)?{pixClose:s(e.close)}:null},jn=function(e,t,a){return e&&t&&a?n.__assign(n.__assign({},t),{xy:n.__spreadArray(n.__spreadArray([],t.xy,!0),[a],!1)}):Qa},Wn=function(e,t,a,n){var r,o,l=a.xy,i=null!==(o=null===(r=Ea.find((function(e){return e.type===a.type})))||void 0===r?void 0:r.params)&&void 0!==o?o:[];return da(e,[t,"yaxis",0,"tools"],{xy:l,type:a.type,style:n.draw,params:i})},Gn=function(e,t,a,n){var r,o,l,i,d,s,u,c,p,h,f,m,v,g,x,y,b,_,k,C,w,T,I,S,E,P,M,A,D,Z;if(!a||!n||!t)return null;var z=n.name,F=n.multiply,X=function(e){return{minute:Mt(e,"minutes"),hour:Mt(e,"hours"),day:Mt(e,"days"),week:Mt(e,"weeks"),month:Mt(e,"months"),year:Mt(e,"years")}}(e),Y=X.minute,L=X.hour,R=X.day,U=X.week,O=X.month,j=X.year,W=t.years.findIndex((function(e){return e.year===j})),G=null===(l=null===(o=null===(r=t.years)||void 0===r?void 0:r[W])||void 0===o?void 0:o.months)||void 0===l?void 0:l.findIndex((function(e){return e.month===O})),N=null===(c=null===(u=null===(s=null===(d=null===(i=t.years)||void 0===i?void 0:i[W])||void 0===d?void 0:d.months)||void 0===s?void 0:s[G])||void 0===u?void 0:u.weeks)||void 0===c?void 0:c.findIndex((function(e){return e.week===U})),B=null===(x=null===(g=null===(v=null===(m=null===(f=null===(h=null===(p=t.years)||void 0===p?void 0:p[W])||void 0===h?void 0:h.months)||void 0===f?void 0:f[G])||void 0===m?void 0:m.weeks)||void 0===v?void 0:v[N])||void 0===g?void 0:g.days)||void 0===x?void 0:x.findIndex((function(e){return e.day===R})),V=null===(T=null===(w=null===(C=null===(k=null===(_=null===(b=null===(y=t.years)||void 0===y?void 0:y[W])||void 0===b?void 0:b.months)||void 0===_?void 0:_[G])||void 0===k?void 0:k.weeks)||void 0===C?void 0:C[N])||void 0===w?void 0:w.days)||void 0===T?void 0:T[B];if(-1===W||-1===G||-1===N||-1===B||!V)return null;var H=a.period<(null===(S=null===(I=null==Et?void 0:Et[2])||void 0===I?void 0:I.range)||void 0===S?void 0:S[0]),K=a.period<(null===(P=null===(E=null==Et?void 0:Et[1])||void 0===E?void 0:E.range)||void 0===P?void 0:P[0]),q=H?null==V?void 0:V.hours.findIndex((function(e){return e.hour===L})):void 0,$=H&&!kt(q)&&-1!==(null===(A=null===(M=null==V?void 0:V.hours)||void 0===M?void 0:M[q])||void 0===A?void 0:A.minutes.findIndex((function(e){return e.minute===Y})))?null===(Z=null===(D=null==V?void 0:V.hours)||void 0===D?void 0:D[q])||void 0===Z?void 0:Z.minutes.findIndex((function(e){return e.minute===Y})):void 0;if(H&&kt(q)||K&&kt($))return null;if(a.name===z&&1===F)return z;var J={yearIdx:W,monthIdx:G,weekIdx:N,dayIdx:B,hourIdx:q,minuteIdx:$},Q=!q&&!$,ee="months"===z?F:1,te="weeks"===z?F:1,ae="days"===z?F:1,ne="hours"===z?F:1;return!Nn(X,t,J)||q||$?"years"!==z&&Bn(X,t,J,ee)&&Q?"months":!["years","months"].includes(z)&&Vn(X,t,J,te)&&Q?"weeks":!["years","months","weeks"].includes(z)&&Hn(X,t,J,ae)&&Q?"days":["years","months","weeks","days"].includes(z)||!Kn(X,t,J,ne)||$?"minutes"===z&&qn(X,t,J,F)?"minutes":null:"hours":"years"},Nn=function(e,t,a){var n,r,o,l=e.day,i=e.week,d=e.month,s=a.yearIdx;if(!t)return!1;var u=null===(o=null===(r=null===(n=t.years)||void 0===n?void 0:n[s])||void 0===r?void 0:r.months)||void 0===o?void 0:o[0];return u.weeks[0].days[0].day===l&&u.weeks[0].week===i&&u.month===d},Bn=function(e,t,a,n){void 0===n&&(n=1);var r=e.day,o=e.week,l=a.yearIdx,i=a.monthIdx;return!((i+1)%n!=0||-1===l||-1===i||!t)&&t.years[l].months[i].weeks[0].days[0].day===r&&t.years[l].months[i].weeks[0].week===o},Vn=function(e,t,a,n){void 0===n&&(n=1);var r=e.day,o=e.week,l=a.yearIdx,i=a.monthIdx,d=a.weekIdx;if(!t)return!1;if(t.years[l].months[i].weeks[d].days[0].day===r&&t.years[l].months[i].weeks[d].week===o){if(2===n){var s=0;t.years[l].months[i].weeks.forEach((function(e){return s+=e.days.length}));for(var u=0,c=0,p=0,h=Math.round(s/2),f=0;f<t.years[l].months[i].weeks.length;f++){var m=t.years[l].months[i].weeks[f];Math.abs(u+m.days.length-h)<Math.abs(c-h)&&(c=u+m.days.length,p=f+1),u+=m.days.length}return d===p}if(1===n)return!(1===d&&t.years[l].months[i].weeks[0].days.length<3)&&!(d===t.years[l].months[i].weeks.length-1&&t.years[l].months[i].weeks[d].days.length<3)}return!1},Hn=function(e,t,a,n){var r,o,l,i,d,s,u;void 0===n&&(n=1);var c=e.day,p=a.yearIdx,h=a.monthIdx,f=a.weekIdx,m=a.dayIdx;if(!t)return!1;var v=null===(u=null===(s=null===(d=null===(i=null===(l=null===(o=null===(r=t.years)||void 0===r?void 0:r[p])||void 0===o?void 0:o.months)||void 0===l?void 0:l[h])||void 0===i?void 0:i.weeks)||void 0===d?void 0:d[f])||void 0===s?void 0:s.days)||void 0===u?void 0:u[m];if(-1===m||-1===f||-1===h||-1===p||!v)return!1;if(v.day===c&&1===n)return!0;if(v.day===c&&2===n){if(t.years[p].months[h].weeks[f].days.length<=3)return!1;if(4===t.years[p].months[h].weeks[f].days.length&&(0===m||2===m)||5===t.years[p].months[h].weeks[f].days.length&&(0===m||2===m)||6===t.years[p].months[h].weeks[f].days.length&&(0===m||2===m||4===m)||7===t.years[p].months[h].weeks[f].days.length&&(0===m||2===m||5===m))return!0}return!1},Kn=function(e,t,a,n){var r,o,l,i,d,s,u,c;void 0===n&&(n=1);var p=e.hour,h=a.yearIdx,f=a.monthIdx,m=a.weekIdx,v=a.dayIdx,g=a.hourIdx;if(!t)return!1;var x=null===(u=null===(s=null===(d=null===(i=null===(l=null===(o=null===(r=t.years)||void 0===r?void 0:r[h])||void 0===o?void 0:o.months)||void 0===l?void 0:l[f])||void 0===i?void 0:i.weeks)||void 0===d?void 0:d[m])||void 0===s?void 0:s.days)||void 0===u?void 0:u[v],y=kt(g)?null:null===(c=null==x?void 0:x.hours)||void 0===c?void 0:c[g];return!(-1===v||-1===m||-1===f||-1===h||-1===g||!y||kt(g))&&g%n==0&&y.hour===p},qn=function(e,t,a,n){void 0===n&&(n=1);var r=e.minute,o=a.yearIdx,l=a.monthIdx,i=a.weekIdx,d=a.dayIdx,s=a.hourIdx,u=a.minuteIdx;if(!t)return!1;var c=t.years[o].months[l].weeks[i].days[d];if(-1===o||-1===l||-1===i||-1===d)return!1;if(kt(s)||-1===s||kt(u)||-1===u)return!1;var p=c.hours[s].minutes[u];return u%n==0&&p.minute===r},$n=function(e,t,a){return e>=0?Math.min(t*(1+Math.abs(e)/(a/2)),a/3):Math.max(t/(1+Math.abs(e)/(a/2)),1)},Jn=function(e,t,a,r,o){var l,i,d=e?-t/e:0,s=Math.max(Math.ceil(d),0),u=s*e+t,c={xStart:s,pixXStart:u,xEnd:0,xLast:0,xUnlimited:0,pixXEnd:0,curTicks:[],optChartPeriod:null},p=o.find((function(e){return e.id===(null==r?void 0:r.dataId)}));if(!(a&&r&&e&&p&&p.dateStat&&0!==(null===(l=null==p?void 0:p.data)||void 0===l?void 0:l.length)))return c;var h=null!==(i=p.data.length)&&void 0!==i?i:0,f=Math.min(a,h*e+t),m=a,v=Math.floor((m-t)/e),g=Math.min(v,h-1),x=function(e,t,a,r){if(!e.chartPeriod||!t)return null;var o=e.chartPeriod,l=o.name,i=o.multiply,d=Et.findIndex((function(e){return e.name===l}));if(-1===d)return null;var s=Dt(a,0,r),u=n.__assign({},t.accAmt);Object.entries(u).forEach((function(e){var t=e[0],a=t;t!==l?u[a]=u[a]*s/u[l]:u[l]=s}));var c=Math.max(Math.round(a/50),4),p=function(e,t){return Math.abs(e/t-c)},h=Et.slice(d).map((function(e,t){var a=e.name,r=0===t?n.__spreadArray([1],e.scaleMultiplys,!0).filter((function(e){return e>=i})).map((function(e){return e/i})):n.__spreadArray([1],e.scaleMultiplys,!0);return n.__spreadArray([1],r,!0).map((function(t,n){var r=u[a],o=e.period;return{name:a,multiply:t,amt:r,period:o}}))})).flat().reduce((function(e,t,a){return p(t.amt,t.multiply)<p(e.amt,e.multiply)?t:e}));return h.amt,n.__rest(h,["amt"])}(p.meta,p.dateStat,a,e),y=p.meta.chartPeriod,b=null==p?void 0:p.dateStat,_=x&&y&&!kt(b)?Array(g-s+1).fill(0).map((function(t,a){var r=s+a,o=Gn(p.data[r].date,b,y,n.__assign({},x));if(o){var l=Pt(p.data[r].date,o);return{x:u+e*a,dateString:l}}return null})).filter((function(e){return null!==e})):[];return{xLast:h-1,xStart:s,pixXStart:u,xEnd:g,xUnlimited:v,pixXEnd:f,curTicks:_,optChartPeriod:x,xToPix:function(a,n){return At(a,null!=n?n:t,e)},pixToX:function(a,n){return Dt(a,null!=n?n:t,e)}}};t.CChart=Mn,t.Types=bt,t.addStateProp=da,t.colorNameToHex=function(e){return e in qt?qt.name:null},t.colorNameToRGB=$t,t.colorNames=qt,t.createIRSI=function(e){return n.__assign(n.__assign({},Wa),{params:Wa.params.map((function(t){return"period"!==t.name||kt(null==e?void 0:e.period)?t:n.__assign(n.__assign({},t),{val:e.period})}))})},t.default=Mn,t.defaultCalcPointer=tn,t.defaultCalcXaxis=en,t.defaultCandleChartStyle=hn,t.defaultContainerSizeState=$a,t.defaultDarkLineChartStyle=mn,t.defaultDarkState=on,t.defaultDarkTheme=nn,t.defaultDrawState=Qa,t.defaultIndicators=Va,t.defaultLightTheme=an,t.defaultLineChartStyle=fn,t.defaultPointerState=Ja,t.defaultState=rn,t.getDataSeriesMaxY=Ft,t.getDataSeriesMinY=Xt,t.getDecimals=Ct,t.getDefaultChartInteractions=sn,t.getDefaultGraphStyle=vn,t.getGraphColors=pn,t.getInitState=dn,t.getInitSubchartsState=ln,t.getMaxDataSeriesDecimals=Ut,t.getStateProp=ua,t.getSubchartIdxByPixXy=Lt,t.graphColorsDark=cn,t.graphColorsLight=un,t.hexToRgb=Jt,t.iATR=Ra,t.iEMA=Ua,t.iKAMA=Ba,t.iMACD=Oa,t.iOBV=ja,t.iRSI=Wa,t.iSMA=Ga,t.iVolume=Na,t.includesOne=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];var n=!1;return t.forEach((function(t){e.includes(t)&&(n=!0)})),n},t.isNullish=kt,t.muiDarkTheme=Ve,t.muiTheme=Be,t.prefersDarkMode=qa,t.purePixToX=Dt,t.purePixToY=zt,t.pureXToPix=At,t.pureYToPix=Zt,t.removeStateProp=sa,t.setStateProp=ia,t.snapPixYToDataset=Yt,t.snapToolsByXy=Rt,t.useChartState=function(e){var t=e.ContainerRef,a=e.data,r=e.rtData,o=e.width,l=e.height,i=e.settings,d=te.default.useMemo((function(){return dn(i.initialState,i.initWidthPerTick)}),[]),s=i.maxUpdatesPerSec?i.maxUpdatesPerSec:15,u=i.disablePointerEvents,c=("static"!==i.containerMode||l&&o)&&i.containerMode?i.containerMode:"responsive",p=o,h=l,f=te.default.useReducer(Rn,d),m=f[0],v=f[1],g=function(e,t,a,r,o,l,i,d,s,u){var c,p,h,f,m=r,v=o,g=te.default.useRef(sn(t)),x=null!==(p=null===(c=null==e?void 0:e.current)||void 0===c?void 0:c.getBoundingClientRect())&&void 0!==p?p:{},y=x.top,b=x.left;te.default.useEffect((function(){var t=e;if((null==t?void 0:t.current)&&!u&&"static"===d&&!kt(y)&&!kt(b)){var a=g.current,r=t.current,o=r.clientWidth,l=r.clientHeight,i={top:y,left:b,width:"static"===d&&void 0!==m?m:o,height:"static"===d&&void 0!==v?v:l,init:!0};t.current.style.position="relative",t.current.style.width="static"===d&&void 0!==m?m+"px":"100%",t.current.style.height="static"===d&&void 0!==v?v+"px":"100%",t.current.style.top="0px",t.current.style.left="0px",g.current=n.__assign(n.__assign({},a),{stateControl:n.__assign(n.__assign({},a.stateControl),{shallUpdate:n.__spreadArray(n.__spreadArray([],a.stateControl.shallUpdate,!0),["containerResize"],!1)}),containerSize:i})}}),[d,e,u,m,v,b,y]),te.default.useEffect((function(){var t=e;if(null==t?void 0:t.current)if(s)t.current.style.pointerEvents="none";else if(t.current.style.pointerEvents="auto",u){var a=g.current,r=function(e){if(t&&t.current){var r=window.innerWidth,o=window.innerHeight;g.current=n.__assign(n.__assign({},a),{stateControl:n.__assign(n.__assign({},a.stateControl),{shallUpdate:n.__spreadArray(n.__spreadArray([],a.stateControl.shallUpdate,!0),["containerResize"],!1)}),containerSize:{top:0,left:0,width:r,height:o,init:!0}})}};return r(),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),function(){window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}}}),[e,u,s]);var _=te.default.useCallback((function(t,a){var r;if(!("responsive"!==d||kt(t)||kt(a)||u)&&(null===(r=null==e?void 0:e.current)||void 0===r?void 0:r.parentElement)){var o=g.current,l=e.current.parentElement.getBoundingClientRect(),i=l.top,s=l.left;console.log("VM",d,i,s,t,a),g.current=n.__assign(n.__assign({},o),{stateControl:n.__assign(n.__assign({},o.stateControl),{shallUpdate:n.__spreadArray(n.__spreadArray([],o.stateControl.shallUpdate,!0),["containerResize"],!1)}),containerSize:{top:i,left:s,width:t,height:a,init:!0}})}}),[u,d,e]);J.useResizeDetector({targetRef:null!==(f={current:null===(h=e.current)||void 0===h?void 0:h.parentElement})&&void 0!==f?f:void 0,onResize:_});var k=function(e){return[e[0]-0,e[1]-0]};return Q.useGesture({onPinch:function(e){var t=e.active,a=e.origin,r=e.movement,o=e.first;e.offset,g.current.pointer=n.__assign(n.__assign({},g.current.pointer),{pinch:{isPinching:t,origin:k(a),movementInitial:r,first:o}}),g.current.stateControl.shallUpdate=n.__spreadArray(n.__spreadArray([],g.current.stateControl.shallUpdate.filter((function(e){return"pointerMove"!==e})),!0),["pinch"],!1)},onDrag:function(e){var t=g.current.stateControl.shallUpdate.includes("drag"),a=g.current.pointer.drag.delta,r=t&&a?a[0]+e.delta[0]:e.delta[0],o=t&&a?a[1]+e.delta[1]:e.delta[1],l=e.xy,i=e.initial,d=e.movement,s=e.first,u=e.last,c=e.active,p=e.ctrlKey,h=t&&g.current.pointer.drag.first||s,f=t&&g.current.pointer.drag.last||u;(!c||h||e.delta[0]||e.delta[1])&&(g.current=n.__assign(n.__assign({},g.current),{pointer:n.__assign(n.__assign({},g.current.pointer),{drag:{isDragging:c,xy:k(l),initial:k(i),movementInitial:d,last:f,first:h,delta:[r,o],ctrlKey:p}}),stateControl:n.__assign(n.__assign({},g.current.stateControl),{shallUpdate:n.__spreadArray(n.__spreadArray([],g.current.stateControl.shallUpdate,!0),["drag"],!1),lastUpdate:g.current.stateControl.lastUpdate})}))},onMove:function(e){(!e.active||e.first||e.delta[0]||e.delta[1])&&(g.current=n.__assign(n.__assign({},g.current),{pointer:n.__assign(n.__assign({},g.current.pointer),{move:{isMoving:e.active,xy:k(e.xy)}}),stateControl:n.__assign(n.__assign({},g.current.stateControl),{shallUpdate:n.__spreadArray(n.__spreadArray([],g.current.stateControl.shallUpdate,!0),["pointerMove"],!1)})}))},onHover:function(e){g.current=n.__assign(n.__assign({},g.current),{pointer:n.__assign(n.__assign({},g.current.pointer),{isHovering:e.active}),stateControl:n.__assign(n.__assign({},g.current.stateControl),{shallUpdate:n.__spreadArray(n.__spreadArray([],g.current.stateControl.shallUpdate,!0),["pointerMove"],!1)})})},onWheel:function(e){var t=g.current.stateControl.shallUpdate.includes("wheel"),a=g.current.pointer.wheel.delta,r=t&&a?a[0]+e.delta[0]:e.delta[0],o=t&&a?a[1]+e.delta[1]:e.delta[1];g.current=n.__assign(n.__assign({},g.current),{pointer:n.__assign(n.__assign({},g.current.pointer),{wheel:{delta:[r,o],isWheeling:e.active}}),stateControl:n.__assign(n.__assign({},g.current.stateControl),{shallUpdate:n.__spreadArray(n.__spreadArray([],g.current.stateControl.shallUpdate,!0),["wheel"],!1)})})},onDragEnd:function(e){var t=e.xy;e.initial;var a=e.first,r=e.last,o=e.movement;g.current=n.__assign(n.__assign({},g.current),{pointer:n.__assign(n.__assign({},g.current.pointer),{dragPointerUp:{isDragPointerUp:!0,xy:k(t),initial:k(t),movementInitial:o,last:r,first:a}}),stateControl:n.__assign(n.__assign({},g.current.stateControl),{shallUpdate:n.__spreadArray(n.__spreadArray([],g.current.stateControl.shallUpdate,!0),["dragEnd"],!1)})})}},{domTarget:u?document.body:e,transform:function(e){var t=e[0],a=e[1];return[t-(null!=b?b:0),a-(null!=y?y:0)]},drag:{experimental_preventWindowScrollY:!0,useTouch:!0},enabled:!s&&g.current.containerSize.init,eventOptions:{passive:!1,capture:!1},pinch:{transform:function(e){return[e[0],e[1]]}},wheel:{transform:function(e){return[e[0],e[1]]}}}),g}(t,d,0,p,h,m.containerSize.left,m.containerSize.top,c,u,m.fullscreen);r&&(g.current.rtData=r),Ge.default(t,m.fullscreen,{onClose:function(){return v({task:"setGeneralProp",params:{prop:"toggleFullscreen"}})}});var x=m.draw,y=x.xy,b=n.__rest(x,["xy"]),_={subcharts:m.subCharts.map((function(e){return{yaxis:e.yaxis}})),draw:n.__assign(n.__assign({},b),{nPixXy:y.length})};Fe.default(g.current.stateControl.customEffectChartState,_)||(g.current.stateControl.customEffectChartState=_),te.default.useEffect((function(){var e=function(){var e,t,a,r,o,l,i,d,s,c,p,h=g.current,f=h.stateControl;if(u)h.pointer.drag=n.__assign(n.__assign({},h.pointer.drag),{delta:[0,0],movementInitial:[0,0]});else{var x=m.subCharts,y=!1;if(h.rtData&&h.rtData.length>0&&x.length===h.calc.subcharts.length&&h.calc.xaxis.xUnlimited>h.calc.xaxis.xLast&&h.calc.subcharts.forEach((function(e,t){var a,r,o=x[t],l=null!==(r=null===(a=h.rtData)||void 0===a?void 0:a.filter((function(e){return o.yaxis.map((function(e){return e.graphs.map((function(e){return e.dataId}))})).flat().includes(e.dataId)})).map((function(e){return n.__assign(n.__assign({},e),{data:e.data.slice(1,h.calc.xaxis.xUnlimited-h.calc.xaxis.xLast+1)})})))&&void 0!==r?r:[],i=Math.max.apply(Math,e.yaxis.map((function(e){return e.yMaxExact}))),d=l&&0!==l.length?Math.max.apply(Math,l.map((function(e){return e.data.map((function(e){var t;return $e(e)&&null!==(t=e.high)&&void 0!==t?t:e.close}))})).flat()):0,s=Math.min.apply(Math,e.yaxis.map((function(e){return e.yMinExact}))),u=l&&0!==l.length?Math.min.apply(Math,l.map((function(e){return e.data.map((function(e){var t;return $e(e)&&null!==(t=e.low)&&void 0!==t?t:e.close}))})).flat()):d;l&&(d>i||u<s)&&(y=!0,console.log("RT-DATA OUT OF Y-RANGE! -> rtMax:",h.rtData,d,", rtMin:",u,", curMax:",i,", curMin:",s))})),f.shallUpdate.length>0||y){f.shallUpdate.includes("dragEnd")||(h.pointer.dragPointerUp.isDragPointerUp=!1);var b=m.style.xaxis.heightXAxis,_=h.containerSize.width-1,k=(null===(r=null===(a=null===(t=null===(e=null==x?void 0:x[0])||void 0===e?void 0:e.yaxis)||void 0===t?void 0:t[0])||void 0===a?void 0:a.graphs)||void 0===r?void 0:r[0])&&nt(x[0].yaxis[0].graphs[0])?x[0].yaxis[0].graphs[0]:null,C=m.data.find((function(e){return e.id===(null==k?void 0:k.dataId)})),w=m.draw.isDrawing,T=function(e,t,a,r){var o,l,i,d,s,u,c,p=e.stateControl,h=e.pointer,f=p.shallUpdate,m=p.customEffectChartState,v=p.prevAction,g=e.calc.xaxis,x="drawTool"===(null===(o=null==v?void 0:v.drag)||void 0===o?void 0:o.type)&&!a,y=null===(l=h.wheel)||void 0===l?void 0:l.delta[1],b=(null===(i=h.wheel)||void 0===i?void 0:i.isWheeling)&&f.includes("wheel")&&y?{wheelDeltaY:y,type:"wheelScale"}:null,_=function(e,t,a,r){var o,l,i,d,s,u,c,p=e.calc,h=e.containerSize,f=e.stateControl,m=e.pointer,v=p.xaxis,g=f.shallUpdate,x=f.prevAction,y=h.width,b=h.height,_=null==x?void 0:x.drag,k=b-r,C=m.drag.first,w=m.drag.last,T=m.drag.isDragging,I=(!!(null===(l=null===(o=m.drag)||void 0===o?void 0:o.delta)||void 0===l?void 0:l[0])||!!(null===(d=null===(i=m.drag)||void 0===i?void 0:i.delta)||void 0===d?void 0:d[1]))&&!(null===(s=m.drag)||void 0===s?void 0:s.first)&&g.includes("drag");if((["drawTool","editTool","resizeSubchart"].includes(null!==(u=null==_?void 0:_.type)&&void 0!==u?u:"")||["translate","scale"].includes(null!==(c=null==_?void 0:_.type)&&void 0!==c?c:"")&&!m.drag.last)&&_)return n.__assign(n.__assign({},_),{shallUpdate:I,start:!1,end:w});if(T&&a)return{type:"drawTool",start:!0,end:!1,shallUpdate:!0};if(T&&!a){var S=m.drag.initial,E=function(e,t,a){if(!e)return null;var n=t.find((function(t){return e[1]>=t.bottom-10&&e[1]<t.bottom+10}));if(!n)return null;var r=t.indexOf(n);return-1===r?null:r}(S,t);if(null!==E&&E!==t.length-1)return{type:"resizeSubchart",start:C,end:w,subchartIdx:E,bottomInitY:t[E].bottom,shallUpdate:!0};var P=Rt(S,t,v,p);if(P.length>0){var M=P[0],A=M.subchartIdx,D=M.yaxisIdx,Z=M.toolIdx,z=M.toolPtIdx;return{type:"editTool",start:C,end:w,subchartIdx:A,yaxisIdx:D,toolIdx:Z,toolPtIdx:z,toolInitXy:t[A].yaxis[D].tools[Z].xy[z],shallUpdate:!0}}return S[0]>=0&&S[0]<0+y&&S[1]>=0&&S[1]<0+k?{type:"translate",start:C,end:w,shallUpdate:!0}:S[0]>=0&&S[0]<0+y&&S[1]>=0+k?{type:"scale",start:C,end:w,initScaledWidthPerTick:v.scaledWidthPerTick,initTranslatedX:v.totalTranslatedX,shallUpdate:!0}:null}return null}(e,t,a,r),k=f.includes("containerResize")&&t.length>0,C=(null==v?void 0:v.pinch)&&e.pointer.pinch.isPinching?v.pinch:f.includes("pinch")&&e.pointer.pinch.isPinching?{type:"pinchScale",initScaledWidthPerTick:g.scaledWidthPerTick,initTranslatedX:g.totalTranslatedX}:null,w=f.includes("deps"),T=!h.drag.isDragging&&["resizeSubchart","editTool"].includes(null!==(d=null==_?void 0:_.type)&&void 0!==d?d:"")||k,I=!h.drag.isDragging&&["resizeSubchart","editTool"].includes(null!==(s=null==_?void 0:_.type)&&void 0!==s?s:""),S={drag:_,pinch:C,wheel:b,containerResize:k,deps:w,shallUpdateCalcSubcharts:["scale","translate"].includes(null!==(u=null==_?void 0:_.type)&&void 0!==u?u:"")&&(null==_?void 0:_.shallUpdate)||"resizeSubchart"===(null==_?void 0:_.type)||k||w||!!b,shallUpdateXaxis:null!==(c=!!b||w||!!C||(null==_?void 0:_.shallUpdate)&&("translate"===_.type||"scale"===_.type))&&void 0!==c&&c};return{action:S,stateControl:n.__assign(n.__assign({},p),{prevAction:n.__assign(n.__assign({},S),{drag:I||x?null:_}),customEffectChartState:T?null:m})}}(h,x,w,b),I=T.action,S=T.stateControl;f=n.__assign(n.__assign({},S),{prevAction:I?n.__assign({},I):null}),g.current.stateControl=S;var E=I.containerResize?Xn(h.containerSize.height,x,m.style):x,P="resizeSubchart"===(null===(o=null==I?void 0:I.drag)||void 0===o?void 0:o.type)?function(e,t,a){var r;if("resizeSubchart"!==(null===(r=null==e?void 0:e.drag)||void 0===r?void 0:r.type))return t;var o=e.drag,l=o.subchartIdx,i=Math.min(Math.max(o.bottomInitY+a.movementInitial[1],t[l].top+10,0===l?50:0),t[l+1].bottom-10),d=i-o.bottomInitY;return a.ctrlKey&&0!==l?n.__spreadArray(n.__spreadArray(n.__spreadArray([],t.slice(0,l).map((function(e,t){return n.__assign(n.__assign({},e),{bottom:e.bottom+d})})).map((function(e,t,a){return 0===t?e:n.__assign(n.__assign({},e),{top:a[t-1].bottom})})),!0),[n.__assign(n.__assign({},t[l]),{bottom:i,top:t[l].top+d}),n.__assign(n.__assign({},t[l+1]),{top:i})],!1),t.slice(l+2),!0):n.__spreadArray(n.__spreadArray(n.__spreadArray([],t.slice(0,l),!0),[n.__assign(n.__assign({},t[l]),{bottom:i}),n.__assign(n.__assign({},t[l+1]),{top:i})],!1),t.slice(l+2),!0)}(I,E,h.pointer.drag):E;null!==(l=f.lastMainChartData!==(null==C?void 0:C.data))&&void 0!==l&&l&&"chart"===(null==C?void 0:C.type)&&(h.calc.xaxis=function(e,t,a){return n.__assign(n.__assign({},e),{totalTranslatedX:-(t.length+10-a/e.scaledWidthPerTick)*e.scaledWidthPerTick})}(h.calc.xaxis,C.data,_));var M=I.shallUpdateXaxis?function(e,t,a,r){var o,l,i,d,s,u,c,p,h,f,m=e.calc.xaxis,v=e.pointer,g=e.containerSize.width-1,x=null===(o=v.wheel)||void 0===o?void 0:o.delta[1],y=!!t.wheel,b=!!t.pinch,_=null===(l=v.move)||void 0===l?void 0:l.xy,k=null===(i=null==t?void 0:t.drag)||void 0===i?void 0:i.shallUpdate,C="translate"===(null===(d=null==t?void 0:t.drag)||void 0===d?void 0:d.type)&&k,w="scale"===(null===(s=null==t?void 0:t.drag)||void 0===s?void 0:s.type)&&k,T=r.find((function(e){return e.id===(null==a?void 0:a.dataId)})),I=null===(u=v.drag)||void 0===u?void 0:u.initial;if(!T||!(null===(c=t.drag)||void 0===c?void 0:c.shallUpdate)&&!t.wheel&&!t.deps&&!t.containerResize||!I&&(null===(p=t.drag)||void 0===p?void 0:p.shallUpdate))return m;var S=T.data.length;if(b){var E=t.pinch,P=E.initScaledWidthPerTick,M=E.initTranslatedX;if("pinchScale"!==E.type||kt(P)||kt(M))return m;var A=$n(null===(h=null==v?void 0:v.pinch)||void 0===h?void 0:h.movementInitial[0],P,g),D=M,Z=I[0],z=M-(X=(F=(I[0]-D)/P)*A+D)+Z;return n.__assign(n.__assign(n.__assign({},m),{scaledWidthPerTick:A,totalTranslatedX:z}),Jn(A,z,g,a,r))}if(y){A=$n(x/2,m.scaledWidthPerTick,g),D=m.totalTranslatedX,Z=_?_[0]:0;var F=((_?_[0]:0)-D)/m.scaledWidthPerTick,X=Math.round(F)*A+m.totalTranslatedX;return z=m.totalTranslatedX-X+Z,n.__assign(n.__assign(n.__assign({},m),{scaledWidthPerTick:A,totalTranslatedX:z}),Jn(A,z,g,a,r))}if(C)return z=Math.max(Math.min(v.drag.delta[0]+m.totalTranslatedX,g-2*m.scaledWidthPerTick),-(S-3)*m.scaledWidthPerTick),n.__assign(n.__assign(n.__assign({},m),{totalTranslatedX:z}),Jn(m.scaledWidthPerTick,z,g,a,r));if(w){var Y=t.drag;return M=Y.initTranslatedX,(P=Y.initScaledWidthPerTick)?(A=$n(null===(f=null==v?void 0:v.drag)||void 0===f?void 0:f.movementInitial[0],P,g),D=M,Z=I[0],z=M-(X=(F=(I[0]-D)/P)*A+D)+Z,n.__assign(n.__assign(n.__assign({},m),{scaledWidthPerTick:A,totalTranslatedX:z}),Jn(A,z,g,a,r))):m}return t.deps?n.__assign(n.__assign({},m),Jn(m.scaledWidthPerTick,m.totalTranslatedX,g,a,r)):m}(h,I,k,m.data):h.calc.xaxis;h.calc.xaxis=M;var A=I.shallUpdateCalcSubcharts||y?function(e,t,a,r){return e&&t&&a?0===e.length||0===a.length?null:e.map((function(o,l){var i=o.bottom,d=o.top,s=Math.max(Math.round((i-d)/75),3);return{yaxis:o.yaxis.map((function(o,u){var c,p,h,f,m,v,g,x=function(e,t,a,n,r){var o=r.xStart,l=r.xEnd,i=r.pixXEnd,d=t[a],s=d.top,u=d.bottom,c=Math.max(Math.round((u-s)/75),3);return t[a].yaxis[n].graphs.map((function(t){var a,n,r,d,s,u=e.find((function(e){return e.id===t.dataId}));if(!(null==u?void 0:u.data))return null;var p=null!==(a=null==u?void 0:u.data)&&void 0!==a?a:[],h=null===(n=u)||void 0===n?void 0:n.indicator,f=p.slice(o,l+1),m=Ft(f,null===(r=null==h?void 0:h.default)||void 0===r?void 0:r.fixedYScale,null==h?void 0:h.graphTypes),v=Xt(f,null===(d=null==h?void 0:h.default)||void 0===d?void 0:d.fixedYScale,null==h?void 0:h.graphTypes),g=null!==(s=null==u?void 0:u.decimals)&&void 0!==s?s:0,x=Un(m,v,g,c);return{lastDataset:{data:p[l],x:l,pixX:i,dateString:""},curData:f,yMaxExact:m,yMax:Math.ceil(m/x)*x,yMinExact:v,yMin:Math.floor(v/x)*x}}))}(a,e,l,u,t),y=null!==(h=Math.max.apply(Math,n.__spreadArray(n.__spreadArray([],x.map((function(e){var t;return null!==(t=null==e?void 0:e.yMaxExact)&&void 0!==t?t:null})).filter((function(e){return null!==e})),!1),null!==(p=null===(c=null==r?void 0:r.filter)||void 0===c?void 0:c.call(r,(function(e){return o.graphs.map((function(e,t){return e.dataId})).includes(e.dataId)})).map((function(e){return e.data.map((function(e){var t;return $e(e)&&null!==(t=e.high)&&void 0!==t?t:e.close}))})).flat())&&void 0!==p?p:[],!1)))&&void 0!==h?h:0,b=null!==(v=Math.min.apply(Math,n.__spreadArray(n.__spreadArray([],x.map((function(e){var t;return null!==(t=null==e?void 0:e.yMinExact)&&void 0!==t?t:null})).filter((function(e){return null!==e})),!1),null!==(m=null===(f=null==r?void 0:r.filter)||void 0===f?void 0:f.call(r,(function(e){return o.graphs.map((function(e,t){return e.dataId})).includes(e.dataId)})).map((function(e){return e.data.map((function(e){var t;return $e(e)&&null!==(t=e.low)&&void 0!==t?t:e.close}))})).flat())&&void 0!==m?m:[],!1)))&&void 0!==v?v:0,_=null!==(g=Math.max.apply(Math,o.graphs.map((function(e){var t,n;return null!==(n=null===(t=a.find((function(t){return t.id===e.dataId})))||void 0===t?void 0:t.decimals)&&void 0!==n?n:0}))))&&void 0!==g?g:0,k=Un(y,b,_,s),C=Math.ceil(y/k)*k,w=Math.floor(b/k)*k,T=(i-d)/((C||0)-(w||0))/Math.pow(10,_),I=-Zt(w||0,i,_,0,T)+i,S=function(e){return Zt(e,i,_,I,T)},E=zt(i,i,_,I,T),P=S(Math.ceil(E/k)*k),M=T*k/Math.pow(10,-_),A=Math.floor((P-10-d-10)/M),D=!A||A<0?[]:Array(A).fill(0).map((function(e,t){var a=P-(t+1)*M,n=zt(a,i,_,I,T);return{pixY:a,label:(Math.round(n*Math.pow(10,_))/Math.pow(10,_)).toString()}})),Z=x&&x.map((function(e,r){if(!(null==e?void 0:e.curData))return e;var l=e.curData.map((function(e,n){var l,i,d=null===(i=null===(l=a.find((function(e){var t;return e.id===(null===(t=o.graphs)||void 0===t?void 0:t[r].dataId)&&"indicator"===e.type})))||void 0===l?void 0:l.indicator)||void 0===i?void 0:i.graphTypes,s=et(e)?{pixPrices:e.prices.map((function(e,t){var a,n;return e&&["line","bars"].includes(null!==(n=null===(a=null==d?void 0:d[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")?S(e):null}))}:$e(e)?{pixOpen:S(e.open),pixHigh:S(e.high),pixLow:S(e.low),pixClose:S(e.close)}:Je(e)?{pixClose:S(e.close)}:null;return{pixX:t.scaledWidthPerTick*n,pixY:s}}));return n.__assign(n.__assign({},e),{curTicks:l})}));return{pixY0:S(0),yMaxExact:y,yMinExact:b,yMax:C,yMin:w,heightPerPt:T,decimals:_,optIntervalY:k,translatedY:I,graphs:Z,drawTicks:D}}))}})):null}(P,h.calc.xaxis,m.data,y?h.rtData:void 0):null;A&&(h.calc.subcharts=A);var D=f.shallUpdate.includes("pointerMove")?function(e,t,a,r){var o,l,i,d,s=e.move,u=e.dragPointerUp,c=e.isHovering,p=t.xaxis,h=(null===(d=null===(i=null===(l=null===(o=null==a?void 0:a[0])||void 0===o?void 0:o.yaxis)||void 0===l?void 0:l[0])||void 0===i?void 0:i.graphs)||void 0===d?void 0:d[0])&&nt(a[0].yaxis[0].graphs[0])?a[0].yaxis[0].graphs[0]:null,f=null==s?void 0:s.xy;if(!(h&&s&&a&&f))return null;var m=Lt(f,a);if(null===m)return tn;var v=function(e,t,a,r){if("chart"!==(null==t?void 0:t.type)||!r)return null;var o=a.find((function(e){return e.id===t.dataId}));if("chart"!==(null==o?void 0:o.type))return null;var l=o.meta,i=o.dateStat,d=e.scaledWidthPerTick,s=e.totalTranslatedX,u=Math.round(Dt(null==r?void 0:r.xy[0],s,d)),c=At(u,s,d);if(u<0||u>o.data.length-1||!i)return{xUnlimited:u,pixXUnlimSnap:c};var p=Math.abs(Math.round(u)),h=e.optChartPeriod;if(!h||!l.chartPeriod||!i)return{xUnlimited:u,pixXUnlimSnap:c};var f=Gn(o.data[p].date,i,l.chartPeriod,n.__assign({},h)),m=At(p,s,d);return{x:p,xDateString:Pt(o.data[p].date,f||l.chartPeriod.name),pixXSnap:m,xUnlimited:u,pixXUnlimSnap:c}}(p,h,r,s);if(!v)return null;if(!("x"in v))return function(e,t,a){return{isHovering:c,move:{pixX:f[0],pixXUnlimSnap:t,pixXSnap:0,pixY:f[1],x:null,xUnlimited:e,subchartIdx:a,snapDatasets:[],xDateString:""},click:{clickedSubchartIdx:null}}}(v.xUnlimited,v.pixXUnlimSnap,m);var g=v.xUnlimited,x=v.x,y=v.xDateString,b=v.pixXSnap,_=v.pixXUnlimSnap,k=u&&u.xy?Lt(u.xy,a):null,C=a[m].yaxis.map((function(e,n){return e.graphs.map((function(e,o){var l,i=null===(l=r.find((function(t){return t.id===(null==e?void 0:e.dataId)})))||void 0===l?void 0:l.data,d=i?Yt(f[1],i[x],a,m,n,t.subcharts):null,s=d&&d.length>0?d[0].pixY:null,u=d&&d.length>0?d[0].y:null,c=t.subcharts[m].yaxis[n],p=c.decimals,h=c.translatedY,v=c.heightPerPt;return{yaxisIdx:n,graphIdx:o,data:null==i?void 0:i[x],y:zt(f[1],a[m].bottom,p,h,v),ySnap:u,pixYSnap:s,dateString:y}}))})).flat().sort((function(e,t){return null===e.ySnap&&null===t.ySnap?0:null===e.ySnap&&null!==t.ySnap||null!==e.ySnap&&null!==t.ySnap&&Math.abs(parseFloat(e.ySnap)-e.y)>Math.abs(parseFloat(t.ySnap)-t.y)?1:null!==e.ySnap&&null===t.ySnap||null!==e.ySnap&&null!==t.ySnap&&Math.abs(parseFloat(e.ySnap)-e.y)<Math.abs(parseFloat(t.ySnap)-t.y)?-1:0}));return{isHovering:c,move:{pixX:f[0],pixXSnap:b,pixXUnlimSnap:_,pixY:f[1],x:x,xUnlimited:g,subchartIdx:m,snapDatasets:C,xDateString:y},click:{clickedSubchartIdx:k}}}(h.pointer,h.calc,x,m.data):null;D&&(h.calc.pointer=D);var Z="editTool"===(null===(i=null==I?void 0:I.drag)||void 0===i?void 0:i.type)&&(null===(d=null==I?void 0:I.drag)||void 0===d?void 0:d.shallUpdate)?function(e,t,a){var n,r,o,l=e.pointer,i=e.calc,d=i.pointer;if("editTool"!==(null===(n=null==a?void 0:a.drag)||void 0===n?void 0:n.type))return t;var s=null==a?void 0:a.drag,u=s.subchartIdx,c=s.yaxisIdx,p=t[u],h=i.subcharts[u].yaxis[c],f=d.move.snapDatasets.length>0&&!!d.move.snapDatasets[0].ySnap,m=null!==(r=d.move.x)&&void 0!==r?r:d.move.xUnlimited,v=f?parseFloat(null!==(o=d.move.snapDatasets[0].ySnap)&&void 0!==o?o:""):zt(l.drag.xy[1],p.bottom,h.decimals,h.translatedY,h.heightPerPt),g=s.toolIdx,x=s.toolPtIdx;return ia(t,[u,"yaxis",c,"tools",g,"xy",x],[m,v])}(h,P,I):P,z="drawTool"===(null===(s=null==I?void 0:I.drag)||void 0===s?void 0:s.type)?function(e,t,a,n){var r,o,l;if(!e.pointer.dragPointerUp.isDragPointerUp)return{subcharts:t,draw:a};var i=e.calc,d=i.pointer,s=i.xaxis,u=e.pointer,c=a.type,p=null===(r=Ea.find((function(e){return e.type===c})))||void 0===r?void 0:r.nPoints,h=Lt(u.drag.initial,t);if(!c||!p||kt(h))return{draw:Qa,subcharts:t};var f=null===(o=i.subcharts)||void 0===o?void 0:o[h],m=null===(l=null==f?void 0:f.yaxis)||void 0===l?void 0:l[0];if(!f||!m)return{draw:Qa,subcharts:t};var v=d.move.pixXSnap?d.move.pixXSnap:u.drag.xy[0],g=d.move.snapDatasets.length>0&&d.move.snapDatasets[0].pixYSnap?d.move.snapDatasets[0].pixYSnap:u.drag.xy[1],x=Dt(v,s.totalTranslatedX,s.scaledWidthPerTick),y=m.decimals,b=m.translatedY,_=m.heightPerPt,k=zt(g,t[h].bottom,y,b,_);return a.xy.length<p-1?{draw:jn(a.type,a,[x,k]),subcharts:t}:{draw:Qa,subcharts:Wn(t,h,jn(a.type,a,[x,k]),n)}}(h,Z,m.draw,m.style):{subcharts:Z,draw:m.draw},F=z.subcharts,X=z.draw,Y=F;h.stateControl;var L=n.__rest(h,["stateControl"]),R=A?n.__assign({subcharts:A},function(e,t){return{yToPix:function(a,n,r,o){var l,i;if(!(null===(i=null===(l=null==e?void 0:e[n])||void 0===l?void 0:l.yaxis)||void 0===i?void 0:i[r]))return 0;var d=t[n].yaxis[r],s=d.heightPerPt,u=d.decimals,c=d.translatedY,p=void 0!==o?o:c;return e[n].bottom-a*Math.pow(10,u)*s+p},pixToY:function(a,n,r,o){var l,i;if(!(null===(i=null===(l=null==e?void 0:e[n])||void 0===l?void 0:l.yaxis)||void 0===i?void 0:i[r]))return 0;var d=t[n].yaxis[r],s=d.heightPerPt,u=d.decimals,c=d.translatedY,p=void 0!==o?o:c;return(e[n].bottom+p-a)/s*Math.pow(10,-u)}}}(Y,A)):null,U=D?{pointer:D}:null;v({task:"updateInteractionState",params:{newState:n.__assign(n.__assign({},L),{calc:n.__assign(n.__assign({xaxis:M},U),R),subCharts:Y,draw:X})}});var O=null===(c=m.data.find((function(e){var t;return e.id===(null===(t=m.subCharts)||void 0===t?void 0:t[0].yaxis[0].graphs[0].dataId)})))||void 0===c?void 0:c.data;g.current=n.__assign(n.__assign({},g.current),{stateControl:n.__assign(n.__assign({},g.current.stateControl),{lastUpdate:new Date,shallUpdate:[],lastMainChartData:null!==(p=O)&&void 0!==p?p:null})})}}};g.current.stateControl.shallUpdate.push("deps"),e(),console.log("updated Timer");var t=window.setInterval(e,Math.round(1e3/s));return function(){window.clearInterval(t)}}),[g.current.stateControl.customEffectChartState,s,u,m.style,m.data]);var k=function(e,t,a,r){var o,l,i,d,s,u,c,p,h,f,m,v,g,x;if(!e||!r.yToPix)return[];var y=null===(c=null===(u=null===(s=null===(d=null===(i=null===(l=null===(o=r.subcharts)||void 0===o?void 0:o[0])||void 0===l?void 0:l.yaxis)||void 0===i?void 0:i[0])||void 0===d?void 0:d.graphs)||void 0===s?void 0:s[0])||void 0===u?void 0:u.curTicks)||void 0===c?void 0:c[(null===(g=null===(v=null===(m=null===(f=null===(h=null===(p=r.subcharts)||void 0===p?void 0:p[0])||void 0===h?void 0:h.yaxis)||void 0===f?void 0:f[0])||void 0===m?void 0:m.graphs)||void 0===v?void 0:v[0])||void 0===g?void 0:g.curTicks.length)-1],b=null!==(x=r.yToPix&&e&&y&&e.reduce((function(e,o,l){var i;return n.__spreadArray(n.__spreadArray([],e,!0),[{data:(null==o?void 0:o.data)?null==o?void 0:o.data.map((function(e,t){return n.__assign(n.__assign({},e),{x:r.xaxis.xLast+t})})):[],dataId:null===(i=null==t?void 0:t[null==o?void 0:o.dataIdx])||void 0===i?void 0:i.id,ticks:o.data.map((function(e,n){var l;return{pixX:y.pixX+(n+0)*r.xaxis.scaledWidthPerTick,pixY:On(e,null===(l=null==t?void 0:t[null==o?void 0:o.dataIdx])||void 0===l?void 0:l.id,t,a,r.yToPix)}}))}],!1)}),[]))&&void 0!==x?x:[];return b.map((function(e){return ya(t,e.dataId)})).flat().reduce((function(e,o,l){var i,d,s,u,c,p,h,f=t.find((function(e){return e.id===o&&"indicator"===e.type}));if(!f||"indicator"!==(null==f?void 0:f.type))return e;var m=f.indicator.indicatorFn,v=f.indSrcId,g=f.indicator.params,x=n.__spreadArray(n.__spreadArray([],null!==(d=null===(i=t.find((function(e){return e.id===v})))||void 0===i?void 0:i.data)&&void 0!==d?d:[],!0),null!==(p=null===(c=null===(u=null===(s=e.find)||void 0===s?void 0:s.call(e,(function(e){return(null==e?void 0:e.dataId)===v})))||void 0===u?void 0:u.data)||void 0===c?void 0:c.slice(1))&&void 0!==p?p:[],!0),b=n.__spreadArray([],null!==(h=f.data)&&void 0!==h?h:[],!0);if(!m||!(null==x?void 0:x.length)||!y)return e;var _=m(n.__assign({chartData:x,prevData:b},g.reduce((function(e,t){var a;return n.__assign(n.__assign({},e),((a={})[t.name]=t.val,a))}),{}))).slice(f.data.length-1),k={data:_.map((function(e,t){return n.__assign(n.__assign({},e),{x:b.length-1+t})})),dataId:o,ticks:_.map((function(e,n){return{pixX:y.pixX+n*r.xaxis.scaledWidthPerTick,pixY:On(e,o,t,a,r.yToPix)}}))};return n.__spreadArray(n.__spreadArray([],e,!0),[k],!1)}),b)}(r,m.data,m.subCharts,m.calc);return te.default.useEffect((function(){var e,t,n,r;if(m.containerSize.init){var o=null==a?void 0:a[0];if("chart"===(null==o?void 0:o.type)&&(null===(e=null==o?void 0:o.data)||void 0===e?void 0:e.length)){var l=null===(t=m.data)||void 0===t?void 0:t[0];if(0===m.data.length)return console.log("Chart is initialized."),void v({task:"addData",params:{datas:a}});if(l.id===o.id&&"chart"===l.type){if(o.data.length===l.data.length)return;o.data.length>l.data.length?(console.log("Chart is updated"),v({task:"modifyChartData",params:{dataId:l.id,newDatasets:null===(r=null===(n=null==k?void 0:k[0])||void 0===n?void 0:n.data)||void 0===r?void 0:r.slice(1,-1)}})):o.data.length<l.data.length&&console.log("HERE THERE SHOULD BE LOADED A NEW GRAPH")}}}}),[a,m.containerSize.init,m.data,m.subCharts]),[m,v,k]},t.useReactiveInfo2=function(e){var t=te.default.useRef(e),a=t.current,r=function e(t,a){return Array.isArray(t)&&Array.isArray(a)&&t.length>0&&a.length>0?t.map((function(t,n){return{idx:n,type:Array.isArray(t)?"array":typeof t,hasChanged:t!==a[n],hasDeepChanged:!Fe.default(t,a[n]),changedSubelements:"object"!=typeof t||"object"!=typeof a[n]||kt(t)||kt(a[n])?null:e(t,a[n])}})):"object"!=typeof t||"object"!=typeof a||kt(t)||kt(a)?null:n.__assign({},Object.entries(t).map((function(n){var r=n[0],o=n[1];return{key:r,value:o,prevValue:null==a?void 0:a[r],type:Array.isArray(o)?"array":typeof o,hasChanged:o!==a[r],hasDeepChanged:!Fe.default(o,a[r]),changedSubelements:"object"!=typeof t[r]||"object"!=typeof a[r]||kt(t[r])||kt(a[r])?null:e(t[r],a[r])}})))},o=e.map((function(t,n){var o=a[n];return{hasChanged:t!==o,hasDeepChanged:!Fe.default(t,o),changedSubelements:r(t,o),value:e,prevValue:a}}));return te.default.useEffect((function(){t.current=e}),[e]),o}}},[[495,1,2]]]);
//# sourceMappingURL=main.3bafc62d.chunk.js.map