/*! For license information please see main.42d20b02.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-techchart"]=this["webpackJsonpreact-techchart"]||[]).push([[0],{285:function(e,t,a){},462:function(e,t){},464:function(e,t){},476:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(50),i=a.n(r),l=(a(285),a(15)),d=a(180),c=a(576),s=a(536),u=a(539),p=a(584),h=a(2),v=function(e){e.setDarkMode;var t=Object(s.a)();return Object(h.jsxs)(u.a,{sx:{height:"100%",label:"homeRoot"},children:[Object(h.jsx)("div",{style:{minHeight:128,backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.default),backgroundImage:"url(https://github.com/carmnk/resources/raw/main/icons/logo512.png)",backgroundRepeat:"no-repeat",backgroundSize:128,backgroundPosition:"50% 35%"}}),Object(h.jsxs)("div",{style:{backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.default),textAlign:"center",paddingBottom:"8px"},children:[Object(h.jsx)(p.a,{children:"a flexible and extensible react charting tool dedicated to technical chart analysis."}),Object(h.jsx)(p.a,{color:"secondary.main",children:"experimental in early development phase."})]}),Object(h.jsx)("div",{style:{flexGrow:1,border:"1px solid red"},children:e.children})]})},m=a(583),f=a(590),g=a(260),y=function(e){var t=e.disableTheme,a=e.theme;return o.a.createElement(o.a.Fragment,null,t?e.children:o.a.createElement(m.a,{theme:a},e.children))},x=Object(f.a)(Object(g.a)({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},mode:"light"},typography:{h1:{fontWeight:600,fontSize:"3rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h2:{fontWeight:600,fontSize:"2.5rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h3:{fontWeight:600,fontSize:"2.1rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h4:{fontWeight:600,fontSize:"1.8rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h5:{fontSize:"1.4rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h6:{fontSize:"1.25rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},fontFamily:"'Quattrocento Sans', sans-serif"}})),b=Object(f.a)(Object(g.a)({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},mode:"dark",background:{paper:"#424242"}},typography:{h1:{fontWeight:600,fontSize:"3rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h2:{fontWeight:600,fontSize:"2.5rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h3:{fontWeight:600,fontSize:"2.1rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h4:{fontWeight:600,fontSize:"1.8rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h5:{fontSize:"1.4rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},h6:{fontSize:"1.25rem",lineHeight:1.167,fontFamily:"'Open Sans', sans-serif"},fontFamily:"'Quattrocento Sans', sans-serif"}})),k=a(573),w=a(588),T=a(589),C=a(18),I=function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&"pixClose"in e.pixY},S=function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&"pixPrices"in e.pixY},E=function(e){return"open"in e&&"high"in e&&"low"in e&&"close"in e},P=function(e){return"close"in e},O=function(e){return"volume"in e},M=function(e){return"prices"in e},Z=function(e){return"indicator"===e.type},j=function(e){return"chart"===e.type},D=o.a.memo((function(e){var t,a,n,r=e.subCharts,i=e.subchartIdx,l=e.yaxisIdx,d=e.graphIdx,c=e.calcXaxis,s=e.calcSubcharts,u=e.indSeriesIdx,p=e.rtTicks,h=r[i].yaxis[l].graphs[d],v=null===(a=null===(t=null===s||void 0===s?void 0:s[i])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[l],m=null===(n=null===v||void 0===v?void 0:v.graphs)||void 0===n?void 0:n[d],f=o.a.useMemo((function(){return p||((null===m||void 0===m?void 0:m.curTicks)?m.curTicks:[])}),[null===m||void 0===m?void 0:m.curTicks,p]);return f&&0!==f.length?o.a.createElement(o.a.Fragment,null,f.map((function(e,t){var a;if(!S(e))return null;var n=e.pixY,r=null===v||void 0===v?void 0:v.pixY0,s=null!==(a=null===n||void 0===n?void 0:n.pixPrices[null!==u&&void 0!==u?u:0])&&void 0!==a?a:r,p=e.pixX+c.pixXStart;return o.a.createElement(C.c,{key:"barchart-"+i+"-"+l+"-"+d+"-line-"+t,points:[p+.5,r+.5,p+.5,s+.5],listening:!1,x:0,y:0,stroke:Z(h)?h.style.strokeColor[null!==u&&void 0!==u?u:0]:h.style.strokeColor,strokeWidth:1})})).filter((function(e){return null!==e}))):null})),z=function(e){return void 0===e||null===e||!("number"!==typeof e||!isNaN(e))},F=function(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0},X=o.a.memo((function(e){var t,a,n,r,i=e.subCharts,l=e.subchartIdx,d=e.yaxisIdx,c=e.graphIdx,s=e.indSeriesIdx,u=void 0===s?0:s,p=e.calcXaxis,h=e.calcSubcharts,v=e.rtTicks,m=i[l].yaxis[d].graphs[c],f=null===(r=null===(n=null===(a=null===(t=null===h||void 0===h?void 0:h[l])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[d])||void 0===n?void 0:n.graphs)||void 0===r?void 0:r[c],g=v||(null===f||void 0===f?void 0:f.curTicks),y=g?g.map((function(e){var t;if(!e.pixY)return null;var a=S(e)?null===(t=e.pixY.pixPrices)||void 0===t?void 0:t[u]:I(e)?e.pixY.pixClose:null;return z(a)?null:[e.pixX,a]})).flat().filter((function(e){return null!==e})):[];return(null===y||void 0===y?void 0:y.length)>0?o.a.createElement(o.a.Fragment,null,o.a.createElement(C.c,{listening:!1,key:"sub"+l+"_graph"+c+"-"+u,x:p.pixXStart,y:0,points:y,stroke:Z(m)?m.style.strokeColor[u]:m.style.strokeColor,strokeWidth:1})):null})),Y=o.a.memo((function(e){var t,a,n,r,i,l,d=e.subCharts,c=e.calcXaxis,s=e.calcSubcharts,u=e.subchartIdx,p=void 0===u?0:u,h=e.yaxisIdx,v=void 0===h?0:h,m=e.graphIdx,f=void 0===m?0:m,g=e.rtTicks,y=null===(a=null===(t=null===d||void 0===d?void 0:d[p])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[v],x=null===y||void 0===y?void 0:y.graphs[f],b=null===(l=null===(i=null===(r=null===(n=null===s||void 0===s?void 0:s[p])||void 0===n?void 0:n.yaxis)||void 0===r?void 0:r[v])||void 0===i?void 0:i.graphs)||void 0===l?void 0:l[f],k=o.a.useMemo((function(){return g?g.slice(1):(null===b||void 0===b?void 0:b.curTicks)?b.curTicks:[]}),[null===b||void 0===b?void 0:b.curTicks,g]),w=o.a.useMemo((function(){return(null===c||void 0===c?void 0:c.scaledWidthPerTick)>2?Math.floor(.35*(c.scaledWidthPerTick-1)):0}),[c.scaledWidthPerTick]);return x&&j(x)&&k?o.a.createElement(o.a.Fragment,null,k.map((function(e,t){var a=e.pixX+c.pixXStart;if(!function(e){return!!(null===e||void 0===e?void 0:e.pixY)&&"pixOpen"in e.pixY&&"pixHigh"in e.pixY&&"pixLow"in e.pixY&&"pixClose"in e.pixY}(e))return null;var n=e.pixY,r=n.pixOpen,i=n.pixHigh,l=n.pixLow,d=n.pixClose,s=2*w;return o.a.createElement(o.a.Fragment,{key:"candle-"+t},o.a.createElement(C.c,{listening:!1,x:0,y:0,points:[a+.5,i+.5,a+.5,l+.5],stroke:x.style.candleWickStrokeColor,strokeWidth:1}),d!==r?0!==w?o.a.createElement(C.d,{listening:!1,draggable:!1,x:a+.5-w,y:r+.5,width:s,height:d-r,stroke:x.style.candleStrokeColor,fill:d<r?x.style.candleUpColor:x.style.candleDownColor,strokeWidth:1}):o.a.createElement(C.c,{listening:!1,draggable:!1,x:0,y:0,points:[a+.5,r+.5,a+.5,d+.5],stroke:d<r?x.style.candleUpColor:x.style.candleDownColor,strokeWidth:1}):o.a.createElement(C.c,{listening:!1,draggable:!1,x:0,y:0,points:[a+.5-w,d+.5,a+.5+w,d+.5],stroke:x.style.candleStrokeColor,strokeWidth:1}))}))):null})),U=o.a.memo((function(e){var t=e.valign,a=e.halign,n=e.text,r=e.x,i=e.y,l=e.fontColor,d=e.fontSize,c=e.fontName,s=e.name,u=o.a.useCallback((function(e,o){var s=e._context;s.font=(null!==d&&void 0!==d?d:12)+"px "+(null!==c&&void 0!==c?c:"Arial"),s.fillStyle=null!==l&&void 0!==l?l:"black",s.textAlign=null!==a&&void 0!==a?a:"left",s.textBaseline=null!==t&&void 0!==t?t:"middle",s.fillText(n,r,i),e.fillStrokeShape(o)}),[c,l,d,a,t,r,i,n]);return o.a.createElement(C.e,{name:s,listening:!1,sceneFunc:u})})),A=a(559),R=a(543),W=a(544),L=a(545),G=a(567),N=a(546),V=a(547),H=6e4,B=36e5,K=864e5,_=[{name:"minutes",period:H,scaleMultiplys:[2,5,15,30],range:[H,18e5]},{name:"hours",period:B,scaleMultiplys:[2,4,12],range:[B,432e5]},{name:"days",period:K,scaleMultiplys:[2],range:[K,K]},{name:"weeks",period:6048e5,scaleMultiplys:[2],range:[3*K,11*K]},{name:"months",period:26784e5,scaleMultiplys:[2,3,6],range:[28*K,31*K]},{name:"years",period:31536e6,scaleMultiplys:[],range:[365*K,366*K]}],q=function(e,t){switch(t){case"minutes":return Object(A.a)(e,"HH:mm");case"hours":return Object(A.a)(e,"HH:00");case"days":case"weeks":return Object(A.a)(e,"dd");case"months":return Object(A.a)(e,"MMM");case"years":return Object(A.a)(e,"yyyy");default:return""}},J=function(e,t){switch(t){case"minutes":return Object(R.a)(e);case"hours":return Object(W.a)(e);case"days":return Object(L.a)(e);case"weeks":return Object(G.a)(e);case"months":return Object(N.a)(e);case"years":return Object(V.a)(e);default:return 0}},$=function(e,t,a){return e*a+t},Q=function(e,t,a){return(e-t)/a},ee=function(e,t,a,n,o){return t-e*Math.pow(10,a)*o+n},te=function(e,t,a,n,o){return(t+n-e)/o*Math.pow(10,-a)},ae=function(e,t,a,n,o,r,i){var l=i||10;if(z(e)||z(a)||z(n)||z(o)||z(t)||z(t))return null;var d=M(t)?t.prices.filter((function(e){return null!==e})):E(t)?[t.open,t.high,t.low,t.close]:P(t)?[t.close]:[];if(0===d.length)return null;var c=r[n].yaxis[o];return d.map((function(e){return{pixY:ee(e,a[n].bottom,c.decimals,c.translatedY,c.heightPerPt),y:e.toFixed(F(e))}})).filter((function(t){return t.pixY>=e-l&&t.pixY<=e+l})).sort((function(t,a){return Math.abs(t.pixY-e)<Math.abs(a.pixY-e)?-1:Math.abs(t.pixY-e)>Math.abs(a.pixY-e)?1:0}))},ne=function(e,t){if(!e||!t)return null;var a=t.find((function(t){return e[1]>=t.top&&e[1]<t.bottom}));if(!a)return null;var n=t.indexOf(a);return-1===n?null:n},oe=o.a.memo((function(e){var t,a,n,r,i,l,d,c,s,u,p,h=e.disableSnapX,v=e.disableSnapGraphs,m=e.containerSize,f=e.style,g=e.subcharts,y=e.data,x=e.calcSubcharts,b=e.calcPointer,k=e.calcXaxis,w=e.pixToY,T=e.rtTicks,I=m.width-1,S=m.height-1,E=f.yaxis.widthYAxis,P=f.xaxis,O=P.heightXAxis,M=P.heightTickMarkLines,j=b.move,D=j.pixXSnap,F=j.xUnlimited,X=j.pixXUnlimSnap,Y=k.xEnd,A=k.xLast,R=b.move.subchartIdx,W=null===(t=b.move.snapDatasets)||void 0===t?void 0:t[0],L=W?W.yaxisIdx:null,G=W?W.graphIdx:null,N=z(L)||z(G)||z(R)?null:null===(r=null===(n=null===(a=g[R].yaxis)||void 0===a?void 0:a[L])||void 0===n?void 0:n.graphs)||void 0===r?void 0:r[G],V=y.find((function(e){return e.id===(null===N||void 0===N?void 0:N.dataId)})),H=(!h||(null===W||void 0===W?void 0:W.ySnap)&&!v)&&D?D:null!==X&&void 0!==X?X:0,B="chart"===(null===y||void 0===y?void 0:y[0].type)?y[0]:null,K=W?W.dateString:F>A&&F<=A+(null!==(l=null===(i=null===T||void 0===T?void 0:T[0])||void 0===i?void 0:i.data.length)&&void 0!==l?l:1)-1&&(null===(d=null===B||void 0===B?void 0:B.meta)||void 0===d?void 0:d.chartPeriod)?function(){var e,t,a,n=null===(a=null===(t=null===(e=null===T||void 0===T?void 0:T[0])||void 0===e?void 0:e.data)||void 0===t?void 0:t[F-Y])||void 0===a?void 0:a.date,o=B.meta.chartPeriod;return n&&o?q(n,o.name):""}():"",_=F>A&&F<=A+(null!==(s=null===(c=null===T||void 0===T?void 0:T[0])||void 0===c?void 0:c.data.length)&&void 0!==s?s:1)-1&&!z(R)&&!z(b.move.pixY)&&T?T.map((function(e){var t,a,n;return null!==(n=null===(a=ae(b.move.pixY,null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t[F-Y],g,R,0,x))||void 0===a?void 0:a.filter((function(e){return null!==e})))&&void 0!==n?n:[]})).flat():null,J=z(null===W||void 0===W?void 0:W.pixYSnap)?!z(_)&&_.length>0?_[0].pixY:z(b.move.pixY)?null:b.move.pixY:W.pixYSnap,$=z(null===W||void 0===W?void 0:W.ySnap)||v?!z(_)&&_.length>0?_[0].y:(null===W||void 0===W?void 0:W.y)?W.y.toString():w&&!z(R)?w(b.move.pixY,R,0).toString():null:W.ySnap,Q=N&&!z($)&&Z(N)&&"indicator"===(null===V||void 0===V?void 0:V.type)&&V.indicator.default.decimals?parseFloat($).toFixed(V.indicator.default.decimals).toString():$;return J&&g.length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement(C.c,{name:"crosshair-x",listening:!1,x:0,y:0,points:[H+.5,.5,H+.5,S-O+M+.5],stroke:f.crosshair.strokeColor,strokeWidth:1}),b.move.pixY<=g[g.length-1].bottom?o.a.createElement(o.a.Fragment,null,o.a.createElement(C.c,{name:"crosshair-y",listening:!1,x:0,y:0,points:[.5,J+.5,I-E+.5,J+.5],stroke:f.crosshair.strokeColor,strokeWidth:1}),o.a.createElement(C.c,{name:"y-marker-polygon",listening:!1,draggable:!1,x:0,y:0,points:[I-E,J,I-E+10,J+10,I,J+10,I,J-10,I-E+10,J-10],stroke:f.crosshair.yMarkerStrokeColor,fill:f.crosshair.yMarkerBackgroundColor,strokeWidth:1,closed:!0}),o.a.createElement(U,{name:"y-marker text",listening:!1,text:null!==Q&&void 0!==Q?Q:"",halign:"left",valign:"middle",fontColor:f.crosshair.yMarkerTextColor,fontSize:f.crosshair.yMarkerFontSize,fontName:f.crosshair.yMarkerFontName,x:I-E+f.yaxis.widthTickmarkLines+5,y:J})):null,F>=0&&F<=Y+(null!==(p=null===(u=null===T||void 0===T?void 0:T[0])||void 0===u?void 0:u.data.length)&&void 0!==p?p:1)-1?o.a.createElement(o.a.Fragment,null,o.a.createElement(C.d,{name:"x-marker rect",listening:!1,x:H-25,y:S-O+M+.5,width:50,height:25,fill:f.crosshair.xMarkerBackgroundColor,stroke:f.crosshair.xMarkerStrokeColor,strokeWidth:1}),o.a.createElement(U,{name:"x-marker text",listening:!1,fontSize:f.crosshair.xMarkerFontSize,fontName:f.crosshair.xMarkerFontName,fontColor:f.crosshair.xMarkerTextColor,halign:"center",valign:"top",text:K,x:H,y:S-O+M+5+.5})):null):null})),re=o.a.memo((function(e){var t,a,n,r,i,l,d,c,s,u,p,h,v,m,f,g=e.rtTicks,y=e.containerSize,x=e.style,b=e.indSeriesIdx,k=e.xaxis,w=null===(a=null===(t=null===g||void 0===g?void 0:g[0])||void 0===t?void 0:t.ticks)||void 0===a?void 0:a[(null===(r=null===(n=null===g||void 0===g?void 0:g[0])||void 0===n?void 0:n.ticks)||void 0===r?void 0:r.length)-1],T=null===(l=null===(i=null===g||void 0===g?void 0:g[0])||void 0===i?void 0:i.data)||void 0===l?void 0:l[(null===(c=null===(d=null===g||void 0===g?void 0:g[0])||void 0===d?void 0:d.data)||void 0===c?void 0:c.length)-1];if(!g||!w||!T)return null;var E=y.width,O=x.yaxis.widthYAxis,Z=null===w||void 0===w?void 0:w.pixY,j=w.pixX,D=Z&&I(w)?null===(s=null===w||void 0===w?void 0:w.pixY)||void 0===s?void 0:s.pixClose:S(w)?null===(p=null===(u=null===w||void 0===w?void 0:w.pixY)||void 0===u?void 0:u.pixPrices)||void 0===p?void 0:p[null!==b&&void 0!==b?b:0]:null,F=P(T)?null===(h=T)||void 0===h?void 0:h.close:M(T)?null===(m=null===(v=T)||void 0===v?void 0:v.prices)||void 0===m?void 0:m[null!==b&&void 0!==b?b:0]:null;return z(D)||z(F)?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(C.c,{name:"graphmarkerLineY",listening:!1,x:k.pixXStart,y:0,points:[Math.round(j)+.5,Math.round(D)+.5,E-O+.5,Math.round(D)+.5],stroke:"rgba(102,102,102,0.5)",strokeWidth:1}),o.a.createElement(C.c,{name:"graphMarkerPolygonY",listening:!1,draggable:!1,x:0,y:0,points:[Math.round(E-O)+.5,Math.round(D)+.5,Math.round(E-O+10)+.5,Math.round(D+10)+.5,Math.round(E)+.5,Math.round(D+10)+.5,Math.round(E)+.5,Math.round(D-10)+.5,Math.round(E-O+10)+.5,Math.round(D-10)+.5],stroke:x.crosshair.yMarkerStrokeColor,fill:x.crosshair.yMarkerBackgroundColor,strokeWidth:1,closed:!0}),o.a.createElement(U,{name:"graphMarkerPolygonYText",listening:!1,text:null!==(f=F.toString())&&void 0!==f?f:"",halign:"left",valign:"middle",fontColor:x.crosshair.yMarkerTextColor,fontSize:x.crosshair.yMarkerFontSize,fontName:x.crosshair.yMarkerFontName,x:Math.round(E-O+x.yaxis.widthTickmarkLines+5)+.5,y:Math.round(D)+.5}))})),ie=o.a.memo((function(e){var t=e.calcXaxis,a=e.style,n=e.containerSize,r=a.xaxis,i=r.heightXAxis,l=r.heightTickMarkLines;return o.a.createElement(o.a.Fragment,null,t.curTicks.map((function(e,t){return o.a.createElement(o.a.Fragment,{key:"xaxis-ticks-"+t},o.a.createElement(C.c,{name:"x-tickmark-"+t,listening:!1,x:e.x,y:n.height-1-i+.5,points:[0,0,0,l],stroke:a.xaxis.strokeColor,strokeWidth:1}),a.grid.useGridX?o.a.createElement(C.c,{name:"x-gridline-"+t,listening:!1,x:e.x,y:.5,points:[0,0,0,n.height-1-i+.5],stroke:a.grid.strokeColor,strokeWidth:1}):null,o.a.createElement(U,{text:e.dateString,halign:"center",valign:"top",fontColor:a.xaxis.fontColor,fontName:a.xaxis.fontName,fontSize:a.xaxis.fontSize,x:e.x+.5,y:n.height-1-i+l+.5+8}))})))})),le=o.a.memo((function(e){var t=e.subcharts,a=e.calcSubcharts,n=e.style,r=e.containerSize,i=n.yaxis.widthTickmarkLines;return o.a.createElement(o.a.Fragment,null,t.map((function(e,t){return e.yaxis.map((function(e,l){var d,c,s,u=null===(c=null===(d=null===a||void 0===a?void 0:a[t])||void 0===d?void 0:d.yaxis)||void 0===c?void 0:c[l];return(null!==(s=null===u||void 0===u?void 0:u.drawTicks)&&void 0!==s?s:[]).map((function(e,t){return o.a.createElement(o.a.Fragment,{key:"yaxis-ticks-"+t},o.a.createElement(C.c,{name:"y-tickmark-"+t,listening:!1,x:r.width-1+.5-n.yaxis.widthTickmarkLines,y:e.pixY+.5,points:[0,0,i,0],stroke:n.yaxis.strokeColor,strokeWidth:1}),n.grid.useGridY?o.a.createElement(C.c,{name:"y-gridline-"+t,listening:!1,x:.5,y:e.pixY+.5,points:[0,0,r.width-1+.5,0],stroke:n.grid.strokeColor,strokeWidth:1}):null,o.a.createElement(U,{text:e.label,halign:"right",valign:"middle",fontColor:n.yaxis.fontColor,fontName:n.yaxis.fontName,fontSize:n.yaxis.fontSize,x:r.width-1-n.yaxis.widthTickmarkLines+.5,y:e.pixY}))}))}))})))})),de=a(557),ce=a(41),se=a(591),ue=a(8),pe=a(5),he=a(549),ve=a(568),me=a(21),fe=a.n(me),ge=Object(pe.a)(he.a)((function(e){return{border:"1px solid #666",borderRadius:5,marginRight:10,background:e.theme.palette.secondary.main,minWidth:32,height:32,position:"relative",top:0}})),ye=o.a.memo((function(e){var t=e.text,a=e.id,n=e.iconPath,r=e.onClick,i=e.iconColor,l=e.textColor,d=e.addIcons,c=e.iconBgColor,s=null!==d&&void 0!==d?d:[];return o.a.createElement(ve.a,{button:!0,onClick:r,key:a+"_listitem"},o.a.createElement(ge,{sx:{background:null!==c&&void 0!==c?c:"secondary.main"}},o.a.createElement(fe.a,{path:n,size:"32px",color:null!==i&&void 0!==i?i:"#fff"}),s),o.a.createElement(w.a,{variant:"h6",component:"div",color:null!==l&&void 0!==l?l:"text.primary"},t))})),xe=function(e){var t=e.onNavigate,a=Object(ce.a)(),n=o.a.useCallback((function(){null===t||void 0===t||t("chart")}),[t]),r=o.a.useCallback((function(){null===t||void 0===t||t("indicators")}),[t]),i=o.a.useCallback((function(){null===t||void 0===t||t("tools")}),[t]),l=o.a.useCallback((function(){null===t||void 0===t||t("settings")}),[t]);return o.a.createElement(se.a,{sx:{pt:4}},o.a.createElement(ye,{id:"0",text:"Chart",iconPath:ue.l,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:n}),o.a.createElement(ye,{text:"Indicators",id:"1",iconPath:ue.k,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:r}),o.a.createElement(ye,{id:"2",text:"Tools",iconPath:ue.F,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:i}),o.a.createElement(ye,{id:"3",text:"Settings",iconPath:ue.M,textColor:"text.primary",iconColor:a.palette.secondary.contrastText,onClick:l}))},be=a(564),ke=a(552),we=a(579),Te=a(261),Ce=a(580),Ie=a(592),Se=a(593),Ee=a(571),Pe=a(69),Oe=function(){return(Oe=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Me=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Ze=Object(pe.a)(Ee.a)((function(e){var t,a,n,o=e.theme;return(t={})["& ."+Pe.a.content]=((a={boxSizing:"border-box",borderTopRightRadius:o.spacing(2),borderBottomRightRadius:o.spacing(2),paddingTop:o.spacing(1),paddingBottom:o.spacing(1),paddingRight:o.spacing(2),"&:hover":{backgroundColor:o.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"var(--tree-view-bg-color, "+o.palette.action.selected+")",color:"var(--tree-view-color)"}})["& ."+Pe.a.label]={color:"inherit"},a),t["& ."+Pe.a.group]=((n={marginLeft:o.spacing(1)})["& ."+Pe.a.content]={paddingLeft:o.spacing(1)},n),t})),je=o.a.forwardRef((function(e,t){var a=e.bgColorSelected,n=e.colorSelected,r=e.labelIcon,i=e.labelInfo,l=e.labelText,d=e.typographyVariant,c=Me(e,["bgColorSelected","colorSelected","labelIcon","labelInfo","labelText","typographyVariant"]);return o.a.createElement(Ze,Oe({ref:t,label:o.a.createElement(ke.a,{direction:"row",sx:{alignItems:"center",alignContent:"center"}},o.a.createElement(Ie.a,{component:"span",sx:{mr:1,lineHeight:0}},r),o.a.createElement(w.a,{variant:null!==d&&void 0!==d?d:"h6",component:"div",sx:{flexGrow:1}},l),o.a.createElement(w.a,{variant:"caption",component:"div"},i)),sx:{color:"text.primary"},style:{"--tree-view-color":n,"--tree-view-bg-color":a}},c))}));je.displayName="CTreeItem";var De=a(594),ze=a(577),Fe=a(569),Xe=a(561),Ye={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Ue=function(e){if(!e)return null;e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,a,n){return t+t+a+a+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},Ae=function(){return(Ae=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Re=["0, 0, 0","102, 102, 102","187, 187, 187","255, 255, 255","144, 19, 254","189, 16, 224","63, 81, 181","6, 147, 227","142, 209, 252","0, 128, 128","0, 208, 132","123, 220, 181","184, 0, 0","245, 0, 87","247, 141, 167","121, 85, 72","255, 105, 0","252, 185, 0"],We=function(e){var t=e.color,a=e.width,n=void 0===a?24:a,r=e.height,i=void 0===r?24:r,l=e.BoxProps,d=void 0===l?{}:l;return o.a.createElement(Ie.a,Ae({},d,{sx:Ae({minWidth:n,minHeight:i,boxSizing:"border-box",background:t,borderRadius:1,border:"2px solid #000"},null===d||void 0===d?void 0:d.sx)}))},Le=function(e){var t=e.color,a=e.onColorSelected,n=o.a.useState(!1),r=n[0],i=n[1],l=o.a.useState(null),d=l[0],c=l[1],s=o.a.useRef(null),u=/((^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$))/i.test(t),p=u&&"string"===typeof t?Ue(t):null,h="string"===typeof t?t.match(/^(rgb)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/):null,v=!!h&&2 in h&&"a"===h[2],m=h&&3 in h&&4 in h&&5 in h?[parseFloat(h[3]),parseFloat(h[4]),parseFloat(h[5])]:u&&p?[p.r,p.g,p.b]:[];if(0===m.length){var f=t in Ye?Ue(Ye.name):null;f&&m.push(f.r,f.g,f.b)}var g=v&&h&&6 in h?100*parseFloat(h[6]):100,y=o.a.useState(g),x=y[0],b=y[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(Se.a,{color:"primary",style:{padding:0},onClick:function(){i(!0)},ref:s},o.a.createElement(We,{color:t})),o.a.createElement(De.a,{id:"colorpicker-popover",open:r,anchorEl:s.current,onClose:function(){i(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{sx:{width:300,p:1}}},o.a.createElement(ze.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},Re.map((function(e,t){return o.a.createElement(ze.a,{item:!0,xs:2,key:t},o.a.createElement(Se.a,{color:"default",style:{padding:0},onMouseOver:function(e){c("rgba("+Re[t]+","+x+")")},onMouseLeave:function(){c(null)},onClick:function(){a("rgba("+Re[t]+","+x/100+")")}},o.a.createElement(We,{color:"rgba("+e+",1)",width:24,height:24})))})),o.a.createElement(ze.a,{item:!0,xs:3},o.a.createElement(w.a,null,"Alpha")),o.a.createElement(ze.a,{item:!0,xs:6,style:{padding:"0px 10px"}},o.a.createElement(Fe.a,{value:x,onChange:function(e,t){b(Array.isArray(t)?t[0]:t),a("rgba("+m[0]+","+m[1]+","+m[2]+","+(Array.isArray(t)?t[0]:t)/100+")")}})),o.a.createElement(ze.a,{item:!0,xs:3},o.a.createElement(Xe.a,{margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:"5px 5px 5px 10px"}},value:x,onChange:function(e){var t=parseInt(e.target.value,10);isNaN(t)&&(t=0),t<0||t>100||(b(t),a("rgba("+m[0]+","+m[1]+","+m[2]+","+t/100+")"))}}))),o.a.createElement(ze.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(w.a,{component:"div",align:"center"},"R")),o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(w.a,{component:"div",align:"center"},"G")),o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(w.a,{component:"div",align:"center"},"B")),o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(w.a,{component:"div",align:"center"},"A")),o.a.createElement(ze.a,{item:!0,xs:2}),o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(We,{color:d||t,width:24,height:24,BoxProps:{maxWidth:24,maxHeight:24}}))),o.a.createElement(ze.a,{container:!0,spacing:1,sx:{alignItems:"center",justifyItems:"center",alignContent:"center",p:1}},o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(Xe.a,{disabled:!0,value:m?m[0]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(184, 0, 0, "+(m?m[0]/255:1)+")"}}})),o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(Xe.a,{disabled:!0,value:m?m[1]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(0, 208, 132, "+(m?m[1]/255:1)+")"}},fullWidth:!0})),o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(Xe.a,{disabled:!0,value:m?m[2]:t,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(6, 147, 227, "+(m?m[2]/255:1)+")"}}})),o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(Xe.a,{disabled:!0,value:x,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"#bbb"}}})),o.a.createElement(ze.a,{item:!0,xs:2}),o.a.createElement(ze.a,{item:!0,xs:2},o.a.createElement(we.a,{color:"secondary",variant:"contained",size:"small",style:{minWidth:0},onClick:function(){return i(!1)}},"OK")))))},Ge=a(574),Ne=function(){return(Ne=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ve=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},He=function(e){var t=Ve(e,[]),a=Object(ce.a)();return n.createElement(Ge.a,Ne({"aria-label":"treeview",defaultCollapseIcon:n.createElement(fe.a,{path:ue.C,size:1,color:"light"===a.palette.mode?"#333":"#fff"}),defaultExpandIcon:n.createElement(fe.a,{path:ue.D,size:1,color:"light"===a.palette.mode?"#333":"#fff"}),defaultEndIcon:n.createElement("div",{style:{width:24}}),sx:{overflowY:"auto",pt:1,pb:1}},t),e.children)},Be=function(){return(Be=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ke=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},_e=function(e){var t=e.path,a=e.size,n=e.style,r=e.background,i=e.border,l=Ke(e,["path","size","style","background","border"]);return o.a.createElement(fe.a,Be({path:t,size:a},l,{style:Be({background:r,border:null!==i&&void 0!==i?i:"1px solid #666",borderRadius:5,marginRight:10,boxSizing:"border-box"},n)}))},qe=a(139),Je=a(566),$e=function(e){var t=e.nodeId,a=e.onColorSelected,n=e.color,r=e.iconPath,i=e.text,l=Object(ce.a)();return o.a.createElement(je,{key:t,nodeId:t,labelText:i,typographyVariant:"body1",labelIcon:o.a.createElement(_e,{path:r,size:"24px",color:l.palette.text.primary,border:"dark"===l.palette.mode?void 0:"1px solid #bbb"}),labelInfo:o.a.createElement(Le,{color:"string"===typeof n?n:n[0],onColorSelected:a})})},Qe=function(e){var t,a,n,r,i,l=e.subchartIdx,d=e.yaxisIdx,c=e.graphIdx,s=e.subCharts,u=e.Dispatch,p=e.onSettingsExpand,h=e.data,v=null===(r=null===(n=null===(a=null===(t=null===s||void 0===s?void 0:s[l])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[d])||void 0===n?void 0:n.graphs)||void 0===r?void 0:r[c],m=Object(ce.a)(),f=h.find((function(e){return e.id===(null===v||void 0===v?void 0:v.dataId)}));return j(v)?o.a.createElement(je,{onClick:function(){null===p||void 0===p||p("graph-sub-"+l+"-y-"+d+"-graph-"+c)},key:"graph-sub-"+l+"-y-"+d+"-graph-"+c,nodeId:"graph-sub-"+l+"-y-"+d+"-graph-"+c,labelText:null!==(i=null===f||void 0===f?void 0:f.name)&&void 0!==i?i:"Graph No."+c,bgColorSelected:m.palette.primary.light,labelIcon:o.a.createElement(_e,{path:ue.l,size:"32px",color:m.palette.secondary.contrastText,background:m.palette.primary.main}),labelInfo:0!==l||0!==c?o.a.createElement(Se.a,{size:"small",onClick:function(e){e.preventDefault(),u({task:"removeGraph",params:{subchartIdx:l,yaxisIdx:d,graphIdx:c}})}},o.a.createElement(fe.a,{path:ue.m,size:1,color:"light"===m.palette.mode?"#333":"#fff"})):void 0},"chart"===v.type&&"candlechart"===(null===f||void 0===f?void 0:f.meta.type)?o.a.createElement(je,{key:"chart-s"+l+"-y"+d+"-g"+c+"-chartType",nodeId:"chart-s"+l+"-y"+d+"-g"+c+"-chartType",labelText:"chart type",typographyVariant:"body1",labelIcon:o.a.createElement(_e,{path:ue.J,size:"24px",color:"light"===m.palette.mode?"#333":"#fff"}),labelInfo:o.a.createElement(Je.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:v.chartType,onChange:function(e){var t=e.target.value;u({task:"setGraphProp",params:{prop:"chartType",subchartIdx:l,yaxisIdx:d,graphIdx:c,newValue:t}})}},["line","candles"].map((function(e,t){return o.a.createElement(Ce.a,{key:"chart-s"+l+"-y"+d+"-g"+c+"-chartType-o-"+t,value:e},e)})))}):null,function(e){return j(e)&&"chart"===(null===f||void 0===f?void 0:f.type)?"candles"===e.chartType?[{text:"candle up color",icon:ue.g,color:e.style.candleUpColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleUpColor",subchartIdx:l,yaxisIdx:d,graphIdx:c,newValue:e}})}},{text:"candle down color",icon:ue.g,color:e.style.candleDownColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleDownColor",subchartIdx:l,yaxisIdx:d,graphIdx:c,newValue:e}})}},{text:"candle stroke color",icon:ue.g,color:e.style.candleStrokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleStrokeColor",subchartIdx:l,yaxisIdx:d,graphIdx:c,newValue:e}})}},{text:"candle wick color",icon:ue.g,color:e.style.candleWickStrokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"candleWickStrokeColor",subchartIdx:l,yaxisIdx:d,graphIdx:c,newValue:e}})}}]:[{text:"line stroke color",icon:ue.g,color:e.style.strokeColor,onColorSelected:function(e){u({task:"setGraphProp",params:{prop:"strokeColor",subchartIdx:l,yaxisIdx:d,graphIdx:c,newValue:e}})}}]:[]}(v).map((function(e,t){return o.a.createElement($e,{key:"settings-treeitem-chartGraph-s"+l+"-y"+d+"-g"+c+"-p"+t,nodeId:"settings-treeitem-chartGraph-s"+l+"-y"+d+"-g"+c+"-p"+t,text:e.text,color:e.color,iconPath:e.icon,onColorSelected:e.onColorSelected})}))):null},et=a(250),tt=a.n(et),at=a(84),nt=a.n(at),ot=a(91),rt=a.n(ot),it=a(251),lt=a.n(it),dt=a(67),ct=a.n(dt),st=a(68),ut=a.n(st),pt=function(){return(pt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ht=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},vt=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},mt=function(e,t,a,n){if("object"!==typeof e)return null;var o=Array.isArray(e)?vt([],e):pt({},e),r=e,i=o;try{t.forEach((function(e,l){if(!(e in r)||"number"!==typeof e&&"string"!==typeof e)throw o=null,new Error("path at position "+l+" '"+e+"' not found in src object/array -1");if(l<t.length-1){if("number"===typeof e&&!Array.isArray(r)||"string"===typeof e&&"object"!==typeof r)throw o=null,new Error("path at position "+l+" '"+e+"' not found in src object/array -2");if(Array.isArray(r),i[e]=Array.isArray(r[e])?vt([],r[e]):pt({},r[e]),"remove"===n&&l===t.length-2){var d=t[t.length-1];if("number"===typeof d&&Array.isArray(r[e]))i[e]=vt(vt([],r[e].slice(0,t[t.length-1])),r[e].slice(d+1));else if("string"===typeof d&&(r[e],1)){var c=r[e],s=d,u=(c[s],ht(c,["symbol"===typeof s?s:s+""]));i[e]=pt({},u)}}else i=i[e];r=r[e]}else if("remove"!==n){if(!(e in r)&&"add"!==n)throw o=null,new Error("path at position "+l+" '"+e+"' not found in src object/array -3");"add"===n&&Array.isArray(r[e])?i[e]=vt(vt([],r[e]),[a]):i[e]=a}}))}catch(l){return console.error("Error at setStateProp(): ",l),null}return o},ft=function(e,t,a){return mt(e,t,a,"edit")},gt=function(e,t){return mt(e,t,null,"remove")};var yt=function(){return(yt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},bt=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},kt=function(e,t,a,n,o,r){return n&&o?wt(e,o,n,r,a,t):function(e){if(!e)return!1;var t=e[e.length-1];return!!t.close&&!!t.date}(e)?Tt(e,t,a):null},wt=function(e,t,a,n,o,r){var i,l=lt()(a),d=l.params.findIndex((function(e){return"dataSeriesKey"===e.name}));-1===d||z(n)||(l.params[d].val=n);var c=null===(i=a.indicatorFn)||void 0===i?void 0:i(yt({chartData:e,prevData:[]},l.params.reduce((function(e,t){var a;return yt(yt({},e),((a={})[t.name]=t.val,a))}),{}))),s=l.default.decimals?l.default.decimals:2,u=o||ct()(),p=null!==r&&void 0!==r?r:l.name;return{data:c,name:p,fullName:p+"("+l.params.map((function(e){return"dataSeriesKey"!==e.name?e.val:null})).filter((function(e){return null!==e})).join(",")+")",type:"indicator",decimals:s,indicator:l,indSrcId:t,id:u}},Tt=function(e,t,a){var n=St(e),o=n.decimals,r=n.isDescending,i=xt(n,["decimals","isDescending"]);r&&e.reverse();var l=z(null===i||void 0===i?void 0:i.chartPeriod)?null:Et(e,null===i||void 0===i?void 0:i.chartPeriod);return z(l)?null:{id:a,data:e,meta:i,dateStat:l,type:"chart",name:t,decimals:o}},Ct=function(e,t,a){var n=e.data,o=n.findIndex((function(e){return e.id===t})),r=null===n||void 0===n?void 0:n[o];if("chart"!==(null===r||void 0===r?void 0:r.type)||!a||0===a.length)return e;var i=function(e,t){var a=e.meta.chartPeriod;return a?yt(yt({},e),{data:bt(bt([],e.data),t),dateStat:Et(t,a,e.dateStat)}):e}(r,a),l=Mt(n,t),d=bt([],ft(e.data,[o],i));return l.forEach((function(e,t){var a=d.findIndex((function(t){return t.id===e})),n=null===d||void 0===d?void 0:d[a];if("indicator"===(null===n||void 0===n?void 0:n.type)){var o=Pt(d,e,void 0,n.data);o&&(d[a]=o)}})),yt(yt({},e),{data:d})},It=function(e){var t=e.slice(1).map((function(t,a){return n=e[a+1],o=e[a],(null===n||void 0===n?void 0:n.date)&&(null===o||void 0===o?void 0:o.date)?n.date.valueOf()-o.date.valueOf():0;var n,o})),a=tt()(t),n=Object.entries(a).map((function(e){var t=e[0],a=e[1];return{dT:parseInt(t,10),amt:a}})),o=n.map((function(e){return e.amt})),r=o.indexOf(Math.max.apply(Math,o)),i=Math.abs(n[r].dT);return{dataPeriod:i,dataPeriodConfidence:n[r].amt/e.length,chartPeriod:function(e){var t=_.find((function(t){return e===t.period||e>=t.range[0]&&e<=t.range[1]}));if(!t)return null;t.scaleMultiplys,t.range;var a=xt(t,["scaleMultiplys","range"]),n=Math.round(e/t.period);return yt(yt({},a),{multiply:n})}(i),isDescending:n[r].dT<0}},St=function(e){var t=It(e),a=t.dataPeriod,n=t.dataPeriodConfidence,o=t.chartPeriod,r=t.isDescending;return{dataPeriod:a,chartPeriod:o,dataPeriodConfidence:n,type:"candlechart",decimals:function(e){var t=e.map((function(e){return E(e)?Math.max.apply(Math,[F(e.close),F(e.open),F(e.high),F(e.low)]):P(e)?F(e.close):M(e)?F(Math.max.apply(Math,e.prices.map((function(e){return z(e)?0:F(e)})))):0}));return Math.max.apply(Math,t)}(e),isDescending:r}},Et=function(e,t,a){var n,o=_.map((function(e){return e.name})),r=o.slice(o.findIndex((function(e){return e===t.name}))),i=r.map((function(e){return e.slice(0,e.length-1)})),l=e.map((function(e){var t={};return i.forEach((function(a,n){t[a]=J(e.date,r[n])})),t})),d=l.reduce((function(e,t){return{years:e.lastData?e.lastData.year!==t.year?e.years+1:e.years:1,months:e.lastData?e.lastData.month!==t.month?e.months+1:e.months:"month"in t?1:0,weeks:e.lastData?e.lastData.week!==t.week?e.weeks+1:e.weeks:"week"in t?1:0,days:e.lastData?e.lastData.day!==t.day?e.days+1:e.days:"day"in t?1:0,hours:e.lastData?e.lastData.hour!==t.hour?e.hours+1:e.hours:"hour"in t?1:0,minutes:e.lastData?e.lastData.minute!==t.minute?e.minutes+1:e.minutes:"minute"in t?1:0,lastData:t}}),a?a.accAmt:{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,lastData:null}),c=xt(d,[]),s=null===(n=function e(t,a){var n=function(e,t){return z(e)||"years"===t?l:l.filter((function(a){return a.year===(null===e||void 0===e?void 0:e.year)&&(a.month===(null===e||void 0===e?void 0:e.month)||["months"].includes(t))&&(a.week===(null===e||void 0===e?void 0:e.week)||["months","weeks"].includes(t))&&(a.day===(null===e||void 0===e?void 0:e.day)||["months","weeks","days"].includes(t))&&(a.hour===(null===e||void 0===e?void 0:e.hour)||"minutes"!==t)}))}(a||null,t);return"minutes"===t?{minutes:nt()(n,(function(e){return""+e.minute})).map((function(e){return{minute:e.minute}}))}:"hours"===t?{hours:nt()(n,(function(e){return""+e.hour})).map((function(t){return{hour:t.hour,minutes:"minute"in t?e("minutes",t).minutes:[]}}))}:"days"===t?{days:nt()(n,(function(e){return""+(e.year,e.month,e.week,e.day)})).map((function(t){return{day:t.day,hours:"hour"in t?e("hours",t).hours:[]}}))}:"weeks"===t?{weeks:nt()(n,(function(e){return""+(e.year,e.month,e.week)})).map((function(t){return{week:t.week,days:"day"in t?e("days",t).days:[]}}))}:"months"===t?{months:nt()(n,(function(e){return""+(e.year,e.month)})).map((function(t){return{month:t.month,weeks:"week"in t?e("weeks",t).weeks:[]}}))}:"years"===t?{years:nt()(l,"year").map((function(t){return{year:t.year,months:"month"in t?e("months",t).months:[]}}))}:null}("years"))||void 0===n?void 0:n.years;return{years:a?function e(t,a){var n,o,r=null!==(n=null===t||void 0===t?void 0:t[t.length-1])&&void 0!==n?n:null,i=null!==(o=null===a||void 0===a?void 0:a[0])&&void 0!==o?o:null;if(!r||!i)return bt(bt([],t),a);var l="year"in r?"year":"month"in r?"month":"week"in r?"week":"day"in r?"day":"hour"in r?"hour":"minute"in r?"minute":null,d="year"in r&&"months"in r&&"months"in i?{year:r.year,months:e(r.months,i.months)}:"month"in r&&"weeks"in r&&"weeks"in i?{month:r.month,weeks:e(r.weeks,i.weeks)}:"week"in r&&"days"in r&&"days"in i?{week:r.week,days:e(r.days,i.days)}:"day"in r&&"hours"in r&&"hours"in i?{day:r.day,hours:e(r.hours,i.hours)}:"hour"in r&&"minutes"in r&&"minutes"in i?{hour:r.hour,minutes:e(r.minutes,i.minutes)}:null,c=l&&l in r?r[l]:null,s=l&&l in i?i[l]:null;return c===s&&!z(c)&&!z(s)&&l&&d?bt(bt(bt([],t.slice(0,t.length-1)),[d]),a.slice(1)):bt(bt([],t),a)}(a.years,s):s,accAmt:c}},Pt=function(e,t,a,n){var o,r,i=null!==a&&void 0!==a?a:{},l=i.newIndSrcId,d=i.newParams,c=e.find((function(e){return e.id===t&&"indicator"===e.type}));if("indicator"!==(null===c||void 0===c?void 0:c.type))return null;var s=null===(o=c.indicator)||void 0===o?void 0:o.indicatorFn,u=l||c.indSrcId,p=null===(r=e.find((function(e){return e.id===u})))||void 0===r?void 0:r.data;if(!s||!p)return null;var h=d||c.indicator.params;return yt(yt({},c),{data:s(yt({chartData:p,prevData:null!==n&&void 0!==n?n:[]},h.reduce((function(e,t){var a;return yt(yt({},e),((a={})[t.name]=t.val,a))}),{}))),fullName:d?c.name+"("+d.map((function(e){return e.val})).join(",")+")":c.fullName,indSrcId:u,indicator:yt(yt({},c.indicator),{params:h})})},Ot=function e(t,a,n){var o=null!==n&&void 0!==n?n:[];if(o.includes(a))return[];var r=t.find((function(e){return(null===e||void 0===e?void 0:e.id)===a&&"indicator"===(null===e||void 0===e?void 0:e.type)}));if("indicator"!==(null===r||void 0===r?void 0:r.type))return[];var i=t.find((function(e){return e.id===r.indSrcId}));return"chart"===(null===i||void 0===i?void 0:i.type)?[r.id]:"indicator"===(null===i||void 0===i?void 0:i.type)?bt(bt([],e(t,i.id,bt(bt([],o),[r.id]))),[r.id]):[]},Mt=function e(t,a){return t.filter((function(e){return"indicator"===e.type&&e.indSrcId===a})).map((function(a){return bt([a.id],e(t,a.id))})).flat()},Zt=function(e,t,a){return Ot(e,a).includes(t)},jt=function(e,t,a,n){var o=e.data,r=null!==a&&void 0!==a?a:{},i=r.newIndSrcId,l=r.newParams;if(i&&Zt(o,t,i))return o;var d=rt()(bt([t],Mt(o,t))),c=bt([],o);return d.forEach((function(e,a){var o=c.findIndex((function(t){return t.id===e})),r=Pt(c,e,e===t?{newIndSrcId:i,newParams:l}:void 0,null!==n&&void 0!==n?n:[]);r&&(c[o]=r)})),c},Dt=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},zt=function(e){var t=e.subchartIdx,a=e.yaxisIdx,n=e.graphIdx,r=e.subCharts,i=e.Dispatch,l=e.handleToggleExpanded,d=e.data,c=r[t].yaxis[a].graphs[n],s=Z(c)?c:null,u=Object(ce.a)(),p=d.find((function(e){return e.id===(null===s||void 0===s?void 0:s.dataId)}));return s&&"indicator"===(null===p||void 0===p?void 0:p.type)?o.a.createElement(je,{key:"settings-treeitem-indiGraph-s"+t+"-y"+a+"-g"+n,nodeId:"settings-treeitem-indiGraph-s"+t+"-y"+a+"-g"+n,bgColorSelected:u.palette.primary.light,onClick:function(){null===l||void 0===l||l("settings-treeitem-indiGraph-s"+t+"-y"+a+"-g"+n)},labelIcon:o.a.createElement(_e,{path:ue.k,size:"32px",color:u.palette.secondary.contrastText,background:u.palette.primary.main}),labelText:p.fullName,labelInfo:0!==t||0!==n?o.a.createElement(Se.a,{size:"small",onClick:function(e){e.preventDefault(),i({task:"removeGraph",params:{subchartIdx:t,yaxisIdx:0,graphIdx:n}})}},o.a.createElement(fe.a,{path:ue.m,size:1,color:"light"===u.palette.mode?"#333":"#fff"})):void 0},o.a.createElement(je,{key:"settings-treeitem-indiGraph-src-s"+t+"-y"+a+"-g"+n,nodeId:"settings-treeitem-indiGraph-src-s"+t+"-y"+a+"-g"+n,labelIcon:o.a.createElement(_e,{path:ue.p,size:"24px",color:u.palette.text.primary}),labelText:"Source",typographyVariant:"body1",labelInfo:o.a.createElement(Je.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:p.indSrcId,onChange:function(e){var t=e.target.value;i({task:"modifyIndicatorData",params:{dataId:p.id,newIndSrcId:t}})}},["dataSeries","chartSeries"].includes(p.indicator.indicatorFnType)?function(){var e=r[t].yaxis[a].graphs.map((function(e){return e.dataId}));return(p.indicator.default.newSubchart?"dataSeries"===p.indicator.indicatorFnType?d:"chartSeries"===p.indicator.indicatorFnType?d.filter((function(e){return"chart"===e.type})):[]:d.filter((function(t){return e.includes(t.id)}))).map((function(e){return e.id===p.id||Zt(d,p.id,e.id)?null:o.a.createElement(Ce.a,{key:"settings-treeitem-indiGraph-src-menuitem-s"+t+"-y"+a+"-g"+n+"-"+e.id,value:e.id},e.name)}))}():null)}),p.indicator.graphTypes.map((function(e,l){var d,c,u=s.style.strokeColor;return o.a.createElement($e,{nodeId:"settings-treeitem-indiGraph-clrProps-"+t+"-y"+a+"-g"+n+"-gt"+l,key:"settings-treeitem-indiGraph-clrProps-"+t+"-y"+a+"-g"+n+"-gt"+l,color:null===(c=null===(d=r[t].yaxis[0].graphs[n].style)||void 0===d?void 0:d.strokeColor)||void 0===c?void 0:c[l],iconPath:ue.g,text:"line stroke color",onColorSelected:function(e){i({task:"setGraphProp",params:{subchartIdx:t,yaxisIdx:0,graphIdx:n,newValue:Dt(Dt(Dt([],u.slice(0,l)),[e]),u.slice(l+1)),prop:"strokeColor"}})}})})),p.indicator.params.map((function(e,r){return o.a.createElement(je,{key:"sub-"+t+"-yaxis-"+a+"-graph-"+n+"-"+r,nodeId:2+t+"00-"+n+"-"+r,labelIcon:o.a.createElement(_e,{path:ue.A,size:"24px",color:u.palette.text.primary}),labelText:e.name,typographyVariant:"body1",labelInfo:o.a.createElement(Xe.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},value:e.val,onChange:function(e){var t=parseFloat(e.target.value);isNaN(t)||i({task:"modifyIndicatorData",params:{dataId:p.id,newParam:{paramIdx:r,newValue:t}}})}})})}))):null},Ft=o.a.memo((function(e){var t,a=e.style,n=e.subcharts,r=e.subchartIdx,i=e.mode,l=e.calcXaxis,d=e.xy,c=e.drawPixXy,s=e.yToPix,u=n[r].top,p=!!(null===c||void 0===c?void 0:c[0]);if(1!==d.length&&!p||!s||!l.xToPix)return null;var h=1===d.length?[l.xToPix(d[0][0]),s(d[0][1],r,0)]:(null===c||void 0===c?void 0:c[0])?c[0]:null;if(!h)return null;var v=(null===a||void 0===a?void 0:a.strokeColor)?a.strokeColor:"red",m=(null===a||void 0===a?void 0:a.anchorColor)?a.anchorColor:"#333",f=["extendUp","extendDown","extendUpDown","*extendToSecondPoint"].includes(null!==i&&void 0!==i?i:"")?i:"extendUpDown",g=null===(t=null===n||void 0===n?void 0:n[Math.max(n.length-1,0)])||void 0===t?void 0:t.bottom,y=[[h[0],"extendDown"===f?h[1]:u],[h[0],"extendUp"===f?h[1]:g]];return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.c,{listening:!1,x:0,y:0,points:y.flat(),stroke:v,strokeWidth:1}),o.a.createElement(C.a,{x:h[0],y:h[1],radius:5,fill:m}))})),Xt={name:"Vertical Line",type:"vline",nPoints:1,category:"lines",params:[{name:"mode",val:"extendUpDown",vals:["extendUp","extendDown","extendUpDown"],type:"select"}],default:{params:[{icon:ue.J}]},component:Ft},Yt=o.a.memo((function(e){var t=e.style,a=e.subcharts,n=e.subchartIdx,r=e.containerSize,i=e.calcXaxis,l=e.mode,d=e.xy,c=e.drawPixXy,s=e.yToPix,u=r.left,p=u+r.width,h=a[n],v=h.bottom,m=h.top,f=!!(null===c||void 0===c?void 0:c[0]);if(1!==d.length&&!f||!s||!i.xToPix)return null;var g=1===d.length?[i.xToPix(d[0][0]),s(d[0][1],n,0)]:(null===c||void 0===c?void 0:c[0])?c[0]:null;if(!g)return null;if((null===g||void 0===g?void 0:g[1])<m||(null===g||void 0===g?void 0:g[1])>v)return null;var y=(null===t||void 0===t?void 0:t.strokeColor)?t.strokeColor:"red",x=(null===t||void 0===t?void 0:t.anchorColor)?t.anchorColor:"#333",b=["extendRight","extendLeft","extendLeftRight","*extendToSecondPoint"].includes(null!==l&&void 0!==l?l:"")?l:"extendLeftRight",k=[["extendRight"===b?g[0]:u,g[1]],["extendLeft"===b?g[0]:p,g[1]]];return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.c,{listening:!1,x:0,y:0,points:[k[0][0],k[0][1],k[1][0],k[1][1]],stroke:y,strokeWidth:1}),o.a.createElement(C.a,{x:g[0],y:k[0][1],radius:5,fill:x}))})),Ut={name:"Horizontal Line",type:"hline",nPoints:1,category:"lines",params:[{name:"mode",val:"extendLeftRight",vals:["extendRight","extendLeft","extendLeftRight"],type:"select"}],default:{params:[{icon:ue.J}]},component:Yt},At=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Rt=o.a.memo((function(e){var t=e.style,a=e.mode,n=e.subcharts,r=e.subchartIdx,i=e.calcXaxis,l=e.xy,d=e.drawPixXy,c=e.yToPix,s=n[r],u=s.bottom,p=s.top;if(2!==l.length&&2!==(null===d||void 0===d?void 0:d.length)||!c||!i.xToPix)return null;var h=i.xToPix,v=2===l.length?l.map((function(e){return[h(e[0]),(t=e[1],c(t,r,0))];var t})):2===(null===d||void 0===d?void 0:d.length)?d:null;if(!v||2!==v.length)return null;var m=(null===t||void 0===t?void 0:t.strokeColor)?t.strokeColor:"red",f=(null===t||void 0===t?void 0:t.anchorColor)?t.anchorColor:"#333",g=["line","trendline","infiniteLine"].includes(null!==a&&void 0!==a?a:"")?a:"trendline",y=v[0][0]>v[1][0]?[v[1],v[0]]:v,x=[At([],y[0]),At([],y[1])];if("trendline"===g||"infiniteLine"===a){var b=x[1][0]-x[0][0],k=x[1][1]-x[0][1],w=k/b,T=k<0?p:u,I=x[0][1]-w*x[0][0],S=(T-I)/w;if(x[1][0]=S,x[1][1]=T,"infiniteLine"===a){var E=k<0?u:p,P=(E-I)/w;x[0][0]=P,x[0][1]=E}}return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.c,{listening:!1,draggable:!1,x:0,y:0,points:x.flat(),stroke:m,strokeWidth:1}),o.a.createElement(C.a,{x:y[0][0],y:y[0][1],radius:5,fill:f}),o.a.createElement(C.a,{x:y[1][0],y:y[1][1],radius:5,fill:f}))})),Wt={name:"Trendline",type:"trendline",nPoints:2,category:"lines",params:[{name:"mode",val:"trendline",vals:["line","trendline","infiniteLine"],type:"select"}],default:{params:[{icon:ue.J}]},component:Rt},Lt=[Ut,Xt,Wt],Gt=function(e){var t,a,n,r,i=e.subchartIdx,l=e.yaxisIdx,d=e.toolIdx,c=e.subCharts,s=e.Dispatch,u=e.handleToggleExpanded,p=null===(r=null===(n=null===(a=null===(t=null===c||void 0===c?void 0:c[i])||void 0===t?void 0:t.yaxis)||void 0===a?void 0:a[l])||void 0===n?void 0:n.tools)||void 0===r?void 0:r[d],h=p||null,v=Object(ce.a)();if(!h)return null;return o.a.createElement(je,{key:"tool-"+d,nodeId:"tool-"+i+"-"+d,labelText:"hline"===h.type?"horizontal line":"vline"===h.type?"vertical line":"trendline"===h.type?"Trendline":"Tool",typographyVariant:"body1",labelIcon:o.a.createElement("div",{style:{border:"1px solid "+("light"===v.palette.mode?"#333":"#fff"),borderRadius:5}},o.a.createElement(fe.a,{path:"hline"===h.type||"vline"===h.type||"trendline"===h.type?ue.E:ue.y,size:"24px",color:"light"===v.palette.mode?"#333":"#fff",rotate:"trendline"===h.type?-45:"vline"===h.type?90:0})),onClick:function(){null===u||void 0===u||u("tool-"+i+"-"+d)},bgColorSelected:v.palette.primary.light,labelInfo:o.a.createElement(Se.a,{size:"small",onClick:function(e){e.preventDefault(),s({task:"removeTool",params:{subchartIdx:i,yaxisIdx:0,toolIdx:d}})}},o.a.createElement(fe.a,{path:ue.m,size:1,color:"light"===v.palette.mode?"#333":"#fff"}))},"hline"===h.type?o.a.createElement(je,{key:"tool-"+i+"-y0-"+d+"-hlinelevel",nodeId:"tool-"+i+"-y0-"+d+"-hlinelevel",labelText:"Y-Level",typographyVariant:"body1",labelIcon:o.a.createElement(_e,{path:ue.e,size:"24px",color:"light"===v.palette.mode?"#333":"#fff"}),labelInfo:o.a.createElement(Xe.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},defaultValue:h.xy[0][1],onChange:function(e){var t=parseFloat(e.target.value);isNaN(t)||s({task:"setToolProp",params:{prop:"hLineYlevel",subchartIdx:i,yaxisIdx:0,toolIdx:d,newValue:t}})}})}):null,h.params?h.params.map((function(e,t){var a,n,r=null===(n=null===(a=Lt.find((function(e){return e.type===h.type})))||void 0===a?void 0:a.default)||void 0===n?void 0:n.params,c=r?r[t].icon:ue.A;return o.a.createElement(je,{key:"tool-s"+i+"-y0-t"+d+"-p"+t,nodeId:"tool-s"+i+"-y0-t"+d+"-p"+t,labelText:e.name,typographyVariant:"body1",labelIcon:o.a.createElement(_e,{path:c,size:"24px",color:"light"===v.palette.mode?"#333":"#fff"}),labelInfo:"select"===e.type?o.a.createElement(Je.a,{size:"small",margin:"none",SelectDisplayProps:{style:{paddingTop:2,paddingBottom:2}},value:e.val,onChange:function(e){var a=e.target.value;s({task:"setToolProp",params:{prop:"toolParam",subchartIdx:i,yaxisIdx:l,toolIdx:d,toolParamIdx:t,newValue:a}})}},e.vals.map((function(e,a){return o.a.createElement(Ce.a,{key:"tool-s"+i+"-y0-t"+d+"-p"+t+"-o"+a,value:e},e)}))):"number"===e.type?o.a.createElement(Xe.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,maxWidth:80}},value:e.val,onChange:function(e){var a=parseFloat(e.target.value);isNaN(a)||s({task:"setToolProp",params:{prop:"toolParam",subchartIdx:i,yaxisIdx:l,toolIdx:d,toolParamIdx:t,newValue:a}})}}):void 0})})):null,function(e){return[{text:"stroke color",icon:ue.g,color:e.style.strokeColor,onColorSelected:function(e){s({task:"setToolProp",params:{prop:"strokeColor",subchartIdx:i,yaxisIdx:0,toolIdx:d,newValue:e}})}},{text:"anchor color",icon:ue.i,color:e.style.anchorColor,onColorSelected:function(e){s({task:"setToolProp",params:{prop:"anchorColor",subchartIdx:i,yaxisIdx:0,toolIdx:d,newValue:e}})}}]}(h).map((function(e,t){return o.a.createElement($e,{nodeId:"settings-treeitem-tool-clrProp-"+i+"-y"+l+"-t"+d+"-p"+t,key:"settings-treeitem-tool-clrProp-"+i+"-y"+l+"-t"+d+"-p"+t,color:e.color,iconPath:e.icon,text:e.text,onColorSelected:e.onColorSelected})})))},Nt=function(){return(Nt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Vt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Ht=o.a.forwardRef((function(e,t){var a=e.subchartIdx,n=e.subcharts,r=e.data,i=e.Dispatch,l=e.onSettingsExpand,d=e.additionalLabelInfo,c=Vt(e,["subchartIdx","subcharts","data","Dispatch","onSettingsExpand","additionalLabelInfo"]),s=Object(ce.a)(),u=n[a];return o.a.createElement(je,Nt({ref:t},c,{key:"sub-"+a,nodeId:"sub-"+a,labelText:0===a?"Mainchart":"Subchart "+a,bgColorSelected:s.palette.primary.light,onClick:function(){null===l||void 0===l||l("sub-"+a)},labelIcon:o.a.createElement(_e,{path:ue.j,size:"32px",color:s.palette.secondary.contrastText,background:s.palette.secondary.main}),labelInfo:0!==a?o.a.createElement(o.a.Fragment,null,d,o.a.createElement(Se.a,{size:"small",onClick:function(e){e.preventDefault(),i({task:"removeSubchart",params:{subchartIdx:a}})}},o.a.createElement(me.Icon,{path:ue.m,size:1,color:"light"===s.palette.mode?"#333":"#fff"}))):void 0}),u.yaxis[0].graphs.map((function(e,t){return Z(e)?o.a.createElement(zt,{key:"editIndicator-sub-"+a+"-yaxis-0-graph-"+t,subCharts:n,Dispatch:i,subchartIdx:a,yaxisIdx:0,graphIdx:t,handleToggleExpanded:l,data:r}):j(e)?o.a.createElement(Qe,{key:"graph-sub-"+a+"-y-0-graph-"+t+"-frag",subCharts:n,Dispatch:i,subchartIdx:a,yaxisIdx:0,graphIdx:t,onSettingsExpand:l,data:r}):null})),u.yaxis[0].tools.length>0?o.a.createElement(je,{key:"tools-"+a+"-y0",nodeId:"tools-"+a+"-y0",labelIcon:o.a.createElement("div",{style:{background:s.palette.primary.main,width:32,height:32,border:"1px solid #666",borderRadius:5,marginRight:10}},o.a.createElement(me.Icon,{path:ue.F,size:"32px",color:s.palette.secondary.contrastText})),labelText:"Tools",onClick:function(){null===l||void 0===l||l("tools-"+a+"-y0")}},u.yaxis[0].tools.map((function(e,t){return o.a.createElement(Gt,{key:"editTool-sub-"+a+"-yaxis-0-tool-"+t,subCharts:n,Dispatch:i,subchartIdx:a,yaxisIdx:0,toolIdx:t,handleToggleExpanded:l})}))):null)}));Ht.displayName="SubchartTreeItem";var Bt=function(){return(Bt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Kt=function(e){return o.a.createElement(_e,{path:e.iconPath,size:"24px",color:e.theme.palette.text.primary,style:{marginLeft:e.theme.spacing(1)},border:"light"===e.theme.palette.mode?"1px solid #bbb":void 0})},_t=function(e){var t=e.subCharts,a=e.onNavigate,n=e.Dispatch,r=e.onSettingsExpand,i=e.ChartMenuState,l=e.style,d=e.data,c=Object(ce.a)(),s=o.a.useState(null),u=s[0],p=s[1],h=function(e){p(null),e&&(null===a||void 0===a||a(e))},v=[{category:void 0},{category:"xaxis",icon:ue.a},{category:"yaxis",icon:ue.b},{category:"grid",icon:ue.x},{category:"crosshair",icon:ue.o}],m=[{nodeId:"bgcolor",labelText:"background color",iconPath:ue.N,labelInfo:o.a.createElement(Le,{color:l.backgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"backgroundColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisFillColor",labelText:"fill color",iconPath:ue.N,labelInfo:o.a.createElement(Le,{color:l.xaxis.fillColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisFillColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisStrokeColor",labelText:"stroke color",iconPath:ue.g,labelInfo:o.a.createElement(Le,{color:l.xaxis.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisStrokeColor",newValue:e}})}})},{category:"xaxis",nodeId:"xaxisTextColor",labelText:"text color",iconPath:ue.u,labelInfo:o.a.createElement(Le,{color:l.xaxis.fontColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"xAxisTextColor",newValue:e}})}})},{category:"yaxis",nodeId:"yaxisStrokeColor",labelText:"stroke color",iconPath:ue.g,labelInfo:o.a.createElement(Le,{color:l.yaxis.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"yAxisStrokeColor",newValue:e}})}})},{category:"yaxis",nodeId:"yaxisTextColor",labelText:"text color",iconPath:ue.u,labelInfo:o.a.createElement(Le,{color:l.yaxis.fontColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"yAxisTextColor",newValue:e}})}})},{category:"grid",nodeId:"useXGrid",labelText:"use x-axis grid",iconPath:ue.x,labelInfo:o.a.createElement(be.a,{checked:l.grid.useGridX,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleGridX"}})}})},{category:"grid",nodeId:"useYGrid",labelText:"use y-axis grid",iconPath:ue.x,labelInfo:o.a.createElement(be.a,{checked:l.grid.useGridY,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleGridY"}})}})},{category:"grid",nodeId:"gridStrokeColor",labelText:"stroke color",iconPath:ue.g,labelInfo:o.a.createElement(Le,{color:l.grid.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"gridStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"useCrosshair",labelText:"use crosshair",iconPath:ue.o,labelInfo:o.a.createElement(be.a,{checked:l.crosshair.useCrosshair,size:"small",style:{padding:0,width:24,height:24},onChange:function(){n({task:"setGeneralProp",params:{prop:"toggleCrosshair"}})}})},{category:"crosshair",nodeId:"crosshairStrokeColor",labelText:"stroke color",iconPath:ue.g,labelInfo:o.a.createElement(Le,{color:l.crosshair.strokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerBackground",labelText:"x-marker background",iconPath:ue.N,labelInfo:o.a.createElement(Le,{color:l.crosshair.xMarkerBackgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerBackgroundColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerStrokeColor",labelText:"x-marker stroke color",iconPath:ue.g,labelInfo:o.a.createElement(Le,{color:l.crosshair.xMarkerStrokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairXMarkerTextColor",labelText:"x-marker text color",iconPath:ue.u,labelInfo:o.a.createElement(Le,{color:l.crosshair.xMarkerTextColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairXmarkerTextColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerBackground",labelText:"y-marker background",iconPath:ue.N,labelInfo:o.a.createElement(Le,{color:l.crosshair.yMarkerBackgroundColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerBackgroundColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerStrokeColor",labelText:"y-marker stroke color",iconPath:ue.g,labelInfo:o.a.createElement(Le,{color:l.crosshair.yMarkerStrokeColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerStrokeColor",newValue:e}})}})},{category:"crosshair",nodeId:"crosshairYMarkerTextColor",labelText:"y-marker text color",iconPath:ue.u,labelInfo:o.a.createElement(Le,{color:l.crosshair.yMarkerTextColor,onColorSelected:function(e){n({task:"setGeneralProp",params:{prop:"crosshairYmarkerTextColor",newValue:e}})}})}];return o.a.createElement(o.a.Fragment,null,o.a.createElement(ke.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},o.a.createElement(we.a,{style:{border:"1px solid #666",borderRadius:50,padding:5,textTransform:"none",background:c.palette.secondary.light,color:c.palette.secondary.contrastText},onClick:function(e){p(e.currentTarget)}},o.a.createElement(w.a,null," Add...")),o.a.createElement(Te.a,{id:"quick-add",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:function(){return h(void 0)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.a.createElement(Ce.a,{onClick:function(){return h("indicators")}},"Indicator"),o.a.createElement(Ce.a,{onClick:function(){return h("tools")}},"Tool"))),o.a.createElement(He,{expanded:i.expandedSetting},o.a.createElement(je,{nodeId:"1",labelText:"General",labelIcon:o.a.createElement(_e,{path:ue.r,size:"32px",color:c.palette.secondary.contrastText,background:c.palette.secondary.main}),bgColorSelected:c.palette.primary.light,typographyVariant:"h6",onClick:function(){null===r||void 0===r||r("1")}},v.map((function(e,t){var a;return e.category?o.a.createElement(je,{nodeId:"settings-treeitem-general-cat-"+t,key:"settings-treeitem-general-cat-"+t,labelText:null!==(a=e.category)&&void 0!==a?a:"",labelIcon:o.a.createElement(_e,{path:e.icon,size:"32px",color:c.palette.secondary.contrastText,background:c.palette.primary.main}),onClick:function(){null===r||void 0===r||r("settings-treeitem-general-cat-"+t)}},m.filter((function(t){return t.category===e.category})).map((function(e){return o.a.createElement(je,{key:"settings-treeitem-general-cat-"+t+"-"+e.nodeId,nodeId:"settings-treeitem-general-cat-"+t+"-"+e.nodeId,labelText:e.labelText,typographyVariant:"body1",labelInfo:e.labelInfo,labelIcon:o.a.createElement(Kt,{iconPath:e.iconPath,theme:c})})}))):m.filter((function(t){return t.category===e.category})).map((function(e){return o.a.createElement(je,{key:"settings-treeitem-general-cat-"+t+"-"+e.nodeId,nodeId:"settings-treeitem-general-cat-"+t+"-"+e.nodeId,labelText:e.labelText,typographyVariant:"body1",labelInfo:e.labelInfo,labelIcon:o.a.createElement(Kt,{iconPath:e.iconPath,theme:c})})}))}))),o.a.createElement(Ht,{subcharts:t,data:d,subchartIdx:0,Dispatch:n,onSettingsExpand:r}),o.a.createElement(qe.a,{onDragEnd:function(e){var t;(null===(t=e.destination)||void 0===t?void 0:t.index)&&n({task:"swapSubcharts",params:{subchartIdx1:e.source.index,subchartIdx2:e.destination.index}})}},o.a.createElement(qe.c,{droppableId:"droppable"},(function(e,a){return o.a.createElement(Ie.a,Bt({},e.droppableProps,{ref:e.innerRef,sx:{background:a.isDraggingOver?c.palette.primary.light:"transparent",borderTopRightRadius:c.spacing(2),borderBottomRightRadius:c.spacing(2)}}),t.slice(1).map((function(e,a){var i=a+1;return o.a.createElement(qe.b,{key:"sub-"+i,draggableId:"sub-"+i,index:i},(function(e,a){return o.a.createElement(Ht,Bt({subcharts:t,data:d,subchartIdx:i,Dispatch:n,onSettingsExpand:r,ref:e.innerRef},e.draggableProps,{additionalLabelInfo:o.a.createElement(Se.a,Bt({size:"small"},e.dragHandleProps),o.a.createElement(me.Icon,{path:ue.f,size:1,color:"light"===c.palette.mode?"#333":"#fff"}))}))}))})),e.placeholder)})))))},qt=a(598),Jt=a(570),$t=a(565),Qt=function(){return(Qt=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ea=o.a.forwardRef((function(e,t){return o.a.createElement($t.a,Qt({elevation:6,ref:t,variant:"filled"},e))})),ta=function(e){var t=e.open,a=e.onClose,n=e.content,r=e.type,i=e.autoHideDuration,l=void 0===i?5e3:i,d=e.msgIdx,c=function(e,t){"clickaway"!==t&&(null===a||void 0===a||a())};return o.a.createElement(Jt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,autoHideDuration:l,onClose:c,sx:{bottom:24*(d+1)+48*d+"px !important",color:"red"}},o.a.createElement(ea,{severity:r,onClose:c},n))},aa=a(253),na=a.n(aa),oa=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function i(e){try{d(n.next(e))}catch(t){r(t)}}function l(e){try{d(n.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}d((n=n.apply(e,t||[])).next())}))},ra=function(e,t){var a,n,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(l){r=[6,l],n=0}finally{a=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},ia=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e};function la(e){return oa(this,void 0,void 0,(function(){return ra(this,(function(t){switch(t.label){case 0:return[4,e.text().then((function(e){var t,a,n,o,r,i,l,d,c,s,u=[{chars:"\n",amt:null!==(a=null===(t=e.match(/\n/gm))||void 0===t?void 0:t.length)&&void 0!==a?a:0},{chars:"\r",amt:null!==(o=null===(n=e.match(/\r/gm))||void 0===n?void 0:n.length)&&void 0!==o?o:0},{chars:"\r\n",amt:null!==(i=null===(r=e.match(/\r\n/gm))||void 0===r?void 0:r.length)&&void 0!==i?i:0}],p=u.map((function(e){return e.amt})),h=u[p.indexOf(Math.max.apply(Math,p))].chars,v=e.split(h),m=[{chars:",",amt:null!==(d=null===(l=v[0].match(/,/gm))||void 0===l?void 0:l.length)&&void 0!==d?d:0},{chars:";",amt:null!==(s=null===(c=v[0].match(/;/gm))||void 0===c?void 0:c.length)&&void 0!==s?s:0}],f=m.map((function(e){return e.amt})),g=m[f.indexOf(Math.max.apply(Math,f))].chars,y={dots:0,commas:0};v.forEach((function(e){e.split(g).forEach((function(e){var t=e.lastIndexOf("."),a=e.lastIndexOf(",");-1!==t&&-1!==a?t>a?y.dots++:y.commas++:-1!==t&&-1===a?y.dots++:-1===t&&-1!==a&&y.commas++}))}));var x=y.dots<y.commas,b=y.dots>y.commas&&y.commas>0,k=x?e.replaceAll(".","").replaceAll(",","."):b?e.replaceAll(",",""):e,w=na()(k.trim(),{delimiter:g,record_delimiter:h,cast:!0,trim:!0,cast_date:!0}).map((function(e){return{date:e[0],open:e[1],high:e[2],low:e[3],close:e[4],volume:e[5]}}));return w.shift(),w}))];case 1:return[2,t.sent()]}}))}))}var da,ca=function(e){var t=e.Dispatch,a=o.a.useState([]),n=a[0],r=a[1],i=Object(ce.a)(),l=o.a.useRef(null),d=o.a.useState(!1),c=d[0],s=d[1],u=o.a.useState(""),p=u[0],h=u[1];function v(){return oa(this,void 0,void 0,(function(){var e,a,n,o;return ra(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!p)throw new Error("url not provided");return[4,fetch(p)];case 1:if(!(e=i.sent()))throw new Error("cant download file from url");return[4,la(e)];case 2:return a=i.sent(),n=p.substring(p.lastIndexOf("/")+1,p.lastIndexOf(".")),t({task:"addSubchart",params:{chartSeries:a,chartName:n,reset:!0,id:ct()()}}),r((function(e){return ia(ia([],e),[{type:"success",text:"Graph successfully loaded"}])})),s(!1),[3,4];case 3:return o=i.sent(),console.error("Error - could not download file from URL or File could not be parsed",o),r((function(e){return ia(ia([],e),[{type:"error",text:"Error - "+o}])})),[3,4];case 4:return[2]}}))}))}var m=o.a.useCallback((function(){s(!0)}),[s]),f=o.a.useCallback((function(){s(!1)}),[s]),g=o.a.useCallback((function(){var e,t;null===(t=null===(e=null===l||void 0===l?void 0:l.current)||void 0===e?void 0:e.click)||void 0===t||t.call(e)}),[l]);return o.a.createElement(o.a.Fragment,null,n.length>0?n.map((function(e,t){var a;return o.a.createElement(ta,{key:"msg-"+t,autoHideDuration:5e3,type:null!==(a=e.type)&&void 0!==a?a:"error",open:n.length>0,onClose:function(){return r((function(e){return 1===e.length?[]:e.splice(1)}))},content:e.text,msgIdx:t})})):null,o.a.createElement("input",{type:"file",style:{visibility:"hidden",position:"absolute",top:0,height:0,width:0},ref:l,onChange:function(e){return oa(this,void 0,void 0,(function(){var a,n,o,i;return ra(this,(function(l){switch(l.label){case 0:if(!(a=e.target.files))return[2];if(!(a.length>0))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,la(a[0])];case 2:return n=l.sent(),o=a[0].name.substr(0,a[0].name.lastIndexOf(".")),t({task:"addSubchart",params:{chartSeries:n,chartName:o,reset:!0,id:ct()()}}),r((function(e){return ia(ia([],e),[{type:"success",text:"Graph successfully loaded"}])})),[3,4];case 3:return i=l.sent(),console.error("Error - could not parse provided local file",i),r((function(e){return ia(ia([],e),[{type:"error",text:"Error - could not parse provided local file"}])})),[3,4];case 4:return[2]}}))}))}}),o.a.createElement(se.a,{sx:{pt:4}},o.a.createElement(ye,{text:"CSV from device",id:"1",iconPath:ue.s,iconColor:i.palette.secondary.contrastText,onClick:g}),o.a.createElement(ye,{text:"CSV from URL",id:"2",iconPath:ue.O,iconColor:i.palette.secondary.contrastText,onClick:m}),c?o.a.createElement("div",null,o.a.createElement(Xe.a,{helperText:"Enter/Paste URL",fullWidth:!0,onKeyUp:function(e){"Enter"===e.key&&"keyup"===e.type&&v()},value:p,onChange:function(e){return h(e.target.value)},sx:{p:1,pt:2,boxSizing:"border-box"},InputProps:{sx:{boxSizing:"border-box",pr:0},endAdornment:o.a.createElement(qt.a,{position:"end"},o.a.createElement(ke.a,{direction:"row"},o.a.createElement(Se.a,{onClick:v,size:"small"},o.a.createElement(me.Icon,{path:ue.d,size:1})),o.a.createElement(Se.a,{onClick:f},o.a.createElement(me.Icon,{path:ue.m,size:1}))))}})):null))},sa=a(581),ua=a(599),pa=function(e){var t=e.location,a=e.submenuContent,n=e.theme,r=e.onNavigate,i=e.amtIndicators;return o.a.createElement(ke.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},a,i>0?o.a.createElement(sa.a,{value:"indicatorModifyMode",exclusive:!0,size:"small"},o.a.createElement(ua.a,{value:"addIndicator",sx:{"&:hover":{background:"indicators"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"indicators"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===r||void 0===r||r("indicators")}},o.a.createElement(w.a,null," Add")),o.a.createElement(ua.a,{value:"editIndicator",sx:{"&:hover":{background:"editIndicator"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomRightRadius:50,borderTopRightRadius:50,background:"editIndicator"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===r||void 0===r||r("editIndicator")}},"Edit")):null)},ha={name:"EMA",category:"Average",params:[{name:"period",val:10},{name:"dataSeriesKey",val:void 0}],default:{params:[{name:"period",val:10},{name:"dataSeriesKey",val:void 0}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){for(var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=e.dataSeriesKey,l="string"===typeof i?i:"close",d="number"===typeof i?i:0,c=function(e){var t;return P(e)?l in e?e[l]:e.close:M(e)&&(null===(t=e.prices)||void 0===t?void 0:t[d])||0},s=n||[],u=null!==(t=null===s||void 0===s?void 0:s.length)&&void 0!==t?t:0;u<a.length;u++)if(u<r-1)s.push({prices:[null],date:a[u].date});else if(u===r-1){for(var p=0,h=0;h<r;h++){p+=c(a[h])}p/=r,s.push({prices:[p],date:a[u].date})}else{var v=2/(r+1),m=(c(a[u])-s[u-1].prices[0])*v+s[u-1].prices[0];s.push({prices:[m],date:a[u].date})}return s}},va=function(){return(va=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ma=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},fa=function(){return(fa=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ga={name:"RSI",category:"Oszillator",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0,decimals:2,fixedYScale:[0,100],graphProps:[{name:"areaTresholds",val:{lower:25,upper:75}}]},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a,n,o,r=e.chartData,i=e.prevData,l=e.period,d=void 0===l?14:l,c=i||[],s=i.length;s<r.length;s++)if(0!==s){var u=r[s],p=r[s-1],h=u.close-p.close,v=h>0?h:0,m=h<0?-h:0,f=1/d,g=null===(a=null===(t=null===c||void 0===c?void 0:c[(null===c||void 0===c?void 0:c.length)-1])||void 0===t?void 0:t.prices)||void 0===a?void 0:a[1],y=null===(o=null===(n=null===c||void 0===c?void 0:c[(null===c||void 0===c?void 0:c.length)-1])||void 0===n?void 0:n.prices)||void 0===o?void 0:o[2];if(s<d||z(g)||z(y))c.push({prices:[null,v,m],date:r[s].date});else{var x=v*f+(1-f)*g,b=m*f+(1-f)*y,k=0===b?100:100-100/(1+x/b);c.push({prices:[k,x,b],date:r[s].date})}}else c.push({prices:[null,null,null],date:r[s].date});return c}},ya=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},xa=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},ba={name:"KAMA",category:"Average",params:[{name:"erPeriod",val:21},{name:"fastEmaPeriod",val:2},{name:"slowEmaPeriod",val:30}],default:{params:[{name:"erPeriod",val:21},{name:"fastEmaPeriod",val:2},{name:"slowEmaPeriod",val:30}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){var t,a=e.chartData,n=e.prevData,o=e.erPeriod,r=void 0===o?20:o,i=e.fastEmaPeriod,l=void 0===i?2:i,d=e.slowEmaPeriod,c=void 0===d?30:d,s=xa([],n);return a.slice(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0).forEach((function(e,t){var o,i,d,u,p,h=t+(null!==(o=null===n||void 0===n?void 0:n.length)&&void 0!==o?o:0),v={prices:[null],date:e.date};if(h<r-1+1)s.push(v);else{var m=a[h],f=function(e){var t;return z(e)?null:P(e)?e.close:M(e)?null===(t=e.prices)||void 0===t?void 0:t[0]:null},g=f(m);if(g){var y=Math.abs(g-(null!==(i=f(null===a||void 0===a?void 0:a[h-r+1]))&&void 0!==i?i:g)),x=a.slice(h-r,h+1).map((function(e,t,a){if(0===t)return null;var n=f(e),o=f(a[t-1]);return z(n)||z(o)?null:Math.abs(n-o)})).filter((function(e){return null!==e})).reduce((function(e,t,a){return e+t}),0),b=0!==x?y/x:0,k=2/(c+1),w=2/(l+1),T=Math.pow(b*(w-k)+k,2),C=null!==(p=null===(u=null===(d=null===s||void 0===s?void 0:s[h-1])||void 0===d?void 0:d.prices)||void 0===u?void 0:u[0])&&void 0!==p?p:f(null===a||void 0===a?void 0:a[h-1]),I=z(C)?g:C+T*(g-C);s.push({prices:[I],date:e.date})}else s.push(v)}})),s}},ka=[{name:"SMA",category:"Average",params:[{name:"period",val:10}],default:{params:[{name:"period",val:10}],newSubchart:!1},graphTypes:[{type:"line"}],indicatorFnType:"dataSeries",indicatorFn:function(e){var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=ya([],n);return a.slice(null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0).forEach((function(e,t){var o,l=t+(null!==(o=null===n||void 0===n?void 0:n.length)&&void 0!==o?o:0);if(l<r-1)i.push({prices:[null],date:e.date});else{var d=0;a.slice(l-r+1,l+1).forEach((function(e,t,a){P(e)?d+=e.close:M(e)&&(d+=e.prices[0]?e.prices[0]:0)})),i.push({prices:[d/r],date:e.date})}})),i}},ha,ga,{name:"MACD",category:"Oszillator",params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],default:{params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],newSubchart:!0},graphTypes:[{type:"line",name:"MACD"},{type:"line",name:"Signal"},{type:"bars",name:"Histogram"}],indicatorFnType:"chartSeries",indicatorFn:function(e){var t,a,n,o,r,i,l,d=e.chartData,c=e.prevData,s=e.periodEmaShort,u=void 0===s?12:s,p=e.periodEmaLong,h=void 0===p?26:p,v=e.periodSignal,m=void 0===v?9:v,f=ha.indicatorFn,g=c?{macd:c.map((function(e,t){var a;return va(va({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[0]]})})),signal:c.map((function(e,t){var a;return va(va({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[1]]})})),emaShort:c.map((function(e){var t;return va(va({},e),{prices:[null===(t=null===e||void 0===e?void 0:e.prices)||void 0===t?void 0:t[3]]})})),emaLong:c.map((function(e,t){var a;return va(va({},e),{prices:[null===(a=null===e||void 0===e?void 0:e.prices)||void 0===a?void 0:a[4]]})}))}:null,y=f({chartData:d,prevData:null!==(t=null===g||void 0===g?void 0:g.emaShort)&&void 0!==t?t:[],period:u}),x=f({chartData:d,prevData:null!==(a=null===g||void 0===g?void 0:g.emaLong)&&void 0!==a?a:[],period:h}),b=ma(ma([],null!==(n=null===g||void 0===g?void 0:g.macd)&&void 0!==n?n:[]),y.slice(null!==(r=null===(o=null===g||void 0===g?void 0:g.macd)||void 0===o?void 0:o.length)&&void 0!==r?r:0).map((function(e,t){var a,n,o=t+(null!==(n=null===(a=null===g||void 0===g?void 0:g.macd)||void 0===a?void 0:a.length)&&void 0!==n?n:0),r=x[o].prices[0],i=e.prices[0];return{prices:[z(i)||z(r)?null:i-r],date:d[o].date,priceLabels:["MACD"]}}))),k=f({chartData:b,prevData:null!==(i=null===g||void 0===g?void 0:g.signal)&&void 0!==i?i:[],period:m});return ma(ma([],c),b.slice(null!==(l=null===c||void 0===c?void 0:c.length)&&void 0!==l?l:0).map((function(e,t){var a,n=null!==(a=t+(null===c||void 0===c?void 0:c.length))&&void 0!==a?a:0,o=e.prices[0],r=k[n].prices[0],i=null===o||null===r?null:o-r,l=y[n].prices[0],d=x[n].prices[0];return va(va({},e),{prices:[o,r,i,l,d]})})))}},{name:"ATR",category:"Volatility",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0},graphTypes:[{type:"line"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a=e.chartData,n=e.prevData,o=e.period,r=void 0===o?20:o,i=n||[],l=null!==(t=0+(null===n||void 0===n?void 0:n.length))&&void 0!==t?t:0;l<a.length;l++)if(l<r)i.push({prices:[null],date:a[l].date});else{for(var d=0,c=l-r+1;c<=l;c++){var s=a[c],u=a[c-1],p=0;if(E(s)&&E(u)){var h=s.high-s.low,v=Math.abs(s.high-u.close),m=Math.abs(s.low-u.close);p=Math.max(h,v,m)}else{p=Math.abs(s.close-u.close)}d+=p}i.push({prices:[d/r],date:a[l].date})}return i}},{name:"Volume",category:"Volume",params:[],default:{params:[],newSubchart:!0,decimals:0},graphTypes:[{type:"bars"}],indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t=e.chartData,a=[],n=0;n<t.length;n++){var o=t[n];O(o)?a.push({prices:[o.volume],date:o.date}):a.push({prices:[0],date:o.date})}return a}},{name:"OBV",category:"Volume",graphTypes:[{type:"line"}],params:[],default:{params:[],newSubchart:!0,decimals:0},indicatorFnType:"chartSeries",indicatorFn:function(e){for(var t,a,n=e.chartData,o=e.prevData,r=o||[],i=null===r||void 0===r?void 0:r.length;i<n.length;i++){var l=n[i];if(0===i&&O(l))r.push({prices:[l.volume],date:l.date});else{var d=n[i-1],c=null===r||void 0===r?void 0:r[i-1];if(O(l)&&O(d)){var s=(null!==(a=null===(t=null===c||void 0===c?void 0:c.prices)||void 0===t?void 0:t[0])&&void 0!==a?a:0)+Math.sign(l.close-d.close)*l.volume;r.push({prices:[s],date:n[i].date})}else r.push({prices:[null],date:n[i].date})}}return r}},ba],wa=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Ta=[{name:"Average",icon:ue.q},{name:"Oszillator",icon:ue.k},{name:"Volatility",icon:ue.c},{name:"Volume",icon:ue.G}],Ca=function(e){var t,a,n=e.subCharts,r=e.onNavigate,i=e.location,l=e.Dispatch,d=e.settings,c=e.data,s=o.a.useState(!1),u=s[0],p=s[1],h=o.a.useState(0),v=h[0],m=h[1],f=null===n||void 0===n?void 0:n[0].yaxis[0].graphs[0],g=c.filter((function(e){return"indicator"===e.type})).length,y=c.find((function(e){return e.id===f.dataId})),x=null!==(t=null===y||void 0===y?void 0:y.data)&&void 0!==t?t:[],b=null!==(a=null===y||void 0===y?void 0:y.name)&&void 0!==a?a:"",k=null===y||void 0===y?void 0:y.id,T=Object(ce.a)(),C=o.a.useMemo((function(){return(null===d||void 0===d?void 0:d.additionalIndicators)?wa(wa([],ka),d.additionalIndicators):ka}),[null===d||void 0===d?void 0:d.additionalIndicators]),I=n.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,n){var o=c.find((function(t){return t.id===e.dataId})),r="indicator"===(null===o||void 0===o?void 0:o.type)?o.indicator.graphTypes:null,i=r?r.length:1;return Array(i).fill(0).map((function(i,l){var d,c=null===r||void 0===r?void 0:r[l],s=(null===c||void 0===c?void 0:c.name)?" - "+c.name:"";return{name:null!==(d=null===o||void 0===o?void 0:o.name)&&void 0!==d?d:"Graph No."+n,subchartIdx:t,yaxisIdx:a,graphIdx:n,graphLineIdx:l,fullName:"indicator"===(null===o||void 0===o?void 0:o.type)?o.fullName+s+"":null,type:e.type,dataId:e.dataId}})).flat()})).flat()})).flat()})).flat(),S=C.filter((function(e){var t,a;return"indicator"===(null===(t=null===I||void 0===I?void 0:I[v])||void 0===t?void 0:t.type)&&"dataSeries"===e.indicatorFnType||"chart"===(null===(a=null===I||void 0===I?void 0:I[v])||void 0===a?void 0:a.type)}));return o.a.createElement(o.a.Fragment,null,g>0&&o.a.createElement(pa,{location:i,onNavigate:r,theme:T,amtIndicators:g,submenuContent:o.a.createElement(o.a.Fragment,null,o.a.createElement(Xe.a,{select:!0,SelectProps:{SelectDisplayProps:{style:{padding:8,paddingRight:32,paddingLeft:16}}},variant:"outlined",InputProps:{sx:{borderRadius:"18px"}},label:o.a.createElement(w.a,{color:"text.secondary"},"Source Graph"),value:v,onChange:function(e){var t="number"===typeof e.target.value?e.target.value:parseInt(e.target.value,10);isNaN(t)||m(t)}},I.map((function(e,t){var a;return o.a.createElement(Ce.a,{value:t,key:"srcGraph-"+t},null!==(a=null===e||void 0===e?void 0:e.fullName)&&void 0!==a?a:e.name)}))),o.a.createElement(Se.a,{size:"small",sx:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return p((function(e){return!e}))}},o.a.createElement(me.Icon,{path:u?ue.t:ue.K,size:1,color:T.palette.primary.contrastText})))}),o.a.createElement(He,null,u?S.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,t){return o.a.createElement(je,{key:"cat-indi-"+t,nodeId:(t+1).toString(),labelText:e.name,typographyVariant:"body1",onClick:(a=e,function(e){a.default.newSubchart?l({task:"addSubchart",params:{chartSeries:x,chartName:b,id:ct()(),indicator:a,indSrcId:k}}):l({task:"addGraph",params:{chartSeries:x,chartName:b,id:ct()(),indicator:a,subchartIdx:0,indSrcId:k}})})});var a})):Ta.map((function(e,t){var a=S.filter((function(t){return t.category===e.name}));return a.length>0&&o.a.createElement(je,{key:"cat-"+t,nodeId:t.toString(),labelText:e.name,bgColorSelected:T.palette.primary.light,color:"#ff0000",labelIcon:o.a.createElement("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:T.palette.secondary.main,minWidth:32,height:32}},o.a.createElement(me.Icon,{path:e.icon,size:"32px",color:T.palette.secondary.contrastText}))},a.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,a){return o.a.createElement(je,{key:"cat-"+t+"-indi-"+a,nodeId:(100*(t+1)+(a+1)).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){var t,a,n=c.find((function(e){var t;return e.id===(null===(t=I[v])||void 0===t?void 0:t.dataId)}));if(n){var o=null!==(t=n.data)&&void 0!==t?t:[],r=null!==(a=n.name)&&void 0!==a?a:"Graph No."+(null===I||void 0===I?void 0:I[v].graphIdx);(null===e||void 0===e?void 0:e.default.newSubchart)?l({task:"addSubchart",params:{dataSeries:o,name:r,indicator:e,indSrcId:n.id,id:ct()()}}):l({task:"addGraph",params:{dataSeries:o,name:r,id:ct()(),indicator:e,subchartIdx:null===I||void 0===I?void 0:I[v].subchartIdx,indSrcId:n.id,indSrcLineIdx:null===I||void 0===I?void 0:I[v].graphLineIdx}})}}})})))}))))},Ia=a(582),Sa=a(556),Ea=function(){return(Ea=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Pa=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Oa="undefined"!==typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches,Ma={isDrawing:!1,xy:[],params:[]},Za={isHovering:!1,move:{x:0,pixX:0,pixY:0,snapDatasets:[],subchartIdx:null,xDateString:"",pixXSnap:0,pixXUnlimSnap:0,xUnlimited:0},click:{clickedSubchartIdx:null}},ja={isDarkMode:!1,borderColor:"#000",backgroundColor:"#fff",crosshair:{useCrosshair:!0,strokeColor:"#000",xMarkerBackgroundColor:"#fff",xMarkerFontName:"Arial",xMarkerFontSize:14,xMarkerTextColor:"#000",xMarkerStrokeColor:"#000",yMarkerBackgroundColor:"#fff",yMarkerStrokeColor:"#000",yMarkerTextColor:"#000",yMarkerFontName:"Arial",yMarkerFontSize:14},grid:{useGridX:!0,useGridY:!0,strokeColor:"rgba(51,51,51, 0.2)",strokeStyle:"FUTURE"},yaxis:{widthYAxis:80,widthTickmarkLines:5,fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:14,fontName:"Arial"},xaxis:{heightXAxis:36,heightTickMarkLines:8,fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:14,fontName:"Arial"},draw:{strokeColor:"red",anchorColor:"#333"}},Da=Ea(Ea({},ja),{isDarkMode:!0,crosshair:Ea(Ea({},ja.crosshair),{strokeColor:"#bbb"}),borderColor:"#666",draw:{strokeColor:"red",anchorColor:"#ccc"},grid:Ea(Ea({},ja.grid),{strokeColor:"rgba(153,153,153, 0.08)"}),yaxis:Ea(Ea({},ja.yaxis),{fontColor:"#bbb",strokeColor:"#bbb"}),backgroundColor:"#333"}),za={data:[],subCharts:[],fullscreen:!1,draw:Ma,containerSize:{top:0,left:0,width:300,height:300,init:!1},pointer:{isHovering:!1,move:{isMoving:!1,xy:[0,0]},wheel:{isWheeling:!1,delta:[0,0]},dragPointerUp:{isDragPointerUp:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0]},drag:{isDragging:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0],delta:[0,0],ctrlKey:!1},pinch:{isPinching:!1,first:!1,movementInitial:[0,0],origin:[0,0]}},calc:{subcharts:[],xaxis:{totalTranslatedX:0,scaledWidthPerTick:10,xStart:0,xEnd:0,xLast:0,xUnlimited:0,pixXStart:0,pixXEnd:0,optChartPeriod:null,initialWidthPerTick:10,curTicks:[]},pointer:Za},style:ja},Fa=Ea(Ea({},za),{style:Da}),Xa=["#666","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],Ya=["#bbb","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],Ua=function(e,t){return e[t%e.length]},Aa={candleStrokeColor:"transparent",candleWickStrokeColor:"#666",candleDownColor:"#c70039",candleUpColor:"#009688"},Ra={strokeColor:["#666"]},Wa={strokeColor:["#bbb"]},La=function(e,t,a,n){return"indicator"===e?(console.log("IL",n,!n||n<=1),!n||n<=1?{strokeColor:[Ua(t?Ya:Xa,null!==a&&void 0!==a?a:0)]}:{strokeColor:(t?Ya:Xa).slice(0,n)}):Ea(Ea({},Aa),{strokeColor:Ua(t?Ya:Xa,null!==a&&void 0!==a?a:0)})},Ga=function(){return(Ga=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Na=function(e){var t=e.isDesktop,a=e.onClose,n=e.location,r=e.fullscreen,i=e.headerText,l=e.onNavigate,d=e.Dispatch,c=e.settings,s=e.content,u=Object(ce.a)(),p=o.a.useState(null),h=p[0],v=p[1],m=o.a.useState(null),f=m[0],g=m[1],y=o.a.useMemo((function(){var e;return null!==(e=c.themes)&&void 0!==e?e:[Ga(Ga({},ja),{name:"light"}),Ga(Ga({},Da),{name:"dark"})]}),[]),x=o.a.useCallback((function(){l("menu")}),[l]),b=o.a.useCallback((function(){d({task:"setGeneralProp",params:{prop:"toggleFullscreen"}})}),[d]),k=o.a.useCallback((function(e,t){"theme"===t&&v(e.currentTarget),"clear"===t&&g(e.currentTarget)}),[]),T=o.a.useCallback((function(){v(null),g(null)}),[]),C=o.a.useCallback((function(e){v(null);var t=y.find((function(t){return t.name===e}));t&&d({task:"setTheme",params:{theme:t}})}),[d,y]);return o.a.createElement(Ia.a,{anchor:t?"left":"bottom",open:!!n,disablePortal:r,onBackdropClick:a,onClose:a,PaperProps:{sx:t?{border:"1px solid #666",borderBottomRightRadius:10,borderTopRightRadius:10,minWidth:300,height:"100%"}:{border:"1px solid #666",borderTopLeftRadius:10,borderTopRightRadius:10,maxHeight:"75%",minHeight:"33%"}}},o.a.createElement(Ie.a,{sx:{position:"relative",top:0,height:"100%"}},o.a.createElement(Ie.a,{sx:{position:"sticky",top:0,height:48,width:"100%",bgcolor:"primary.main",p:1,boxSizing:"border-box",zIndex:1}},o.a.createElement(ke.a,{direction:"row",sx:{height:32,justifyItems:"center",justifyContent:"center",verticalAlign:"middle"}},o.a.createElement(w.a,{component:"div",variant:"h5",sx:{flexGrow:1,pt:.5,pr:1}},i||""),o.a.createElement(Ie.a,{sx:{margin:"-5px"}},!!n&&"menu"!==n&&o.a.createElement(Se.a,{size:"small",onClick:x},o.a.createElement(fe.a,{path:ue.z,size:"32px",color:u.palette.primary.contrastText})),!window.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&o.a.createElement(Se.a,{size:"small",onClick:b},o.a.createElement(fe.a,{path:r?ue.w:ue.v,size:"32px",color:u.palette.primary.contrastText})),o.a.createElement(Se.a,{size:"small",onClick:a},o.a.createElement(fe.a,{path:ue.m,size:"32px",color:u.palette.primary.contrastText}))))),o.a.createElement(Ie.a,{sx:{position:"relative",top:0,mb:t?"48px":"96px",height:t?"calc(100% - 96px)":"auto",overflowY:"auto",p:1}},s),o.a.createElement(Ie.a,{sx:{position:t?"absolute":"fixed",bottom:0,height:48,width:"100%",bgcolor:"primary.main"}},o.a.createElement(ke.a,{direction:"row",sx:{alignItems:"center",alignContent:"center",pt:.5}},o.a.createElement(Ie.a,{sx:{flexGrow:1}}),o.a.createElement(Se.a,{id:"clearMenuButton",size:"small",onClick:function(e){null===k||void 0===k||k(e,"clear")}},o.a.createElement(fe.a,{path:ue.h,size:"32px",color:u.palette.primary.contrastText})),o.a.createElement(Te.a,{id:"clear-menu",anchorEl:f,anchorOrigin:{horizontal:"center",vertical:"top"},transformOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(f),onClose:T,MenuListProps:{"aria-labelledby":"clearMenuButton"}},o.a.createElement(w.a,{variant:"h6",component:"div",sx:{textAlign:"center",pb:1,pl:1,pr:1,color:"primary.main"}},"Clear Chart"),o.a.createElement(Sa.a,null),["all","indicators","tools"].map((function(e,t){return o.a.createElement(Ce.a,{key:"clearMenuItem-"+t,onClick:function(){d({task:"clearChart",params:{mode:e}})}},e)}))),o.a.createElement(Se.a,{id:"themeMenuButton",size:"small",onClick:function(e){null===k||void 0===k||k(e,"theme")}},o.a.createElement(fe.a,{path:ue.L,size:"32px",color:u.palette.primary.contrastText})),o.a.createElement(Te.a,{id:"theme-menu",anchorEl:h,anchorOrigin:{horizontal:"center",vertical:"top"},transformOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(h),onClose:T,MenuListProps:{"aria-labelledby":"themeMenuButton"}},o.a.createElement(w.a,{variant:"h6",component:"div",sx:{textAlign:"center",pb:1,pl:1,pr:1,color:"primary.main"}},"Set Theme"),o.a.createElement(Sa.a,null),y.map((function(e,t){return o.a.createElement(Ce.a,{key:"themeMenuItem-"+t,onClick:function(){C(e.name)}},e.name)}))),o.a.createElement(Se.a,{size:"small",onClick:function(){null===a||void 0===a||a()}},o.a.createElement(fe.a,{path:ue.m,size:"32px",color:u.palette.primary.contrastText}))))))},Va=function(e){var t=e.subCharts,a=e.Dispatch,n=e.data,r=e.location,i=e.onNavigate,l=Object(ce.a)(),d=n.filter((function(e){return"indicator"===e.type})).length;return o.a.createElement(o.a.Fragment,null,o.a.createElement(pa,{location:r,onNavigate:i,theme:l,amtIndicators:d}),o.a.createElement(He,null,t.map((function(e,r){return e.yaxis.map((function(e,i){return e.graphs.map((function(e,l){return Z(e)?o.a.createElement(zt,{key:"editIndicator-sub-"+r+"-yaxis-"+i+"-graph-"+l,subCharts:t,Dispatch:a,subchartIdx:r,yaxisIdx:i,graphIdx:l,data:n}):null}))}))}))))},Ha=function(e){var t=e.location,a=e.submenuContent,n=e.theme,r=e.onNavigate,i=e.subCharts.map((function(e){return e.yaxis.map((function(e){return e.tools.length}))})).flat().reduce((function(e,t){return e+t}));return o.a.createElement(ke.a,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{pt:.5}},a,i>0?o.a.createElement(sa.a,{value:"toolModifyMode",exclusive:!0,size:"small"},o.a.createElement(ua.a,{value:"addTool",sx:{"&:hover":{background:"tools"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"tools"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===r||void 0===r||r("tools")}},o.a.createElement(w.a,null," Add")),o.a.createElement(ua.a,{value:"editTool",sx:{"&:hover":{background:"editTool"===t?n.palette.secondary.light:n.palette.background.paper,boxShadow:3,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},borderBottomRightRadius:50,borderTopRightRadius:50,background:"editTool"===t?n.palette.secondary.light:n.palette.background.paper,backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.15))"},onClick:function(){null===r||void 0===r||r("editTool")}},"Edit")):null)},Ba=[{name:"Lines",icon:ue.H},{name:"Measure",icon:ue.n},{name:"Upcoming",icon:ue.I}],Ka=[{name:"trendline",type:"trendline",category:"Lines"},{name:"horizontal",type:"hline",category:"Lines"},{name:"vertical",type:"vline",category:"Lines"}],_a=function(e,t){e({task:"draw",params:{type:t,subchartIdx:0}})},qa=function(e){var t=e.Dispatch,a=e.onNavigate,n=e.subCharts,r=o.a.useState(!1),i=r[0],l=r[1],d=Object(ce.a)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ha,{subCharts:n,location:"tools",onNavigate:a,theme:d,submenuContent:o.a.createElement(o.a.Fragment,null,o.a.createElement(Se.a,{size:"small",sx:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return l((function(e){return!e}))}},o.a.createElement(fe.a,{path:i?ue.t:ue.K,size:1,color:d.palette.primary.contrastText})))}),o.a.createElement(He,null,i?Ka.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,n){return o.a.createElement(je,{key:"cat-tool-"+n,nodeId:(n+1).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){_a(t,e.type),null===a||void 0===a||a(null)}})})):Ba.map((function(e,n){return o.a.createElement(je,{key:"cat-"+n,nodeId:n.toString(),labelText:e.name,labelIcon:o.a.createElement("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:d.palette.secondary.main,minWidth:32,height:32}},o.a.createElement(fe.a,{path:e.icon,size:"32px",color:d.palette.secondary.contrastText})),bgColorSelected:d.palette.primary.light},Ka.filter((function(t){return t.category===e.name})).sort((function(e,t){return e.name>t.name?1:-1})).map((function(e,r){return o.a.createElement(je,{key:"cat-"+n+"-tool-"+r,nodeId:(100*(n+1)+(r+1)).toString(),labelText:e.name,typographyVariant:"body1",onClick:function(){_a(t,e.type),null===a||void 0===a||a(null)}})})))}))))},Ja=function(e){var t=e.subCharts,a=e.Dispatch,n=e.onNavigate,r=Object(ce.a)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ha,{subCharts:t,location:"editTool",onNavigate:n,theme:r}),o.a.createElement(He,null,t.map((function(e,n){return e.yaxis.map((function(e,r){return e.tools.map((function(e,i){return o.a.createElement(Gt,{key:"editIndicator-sub-"+n+"-yaxis-"+r+"-graph-"+i,subCharts:t,Dispatch:a,subchartIdx:n,yaxisIdx:r,toolIdx:i})}))}))}))))},$a=o.a.memo((function(e){var t=e.onClose,a=e.ChartMenuState,n=e.subCharts,r=e.style,i=e.onNavigate,l=e.Dispatch,d=e.onSettingsExpand,c=e.fullscreen,s=e.settings,u=e.data,p=Object(de.a)("(min-width:600px)"),h=[{location:"menu",headerText:"Chart Menu",component:function(){return o.a.createElement(xe,{onNavigate:i})}},{location:"chart",headerText:"Chart",component:function(){return o.a.createElement(ca,{Dispatch:l})}},{location:"indicators",headerText:"Add Indicator",component:function(){return o.a.createElement(Ca,{subCharts:n,onNavigate:i,location:a.location,Dispatch:l,settings:s,data:u})}},{location:"editIndicator",headerText:"Edit Indicator",component:function(){return o.a.createElement(Va,{subCharts:n,onNavigate:i,location:a.location,Dispatch:l,settings:s,data:u})}},{location:"tools",headerText:"Add Tool",component:function(){return o.a.createElement(qa,{subCharts:n,Dispatch:l,onNavigate:i})}},{location:"editTool",headerText:"Edit Tool",component:function(){return o.a.createElement(Ja,{subCharts:n,Dispatch:l,onNavigate:i})}},{location:"settings",headerText:"Settings",component:function(){return o.a.createElement(_t,{ChartMenuState:a,subCharts:n,style:r,Dispatch:l,onNavigate:i,onSettingsExpand:d,data:u})}}].find((function(e){return e.location===a.location}));if(!a.location||!h)return null;var v=h.component,m=h.headerText;return console.log("Chartmenu renders"),o.a.createElement(Na,{headerText:m,isDesktop:p,settings:s,location:a.location,onNavigate:i,Dispatch:l,fullscreen:c,onClose:t,content:o.a.createElement(v,null)})})),Qa=o.a.memo((function(e){var t=e.bottomY,a=e.onOpenClick;return o.a.createElement(Ie.a,{sx:{position:"absolute",top:t-48-10,left:10}},o.a.createElement(we.a,{color:"primary",variant:"contained",onClick:a,sx:{width:48,minWidth:48,height:48,textTransform:"none",borderRadius:2,opacity:.8,padding:0}},o.a.createElement(me.Icon,{path:ue.B,size:"48px",color:"#fff"})))})),en=function(e){var t=e.dataset,a=e.name,n=e.decimals,r=e.onClick,i=e.subchartIdx,l=e.graphIdx,d=e.graphTypes,c=o.a.useCallback((function(e){null===r||void 0===r||r(e,i,l)}),[r,i,l]);return t?o.a.createElement(we.a,{style:{textTransform:"none",textAlign:"left"},onClick:c,startIcon:o.a.createElement(fe.a,{path:M(t)?ue.k:ue.l,size:1})},M(t)?o.a.createElement(w.a,null,a+":"+(t.prices.map((function(e,t){var a,o;return e&&n&&["line","bars"].includes(null!==(o=null===(a=null===d||void 0===d?void 0:d[t])||void 0===a?void 0:a.type)&&void 0!==o?o:"")?null===e||void 0===e?void 0:e.toFixed(n):null})).filter((function(e){return null!==e})).join(", ")||"")):o.a.createElement(w.a,{variant:"body1"},E(t)?a+"\n                O:"+t.open.toFixed(n)+"\n                H:"+t.high.toFixed(n)+"\n                L:"+t.low.toFixed(n)+"\n                C:"+t.close.toFixed(n):a+"\n                C:"+t.close.toFixed(n))):null},tn=function(e){var t=e.data,a=e.calcPointer,n=e.calcSubcharts,r=e.subcharts,i=e.onGraphLabelClick;return o.a.createElement(o.a.Fragment,null,r.map((function(e,r){return o.a.createElement(Ie.a,{key:"chart-label-subarea-"+r,sx:{position:"absolute",top:e.top}},e.yaxis[0].graphs.map((function(e,l){var d,c,s,u,p,h,v,m,f,g,y,x,b=t.find((function(t){return t.id===e.dataId})),k=null!==(d=null===b||void 0===b?void 0:b.data)&&void 0!==d?d:[],w=null!==(c=null===b||void 0===b?void 0:b.decimals)&&void 0!==c?c:0,T=null===(h=null===(p=null===(u=null===(s=null===n||void 0===n?void 0:n[r])||void 0===s?void 0:s.yaxis)||void 0===u?void 0:u[0])||void 0===p?void 0:p.graphs)||void 0===h?void 0:h[l];if(!(null===T||void 0===T?void 0:T.lastDataset)||!b)return null;var C=Z(e)&&"indicator"===b.type&&b.indicator.params.length>0?b.indicator.name+"("+b.indicator.params[0].val+")":Z(e)&&"indicator"===b.type&&0===b.indicator.params.length?""+b.indicator.name:b.name,I=(a.isHovering&&r===(null===a||void 0===a?void 0:a.move.subchartIdx)&&(null===(m=null===(v=null===a||void 0===a?void 0:a.move.snapDatasets)||void 0===v?void 0:v[0])||void 0===m?void 0:m.graphIdx)===l?null===(y=null===(g=null===(f=null===a||void 0===a?void 0:a.move)||void 0===f?void 0:f.snapDatasets)||void 0===g?void 0:g[0])||void 0===y?void 0:y.data:a.isHovering&&null!==a.move.x?k[null===a||void 0===a?void 0:a.move.x]:T.lastDataset.data)||T.lastDataset.data;return o.a.createElement(en,{key:"chart-label-"+r+"-"+l,onClick:i,subchartIdx:r,graphIdx:l,name:C,dataset:I,decimals:Z(e)&&"indicator"===b.type&&void 0!==b.indicator.default.decimals?b.indicator.default.decimals:w,graphTypes:"indicator"===(null===b||void 0===b?void 0:b.type)?null===(x=null===b||void 0===b?void 0:b.indicator)||void 0===x?void 0:x.graphTypes:void 0})})))})))},an=function(){return(an=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},nn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},on=function(e){var t,a,n,r=e.subcharts,i=e.draw,l=e.calc,d=e.containerSize,c=e.drawStyle,s=l.pointer,u=l.subcharts,p=l.xaxis,h=l.yToPix,v=l.pixToY,m=p.xToPix,f=i.isDrawing&&i.type||null,g=Lt.find((function(e){return e.type===f})),y=null===g||void 0===g?void 0:g.component,x={};null===(t=null===g||void 0===g?void 0:g.params)||void 0===t||t.forEach((function(e){x[e.name]=e.val}));var b=null===(n=null===(a=null===s||void 0===s?void 0:s.move.snapDatasets)||void 0===a?void 0:a[0])||void 0===n?void 0:n.pixYSnap,k=s.move.subchartIdx,w=o.a.useMemo((function(){return z(k)?[]:nn(nn([],i.xy.map((function(e){return m&&h?[m(e[0]),h(e[1],k,0)]:e}))),[[s.move.x&&m?null===m||void 0===m?void 0:m(s.move.x):s.move.pixX,b||s.move.pixY]])}),[s.move.x,i.xy,b,s.move.pixX,s.move.pixY,k,m,h]);return i.isDrawing&&y&&!z(k)&&o.a.createElement(y,an({subcharts:r,subchartIdx:k,xy:i.xy,drawPixXy:w,containerSize:d,calcXaxis:p,calcSubcharts:u,yToPix:h,pixToY:v,style:c},x))||null},rn=a(63),ln=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},dn=function(){return(dn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},cn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},sn=o.a.forwardRef((function(e,t){var a,n,r,i,l,d,c,s,u,p=e.settings,h=e.ChartState,v=e.Dispatch,m=e.rtTicks,f=void 0===m?[]:m,g=p.disableTheme,I=o.a.useRef(p),S=o.a.useState({location:null,expandedSetting:[]}),E=S[0],P=S[1],O=o.a.useCallback((function(){P((function(e){return dn(dn({},e),{location:"menu"})}))}),[]),M=o.a.useCallback((function(){P((function(e){return dn(dn({},e),{location:null})}))}),[]),j=o.a.useCallback((function(e){P((function(t){return dn(dn({},t),{location:e})}))}),[]),F=o.a.useCallback((function(e){P((function(t){return t.expandedSetting.includes(e)?dn(dn({},t),{expandedSetting:t.expandedSetting.filter((function(t){return t!==e}))}):dn(dn({},t),{expandedSetting:cn(cn([],t.expandedSetting),[e])})}))}),[]),U=o.a.useCallback((function(e,t,a){z(t)||z(a)||P({location:"settings",expandedSetting:["graph-sub-"+t+"-y-0-graph-"+a,"sub-"+t]})}),[]),A=h.style.isDarkMode,R=null===(l=null===(i=null===(r=null===(n=null===(a=null===h||void 0===h?void 0:h.subCharts)||void 0===a?void 0:a[0])||void 0===n?void 0:n.yaxis)||void 0===r?void 0:r[0])||void 0===i?void 0:i.graphs)||void 0===l?void 0:l[0],W="candles"===(null===R||void 0===R?void 0:R.chartType)?Y:X,L=h.containerSize.init,G=h.style.xaxis.heightXAxis,N=h.containerSize.width-1,V=h.containerSize.height-1;return o.a.createElement(o.a.Fragment,null,o.a.createElement(rn.a,{styles:Object(rn.b)(da||(da=ln(["\n          .ChartContainer {\n            box-sizing: border-box;\n            position: relative;\n            top: 0;\n            z-index: 1000;\n            width: 100%;\n            height: 100%;\n            background: ",";\n          }\n          .ChartKonvaStage {\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n          }\n        "],["\n          .ChartContainer {\n            box-sizing: border-box;\n            position: relative;\n            top: 0;\n            z-index: 1000;\n            width: 100%;\n            height: 100%;\n            background: ",";\n          }\n          .ChartKonvaStage {\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0;\n            left: 0;\n          }\n        "])),h.style.backgroundColor)}),o.a.createElement(y,{theme:A?b:x,disableTheme:g},o.a.createElement("div",{ref:t,className:"ChartContainer"},R&&W&&L?o.a.createElement(o.a.Fragment,null,o.a.createElement(C.f,{width:h.containerSize.width,height:h.containerSize.height,className:"ChartKonvaStage",listening:!1},o.a.createElement(C.b,{listening:!1},o.a.createElement(C.d,{name:"xaxis-rect",listening:!1,x:.5,y:V-G+.5,width:N,height:G,fill:h.style.xaxis.fillColor,stroke:h.style.borderColor,strokeWidth:1}),h.subCharts.map((function(e,t){return o.a.createElement(o.a.Fragment,{key:"subchart-border-"+t},o.a.createElement(C.d,{name:"subchart rect "+t,listening:!1,x:.5,y:e.top+.5,width:N,height:e.bottom-e.top,stroke:h.style.borderColor,strokeWidth:1}))}))),o.a.createElement(C.b,{listening:!1},0 in h.subCharts?o.a.createElement(W,{subCharts:h.subCharts,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,yToPix:h.calc.yToPix,pixToY:h.calc.pixToY,subchartIdx:0,yaxisIdx:0,graphIdx:0}):null,h.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,a){var n,r,i,l,d,c,s=h.data.find((function(t){return t.id===e.dataId}));return Z(e)&&"indicator"===(null===s||void 0===s?void 0:s.type)&&(null!==(r=null===(n=null===s||void 0===s?void 0:s.data)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>0?(null!==(c=null===(d=null===s||void 0===s?void 0:s.data[(null!==(l=null===(i=null===s||void 0===s?void 0:s.data)||void 0===i?void 0:i.length)&&void 0!==l?l:0)-1])||void 0===d?void 0:d.prices)&&void 0!==c?c:[]).map((function(e,n){var r,i,l,d,c,u,p,v=null!==(l=null===(i=null===(r=s.indicator.graphTypes)||void 0===r?void 0:r[n])||void 0===i?void 0:i.type)&&void 0!==l?l:"line",m="line"===v?X:"bars"===v?D:null;if(!m)return null;var f=null===(c=null===(d=s.indicator.default)||void 0===d?void 0:d.graphProps)||void 0===c?void 0:c.findIndex((function(e){return"areaTresholds"===e.name})),g="line"!==v||z(f)||-1===f?{}:{areaTresholds:null===(p=null===(u=s.indicator.default)||void 0===u?void 0:u.graphProps)||void 0===p?void 0:p[f].val};return o.a.createElement(m,dn({key:v+"-chart-s"+t+"-y0-g"+a+"-l"+n,subCharts:h.subCharts,subchartIdx:t,yaxisIdx:0,graphIdx:a,indSeriesIdx:n,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,yToPix:h.calc.yToPix,pixToY:h.calc.pixToY},g))})):null}))}))})),o.a.createElement(ie,{calcXaxis:h.calc.xaxis,containerSize:h.containerSize,style:h.style}),o.a.createElement(le,{calcSubcharts:h.calc.subcharts,containerSize:h.containerSize,style:h.style,subcharts:h.subCharts})),o.a.createElement(C.b,{listening:!1},o.a.createElement(re,{rtTicks:f,style:h.style,containerSize:h.containerSize,xaxis:h.calc.xaxis}),h.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.graphs.map((function(e,n){var r,i,l,d,c;if("indicator"===e.type){var s=h.data.find((function(t){return t.id===e.dataId})),u=f.findIndex((function(e){return e.dataId===(null===s||void 0===s?void 0:s.id)}));return-1===u||("indicator"!==(null===s||void 0===s?void 0:s.type)||0===(null!==(i=null===(r=null===s||void 0===s?void 0:s.data)||void 0===r?void 0:r.length)&&void 0!==i?i:0))?null:(null===(l=null===s||void 0===s?void 0:s.indicator)||void 0===l?void 0:l.graphTypes).map((function(e,r){var i,l,d,c,p,v=null!==(d=null===(l=null===(i=s.indicator.graphTypes)||void 0===i?void 0:i[r])||void 0===l?void 0:l.type)&&void 0!==d?d:"line",m="line"===v?X:"bars"===v?D:null;return m?o.a.createElement(m,{key:"rtBars-s"+t+"-y"+a+"-g"+n+"-l"+r,subCharts:h.subCharts,subchartIdx:t,yaxisIdx:a,graphIdx:n,indSeriesIdx:r,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,yToPix:h.calc.yToPix,pixToY:h.calc.pixToY,rtTicks:null!==(p=null===(c=null===f||void 0===f?void 0:f[u])||void 0===c?void 0:c.ticks)&&void 0!==p?p:void 0}):null}))}if("chart"===e.type){var p="candles"===e.chartType?Y:"line"===e.chartType?X:null;return p?o.a.createElement(p,{key:"rtBars-s"+t+"-y"+a+"-g"+n,subCharts:h.subCharts,subchartIdx:t,yaxisIdx:a,graphIdx:n,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,rtTicks:null!==(c=null===(d=null===f||void 0===f?void 0:f[0])||void 0===d?void 0:d.ticks)&&void 0!==c?c:void 0}):null}return null}))}))}))),o.a.createElement(C.b,{listening:!1},(null===(d=h.calc.xaxis)||void 0===d?void 0:d.xToPix)&&!!h.calc.yToPix&&h.subCharts.map((function(e,t){return e.yaxis.map((function(e,a){return e.tools.map((function(e,a){var n,r=Lt.find((function(t){return t.type===e.type})),i={};null===(n=e.params)||void 0===n||n.forEach((function(e){i[e.name]=e.val}));var l=r?r.component:null;return l&&r?o.a.createElement(l,dn({key:"trendline-sub-0-y-0-tool-"+a,subcharts:h.subCharts,subchartIdx:t,xy:e.xy,containerSize:h.containerSize,calcXaxis:h.calc.xaxis,calcSubcharts:h.calc.subcharts,yToPix:h.calc.yToPix,pixToY:h.calc.pixToY,style:e.style},i)):null}))}))}))),o.a.createElement(C.b,{listening:!1},h.calc.pointer.isHovering&&!I.current.disablePointerEvents&&h.style.crosshair.useCrosshair?o.a.createElement(oe,{subcharts:h.subCharts,data:h.data,containerSize:h.containerSize,calcPointer:h.calc.pointer,calcXaxis:h.calc.xaxis,style:h.style,pixToY:h.calc.pixToY,rtTicks:f,calcSubcharts:h.calc.subcharts}):null,o.a.createElement(on,{subcharts:h.subCharts,containerSize:h.containerSize,draw:h.draw,calc:h.calc,drawStyle:h.style.draw}))),o.a.createElement(tn,{data:h.data,subcharts:h.subCharts,calcPointer:h.calc.pointer,calcSubcharts:h.calc.subcharts,onGraphLabelClick:U}),o.a.createElement(Qa,{bottomY:null!==(u=null===(s=null===(c=h.subCharts)||void 0===c?void 0:c[h.subCharts.length-1])||void 0===s?void 0:s.bottom)&&void 0!==u?u:0,onOpenClick:O}),o.a.createElement($a,{ChartMenuState:E,onClose:M,onNavigate:j,subCharts:h.subCharts,xaxis:h.calc.xaxis,style:h.style,fullscreen:h.fullscreen,Dispatch:v,onSettingsExpand:F,settings:I.current,data:h.data})):o.a.createElement("div",{style:{height:"100%",background:h.style.backgroundColor}},o.a.createElement(k.a,{sx:{color:"primary.main"},open:!0,invisible:!0},o.a.createElement(w.a,{variant:"h6",component:"div"},"Chart data is loaded.."),o.a.createElement(T.a,{color:"inherit"}))))))}));sn.displayName="CChart";var un,pn=a(258),hn=a.n(pn),vn=function(){return(vn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mn=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},fn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},gn=function(e){var t=e.top,a=e.bottom,n=mn(e,["top","bottom"]),o=yn(n);return o?{yaxis:[o],top:t,bottom:a}:null},yn=function(e){var t=e.dataId,a=e.style,n=e.indicator,o=e.type;return"indicator"!==o||n?{graphs:["indicator"===o&&n?bn({dataId:t,style:a}):xn({dataId:t,style:a})],tools:[]}:null},xn=function(e){var t=e.dataId;return{style:e.style,type:"chart",chartType:"candles",dataId:t}},bn=function(e){return{type:"indicator",dataId:e.dataId,style:e.style}},kn=function(e){var t=e.subCharts,a=e.removeSubchartIdx,n=e.addSubchart,o=e.subchartsHeight,r=150,i=null===n||void 0===n?void 0:n.data,l=z(a)?t:fn(fn([],t.slice(0,a)),t.slice(a+1)),d=l.length+(n?1:0),c=l.map((function(e,t){return e.bottom-e.top>0?e.bottom-e.top:0===t?o-(d-1)*r:r})),s=n?fn(fn([],c),[r]):c,u=s.slice(1).reduce((function(e,t){return e+t}),0);if(o>=250+u){var p=o-s[0]-u,h=s.map((function(e,t){return Math.max((0===t?250:r)-e,0)})),v=h.reduce((function(e,t){return e+t}),0),m=0===v?0:p>=v?1:p/v,f=s.map((function(e,t){return e+Math.floor(m*h[t])})),g=f.slice(1).reduce((function(e,t){return e+t}),0),y=l.reduce((function(e,t,a){return 0===a?[vn(vn({},t),{top:0,bottom:o-g})]:fn(fn([],e),[vn(vn({},t),{top:e[e.length-1].bottom,bottom:e[e.length-1].bottom+f[a]})])}),[]),x=i&&"indicator"===i.type?i.indicator.graphTypes.length:void 0;console.log(x);var b=(i&&0!==y.length?[gn({top:y[y.length-1].bottom,bottom:o,dataId:i.id,style:La(i.type,n.darkMode,void 0,x),indicator:"indicator"===i.type?i.indicator:void 0,type:i.type})]:[]).filter((function(e){return null!==e}));return fn(fn([],y),b)}var k=o/(s[0]+u),w=s.slice(1).map((function(e){return Math.min(Math.ceil(e*k),150)})),T=w.reduce((function(e,t){return e+t}));y=l.reduce((function(e,t,a){return 0===a?[vn(vn({},t),{top:0,bottom:o-T})]:fn(fn([],e),[vn(vn({},t),{top:e[e.length-1].bottom,bottom:e[e.length-1].bottom+w[a-1]})])}),[]),x=i&&"indicator"===i.type?i.indicator.graphTypes.length:void 0,b=(i&&0!==y.length?[gn({top:y[y.length-1].bottom,bottom:o,dataId:i.id,style:La(i.type,n.darkMode,void 0,x),indicator:"indicator"===i.type?i.indicator:void 0,type:i.type})]:[]).filter((function(e){return null!==e}));return fn(fn([],y),b)},wn=function(){return(wn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Tn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Cn=function(e,t,a,n){var o,r,i,l,d,c,s,u=e.calc,p=e.containerSize,h=e.stateControl,v=e.pointer,m=u.xaxis,f=h.shallUpdate,g=h.prevAction,y=p.width,x=p.height,b=null===g||void 0===g?void 0:g.drag,k=x-n,w=v.drag.first,T=v.drag.last,C=v.drag.isDragging,I=(!!(null===(r=null===(o=v.drag)||void 0===o?void 0:o.delta)||void 0===r?void 0:r[0])||!!(null===(l=null===(i=v.drag)||void 0===i?void 0:i.delta)||void 0===l?void 0:l[1]))&&!(null===(d=v.drag)||void 0===d?void 0:d.first)&&f.includes("drag");if((["drawTool","editTool","resizeSubchart"].includes(null!==(c=null===b||void 0===b?void 0:b.type)&&void 0!==c?c:"")||["translate","scale"].includes(null!==(s=null===b||void 0===b?void 0:b.type)&&void 0!==s?s:"")&&!v.drag.last)&&b)return wn(wn({},b),{shallUpdate:I,start:!1,end:T});if(C&&a)return{type:"drawTool",start:!0,end:!1,shallUpdate:!0};if(C&&!a){var S=v.drag.initial,E=function(e,t,a){if(!e)return null;var n=null!==a&&void 0!==a?a:10,o=t.find((function(t){return e[1]>=t.bottom-n&&e[1]<t.bottom+n}));if(!o)return null;var r=t.indexOf(o);return-1===r?null:r}(S,t);if(null!==E&&E!==t.length-1)return{type:"resizeSubchart",start:w,end:T,subchartIdx:E,bottomInitY:t[E].bottom,shallUpdate:!0};var P=function(e,t,a,n){if(!e||!t||!a)return[];var o=ne(e,t);if(null===o)return[];var r=a.totalTranslatedX,i=a.scaledWidthPerTick;return t[o].yaxis.map((function(a,l){var d,c,s,u=null===(s=null===(c=null===(d=n.subcharts)||void 0===d?void 0:d[o])||void 0===c?void 0:c.yaxis)||void 0===s?void 0:s[l];return u?a.tools.map((function(a,n){return a.xy.map((function(a,d){var c=$(a[0],r,i),s=ee(a[1],t[o].bottom,u.decimals,u.translatedY,u.heightPerPt);return e[0]>=c-10&&e[0]<=c+10&&e[1]>=s-10&&e[1]<=s+10?{subchartIdx:o,yaxisIdx:l,toolIdx:n,toolPtIdx:d}:null})).filter((function(e){return null!==e}))})).flat():[]})).flat()}(S,t,m,u);if(P.length>0){var O=P[0],M=O.subchartIdx,Z=O.yaxisIdx,j=O.toolIdx,D=O.toolPtIdx;return{type:"editTool",start:w,end:T,subchartIdx:M,yaxisIdx:Z,toolIdx:j,toolPtIdx:D,toolInitXy:t[M].yaxis[Z].tools[j].xy[D],shallUpdate:!0}}return S[0]>=0&&S[0]<0+y&&S[1]>=0&&S[1]<0+k?{type:"translate",start:w,end:T,shallUpdate:!0}:S[0]>=0&&S[0]<0+y&&S[1]>=0+k?{type:"scale",start:w,end:T,initScaledWidthPerTick:m.scaledWidthPerTick,initTranslatedX:m.totalTranslatedX,shallUpdate:!0}:null}return null},In=function(e,t,a){var n=e-1-a.xaxis.heightXAxis;return kn({subchartsHeight:n,subCharts:t})},Sn=function(){return(Sn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},En=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Pn=function(e,t){var a=t.subchartIdx,n=e.subCharts[a].yaxis.map((function(e){return e.graphs.map((function(e){return e.dataId}))})).flat(),o=e.containerSize.height-e.style.xaxis.heightXAxis,r=kn({subchartsHeight:o,subCharts:e.subCharts,removeSubchartIdx:a});return Sn(Sn({},e),{data:e.data.filter((function(e){return!n.includes(e.id)})),subCharts:r})},On=function(e,t){var a=t.dataSeries,n=t.graphName,o=t.subchartIdx,r=t.id,i=t.indSrcId,l=t.indicator,d=t.indSrcLineIdx,c=e.subCharts[o].yaxis[0].graphs.length;if(!i&&l||i&&!l)return e;var s=kt(a,n,r,l,i,d);if(!s)return e;var u=s.id,p="indicator"===s.type?s.indicator.graphTypes.length:void 0,h=La(s.type,e.style.isDarkMode,c,p),v="indicator"===s.type&&l&&i?bn({dataId:u,style:h}):xn({dataId:u,style:h});Z(v)&&s.data[s.data.length-1].prices.length>1&&(v.style.strokeColor=s.data[s.data.length-1].prices.map((function(t,a){return function(t){return Ua(e.style.isDarkMode?Ya:Xa,t)}(a)})));var m=e.subCharts[o];return ft(ft(e,["data"],En(En([],e.data),[s])),["subCharts",o],Sn(Sn({},m),{yaxis:[Sn(Sn({},m.yaxis[0]),{graphs:En(En([],m.yaxis[0].graphs),[v])})]}))},Mn=function(e,t){var a,n=t.datas,o=null===(a=null===n||void 0===n?void 0:n[0])||void 0===a?void 0:a.id,r=n.map((function(e,t){var a,n;return"chart"===e.type?e:Sn(Sn({},e),{indSrcId:null!==(a=e.indSrcId)&&void 0!==a?a:o,id:null!==(n=e.id)&&void 0!==n?n:"indi_"+t.toString().padStart(2,"0")})})),i=rt()(r.map((function(e,t){return"indicator"!==e.type||z(null===e||void 0===e?void 0:e.id)?null:Ot(r,e.id)})).flat().filter((function(e){return null!==e}))),l=r.map((function(e){return"chart"===e.type?Tt(e.data,e.name,e.id):null})),d=En([],l);i.forEach((function(e,t){var a=null===r||void 0===r?void 0:r.findIndex((function(t,a){return t.id===e})),n=null===r||void 0===r?void 0:r[a],o="indicator"===(null===n||void 0===n?void 0:n.type)?n:null,i=null===o||void 0===o?void 0:o.indSrcId,l=z(i)?null:null===d||void 0===d?void 0:d.find((function(e){return(null===e||void 0===e?void 0:e.id)===i}));"indicator"===(null===n||void 0===n?void 0:n.type)&&l&&o&&(d[a]=wt(null===l||void 0===l?void 0:l.data,null===l||void 0===l?void 0:l.id,o.indicator,void 0,e,o.name))}));var c=d.filter((function(e){return null!==e}));c.length!==r.length&&console.warn("Warning - not all indicators could be initialized.");var s=n?function(e,t){var a=-1,n=0,o=t?t.map((function(t,o){var r,i,l,d,c,s,u,p,h,v,m,f,g,y;if(-1===a||z(null===(r=null===t||void 0===t?void 0:t.graphProps)||void 0===r?void 0:r.subchartIdx)&&("chart"===t.type||"indicator"===t.type&&t.indicator.default.newSubchart)?(a++,n=0):n++,"chart"===t.type){var x=null!==(i=["line","candles","area"].find((function(e){var a;return e===(null===(a=null===t||void 0===t?void 0:t.graphProps)||void 0===a?void 0:a.chartType)})))&&void 0!==i?i:"candles";return{dataId:t.id,dataIdx:o,type:"chart",chartType:x,style:Ea(Ea(Ea({},Aa),{strokeColor:e?Wa.strokeColor[0]:Ra.strokeColor[0]}),null===(l=null===t||void 0===t?void 0:t.graphProps)||void 0===l?void 0:l.style),subchartIdx:null!==(c=null===(d=null===t||void 0===t?void 0:t.graphProps)||void 0===d?void 0:d.subchartIdx)&&void 0!==c?c:a,yaxisIdx:0,graphIdx:null!==(u=null===(s=null===t||void 0===t?void 0:t.graphProps)||void 0===s?void 0:s.graphIdx)&&void 0!==u?u:n}}return"indicator"===t.type?{dataId:null!==(p=t.id)&&void 0!==p?p:"",dataIdx:o,type:"indicator",style:{strokeColor:(null===(v=null===(h=null===t||void 0===t?void 0:t.graphProps)||void 0===h?void 0:h.style)||void 0===v?void 0:v.strokeColor)?t.graphProps.style.strokeColor:t.indicator.graphTypes.length<=1?Ra.strokeColor:e?Ya.slice(0,t.indicator.graphTypes.length):Xa.slice(0,t.indicator.graphTypes.length)},subchartIdx:null!==(f=null===(m=null===t||void 0===t?void 0:t.graphProps)||void 0===m?void 0:m.subchartIdx)&&void 0!==f?f:a,yaxisIdx:0,graphIdx:null!==(y=null===(g=null===t||void 0===t?void 0:t.graphProps)||void 0===g?void 0:g.graphIdx)&&void 0!==y?y:n}:null})).filter((function(e){return!!e})).sort((function(e,t){return e&&t&&e.subchartIdx!==t.subchartIdx?e.subchartIdx-t.subchartIdx:e&&t&&e.subchartIdx===t.subchartIdx?e.graphIdx-t.graphIdx:0})):[];return rt()(null===o||void 0===o?void 0:o.map((function(e){return e.subchartIdx}))).map((function(e,t){return{top:0,bottom:0,yaxis:[0].map((function(e,a){return{tools:[],graphs:null===o||void 0===o?void 0:o.filter((function(e){return e.subchartIdx===t})).map((function(e){return e.subchartIdx,e.yaxisIdx,e.graphIdx,Pa(e,["subchartIdx","yaxisIdx","graphIdx"])}))}}))}}))}(e.style.isDarkMode,n):[],u=In(e.containerSize.height,s,e.style);return Sn(Sn({},e),{subCharts:u,data:c})},Zn=function(){return(Zn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},jn=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Dn=[{prop:"backgroundColor",path:["style","backgroundColor"]},{prop:"crosshairStrokeColor",path:["style","crosshair","strokeColor"]},{prop:"crosshairXmarkerBackgroundColor",path:["style","crosshair","xMarkerBackgroundColor"]},{prop:"crosshairXmarkerStrokeColor",path:["style","crosshair","xMarkerStrokeColor"]},{prop:"crosshairXmarkerTextColor",path:["style","crosshair","xMarkerTextColor"]},{prop:"crosshairYmarkerBackgroundColor",path:["style","crosshair","yMarkerBackgroundColor"]},{prop:"crosshairYmarkerStrokeColor",path:["style","crosshair","yMarkerStrokeColor"]},{prop:"crosshairYmarkerTextColor",path:["style","crosshair","yMarkerTextColor"]},{prop:"gridStrokeColor",path:["style","grid","strokeColor"]},{prop:"toggleCrosshair",path:["style","crosshair","useCrosshair"],toggle:!0},{prop:"toggleFullscreen",path:["fullscreen"],toggle:!0},{prop:"toggleGridX",path:["style","grid","useGridX"],toggle:!0},{prop:"toggleGridY",path:["style","grid","useGridY"],toggle:!0},{prop:"xAxisFillColor",path:["style","xaxis","fillColor"]},{prop:"xAxisStrokeColor",path:["style","xaxis","strokeColor"]},{prop:"xAxisTextColor",path:["style","xaxis","fontColor"]},{prop:"yAxisStrokeColor",path:["style","yaxis","strokeColor"]},{prop:"yAxisTextColor",path:["style","yaxis","fontColor"]}],zn=function(e,t){var a;if(function(e){return"modifyIndicatorData"===e.task}(t)){var n=t.params,o=n.dataId,r=n.newIndSrcId,i=n.newParam,l=n.prevData,d=e.data.find((function(e){return e.id===o}));if("indicator"!==(null===d||void 0===d?void 0:d.type))return e;var c=i&&d.indicator.params.map((function(e,t){return t!==(null===i||void 0===i?void 0:i.paramIdx)?e:Zn(Zn({},e),{val:i.newValue})}));return Zn(Zn({},e),{data:jt(e,o,{newParams:c,newIndSrcId:r},l)})}if(function(e){return"modifyChartData"===e.task}(t)){var s=t.params,u=s.dataId,p=s.newDatasets;return Ct(e,u,p)}if(function(e){return"setToolProp"===e.task}(t)){var h=t.params,v=h.newValue,m=h.prop,f=h.subchartIdx,g=h.yaxisIdx,y=h.toolIdx,x=h.toolParamIdx,b=e.subCharts[f].yaxis[g].tools[y];return"strokeColor"===m||"anchorColor"===m?ft(e,["subCharts",f,"yaxis",g,"tools",y,"style",m],v):"hLineYlevel"===m?ft(e,["subCharts",f,"yaxis",g,"tools",y,"xy"],[[b.xy[0][0],v]]):"toolParam"!==m||z(x)?e:ft(e,["subCharts",f,"yaxis",g,"tools",y,"params",x,"val"],v)}if(function(e){return"setGraphProp"===e.task}(t)){var k=t.params,w=(v=k.newValue,m=k.prop,f=k.subchartIdx,g=k.yaxisIdx,k.graphIdx);return["strokeColor","candleDownColor","candleUpColor","candleStrokeColor","candleWickStrokeColor"].includes(m)?ft(e,["subCharts",f,"yaxis",g,"graphs",w,"style",m],v):"chartType"!==m||"line"!==v&&"candles"!==v?"dataId"===m?ft(e,["subCharts",f,"yaxis",g,"graphs",w,"dataId"],v):e:ft(e,["subCharts",f,"yaxis",g,"graphs",w,"chartType"],v)}if(function(e){return"setGeneralProp"===e.task}(t)){var T=t.params,C=T.newValue,I=T.prop,S=null===Dn||void 0===Dn?void 0:Dn.find((function(e){return e.prop===I}));if(!S)return e;var E=S.path;v=S.toggle?!function(e,t){if("object"!==typeof e)return null;var a=e;try{return t.forEach((function(e,t){if(!(e in a)||"number"!==typeof e&&"string"!==typeof e)throw new Error("path at position "+t+" '"+e+"' not found in src object/array -1");a=a[e]})),a}catch(n){console.error("Error at getStateProp(): ",n)}}(e,E):C;return ft(e,E,v)}if(function(e){return"addData"===e.task}(t))return Mn(e,t.params);if(function(e){return"addSubchart"===e.task}(t))return function(e,t){var a=t.dataSeries,n=t.graphName,o=t.id,r=t.indicator,i=t.reset,l=t.indSrcId,d=e.containerSize.height,c=kt(a,n,o,r,l);if(!c)return e;var s="indicator"===c.type?c.indicator.graphTypes.length:void 0,u=La(c.type,e.style.isDarkMode,void 0,s),p=c.id;if(0===e.subCharts.length||i){var h=d-e.style.xaxis.heightXAxis,v=gn({top:0,bottom:h,dataId:p,style:u,indicator:r,type:c.type});return v?Sn(Sn({},e),{data:[c],subCharts:[v]}):e}var m=d-e.style.xaxis.heightXAxis,f=kn({subchartsHeight:m,subCharts:e.subCharts,addSubchart:{data:c,darkMode:e.style.isDarkMode}});return Sn(Sn({},e),{data:En(En([],e.data),[c]),subCharts:f})}(e,t.params);if(function(e){return"removeSubchart"===e.task}(t))return Pn(e,t.params);if(function(e){return"addGraph"===e.task}(t))return On(e,t.params);if(function(e){return"removeGraph"===e.task}(t))return function(e,t){var a=t.subchartIdx,n=t.yaxisIdx,o=t.graphIdx,r=e.subCharts[a].yaxis[n].graphs[o].dataId,i=e.subCharts[a];return 0===o&&1===i.yaxis[n].graphs.length?Pn(e,{subchartIdx:a}):ft(gt(e,["subCharts",a,"yaxis",n,"graphs",o]),["data"],e.data.filter((function(e){return e.id!==r})))}(e,t.params);if(function(e){return"swapSubcharts"===e.task}(t))return function(e,t){var a=t.subchartIdx1,n=t.subchartIdx2,o=a<=n?a:n,r=a>n?a:n,i=e.subCharts[o],l=e.subCharts[r],d=i.bottom-i.top,c=l.bottom-l.top,s=c-d;return o===r||z(o)||z(r)||r>=e.subCharts.length?e:vn(vn({},e),{subCharts:fn(fn(fn(fn(fn([],e.subCharts.slice(0,o)),[vn(vn({},l),{bottom:i.top+c,top:i.top})]),e.subCharts.slice(o+1,r).map((function(e,t){return vn(vn({},e),{top:e.top+s,bottom:e.bottom+s})}))),[vn(vn({},i),{top:l.top+s,bottom:l.bottom})]),e.subCharts.slice(r+1))})}(e,t.params);if(function(e){return"removeTool"===e.task}(t)){var P=t.params;f=P.subchartIdx,g=P.yaxisIdx,y=P.toolIdx;return gt(e,["subCharts",f,"yaxis",g,"tools",y])}if(function(e){return"clearChart"===e.task}(t))return function(e,t){var a=t.mode,n=Sn(Sn({},e.subCharts[0]),{top:0,bottom:"tools"!==a?e.containerSize.height-1-e.style.xaxis.heightXAxis:e.subCharts[0].bottom,yaxis:[Sn(Sn({},e.subCharts[0].yaxis[0]),{graphs:"all"===a||"indicators"===a?[e.subCharts[0].yaxis[0].graphs[0]]:e.subCharts[0].yaxis[0].graphs,tools:"all"===a||"tools"===a?[]:e.subCharts[0].yaxis[0].tools})]});return"all"===a||"indicators"===a?ft(ft(e,["subCharts"],[n]),["data"],[e.data.find((function(t){var a,n,o,r,i,l;return t.id===(null===(l=null===(i=null===(r=null===(o=null===(n=null===(a=e.subCharts)||void 0===a?void 0:a[0])||void 0===n?void 0:n.yaxis)||void 0===o?void 0:o[0])||void 0===r?void 0:r.graphs)||void 0===i?void 0:i[0])||void 0===l?void 0:l.dataId)}))]):"tools"===a?ft(e,["subCharts"],En([n],e.subCharts)):e}(e,t.params);if(function(e){return"setTheme"===e.task}(t)){var O=t.params.theme,M=(O.name,jn(O,["name"])),Z=M.isDarkMode?Da:ja;return Zn(Zn({},e),{style:Zn(Zn(Zn({},Z),M),{crosshair:Zn(Zn({},Z.crosshair),M.crosshair),draw:Zn(Zn({},Z.draw),M.draw),grid:Zn(Zn({},Z.grid),M.grid),xaxis:Zn(Zn({},Z.xaxis),M.xaxis),yaxis:Zn(Zn({},Z.yaxis),M.yaxis)})})}if(function(e){return"draw"===e.task}(t)){var j=t.params.xy;return(null===(a=Lt.find((function(e){return e.type===t.params.type})))||void 0===a?void 0:a.nPoints)&&t.params.type?!j&&t.params.type?Zn(Zn({},e),{draw:Zn(Zn({},e.draw),{isDrawing:!0,xy:[],type:t.params.type})}):e:Zn(Zn({},e),{draw:Ma})}if(function(e){return"updateInteractionState"===e.task}(t)){var D=ut()(e.calc.xaxis,t.params.newState.calc.xaxis)?{}:{xaxis:Zn(Zn({},e.calc.xaxis),t.params.newState.calc.xaxis)},F=ut()(e.subCharts,t.params.newState.subCharts)?{}:{subCharts:t.params.newState.subCharts},X=ut()(e.containerSize,t.params.newState.containerSize)?{}:{containerSize:t.params.newState.containerSize};return Zn(Zn(Zn(Zn({},e),X),F),{pointer:t.params.newState.pointer,draw:t.params.newState.draw,calc:Zn(Zn(Zn({},e.calc),t.params.newState.calc),D)})}return e},Fn=function(){return(Fn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Xn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Yn=function(e,t,a,n){var o=1/Math.pow(10,a),r=(e-t)/o/n,i=Math.floor(Math.log10(r))||0;return parseFloat(Array(6).fill(0).map((function(a,r){var l,d=o*Math.pow(10,i+Math.floor(r/3))*(r%3===0?1:r%3===1?2.5:r%3===2?5:0);return{intervalStep:d,optimum:(l=d,Math.abs((e-t)/l-n))}})).reduce((function(e,t){return t.optimum<(null===e||void 0===e?void 0:e.optimum)?t:e})).intervalStep.toFixed(a))},Un=function(e,t,a,n,o){var r=o.xStart,i=o.xEnd,l=o.pixXEnd,d=t[a],c=d.top,s=d.bottom,u=Math.max(Math.round((s-c)/75),3);return t[a].yaxis[n].graphs.map((function(t){var a,n,o,d,c,s=e.find((function(e){return e.id===t.dataId}));if(!(null===s||void 0===s?void 0:s.data))return null;var p,h,v,m=null!==(a=null===s||void 0===s?void 0:s.data)&&void 0!==a?a:[],f=null===(n=s)||void 0===n?void 0:n.indicator,g=m.slice(r,i+1),y=(p=g,h=null===(o=null===f||void 0===f?void 0:f.default)||void 0===o?void 0:o.fixedYScale,v=null===f||void 0===f?void 0:f.graphTypes,M(p[0])&&h?h[1]:Math.max.apply(Math,p.map((function(e){if(M(e)){var t=Math.max.apply(Math,e.prices.filter((function(e,t){var a,n;return null!==e&&["line","bars"].includes(null!==(n=null===(a=null===v||void 0===v?void 0:v[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")})));return z(t)?0:t}return E(e)?e.high:e.close})))),x=function(e,t,a){return M(e[0])&&t?t[0]:Math.min.apply(Math,e.map((function(e){if(M(e)){var t=Math.min.apply(Math,e.prices.filter((function(e,t){var n,o;return null!==e&&["line","bars"].includes(null!==(o=null===(n=null===a||void 0===a?void 0:a[t])||void 0===n?void 0:n.type)&&void 0!==o?o:"")})));return z(t)?0:t}return E(e)?e.low:e.close})))}(g,null===(d=null===f||void 0===f?void 0:f.default)||void 0===d?void 0:d.fixedYScale,null===f||void 0===f?void 0:f.graphTypes),b=null!==(c=null===s||void 0===s?void 0:s.decimals)&&void 0!==c?c:0,k=Yn(y,x,b,u);return{lastDataset:{data:m[i],x:i,pixX:l,dateString:""},curData:g,yMaxExact:y,yMax:Math.ceil(y/k)*k,yMinExact:x,yMin:Math.floor(x/k)*k}}))},An=function(e,t,a,n,o){var r,i,l=n.map((function(e,a){return e.yaxis.map((function(e,n){return e.graphs.map((function(e,o){return e.dataId===t?{subchartIdx:a,yaxisIdx:n,graphIdx:o}:null}))})).flat()})).flat().filter((function(e){return null!==e})),d=null===l||void 0===l?void 0:l[0];if(!d||!o)return null;var c=function(e){return o(e,d.subchartIdx,d.yaxisIdx)},s=null===(i=null===(r=a.find((function(e){return e.id===t&&"indicator"===e.type})))||void 0===r?void 0:r.indicator)||void 0===i?void 0:i.graphTypes;return M(e)?{pixPrices:e.prices.map((function(e,t){var a,n;return e&&["line","bars"].includes(null!==(n=null===(a=null===s||void 0===s?void 0:s[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")?c(e):null}))}:E(e)?{pixOpen:c(e.open),pixHigh:c(e.high),pixLow:c(e.low),pixClose:c(e.close)}:P(e)?{pixClose:c(e.close)}:null},Rn=function(){return(Rn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Wn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},Ln=function(e,t,a){return e&&t&&a?Rn(Rn({},t),{xy:Wn(Wn([],t.xy),[a])}):Ma},Gn=function(e,t,a,n){var o,r,i=a.xy,l=null!==(r=null===(o=Lt.find((function(e){return e.type===a.type})))||void 0===o?void 0:o.params)&&void 0!==r?r:[];return function(e,t,a){return mt(e,t,a,"add")}(e,[t,"yaxis",0,"tools"],{xy:i,type:a.type,style:n.draw,params:l})},Nn=function(e,t,a,n){var o,r,i,l,d,c,s,u,p,h,v,m,f,g,y,x,b,k,w,T,C,I,S,E,P,O,M,Z,j,D;if(!a||!n||!t)return null;var F=n.name,X=n.multiply,Y=function(e){return{minute:J(e,"minutes"),hour:J(e,"hours"),day:J(e,"days"),week:J(e,"weeks"),month:J(e,"months"),year:J(e,"years")}}(e),U=Y.minute,A=Y.hour,R=Y.day,W=Y.week,L=Y.month,G=Y.year,N=t.years.findIndex((function(e){return e.year===G})),V=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[N])||void 0===r?void 0:r.months)||void 0===i?void 0:i.findIndex((function(e){return e.month===L})),H=null===(u=null===(s=null===(c=null===(d=null===(l=t.years)||void 0===l?void 0:l[N])||void 0===d?void 0:d.months)||void 0===c?void 0:c[V])||void 0===s?void 0:s.weeks)||void 0===u?void 0:u.findIndex((function(e){return e.week===W})),B=null===(y=null===(g=null===(f=null===(m=null===(v=null===(h=null===(p=t.years)||void 0===p?void 0:p[N])||void 0===h?void 0:h.months)||void 0===v?void 0:v[V])||void 0===m?void 0:m.weeks)||void 0===f?void 0:f[H])||void 0===g?void 0:g.days)||void 0===y?void 0:y.findIndex((function(e){return e.day===R})),K=null===(I=null===(C=null===(T=null===(w=null===(k=null===(b=null===(x=t.years)||void 0===x?void 0:x[N])||void 0===b?void 0:b.months)||void 0===k?void 0:k[V])||void 0===w?void 0:w.weeks)||void 0===T?void 0:T[H])||void 0===C?void 0:C.days)||void 0===I?void 0:I[B];if(-1===N||-1===V||-1===H||-1===B||!K)return null;var q=a.period<(null===(E=null===(S=null===_||void 0===_?void 0:_[2])||void 0===S?void 0:S.range)||void 0===E?void 0:E[0]),$=a.period<(null===(O=null===(P=null===_||void 0===_?void 0:_[1])||void 0===P?void 0:P.range)||void 0===O?void 0:O[0]),Q=q?null===K||void 0===K?void 0:K.hours.findIndex((function(e){return e.hour===A})):void 0,ee=q&&!z(Q)&&-1!==(null===(Z=null===(M=null===K||void 0===K?void 0:K.hours)||void 0===M?void 0:M[Q])||void 0===Z?void 0:Z.minutes.findIndex((function(e){return e.minute===U})))?null===(D=null===(j=null===K||void 0===K?void 0:K.hours)||void 0===j?void 0:j[Q])||void 0===D?void 0:D.minutes.findIndex((function(e){return e.minute===U})):void 0;if(q&&z(Q)||$&&z(ee))return null;if(a.name===F&&1===X)return F;var te={yearIdx:N,monthIdx:V,weekIdx:H,dayIdx:B,hourIdx:Q,minuteIdx:ee},ae=!Q&&!ee,ne="months"===F?X:1,oe="weeks"===F?X:1,re="days"===F?X:1,ie="hours"===F?X:1;return!Vn(Y,t,te)||Q||ee?"years"!==F&&Hn(Y,t,te,ne)&&ae?"months":!["years","months"].includes(F)&&Bn(Y,t,te,oe)&&ae?"weeks":!["years","months","weeks"].includes(F)&&Kn(Y,t,te,re)&&ae?"days":["years","months","weeks","days"].includes(F)||!_n(Y,t,te,ie)||ee?"minutes"===F&&qn(Y,t,te,X)?"minutes":null:"hours":"years"},Vn=function(e,t,a){var n,o,r,i=e.day,l=e.week,d=e.month,c=a.yearIdx;if(!t)return!1;var s=null===(r=null===(o=null===(n=t.years)||void 0===n?void 0:n[c])||void 0===o?void 0:o.months)||void 0===r?void 0:r[0];return s.weeks[0].days[0].day===i&&s.weeks[0].week===l&&s.month===d},Hn=function(e,t,a,n){void 0===n&&(n=1);var o=e.day,r=e.week,i=a.yearIdx,l=a.monthIdx;return!((l+1)%n!==0||-1===i||-1===l||!t)&&(t.years[i].months[l].weeks[0].days[0].day===o&&t.years[i].months[l].weeks[0].week===r)},Bn=function(e,t,a,n){void 0===n&&(n=1);var o=e.day,r=e.week,i=a.yearIdx,l=a.monthIdx,d=a.weekIdx;if(!t)return!1;if(t.years[i].months[l].weeks[d].days[0].day===o&&t.years[i].months[l].weeks[d].week===r){if(2===n){var c=0;t.years[i].months[l].weeks.forEach((function(e){return c+=e.days.length}));for(var s=0,u=0,p=0,h=Math.round(c/2),v=0;v<t.years[i].months[l].weeks.length;v++){var m=t.years[i].months[l].weeks[v];Math.abs(s+m.days.length-h)<Math.abs(u-h)&&(u=s+m.days.length,p=v+1),s+=m.days.length}return d===p}if(1===n)return!(1===d&&t.years[i].months[l].weeks[0].days.length<3)&&!(d===t.years[i].months[l].weeks.length-1&&t.years[i].months[l].weeks[d].days.length<3)}return!1},Kn=function(e,t,a,n){var o,r,i,l,d,c,s;void 0===n&&(n=1);var u=e.day,p=a.yearIdx,h=a.monthIdx,v=a.weekIdx,m=a.dayIdx;if(!t)return!1;var f=null===(s=null===(c=null===(d=null===(l=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[p])||void 0===r?void 0:r.months)||void 0===i?void 0:i[h])||void 0===l?void 0:l.weeks)||void 0===d?void 0:d[v])||void 0===c?void 0:c.days)||void 0===s?void 0:s[m];if(-1===m||-1===v||-1===h||-1===p||!f)return!1;if(f.day===u&&1===n)return!0;if(f.day===u&&2===n){if(t.years[p].months[h].weeks[v].days.length<=3)return!1;if(4===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m)||5===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m)||6===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m||4===m)||7===t.years[p].months[h].weeks[v].days.length&&(0===m||2===m||5===m))return!0}return!1},_n=function(e,t,a,n){var o,r,i,l,d,c,s,u;void 0===n&&(n=1);var p=e.hour,h=a.yearIdx,v=a.monthIdx,m=a.weekIdx,f=a.dayIdx,g=a.hourIdx;if(!t)return!1;var y=null===(s=null===(c=null===(d=null===(l=null===(i=null===(r=null===(o=t.years)||void 0===o?void 0:o[h])||void 0===r?void 0:r.months)||void 0===i?void 0:i[v])||void 0===l?void 0:l.weeks)||void 0===d?void 0:d[m])||void 0===c?void 0:c.days)||void 0===s?void 0:s[f],x=z(g)?null:null===(u=null===y||void 0===y?void 0:y.hours)||void 0===u?void 0:u[g];return!(-1===f||-1===m||-1===v||-1===h||-1===g||!x||z(g))&&(g%n===0&&x.hour===p)},qn=function(e,t,a,n){void 0===n&&(n=1);var o=e.minute,r=a.yearIdx,i=a.monthIdx,l=a.weekIdx,d=a.dayIdx,c=a.hourIdx,s=a.minuteIdx;if(!t)return!1;var u=t.years[r].months[i].weeks[l].days[d];if(-1===r||-1===i||-1===l||-1===d)return!1;if(z(c)||-1===c||z(s)||-1===s)return!1;var p=u.hours[c].minutes[s];return s%n===0&&p.minute===o},Jn=function(){return(Jn=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$n=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},Qn=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},eo=function(e,t,a){return e>=0?Math.min(t*(1+Math.abs(e)/(a/2)),a/3):Math.max(t/(1+Math.abs(e)/(a/2)),1)},to=function(e,t,a,n,o){var r,i,l=e?-t/e:0,d=Math.max(Math.ceil(l),0),c=d*e+t,s={xStart:d,pixXStart:c,xEnd:0,xLast:0,xUnlimited:0,pixXEnd:0,curTicks:[],optChartPeriod:null},u=o.find((function(e){return e.id===(null===n||void 0===n?void 0:n.dataId)}));if(!a||!n||!e||!u||!u.dateStat||0===(null===(r=null===u||void 0===u?void 0:u.data)||void 0===r?void 0:r.length))return s;var p=null!==(i=u.data.length)&&void 0!==i?i:0,h=Math.min(a,p*e+t),v=a,m=Math.floor((v-t)/e),f=Math.min(m,p-1),g=function(e,t,a,n){if(!e.chartPeriod||!t)return null;var o=e.chartPeriod,r=o.name,i=o.multiply,l=_.findIndex((function(e){return e.name===r}));if(-1===l)return null;var d=Q(a,0,n),c=Jn({},t.accAmt);Object.entries(c).forEach((function(e){var t=e[0],a=t;t!==r?c[a]=c[a]*d/c[r]:c[r]=d}));var s=Math.max(Math.round(a/50),4),u=function(e,t){return Math.abs(e/t-s)},p=_.slice(l).map((function(e,t){var a=e.name,n=0===t?Qn([1],e.scaleMultiplys).filter((function(e){return e>=i})).map((function(e){return e/i})):Qn([1],e.scaleMultiplys);return Qn([1],n).map((function(t,n){var o=c[a],r=e.period;return{name:a,multiply:t,amt:o,period:r}}))})).flat().reduce((function(e,t,a){return u(t.amt,t.multiply)<u(e.amt,e.multiply)?t:e}));return p.amt,$n(p,["amt"])}(u.meta,u.dateStat,a,e),y=u.meta.chartPeriod,x=null===u||void 0===u?void 0:u.dateStat,b=g&&y&&!z(x)?Array(f-d+1).fill(0).map((function(t,a){var n=d+a,o=Nn(u.data[n].date,x,y,Jn({},g));if(o){var r=q(u.data[n].date,o);return{x:c+e*a,dateString:r}}return null})).filter((function(e){return null!==e})):[];return{xLast:p-1,xStart:d,pixXStart:c,xEnd:f,xUnlimited:m,pixXEnd:h,curTicks:b,optChartPeriod:g,xToPix:function(a,n){return $(a,null!==n&&void 0!==n?n:t,e)},pixToX:function(a,n){return Q(a,null!==n&&void 0!==n?n:t,e)}}},ao=a(254),no=a(257),oo=function(){return(oo=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ro=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},io=function(e,t,a,n,r,i,l,d,c,s){var u,p,h,v,m,f=n,g=r,y=o.a.useRef({calc:{subcharts:[],pointer:(m=t).calc.pointer,xaxis:m.calc.xaxis},containerSize:m.containerSize,pointer:m.pointer,stateControl:{prevAction:null,lastMainChartData:[],lastUpdate:new Date,shallUpdate:[],customEffectChartState:null}}),x=null!==(p=null===(u=null===e||void 0===e?void 0:e.current)||void 0===u?void 0:u.getBoundingClientRect())&&void 0!==p?p:{},b=x.top,k=x.left;o.a.useEffect((function(){var t=e;if((null===t||void 0===t?void 0:t.current)&&!s&&"static"===d&&!z(b)&&!z(k)){var a=y.current,n=t.current,o=n.clientWidth,r=n.clientHeight,i={top:b,left:k,width:"static"===d&&void 0!==f?f:o,height:"static"===d&&void 0!==g?g:r,init:!0};t.current.style.position="relative",t.current.style.width="static"===d&&void 0!==f?f+"px":"100%",t.current.style.height="static"===d&&void 0!==g?g+"px":"100%",t.current.style.top="0px",t.current.style.left="0px",y.current=oo(oo({},a),{stateControl:oo(oo({},a.stateControl),{shallUpdate:ro(ro([],a.stateControl.shallUpdate),["containerResize"])}),containerSize:i})}}),[d,e,s,f,g,k,b]),o.a.useEffect((function(){var t=e;if(null===t||void 0===t?void 0:t.current)if(c)t.current.style.pointerEvents="none";else if(t.current.style.pointerEvents="auto",s){var a=y.current,n=function(e){if(t&&t.current){var n=window.innerWidth,o=window.innerHeight;y.current=oo(oo({},a),{stateControl:oo(oo({},a.stateControl),{shallUpdate:ro(ro([],a.stateControl.shallUpdate),["containerResize"])}),containerSize:{top:0,left:0,width:n,height:o,init:!0}})}};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),function(){window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}}}),[e,s,c]);var w=o.a.useCallback((function(t,a){var n;if(!("responsive"!==d||z(t)||z(a)||s)&&(null===(n=null===e||void 0===e?void 0:e.current)||void 0===n?void 0:n.parentElement)){var o=y.current,r=e.current.parentElement.getBoundingClientRect(),i=r.top,l=r.left;console.log("VM",d,i,l,t,a),y.current=oo(oo({},o),{stateControl:oo(oo({},o.stateControl),{shallUpdate:ro(ro([],o.stateControl.shallUpdate),["containerResize"])}),containerSize:{top:i,left:l,width:t,height:a,init:!0}})}}),[s,d,e]);Object(ao.a)({targetRef:null!==(v={current:null===(h=e.current)||void 0===h?void 0:h.parentElement})&&void 0!==v?v:void 0,onResize:w});var T=function(e){return[e[0]-0,e[1]-0]};return Object(no.a)({onPinch:function(e){var t=e.active,a=e.origin,n=e.movement,o=e.first;e.offset;y.current.pointer=oo(oo({},y.current.pointer),{pinch:{isPinching:t,origin:T(a),movementInitial:n,first:o}}),y.current.stateControl.shallUpdate=ro(ro([],y.current.stateControl.shallUpdate.filter((function(e){return"pointerMove"!==e}))),["pinch"])},onDrag:function(e){var t=y.current.stateControl.shallUpdate.includes("drag"),a=y.current.pointer.drag.delta,n=t&&a?a[0]+e.delta[0]:e.delta[0],o=t&&a?a[1]+e.delta[1]:e.delta[1],r=e.xy,i=e.initial,l=e.movement,d=e.first,c=e.last,s=e.active,u=e.ctrlKey,p=t&&y.current.pointer.drag.first||d,h=t&&y.current.pointer.drag.last||c;(!s||p||e.delta[0]||e.delta[1])&&(y.current=oo(oo({},y.current),{pointer:oo(oo({},y.current.pointer),{drag:{isDragging:s,xy:T(r),initial:T(i),movementInitial:l,last:h,first:p,delta:[n,o],ctrlKey:u}}),stateControl:oo(oo({},y.current.stateControl),{shallUpdate:ro(ro([],y.current.stateControl.shallUpdate),["drag"]),lastUpdate:y.current.stateControl.lastUpdate})}))},onMove:function(e){(!e.active||e.first||e.delta[0]||e.delta[1])&&(y.current=oo(oo({},y.current),{pointer:oo(oo({},y.current.pointer),{move:{isMoving:e.active,xy:T(e.xy)}}),stateControl:oo(oo({},y.current.stateControl),{shallUpdate:ro(ro([],y.current.stateControl.shallUpdate),["pointerMove"])})}))},onHover:function(e){y.current=oo(oo({},y.current),{pointer:oo(oo({},y.current.pointer),{isHovering:e.active}),stateControl:oo(oo({},y.current.stateControl),{shallUpdate:ro(ro([],y.current.stateControl.shallUpdate),["pointerMove"])})})},onWheel:function(e){var t=y.current.stateControl.shallUpdate.includes("wheel"),a=y.current.pointer.wheel.delta,n=t&&a?a[0]+e.delta[0]:e.delta[0],o=t&&a?a[1]+e.delta[1]:e.delta[1];y.current=oo(oo({},y.current),{pointer:oo(oo({},y.current.pointer),{wheel:{delta:[n,o],isWheeling:e.active}}),stateControl:oo(oo({},y.current.stateControl),{shallUpdate:ro(ro([],y.current.stateControl.shallUpdate),["wheel"])})})},onDragEnd:function(e){var t=e.xy,a=(e.initial,e.first),n=e.last,o=e.movement;y.current=oo(oo({},y.current),{pointer:oo(oo({},y.current.pointer),{dragPointerUp:{isDragPointerUp:!0,xy:T(t),initial:T(t),movementInitial:o,last:n,first:a}}),stateControl:oo(oo({},y.current.stateControl),{shallUpdate:ro(ro([],y.current.stateControl.shallUpdate),["dragEnd"])})})}},{domTarget:s?document.body:e,transform:function(e){var t=e[0],a=e[1];return[t-(null!==k&&void 0!==k?k:0),a-(null!==b&&void 0!==b?b:0)]},drag:{experimental_preventWindowScrollY:!0,useTouch:!0},enabled:!c&&y.current.containerSize.init,eventOptions:{passive:!1,capture:!1},pinch:{transform:function(e){return[e[0],e[1]]}},wheel:{transform:function(e){return[e[0],e[1]]}}}),y},lo=function(){return(lo=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},co=function(e,t,a,n){var o,r,i,l,d=e.move,c=e.dragPointerUp,s=e.isHovering,u=t.xaxis,p=(null===(l=null===(i=null===(r=null===(o=null===a||void 0===a?void 0:a[0])||void 0===o?void 0:o.yaxis)||void 0===r?void 0:r[0])||void 0===i?void 0:i.graphs)||void 0===l?void 0:l[0])&&j(a[0].yaxis[0].graphs[0])?a[0].yaxis[0].graphs[0]:null,h=null===d||void 0===d?void 0:d.xy;if(!p||!d||!a||!h)return null;var v=ne(h,a);if(null===v)return Za;var m=function(e,t,a,n){if("chart"!==(null===t||void 0===t?void 0:t.type)||!n)return null;var o=a.find((function(e){return e.id===t.dataId}));if("chart"!==(null===o||void 0===o?void 0:o.type))return null;var r=o.meta,i=o.dateStat,l=e.scaledWidthPerTick,d=e.totalTranslatedX,c=Math.round(Q(null===n||void 0===n?void 0:n.xy[0],d,l)),s=$(c,d,l);if(c<0||c>o.data.length-1||!i)return{xUnlimited:c,pixXUnlimSnap:s};var u=Math.abs(Math.round(c)),p=e.optChartPeriod;if(!p||!r.chartPeriod||!i)return{xUnlimited:c,pixXUnlimSnap:s};var h=Nn(o.data[u].date,i,r.chartPeriod,lo({},p)),v=$(u,d,l);return{x:u,xDateString:q(o.data[u].date,h||r.chartPeriod.name),pixXSnap:v,xUnlimited:c,pixXUnlimSnap:s}}(u,p,n,d);if(!m)return null;if(!("x"in m))return function(e,t,a){return{isHovering:s,move:{pixX:h[0],pixXUnlimSnap:t,pixXSnap:0,pixY:h[1],x:null,xUnlimited:e,subchartIdx:a,snapDatasets:[],xDateString:""},click:{clickedSubchartIdx:null}}}(m.xUnlimited,m.pixXUnlimSnap,v);var f=m.xUnlimited,g=m.x,y=m.xDateString,x=m.pixXSnap,b=m.pixXUnlimSnap,k=c&&c.xy?ne(c.xy,a):null,w=a[v].yaxis.map((function(e,o){return e.graphs.map((function(e,r){var i,l=null===(i=n.find((function(t){return t.id===(null===e||void 0===e?void 0:e.dataId)})))||void 0===i?void 0:i.data,d=l?ae(h[1],l[g],a,v,o,t.subcharts):null,c=d&&d.length>0?d[0].pixY:null,s=d&&d.length>0?d[0].y:null,u=t.subcharts[v].yaxis[o],p=u.decimals,m=u.translatedY,f=u.heightPerPt;return{yaxisIdx:o,graphIdx:r,data:null===l||void 0===l?void 0:l[g],y:te(h[1],a[v].bottom,p,m,f),ySnap:s,pixYSnap:c,dateString:y}}))})).flat().sort((function(e,t){return null===e.ySnap&&null===t.ySnap?0:null===e.ySnap&&null!==t.ySnap||null!==e.ySnap&&null!==t.ySnap&&Math.abs(parseFloat(e.ySnap)-e.y)>Math.abs(parseFloat(t.ySnap)-t.y)?1:null!==e.ySnap&&null===t.ySnap||null!==e.ySnap&&null!==t.ySnap&&Math.abs(parseFloat(e.ySnap)-e.y)<Math.abs(parseFloat(t.ySnap)-t.y)?-1:0}));return{isHovering:s,move:{pixX:h[0],pixXSnap:x,pixXUnlimSnap:b,pixY:h[1],x:g,xUnlimited:f,subchartIdx:v,snapDatasets:w,xDateString:y},click:{clickedSubchartIdx:k}}},so=function(){return(so=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},uo=function(e,t){for(var a=0,n=t.length,o=e.length;a<n;a++,o++)e[o]=t[a];return e},po=function(){return(po=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ho=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},vo=function(e){var t=e.ContainerRef,a=e.data,n=e.rtData,r=e.width,i=e.height,l=e.settings,d=o.a.useMemo((function(){return function(e,t){var a=Oa&&void 0===(null===e||void 0===e?void 0:e.isDarkMode)||(null===e||void 0===e?void 0:e.isDarkMode)?Fa:za,n=t?ft(a,["calc","xaxis"],Ea(Ea({},a.calc.xaxis),{initialWidthPerTick:t,scaledWidthPerTick:t})):a;return Ea(Ea({},n),{subCharts:[],style:Ea(Ea(Ea({},e),n.style),{grid:Ea(Ea({},n.style.grid),null===e||void 0===e?void 0:e.grid),yaxis:Ea(Ea({},n.style.yaxis),null===e||void 0===e?void 0:e.yaxis),xaxis:Ea(Ea({},n.style.xaxis),null===e||void 0===e?void 0:e.xaxis),crosshair:Ea(Ea({},n.style.crosshair),null===e||void 0===e?void 0:e.crosshair),draw:Ea(Ea({},n.style.draw),null===e||void 0===e?void 0:e.draw)})})}(l.initialState,l.initWidthPerTick)}),[]),c=l.maxUpdatesPerSec?l.maxUpdatesPerSec:15,s=l.disablePointerEvents,u=("static"!==l.containerMode||i&&r)&&l.containerMode?l.containerMode:"responsive",p=r,h=i,v=o.a.useReducer(zn,d),m=v[0],f=v[1],g=io(t,d,0,p,h,m.containerSize.left,m.containerSize.top,u,s,m.fullscreen);n&&(g.current.rtData=n),hn()(t,m.fullscreen,{onClose:function(){return f({task:"setGeneralProp",params:{prop:"toggleFullscreen"}})}});var y=m.draw,x=y.xy,b=ho(y,["xy"]),k={subcharts:m.subCharts.map((function(e){return{yaxis:e.yaxis}})),draw:po(po({},b),{nPixXy:x.length})};ut()(g.current.stateControl.customEffectChartState,k)||(g.current.stateControl.customEffectChartState=k),o.a.useEffect((function(){var e=function(){var e,t,a,n,o,r,i,l,d,c,u,p=g.current,h=p.stateControl;if(s)p.pointer.drag=po(po({},p.pointer.drag),{delta:[0,0],movementInitial:[0,0]});else{var v=m.subCharts,y=!1;if(p.rtData&&p.rtData.length>0&&v.length===p.calc.subcharts.length&&p.calc.xaxis.xUnlimited>p.calc.xaxis.xLast&&p.calc.subcharts.forEach((function(e,t){var a,n,o=v[t],r=null!==(n=null===(a=p.rtData)||void 0===a?void 0:a.filter((function(e){return o.yaxis.map((function(e){return e.graphs.map((function(e){return e.dataId}))})).flat().includes(e.dataId)})).map((function(e){return po(po({},e),{data:e.data.slice(1,p.calc.xaxis.xUnlimited-p.calc.xaxis.xLast+1)})})))&&void 0!==n?n:[],i=Math.max.apply(Math,e.yaxis.map((function(e){return e.yMaxExact}))),l=r&&0!==r.length?Math.max.apply(Math,r.map((function(e){return e.data.map((function(e){var t;return E(e)&&null!==(t=e.high)&&void 0!==t?t:e.close}))})).flat()):0,d=Math.min.apply(Math,e.yaxis.map((function(e){return e.yMinExact}))),c=r&&0!==r.length?Math.min.apply(Math,r.map((function(e){return e.data.map((function(e){var t;return E(e)&&null!==(t=e.low)&&void 0!==t?t:e.close}))})).flat()):l;r&&(l>i||c<d)&&(y=!0,console.log("RT-DATA OUT OF Y-RANGE! -> rtMax:",p.rtData,l,", rtMin:",c,", curMax:",i,", curMin:",d))})),h.shallUpdate.length>0||y){h.shallUpdate.includes("dragEnd")||(p.pointer.dragPointerUp.isDragPointerUp=!1);var x=m.style.xaxis.heightXAxis,b=p.containerSize.width-1,k=(null===(n=null===(a=null===(t=null===(e=null===v||void 0===v?void 0:v[0])||void 0===e?void 0:e.yaxis)||void 0===t?void 0:t[0])||void 0===a?void 0:a.graphs)||void 0===n?void 0:n[0])&&j(v[0].yaxis[0].graphs[0])?v[0].yaxis[0].graphs[0]:null,w=m.data.find((function(e){return e.id===(null===k||void 0===k?void 0:k.dataId)})),T=m.draw.isDrawing,C=function(e,t,a,n){var o,r,i,l,d,c,s,u=e.stateControl,p=e.pointer,h=u.shallUpdate,v=u.customEffectChartState,m=u.prevAction,f=e.calc.xaxis,g="drawTool"===(null===(o=null===m||void 0===m?void 0:m.drag)||void 0===o?void 0:o.type)&&!a,y=null===(r=p.wheel)||void 0===r?void 0:r.delta[1],x=(null===(i=p.wheel)||void 0===i?void 0:i.isWheeling)&&h.includes("wheel")&&y?{wheelDeltaY:y,type:"wheelScale"}:null,b=Cn(e,t,a,n),k=h.includes("containerResize")&&t.length>0,w=(null===m||void 0===m?void 0:m.pinch)&&e.pointer.pinch.isPinching?m.pinch:h.includes("pinch")&&e.pointer.pinch.isPinching?{type:"pinchScale",initScaledWidthPerTick:f.scaledWidthPerTick,initTranslatedX:f.totalTranslatedX}:null,T=h.includes("deps"),C=!p.drag.isDragging&&["resizeSubchart","editTool"].includes(null!==(l=null===b||void 0===b?void 0:b.type)&&void 0!==l?l:"")||k,I=!p.drag.isDragging&&["resizeSubchart","editTool"].includes(null!==(d=null===b||void 0===b?void 0:b.type)&&void 0!==d?d:""),S={drag:b,pinch:w,wheel:x,containerResize:k,deps:T,shallUpdateCalcSubcharts:["scale","translate"].includes(null!==(c=null===b||void 0===b?void 0:b.type)&&void 0!==c?c:"")&&(null===b||void 0===b?void 0:b.shallUpdate)||"resizeSubchart"===(null===b||void 0===b?void 0:b.type)||k||T||!!x,shallUpdateXaxis:null!==(s=!!x||T||!!w||(null===b||void 0===b?void 0:b.shallUpdate)&&("translate"===b.type||"scale"===b.type))&&void 0!==s&&s};return{action:S,stateControl:wn(wn({},u),{prevAction:wn(wn({},S),{drag:I||g?null:b}),customEffectChartState:C?null:v})}}(p,v,T,x),I=C.action,S=C.stateControl;h=po(po({},S),{prevAction:I?po({},I):null}),g.current.stateControl=S;var O=I.containerResize?In(p.containerSize.height,v,m.style):v,Z="resizeSubchart"===(null===(o=null===I||void 0===I?void 0:I.drag)||void 0===o?void 0:o.type)?function(e,t,a){var n;if("resizeSubchart"!==(null===(n=null===e||void 0===e?void 0:e.drag)||void 0===n?void 0:n.type))return t;var o=e.drag,r=o.subchartIdx,i=Math.min(Math.max(o.bottomInitY+a.movementInitial[1],t[r].top+10,0===r?50:0),t[r+1].bottom-10),l=i-o.bottomInitY;return a.ctrlKey&&0!==r?Tn(Tn(Tn([],t.slice(0,r).map((function(e,t){return wn(wn({},e),{bottom:e.bottom+l})})).map((function(e,t,a){return 0===t?e:wn(wn({},e),{top:a[t-1].bottom})}))),[wn(wn({},t[r]),{bottom:i,top:t[r].top+l}),wn(wn({},t[r+1]),{top:i})]),t.slice(r+2)):Tn(Tn(Tn([],t.slice(0,r)),[wn(wn({},t[r]),{bottom:i}),wn(wn({},t[r+1]),{top:i})]),t.slice(r+2))}(I,O,p.pointer.drag):O;null!==(r=h.lastMainChartData!==(null===w||void 0===w?void 0:w.data))&&void 0!==r&&r&&"chart"===(null===w||void 0===w?void 0:w.type)&&(p.calc.xaxis=function(e,t,a){return Jn(Jn({},e),{totalTranslatedX:-(t.length+10-a/e.scaledWidthPerTick)*e.scaledWidthPerTick})}(p.calc.xaxis,w.data,b));var D=I.shallUpdateXaxis?function(e,t,a,n){var o,r,i,l,d,c,s,u,p,h,v=e.calc.xaxis,m=e.pointer,f=e.containerSize.width-1,g=null===(o=m.wheel)||void 0===o?void 0:o.delta[1],y=!!t.wheel,x=!!t.pinch,b=null===(r=m.move)||void 0===r?void 0:r.xy,k=null===(i=null===t||void 0===t?void 0:t.drag)||void 0===i?void 0:i.shallUpdate,w="translate"===(null===(l=null===t||void 0===t?void 0:t.drag)||void 0===l?void 0:l.type)&&k,T="scale"===(null===(d=null===t||void 0===t?void 0:t.drag)||void 0===d?void 0:d.type)&&k,C=n.find((function(e){return e.id===(null===a||void 0===a?void 0:a.dataId)})),I=null===(c=m.drag)||void 0===c?void 0:c.initial;if(!C||!(null===(s=t.drag)||void 0===s?void 0:s.shallUpdate)&&!t.wheel&&!t.deps&&!t.containerResize||!I&&(null===(u=t.drag)||void 0===u?void 0:u.shallUpdate))return v;var S=C.data.length;if(x){var E=t.pinch,P=E.initScaledWidthPerTick,O=E.initTranslatedX;if("pinchScale"!==E.type||z(P)||z(O))return v;var M=eo(null===(p=null===m||void 0===m?void 0:m.pinch)||void 0===p?void 0:p.movementInitial[0],P,f),Z=O,j=I[0],D=O-(X=(F=(I[0]-Z)/P)*M+Z)+j;return Jn(Jn(Jn({},v),{scaledWidthPerTick:M,totalTranslatedX:D}),to(M,D,f,a,n))}if(y){M=eo(g/2,v.scaledWidthPerTick,f),Z=v.totalTranslatedX,j=b?b[0]:0;var F=((b?b[0]:0)-Z)/v.scaledWidthPerTick,X=Math.round(F)*M+v.totalTranslatedX;return D=v.totalTranslatedX-X+j,Jn(Jn(Jn({},v),{scaledWidthPerTick:M,totalTranslatedX:D}),to(M,D,f,a,n))}if(w)return D=Math.max(Math.min(m.drag.delta[0]+v.totalTranslatedX,f-2*v.scaledWidthPerTick),-(S-3)*v.scaledWidthPerTick),Jn(Jn(Jn({},v),{totalTranslatedX:D}),to(v.scaledWidthPerTick,D,f,a,n));if(T){var Y=t.drag;return O=Y.initTranslatedX,(P=Y.initScaledWidthPerTick)?(M=eo(null===(h=null===m||void 0===m?void 0:m.drag)||void 0===h?void 0:h.movementInitial[0],P,f),Z=O,j=I[0],D=O-(X=(F=(I[0]-Z)/P)*M+Z)+j,Jn(Jn(Jn({},v),{scaledWidthPerTick:M,totalTranslatedX:D}),to(M,D,f,a,n))):v}return t.deps?Jn(Jn({},v),to(v.scaledWidthPerTick,v.totalTranslatedX,f,a,n)):v}(p,I,k,m.data):p.calc.xaxis;p.calc.xaxis=D;var F=I.shallUpdateCalcSubcharts||y?function(e,t,a,n){return e&&t&&a?0===e.length||0===a.length?null:e.map((function(o,r){var i=o.bottom,l=o.top,d=Math.max(Math.round((i-l)/75),3);return{yaxis:o.yaxis.map((function(o,c){var s,u,p,h,v,m,f,g=Un(a,e,r,c,t),y=null!==(p=Math.max.apply(Math,Xn(Xn([],g.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.yMaxExact)&&void 0!==t?t:null})).filter((function(e){return null!==e}))),null!==(u=null===(s=null===n||void 0===n?void 0:n.filter)||void 0===s?void 0:s.call(n,(function(e){return o.graphs.map((function(e,t){return e.dataId})).includes(e.dataId)})).map((function(e){return e.data.map((function(e){var t;return E(e)&&null!==(t=e.high)&&void 0!==t?t:e.close}))})).flat())&&void 0!==u?u:[])))&&void 0!==p?p:0,x=null!==(m=Math.min.apply(Math,Xn(Xn([],g.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.yMinExact)&&void 0!==t?t:null})).filter((function(e){return null!==e}))),null!==(v=null===(h=null===n||void 0===n?void 0:n.filter)||void 0===h?void 0:h.call(n,(function(e){return o.graphs.map((function(e,t){return e.dataId})).includes(e.dataId)})).map((function(e){return e.data.map((function(e){var t;return E(e)&&null!==(t=e.low)&&void 0!==t?t:e.close}))})).flat())&&void 0!==v?v:[])))&&void 0!==m?m:0,b=null!==(f=Math.max.apply(Math,o.graphs.map((function(e){var t,n;return null!==(n=null===(t=a.find((function(t){return t.id===e.dataId})))||void 0===t?void 0:t.decimals)&&void 0!==n?n:0}))))&&void 0!==f?f:0,k=Yn(y,x,b,d),w=Math.ceil(y/k)*k,T=Math.floor(x/k)*k,C=(i-l)/((w||0)-(T||0))/Math.pow(10,b),I=-ee(T||0,i,b,0,C)+i,S=function(e){return ee(e,i,b,I,C)},O=te(i,i,b,I,C),Z=S(Math.ceil(O/k)*k),j=C*k/Math.pow(10,-b),D=Math.floor((Z-10-l-10)/j),z=!D||D<0?[]:Array(D).fill(0).map((function(e,t){var a=Z-(t+1)*j,n=te(a,i,b,I,C);return{pixY:a,label:(Math.round(n*Math.pow(10,b))/Math.pow(10,b)).toString()}})),F=g&&g.map((function(e,n){if(!(null===e||void 0===e?void 0:e.curData))return e;var r=e.curData.map((function(e,r){var i,l,d=null===(l=null===(i=a.find((function(e){var t;return e.id===(null===(t=o.graphs)||void 0===t?void 0:t[n].dataId)&&"indicator"===e.type})))||void 0===i?void 0:i.indicator)||void 0===l?void 0:l.graphTypes,c=M(e)?{pixPrices:e.prices.map((function(e,t){var a,n;return e&&["line","bars"].includes(null!==(n=null===(a=null===d||void 0===d?void 0:d[t])||void 0===a?void 0:a.type)&&void 0!==n?n:"")?S(e):null}))}:E(e)?{pixOpen:S(e.open),pixHigh:S(e.high),pixLow:S(e.low),pixClose:S(e.close)}:P(e)?{pixClose:S(e.close)}:null;return{pixX:t.scaledWidthPerTick*r,pixY:c}}));return Fn(Fn({},e),{curTicks:r})}));return{pixY0:S(0),yMaxExact:y,yMinExact:x,yMax:w,yMin:T,heightPerPt:C,decimals:b,optIntervalY:k,translatedY:I,graphs:F,drawTicks:z}}))}})):null}(Z,p.calc.xaxis,m.data,y?p.rtData:void 0):null;F&&(p.calc.subcharts=F);var X=h.shallUpdate.includes("pointerMove")?co(p.pointer,p.calc,v,m.data):null;X&&(p.calc.pointer=X);var Y="editTool"===(null===(i=null===I||void 0===I?void 0:I.drag)||void 0===i?void 0:i.type)&&(null===(l=null===I||void 0===I?void 0:I.drag)||void 0===l?void 0:l.shallUpdate)?function(e,t,a){var n,o,r,i=e.pointer,l=e.calc,d=l.pointer;if("editTool"!==(null===(n=null===a||void 0===a?void 0:a.drag)||void 0===n?void 0:n.type))return t;var c=null===a||void 0===a?void 0:a.drag,s=c.subchartIdx,u=c.yaxisIdx,p=t[s],h=l.subcharts[s].yaxis[u],v=d.move.snapDatasets.length>0&&!!d.move.snapDatasets[0].ySnap,m=null!==(o=d.move.x)&&void 0!==o?o:d.move.xUnlimited,f=v?parseFloat(null!==(r=d.move.snapDatasets[0].ySnap)&&void 0!==r?r:""):te(i.drag.xy[1],p.bottom,h.decimals,h.translatedY,h.heightPerPt),g=c.toolIdx,y=c.toolPtIdx;return ft(t,[s,"yaxis",u,"tools",g,"xy",y],[m,f])}(p,Z,I):Z,U="drawTool"===(null===(d=null===I||void 0===I?void 0:I.drag)||void 0===d?void 0:d.type)?function(e,t,a,n){var o,r,i;if(!e.pointer.dragPointerUp.isDragPointerUp)return{subcharts:t,draw:a};var l=e.calc,d=l.pointer,c=l.xaxis,s=e.pointer,u=a.type,p=null===(o=Lt.find((function(e){return e.type===u})))||void 0===o?void 0:o.nPoints,h=ne(s.drag.initial,t);if(!u||!p||z(h))return{draw:Ma,subcharts:t};var v=null===(r=l.subcharts)||void 0===r?void 0:r[h],m=null===(i=null===v||void 0===v?void 0:v.yaxis)||void 0===i?void 0:i[0];if(!v||!m)return{draw:Ma,subcharts:t};var f=d.move.pixXSnap?d.move.pixXSnap:s.drag.xy[0],g=d.move.snapDatasets.length>0&&d.move.snapDatasets[0].pixYSnap?d.move.snapDatasets[0].pixYSnap:s.drag.xy[1],y=Q(f,c.totalTranslatedX,c.scaledWidthPerTick),x=m.decimals,b=m.translatedY,k=m.heightPerPt,w=te(g,t[h].bottom,x,b,k);return a.xy.length<p-1?{draw:Ln(a.type,a,[y,w]),subcharts:t}:{draw:Ma,subcharts:Gn(t,h,Ln(a.type,a,[y,w]),n)}}(p,Y,m.draw,m.style):{subcharts:Y,draw:m.draw},A=U.subcharts,R=U.draw,W=A,L=(p.stateControl,ho(p,["stateControl"])),G=F?po({subcharts:F},function(e,t){return{yToPix:function(a,n,o,r){var i,l;if(!(null===(l=null===(i=null===e||void 0===e?void 0:e[n])||void 0===i?void 0:i.yaxis)||void 0===l?void 0:l[o]))return 0;var d=t[n].yaxis[o],c=d.heightPerPt,s=d.decimals,u=d.translatedY,p=void 0!==r?r:u;return e[n].bottom-a*Math.pow(10,s)*c+p},pixToY:function(a,n,o,r){var i,l;if(!(null===(l=null===(i=null===e||void 0===e?void 0:e[n])||void 0===i?void 0:i.yaxis)||void 0===l?void 0:l[o]))return 0;var d=t[n].yaxis[o],c=d.heightPerPt,s=d.decimals,u=d.translatedY,p=void 0!==r?r:u;return(e[n].bottom+p-a)/c*Math.pow(10,-s)}}}(W,F)):null,N=X?{pointer:X}:null;f({task:"updateInteractionState",params:{newState:po(po({},L),{calc:po(po({xaxis:D},N),G),subCharts:W,draw:R})}});var V=null===(c=m.data.find((function(e){var t;return e.id===(null===(t=m.subCharts)||void 0===t?void 0:t[0].yaxis[0].graphs[0].dataId)})))||void 0===c?void 0:c.data;g.current=po(po({},g.current),{stateControl:po(po({},g.current.stateControl),{lastUpdate:new Date,shallUpdate:[],lastMainChartData:null!==(u=V)&&void 0!==u?u:null})})}}};g.current.stateControl.shallUpdate.push("deps"),e(),console.log("updated Timer");var t=window.setInterval(e,Math.round(1e3/c));return function(){window.clearInterval(t)}}),[g.current.stateControl.customEffectChartState,c,s,m.style,m.data]);var w=function(e,t,a,n){var o,r,i,l,d,c,s,u,p,h,v,m,f,g;if(!e||!n.yToPix)return[];var y=null===(s=null===(c=null===(d=null===(l=null===(i=null===(r=null===(o=n.subcharts)||void 0===o?void 0:o[0])||void 0===r?void 0:r.yaxis)||void 0===i?void 0:i[0])||void 0===l?void 0:l.graphs)||void 0===d?void 0:d[0])||void 0===c?void 0:c.curTicks)||void 0===s?void 0:s[(null===(f=null===(m=null===(v=null===(h=null===(p=null===(u=n.subcharts)||void 0===u?void 0:u[0])||void 0===p?void 0:p.yaxis)||void 0===h?void 0:h[0])||void 0===v?void 0:v.graphs)||void 0===m?void 0:m[0])||void 0===f?void 0:f.curTicks.length)-1],x=null!==(g=n.yToPix&&e&&y&&e.reduce((function(e,o,r){var i;return uo(uo([],e),[{data:(null===o||void 0===o?void 0:o.data)?null===o||void 0===o?void 0:o.data.map((function(e,t){return so(so({},e),{x:n.xaxis.xLast+t})})):[],dataId:null===(i=null===t||void 0===t?void 0:t[null===o||void 0===o?void 0:o.dataIdx])||void 0===i?void 0:i.id,ticks:o.data.map((function(e,r){var i;return{pixX:y.pixX+(r+0)*n.xaxis.scaledWidthPerTick,pixY:An(e,null===(i=null===t||void 0===t?void 0:t[null===o||void 0===o?void 0:o.dataIdx])||void 0===i?void 0:i.id,t,a,n.yToPix)}}))}])}),[]))&&void 0!==g?g:[];return x.map((function(e){return Mt(t,e.dataId)})).flat().reduce((function(e,o,r){var i,l,d,c,s,u,p,h=t.find((function(e){return e.id===o&&"indicator"===e.type}));if(!h||"indicator"!==(null===h||void 0===h?void 0:h.type))return e;var v=h.indicator.indicatorFn,m=h.indSrcId,f=h.indicator.params,g=uo(uo([],null!==(l=null===(i=t.find((function(e){return e.id===m})))||void 0===i?void 0:i.data)&&void 0!==l?l:[]),null!==(u=null===(s=null===(c=null===(d=e.find)||void 0===d?void 0:d.call(e,(function(e){return(null===e||void 0===e?void 0:e.dataId)===m})))||void 0===c?void 0:c.data)||void 0===s?void 0:s.slice(1))&&void 0!==u?u:[]),x=uo([],null!==(p=h.data)&&void 0!==p?p:[]);if(!v||!(null===g||void 0===g?void 0:g.length)||!y)return e;var b=v(so({chartData:g,prevData:x},f.reduce((function(e,t){var a;return so(so({},e),((a={})[t.name]=t.val,a))}),{}))).slice(h.data.length-1),k={data:b.map((function(e,t){return so(so({},e),{x:x.length-1+t})})),dataId:o,ticks:b.map((function(e,r){return{pixX:y.pixX+r*n.xaxis.scaledWidthPerTick,pixY:An(e,o,t,a,n.yToPix)}}))};return uo(uo([],e),[k])}),x)}(n,m.data,m.subCharts,m.calc);return o.a.useEffect((function(){var e,t,n,o;if(m.containerSize.init){var r=null===a||void 0===a?void 0:a[0];if("chart"===(null===r||void 0===r?void 0:r.type)&&(null===(e=null===r||void 0===r?void 0:r.data)||void 0===e?void 0:e.length)){var i=null===(t=m.data)||void 0===t?void 0:t[0];if(0===m.data.length)return console.log("Chart is initialized."),void f({task:"addData",params:{datas:a}});if(i.id===r.id&&"chart"===i.type){if(r.data.length===i.data.length)return;r.data.length>i.data.length?(console.log("Chart is updated"),f({task:"modifyChartData",params:{dataId:i.id,newDatasets:null===(o=null===(n=null===w||void 0===w?void 0:w[0])||void 0===n?void 0:n.data)||void 0===o?void 0:o.slice(1,-1)}})):r.data.length<i.data.length&&console.log("HERE THERE SHOULD BE LOADED A NEW GRAPH")}}}}),[a,m.containerSize.init,m.data,m.subCharts]),[m,f,w]},mo=a(138),fo=a(585),go=a(586),yo=a(587),xo=a(575),bo=a(137),ko=a(558),wo=Object(ko.a)(fo.a)((function(e){return{color:e.theme.palette.primary.main}})),To=function(e){var t=e.setDarkMode,a=Object(s.a)();return Object(h.jsxs)(u.a,{id:"layoutRoot",sx:{height:"100%"},children:[Object(h.jsx)(go.a,{sx:{height:64,bgcolor:a.palette.background.paper,boxShadow:"10px 10px"},children:Object(h.jsxs)(yo.a,{sx:{pr:1},children:[Object(h.jsx)(p.a,{variant:"h6",sx:{flexGrow:1},color:"primary",children:Object(h.jsx)("a",{href:"/",children:"react-tech-chart"})}),Object(h.jsx)(xo.a,{sx:{color:a.palette.primary.main},children:Object(h.jsx)(p.a,{children:"Docs"})}),Object(h.jsx)(wo,{"aria-label":"menu",onClick:function(){return t((function(e){return!e}))},children:Object(h.jsx)(bo.Icon,{path:mo.c,size:1.2})}),Object(h.jsx)(wo,{edge:"start","aria-label":"menu",children:Object(h.jsx)(bo.Icon,{path:mo.a,size:1.2})}),Object(h.jsx)(wo,{edge:"start","aria-label":"menu",children:Object(h.jsx)(bo.Icon,{path:mo.b,size:1.2})})]})}),e.children]})},Co=[{name:"Meta Platforms",data:[{date:"2021-01-05T00:00:00.000Z",open:268.290009,high:272.399994,low:268.209991,close:270.970001,volume:9871600},{date:"2021-01-06T00:00:00.000Z",open:262,high:267.75,low:260.01001,close:263.309998,volume:24354100},{date:"2021-01-07T00:00:00.000Z",open:265.899994,high:271.609985,low:264.779999,close:268.73999,volume:15789800},{date:"2021-01-08T00:00:00.000Z",open:268.309998,high:268.950012,low:263.179993,close:267.570007,volume:18528300},{date:"2021-01-11T00:00:00.000Z",open:260.480011,high:263.470001,low:255.899994,close:256.839996,volume:30412300},{date:"2021-01-12T00:00:00.000Z",open:256.630005,high:259.720001,low:250.300003,close:251.089996,volume:26383500},{date:"2021-01-13T00:00:00.000Z",open:251.550003,high:253.949997,low:249.199997,close:251.639999,volume:19528900},{date:"2021-01-14T00:00:00.000Z",open:253.399994,high:255.029999,low:244.610001,close:245.639999,volume:29739400},{date:"2021-01-15T00:00:00.000Z",open:247.899994,high:253.860001,low:247.160004,close:251.360001,volume:24942900},{date:"2021-01-19T00:00:00.000Z",open:256.899994,high:262.200012,low:252.720001,close:261.100006,volume:28028500},{date:"2021-01-20T00:00:00.000Z",open:268.929993,high:270.320007,low:263.600006,close:267.480011,volume:25199900},{date:"2021-01-21T00:00:00.000Z",open:269.26001,high:273.600006,low:267.48999,close:272.869995,volume:20838700},{date:"2021-01-22T00:00:00.000Z",open:272.01001,high:278.470001,low:272,close:274.5,volume:21954e3},{date:"2021-01-25T00:00:00.000Z",open:278.140015,high:280.100006,low:271.51001,close:278.01001,volume:19087e3},{date:"2021-01-26T00:00:00.000Z",open:278.140015,high:285.390015,low:277.809998,close:282.049988,volume:19373600},{date:"2021-01-27T00:00:00.000Z",open:282.529999,high:283.450012,low:268.119995,close:272.140015,volume:35346200},{date:"2021-01-28T00:00:00.000Z",open:277.179993,high:286.790009,low:264.700012,close:265,volume:37758800},{date:"2021-01-29T00:00:00.000Z",open:265.299988,high:266.559998,low:254.850006,close:258.329987,volume:30389500},{date:"2021-02-01T00:00:00.000Z",open:259.519989,high:264.170013,low:254.910004,close:262.01001,volume:22914300},{date:"2021-02-02T00:00:00.000Z",open:264,high:268.850006,low:263.269989,close:267.079987,volume:17320800},{date:"2021-02-03T00:00:00.000Z",open:265.619995,high:269.200012,low:263.839996,close:266.649994,volume:14223400},{date:"2021-02-04T00:00:00.000Z",open:267.01001,high:268.160004,low:264,close:266.48999,volume:1606e4},{date:"2021-02-05T00:00:00.000Z",open:266.799988,high:269.170013,low:265.670013,close:268.100006,volume:12454400},{date:"2021-02-08T00:00:00.000Z",open:268.75,high:269.859985,low:265,close:266.579987,volume:13755200},{date:"2021-02-09T00:00:00.000Z",open:266.440002,high:273.390015,low:265.75,close:269.450012,volume:14613400},{date:"2021-02-10T00:00:00.000Z",open:272.450012,high:273.799988,low:267.720001,close:271.869995,volume:14687200},{date:"2021-02-11T00:00:00.000Z",open:271.890015,high:273.579987,low:268.48999,close:270.390015,volume:12828600},{date:"2021-02-12T00:00:00.000Z",open:270.519989,high:271.179993,low:268.339996,close:270.5,volume:9097600},{date:"2021-02-16T00:00:00.000Z",open:270.799988,high:276.600006,low:270.049988,close:273.970001,volume:15417200},{date:"2021-02-17T00:00:00.000Z",open:271.23999,high:273.970001,low:269.579987,close:273.570007,volume:12763200},{date:"2021-02-18T00:00:00.000Z",open:269.570007,high:271.950012,low:266.029999,close:269.390015,volume:15249100},{date:"2021-02-19T00:00:00.000Z",open:269.859985,high:270.269989,low:260.149994,close:261.559998,volume:25622600},{date:"2021-02-22T00:00:00.000Z",open:257.950012,high:263.070007,low:257.529999,close:260.329987,volume:17434900},{date:"2021-02-23T00:00:00.000Z",open:259.5,high:267.459991,low:254.960007,close:265.859985,volume:21924600},{date:"2021-02-24T00:00:00.000Z",open:262.329987,high:266.380005,low:258.390015,close:264.309998,volume:15736100},{date:"2021-02-25T00:00:00.000Z",open:262.299988,high:266.940002,low:254.039993,close:254.690002,volume:19053100},{date:"2021-02-26T00:00:00.000Z",open:256.470001,high:265.549988,low:256.470001,close:257.619995,volume:26619500},{date:"2021-03-01T00:00:00.000Z",open:260.820007,high:266.649994,low:257.899994,close:264.910004,volume:22157300},{date:"2021-03-02T00:00:00.000Z",open:265.779999,high:266.709991,low:258.649994,close:259,volume:15191700},{date:"2021-03-03T00:00:00.000Z",open:260.290009,high:260.98999,low:255.100006,close:255.410004,volume:15513500},{date:"2021-03-04T00:00:00.000Z",open:256.470001,high:266.48999,low:253.5,close:257.640015,volume:31626500},{date:"2021-03-05T00:00:00.000Z",open:260.670013,high:265.450012,low:255.610001,close:264.279999,volume:26820100},{date:"2021-03-08T00:00:00.000Z",open:265.549988,high:265.579987,low:255.050003,close:255.309998,volume:18391800},{date:"2021-03-09T00:00:00.000Z",open:261.179993,high:268.529999,low:259.809998,close:265.73999,volume:22039700},{date:"2021-03-10T00:00:00.000Z",open:268.640015,high:268.970001,low:262.869995,close:264.899994,volume:14210300},{date:"2021-03-11T00:00:00.000Z",open:268.109985,high:277.899994,low:267.820007,close:273.880005,volume:21834e3},{date:"2021-03-12T00:00:00.000Z",open:269.140015,high:269.73999,low:264.019989,close:268.399994,volume:20600200},{date:"2021-03-15T00:00:00.000Z",open:269.079987,high:275.959991,low:268.5,close:273.75,volume:16844800},{date:"2021-03-16T00:00:00.000Z",open:276.079987,high:282.140015,low:274.799988,close:279.279999,volume:22437700},{date:"2021-03-17T00:00:00.000Z",open:275.709991,high:286.230011,low:275.410004,close:284.01001,volume:21315e3},{date:"2021-03-18T00:00:00.000Z",open:279.869995,high:285.190002,low:278.279999,close:278.619995,volume:18728300},{date:"2021-03-19T00:00:00.000Z",open:281.220001,high:292.799988,low:281.200012,close:290.109985,volume:38930500},{date:"2021-03-22T00:00:00.000Z",open:290.450012,high:299.709991,low:286.75,close:293.540009,volume:28273100},{date:"2021-03-23T00:00:00.000Z",open:293.149994,high:298,low:289.809998,close:290.630005,volume:23000900},{date:"2021-03-24T00:00:00.000Z",open:291,high:291.720001,low:281.160004,close:282.140015,volume:18675e3},{date:"2021-03-25T00:00:00.000Z",open:280.980011,high:288.059998,low:277.75,close:278.73999,volume:24505600},{date:"2021-03-26T00:00:00.000Z",open:278.299988,high:284.5,low:277.769989,close:283.019989,volume:17629200},{date:"2021-03-29T00:00:00.000Z",open:285.769989,high:293.179993,low:284.700012,close:290.820007,volume:21718800},{date:"2021-03-30T00:00:00.000Z",open:289.829987,high:292.470001,low:286.700012,close:288,volume:17474500},{date:"2021-03-31T00:00:00.000Z",open:289.98999,high:296.5,low:288.609985,close:294.529999,volume:19498200},{date:"2021-04-01T00:00:00.000Z",open:298.399994,high:302.399994,low:296.600006,close:298.660004,volume:17616e3},{date:"2021-04-05T00:00:00.000Z",open:300.890015,high:310.769989,low:300.679993,close:308.910004,volume:28237e3},{date:"2021-04-06T00:00:00.000Z",open:308.839996,high:311.350006,low:305.25,close:306.26001,volume:17335200},{date:"2021-04-07T00:00:00.000Z",open:306.339996,high:314.25,low:305.5,close:313.089996,volume:22855200},{date:"2021-04-08T00:00:00.000Z",open:314.850006,high:315.880005,low:310.049988,close:313.019989,volume:20894100},{date:"2021-04-09T00:00:00.000Z",open:311.399994,high:314.73999,low:310.329987,close:312.459991,volume:15988600},{date:"2021-04-12T00:00:00.000Z",open:311.049988,high:312.149994,low:307.929993,close:311.540009,volume:10881900},{date:"2021-04-13T00:00:00.000Z",open:312.209991,high:314.429993,low:309.320007,close:309.76001,volume:14036900},{date:"2021-04-14T00:00:00.000Z",open:307.299988,high:308.029999,low:301.950012,close:302.820007,volume:17421400},{date:"2021-04-15T00:00:00.000Z",open:306.339996,high:310.140015,low:304.100006,close:307.820007,volume:14558300},{date:"2021-04-16T00:00:00.000Z",open:308.170013,high:308.950012,low:304.609985,close:306.179993,volume:13059200},{date:"2021-04-19T00:00:00.000Z",open:305.01001,high:307.700012,low:300.559998,close:302.23999,volume:14553500},{date:"2021-04-20T00:00:00.000Z",open:301.98999,high:305.100006,low:297.209991,close:302.649994,volume:16796400},{date:"2021-04-21T00:00:00.000Z",open:301.950012,high:301.980011,low:297.390015,close:301.470001,volume:14863500},{date:"2021-04-22T00:00:00.000Z",open:301.329987,high:302.920013,low:296.040009,close:296.519989,volume:16375400},{date:"2021-04-23T00:00:00.000Z",open:298.76001,high:302.589996,low:297.149994,close:301.130005,volume:17536800},{date:"2021-04-26T00:00:00.000Z",open:303.339996,high:305.799988,low:301.559998,close:303.040009,volume:16172600},{date:"2021-04-27T00:00:00.000Z",open:304.279999,high:305.339996,low:301.109985,close:303.570007,volume:15309300},{date:"2021-04-28T00:00:00.000Z",open:307.359985,high:310.920013,low:305.369995,close:307.100006,volume:33907200},{date:"2021-04-29T00:00:00.000Z",open:330.119995,high:331.809998,low:321.609985,close:329.51001,volume:56526800},{date:"2021-04-30T00:00:00.000Z",open:326.140015,high:329.820007,low:324.5,close:325.079987,volume:26332400},{date:"2021-05-03T00:00:00.000Z",open:326.170013,high:328.549988,low:321.839996,close:322.579987,volume:18719500},{date:"2021-05-04T00:00:00.000Z",open:320.019989,high:322.190002,low:313.119995,close:318.359985,volume:24032600},{date:"2021-05-05T00:00:00.000Z",open:318.190002,high:321.059998,low:314.48999,close:315.019989,volume:15577600},{date:"2021-05-06T00:00:00.000Z",open:314.519989,high:320.23999,low:313.269989,close:320.019989,volume:19012200},{date:"2021-05-07T00:00:00.000Z",open:322.380005,high:322.940002,low:318.75,close:319.079987,volume:15916700},{date:"2021-05-10T00:00:00.000Z",open:314.350006,high:314.579987,low:304.829987,close:305.970001,volume:24239200},{date:"2021-05-11T00:00:00.000Z",open:300.75,high:306.839996,low:299.690002,close:306.529999,volume:18920100},{date:"2021-05-12T00:00:00.000Z",open:301.130005,high:304.959991,low:298.190002,close:302.549988,volume:24645500},{date:"2021-05-13T00:00:00.000Z",open:306.079987,high:308.859985,low:302.769989,close:305.26001,volume:18079200},{date:"2021-05-14T00:00:00.000Z",open:309.540009,high:316.850006,low:309.079987,close:315.940002,volume:19245700},{date:"2021-05-17T00:00:00.000Z",open:313.549988,high:315.679993,low:311.579987,close:315.459991,volume:15401300},{date:"2021-05-18T00:00:00.000Z",open:315.589996,high:316.5,low:309.809998,close:309.959991,volume:14522400},{date:"2021-05-19T00:00:00.000Z",open:304.190002,high:314.660004,low:303.570007,close:313.589996,volume:19106200},{date:"2021-05-20T00:00:00.000Z",open:313.579987,high:319.25,low:313.160004,close:318.609985,volume:17320200},{date:"2021-05-21T00:00:00.000Z",open:319.290009,high:319.929993,low:315.809998,close:316.230011,volume:13600900},{date:"2021-05-24T00:00:00.000Z",open:318.209991,high:325.950012,low:318.029999,close:324.630005,volume:16445400},{date:"2021-05-25T00:00:00.000Z",open:327.079987,high:329.179993,low:324.799988,close:327.790009,volume:16437e3},{date:"2021-05-26T00:00:00.000Z",open:328.350006,high:329.829987,low:325.820007,close:327.660004,volume:9686900},{date:"2021-05-27T00:00:00.000Z",open:328,high:333.779999,low:326.76001,close:332.75,volume:20477700},{date:"2021-05-28T00:00:00.000Z",open:331,high:332.869995,low:328.329987,close:328.730011,volume:12037400},{date:"2021-06-01T00:00:00.000Z",open:330.149994,high:331.420013,low:326.640015,close:329.130005,volume:11765900},{date:"2021-06-02T00:00:00.000Z",open:330.380005,high:331.869995,low:327.119995,close:329.149994,volume:11654300},{date:"2021-06-03T00:00:00.000Z",open:325.779999,high:327.380005,low:323.480011,close:326.040009,volume:12610800},{date:"2021-06-04T00:00:00.000Z",open:325.899994,high:332.459991,low:325.179993,close:330.350006,volume:13289400},{date:"2021-06-07T00:00:00.000Z",open:329.480011,high:337.690002,low:328.929993,close:336.579987,volume:20136700},{date:"2021-06-08T00:00:00.000Z",open:336.700012,high:338.299988,low:332.23999,close:333.679993,volume:14580500},{date:"2021-06-09T00:00:00.000Z",open:335.73999,high:336.799988,low:330,close:330.25,volume:13727900},{date:"2021-06-10T00:00:00.000Z",open:330.790009,high:333.940002,low:328.549988,close:332.459991,volume:13240200},{date:"2021-06-11T00:00:00.000Z",open:332.579987,high:332.829987,low:328.929993,close:331.26001,volume:13587900},{date:"2021-06-14T00:00:00.000Z",open:331.899994,high:336.820007,low:329.809998,close:336.769989,volume:12250800},{date:"2021-06-15T00:00:00.000Z",open:336.98999,high:339.920013,low:335.029999,close:336.75,volume:15795200},{date:"2021-06-16T00:00:00.000Z",open:336.700012,high:337.549988,low:328.720001,close:331.079987,volume:17232200},{date:"2021-06-17T00:00:00.000Z",open:330.48999,high:337.980011,low:330.149994,close:336.51001,volume:17794100},{date:"2021-06-18T00:00:00.000Z",open:334.529999,high:336.149994,low:329,close:329.660004,volume:23039500},{date:"2021-06-21T00:00:00.000Z",open:331.089996,high:332.920013,low:327.649994,close:332.290009,volume:11337500},{date:"2021-06-22T00:00:00.000Z",open:332.690002,high:339.920013,low:332.600006,close:339.029999,volume:15345300},{date:"2021-06-23T00:00:00.000Z",open:339.350006,high:343.420013,low:338.200012,close:340.589996,volume:14817800},{date:"2021-06-24T00:00:00.000Z",open:341.850006,high:344.899994,low:341.790009,close:343.179993,volume:12329100},{date:"2021-06-25T00:00:00.000Z",open:342.589996,high:344.119995,low:339.679993,close:341.369995,volume:14594400},{date:"2021-06-28T00:00:00.000Z",open:342.459991,high:358.140015,low:341.769989,close:355.640015,volume:29156100},{date:"2021-06-29T00:00:00.000Z",open:356.269989,high:356.73999,low:349.049988,close:351.890015,volume:21417300},{date:"2021-06-30T00:00:00.000Z",open:352.170013,high:352.920013,low:347.170013,close:347.709991,volume:15107500},{date:"2021-07-01T00:00:00.000Z",open:346.820007,high:354.670013,low:346.5,close:354.390015,volume:17137e3},{date:"2021-07-02T00:00:00.000Z",open:355.100006,high:356.440002,low:352.619995,close:354.700012,volume:11521300},{date:"2021-07-06T00:00:00.000Z",open:356.5,high:358.790009,low:349.179993,close:352.779999,volume:13488500},{date:"2021-07-07T00:00:00.000Z",open:355.26001,high:356.48999,low:350,close:350.48999,volume:14218900},{date:"2021-07-08T00:00:00.000Z",open:345.730011,high:348.329987,low:342.559998,close:345.649994,volume:14406500},{date:"2021-07-09T00:00:00.000Z",open:345.320007,high:350.709991,low:345.269989,close:350.420013,volume:13018700},{date:"2021-07-12T00:00:00.000Z",open:351.230011,high:354.190002,low:349.640015,close:353.160004,volume:10018600},{date:"2021-07-13T00:00:00.000Z",open:351.5,high:358.48999,low:348.799988,close:352.089996,volume:11456e3},{date:"2021-07-14T00:00:00.000Z",open:354.559998,high:355.200012,low:346.730011,close:347.630005,volume:13894200},{date:"2021-07-15T00:00:00.000Z",open:349.230011,high:349.230011,low:340.220001,close:344.459991,volume:14781600},{date:"2021-07-16T00:00:00.000Z",open:344.910004,high:345.98999,low:340.140015,close:341.160004,volume:11026100},{date:"2021-07-19T00:00:00.000Z",open:337.570007,high:339.790009,low:334.540009,close:336.950012,volume:14372300},{date:"2021-07-20T00:00:00.000Z",open:338.799988,high:343.450012,low:334.5,close:341.660004,volume:11024300},{date:"2021-07-21T00:00:00.000Z",open:341.5,high:346.519989,low:341.25,close:346.230011,volume:9279700},{date:"2021-07-22T00:00:00.000Z",open:346.679993,high:351.540009,low:345.209991,close:351.190002,volume:12385400},{date:"2021-07-23T00:00:00.000Z",open:360.910004,high:375.329987,low:357.190002,close:369.790009,volume:33694300},{date:"2021-07-26T00:00:00.000Z",open:369.579987,high:374.440002,low:368.220001,close:372.459991,volume:14925200},{date:"2021-07-27T00:00:00.000Z",open:371.910004,high:373.149994,low:364.549988,close:367.809998,volume:15705400},{date:"2021-07-28T00:00:00.000Z",open:374.559998,high:377.549988,low:366.929993,close:373.279999,volume:29676900},{date:"2021-07-29T00:00:00.000Z",open:361,high:365.519989,low:356.73999,close:358.320007,volume:33413200},{date:"2021-07-30T00:00:00.000Z",open:354,high:360.730011,low:352.940002,close:356.299988,volume:15966700},{date:"2021-08-02T00:00:00.000Z",open:358.100006,high:359.399994,low:350.73999,close:351.950012,volume:13180400},{date:"2021-08-03T00:00:00.000Z",open:352.730011,high:353.769989,low:347.700012,close:351.23999,volume:12406100},{date:"2021-08-04T00:00:00.000Z",open:352.420013,high:360.480011,low:351.51001,close:358.920013,volume:14180600},{date:"2021-08-05T00:00:00.000Z",open:359.640015,high:363.899994,low:356.899994,close:362.970001,volume:10247200},{date:"2021-08-06T00:00:00.000Z",open:361.399994,high:365.149994,low:361.399994,close:363.51001,volume:8918100},{date:"2021-08-09T00:00:00.000Z",open:363.76001,high:365.779999,low:360.75,close:361.609985,volume:7798900},{date:"2021-08-10T00:00:00.000Z",open:361.829987,high:364.100006,low:359.040009,close:361.130005,volume:7469900},{date:"2021-08-11T00:00:00.000Z",open:362.100006,high:362.359985,low:357.809998,close:359.959991,volume:8400300},{date:"2021-08-12T00:00:00.000Z",open:358.450012,high:363,low:357.109985,close:362.649994,volume:7170700},{date:"2021-08-13T00:00:00.000Z",open:362.970001,high:364.660004,low:361.480011,close:363.179993,volume:7192500},{date:"2021-08-16T00:00:00.000Z",open:362.519989,high:366.950012,low:357.380005,close:366.559998,volume:11222100},{date:"2021-08-17T00:00:00.000Z",open:362.980011,high:364.670013,low:355.070007,close:358.450012,volume:12328700},{date:"2021-08-18T00:00:00.000Z",open:356.25,high:359.859985,low:355.149994,close:355.450012,volume:10042400},{date:"2021-08-19T00:00:00.000Z",open:351.350006,high:357.570007,low:351,close:355.119995,volume:12004500},{date:"2021-08-20T00:00:00.000Z",open:354.600006,high:359.98999,low:353.309998,close:359.369995,volume:8693500},{date:"2021-08-23T00:00:00.000Z",open:359.440002,high:365.690002,low:359.100006,close:363.350006,volume:10942e3},{date:"2021-08-24T00:00:00.000Z",open:363.660004,high:367.959991,low:361.839996,close:365.51001,volume:9235100},{date:"2021-08-25T00:00:00.000Z",open:365.600006,high:370.859985,low:365.399994,close:368.390015,volume:9684500},{date:"2021-08-26T00:00:00.000Z",open:368.380005,high:369.440002,low:364.130005,close:364.380005,volume:7888700},{date:"2021-08-27T00:00:00.000Z",open:365.100006,high:373.73999,low:364.079987,close:372.630005,volume:11214200},{date:"2021-08-30T00:00:00.000Z",open:372.559998,high:381.48999,low:370.519989,close:380.660004,volume:13547300},{date:"2021-08-31T00:00:00.000Z",open:379.950012,high:382.76001,low:378.799988,close:379.380005,volume:12345400},{date:"2021-09-01T00:00:00.000Z",open:379.589996,high:384.329987,low:378.809998,close:382.049988,volume:11567200},{date:"2021-09-02T00:00:00.000Z",open:381.5,high:381.75,low:374.059998,close:375.279999,volume:14832900},{date:"2021-09-03T00:00:00.000Z",open:374.75,high:377.160004,low:373.109985,close:376.26001,volume:7509600},{date:"2021-09-07T00:00:00.000Z",open:375.880005,high:382.959991,low:373.149994,close:382.179993,volume:10793800},{date:"2021-09-08T00:00:00.000Z",open:380.160004,high:380.869995,low:374.790009,close:377.570007,volume:11067200},{date:"2021-09-09T00:00:00.000Z",open:377.640015,high:379.829987,low:376.570007,close:378,volume:9098900},{date:"2021-09-10T00:00:00.000Z",open:381.359985,high:383.790009,low:378.26001,close:378.690002,volume:11537600},{date:"2021-09-13T00:00:00.000Z",open:381.679993,high:381.75,low:374.350006,close:376.51001,volume:13026300},{date:"2021-09-14T00:00:00.000Z",open:377.399994,high:378.589996,low:375.109985,close:376.529999,volume:8711600},{date:"2021-09-15T00:00:00.000Z",open:377,high:377.559998,low:367.670013,close:373.920013,volume:17940300},{date:"2021-09-16T00:00:00.000Z",open:372.790009,high:373.559998,low:369.709991,close:373.059998,volume:11934200},{date:"2021-09-17T00:00:00.000Z",open:371.410004,high:371.410004,low:361.589996,close:364.720001,volume:26299e3},{date:"2021-09-20T00:00:00.000Z",open:359.299988,high:361.029999,low:349.799988,close:355.700012,volume:19822800},{date:"2021-09-21T00:00:00.000Z",open:358.5,high:360.040009,low:355.190002,close:357.480011,volume:11751900},{date:"2021-09-22T00:00:00.000Z",open:347.230011,high:349.839996,low:340.690002,close:343.209991,volume:43692900},{date:"2021-09-23T00:00:00.000Z",open:345.359985,high:349.670013,low:343,close:345.959991,volume:21806300},{date:"2021-09-24T00:00:00.000Z",open:343.23999,high:354.350006,low:342.369995,close:352.959991,volume:18801900},{date:"2021-09-27T00:00:00.000Z",open:349.809998,high:355.149994,low:347.079987,close:353.579987,volume:15205800},{date:"2021-09-28T00:00:00.000Z",open:347.970001,high:349.600006,low:338.920013,close:340.649994,volume:21710300},{date:"2021-09-29T00:00:00.000Z",open:343.149994,high:345.230011,low:338.880005,close:339.609985,volume:14452200},{date:"2021-09-30T00:00:00.000Z",open:340.450012,high:342.799988,low:338.149994,close:339.390015,volume:16547100},{date:"2021-10-01T00:00:00.000Z",open:341.609985,high:345.019989,low:338.640015,close:343.01001,volume:14905300},{date:"2021-10-04T00:00:00.000Z",open:335.529999,high:335.940002,low:322.700012,close:326.230011,volume:42885e3},{date:"2021-10-05T00:00:00.000Z",open:328.579987,high:335.179993,low:326.160004,close:332.959991,volume:35377900},{date:"2021-10-06T00:00:00.000Z",open:329.73999,high:334.380005,low:325.799988,close:333.640015,volume:26443e3},{date:"2021-10-07T00:00:00.000Z",open:337,high:338.839996,low:328.980011,close:329.220001,volume:28307500},{date:"2021-10-08T00:00:00.000Z",open:331.51001,high:333.399994,low:328.709991,close:330.049988,volume:15934300},{date:"2021-10-11T00:00:00.000Z",open:327.630005,high:330.459991,low:325.309998,close:325.450012,volume:14708200},{date:"2021-10-12T00:00:00.000Z",open:323.029999,high:324.380005,low:317.369995,close:323.769989,volume:31658700},{date:"2021-10-13T00:00:00.000Z",open:326.970001,high:327,low:322.660004,close:324.540009,volume:14761500},{date:"2021-10-14T00:00:00.000Z",open:328.359985,high:330.519989,low:327.100006,close:328.529999,volume:14302200},{date:"2021-10-15T00:00:00.000Z",open:328.679993,high:329.070007,low:322.51001,close:324.76001,volume:21575100},{date:"2021-10-18T00:00:00.000Z",open:328.950012,high:335.890015,low:327.5,close:335.339996,volume:21585e3},{date:"2021-10-19T00:00:00.000Z",open:339.649994,high:342.459991,low:337.279999,close:339.98999,volume:18786300},{date:"2021-10-20T00:00:00.000Z",open:343.450012,high:343.980011,low:339.450012,close:340.779999,volume:13639500},{date:"2021-10-21T00:00:00.000Z",open:340.279999,high:342.309998,low:337.799988,close:341.880005,volume:16354400},{date:"2021-10-22T00:00:00.000Z",open:326.350006,high:329.630005,low:321.109985,close:324.609985,volume:35224500},{date:"2021-10-25T00:00:00.000Z",open:320.299988,high:329.559998,low:319.720001,close:328.690002,volume:38409e3},{date:"2021-10-26T00:00:00.000Z",open:328.26001,high:330.209991,low:309.600006,close:315.809998,volume:65654e3},{date:"2021-10-27T00:00:00.000Z",open:314.190002,high:319.25,low:312.059998,close:312.220001,volume:29971800},{date:"2021-10-28T00:00:00.000Z",open:312.98999,high:325.519989,low:308.109985,close:316.920013,volume:50806800},{date:"2021-10-29T00:00:00.000Z",open:320.190002,high:326,low:319.600006,close:323.570007,volume:37059400},{date:"2021-11-01T00:00:00.000Z",open:326.040009,high:333.450012,low:326,close:329.980011,volume:31518900},{date:"2021-11-02T00:00:00.000Z",open:331.380005,high:334.790009,low:323.799988,close:328.079987,volume:28353e3},{date:"2021-11-03T00:00:00.000Z",open:327.48999,high:332.149994,low:323.200012,close:331.619995,volume:20786500},{date:"2021-11-04T00:00:00.000Z",open:334.01001,high:337.269989,low:332.649994,close:335.850006,volume:22495300},{date:"2021-11-05T00:00:00.000Z",open:340.309998,high:346.790009,low:339.640015,close:341.130005,volume:26852100},{date:"2021-11-08T00:00:00.000Z",open:344.420013,high:344.790009,low:338.339996,close:338.619995,volume:18342500},{date:"2021-11-09T00:00:00.000Z",open:340,high:341.309998,low:334.470001,close:335.369995,volume:17556700},{date:"2021-11-10T00:00:00.000Z",open:332.48999,high:333.190002,low:325.51001,close:327.640015,volume:21872600},{date:"2021-11-11T00:00:00.000Z",open:329.820007,high:332.459991,low:327,close:327.73999,volume:12376600},{date:"2021-11-12T00:00:00.000Z",open:330.179993,high:341.859985,low:329.779999,close:340.890015,volume:25387200},{date:"2021-11-15T00:00:00.000Z",open:344.339996,high:353.649994,low:343.200012,close:347.559998,volume:25076600},{date:"2021-11-16T00:00:00.000Z",open:343.829987,high:346.649994,low:340.869995,close:342.959991,volume:18181100},{date:"2021-11-17T00:00:00.000Z",open:344.23999,high:347.299988,low:340.100006,close:340.769989,volume:13602800},{date:"2021-11-18T00:00:00.000Z",open:339.720001,high:342.459991,low:335.299988,close:338.690002,volume:17487200},{date:"2021-11-19T00:00:00.000Z",open:342.200012,high:352.100006,low:339.899994,close:345.299988,volume:26441e3},{date:"2021-11-22T00:00:00.000Z",open:349.049988,high:353.829987,low:340.51001,close:341.01001,volume:27116800},{date:"2021-11-23T00:00:00.000Z",open:338.929993,high:341.399994,low:333.5,close:337.25,volume:17211500}].map((function(e){return Object(d.a)(Object(d.a)({},e),{},{date:new Date(e.date)})})),RtData:void 0,type:"chart",id:"mainchart-fb2021"},{id:"kama_01",type:"indicator",indicator:ba,graphProps:{style:{strokeColor:["#0693E3"]}}},{type:"indicator",indicator:(un={period:5},fa(fa({},ga),{params:ga.params.map((function(e){return"period"!==e.name||z(null===un||void 0===un?void 0:un.period)?e:fa(fa({},e),{val:un.period})}))})),id:"rsi_01"},{id:"ema_rsi_01",type:"indicator",indSrcId:"rsi_01",indicator:ha,graphProps:{style:{strokeColor:["#0693E3"]}}}],Io={disableTheme:!1,initWidthPerTick:8};var So=function(){var e=o.a.useRef(null),t=o.a.useState(!0),a=Object(l.a)(t,2),n=a[0],r=a[1];console.log("production mode"),console.log=function(){};var i=vo({ContainerRef:e,data:Co,settings:Io}),d=Object(l.a)(i,3),s=d[0],u=d[1],p=d[2],m=o.a.useCallback((function(){u({task:"setTheme",params:{theme:n?ja:Da}}),r((function(e){return!e}))}),[u,n]);return Object(h.jsx)(o.a.Fragment,{children:Object(h.jsx)(c.a,{theme:b,children:Object(h.jsx)(To,{setDarkMode:m,children:Object(h.jsx)(v,{setDarkMode:m,children:Object(h.jsx)(sn,{ref:e,ChartState:s,Dispatch:u,rtTicks:p,settings:Io})})})})})},Eo=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,600)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),o(e),r(e),i(e)}))};i.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(So,{})}),document.getElementById("root")),Eo()}},[[476,1,2]]]);
//# sourceMappingURL=main.42d20b02.chunk.js.map