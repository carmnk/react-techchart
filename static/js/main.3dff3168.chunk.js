(this["webpackJsonpreact-techchart"]=this["webpackJsonpreact-techchart"]||[]).push([[0],{178:function(t,e,a){},179:function(t,e,a){},284:function(t,e){},286:function(t,e){},295:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),o=a(24),i=a.n(o),s=(a(178),a(26)),l=(a(179),a(6)),c=a(3),d=a(14),u=function(t){return"indicator"===t.type},h=function(t){return"chart"===t.type},p=a(157),b=a.n(p),x={type:"array",minItems:1,items:{type:"object",properties:{data:{type:"array",nullable:!1,minItems:2,items:{type:"object",nullable:!1,properties:{date:{type:"object",nullable:!1},open:{type:"number",nullable:!1},high:{type:"number",nullable:!1},low:{type:"number",nullable:!1},close:{type:"number",nullable:!1}},required:["date","close"]}},name:{type:"string",nullable:!1}},required:["data","name"]}},f=a(335),j=a(104),m=a(8),y=a(9),g=a.n(y),v=function(t){return"open"in t&&"high"in t&&"low"in t&&"close"in t},O=function(t){return"close"in t},C=function(t){return"volume"in t},k=function(t){return"prices"in t},S=a(1),T=function(t){var e=t.dataset,a=t.name,r=t.decimals,n=t.onClick;return e?Object(S.jsx)("div",{children:Object(S.jsx)(f.a,{style:{textTransform:"none",textAlign:"left"},onClick:function(){null===n||void 0===n||n(a)},startIcon:Object(S.jsx)(g.a,{path:k(e)?m.h:m.i,size:1,color:"#333"}),children:k(e)?Object(S.jsx)(j.a,{children:"".concat(a,":").concat(e.prices.map((function(t){return null===t||void 0===t?void 0:t.toFixed(r)})).join(", ")||"")}):Object(S.jsx)(j.a,{variant:"body1",children:v(e)?"".concat(a,"\n                O:").concat(e.open.toFixed(r),"\n                H:").concat(e.high.toFixed(r),"\n                L:").concat(e.low.toFixed(r),"\n                C:").concat(e.close.toFixed(r)):"".concat(a,"\n                C:").concat(e.close.toFixed(r))})})}):null},w=function(t){var e,a,r,o,i,s,l,c,h=t.fullState,p=h.containerSize.width-1,b=h.containerSize.height-1,x=h.yaxis.widthYAxis,f=h.xaxis,j=f.heightXAxis,m=f.heightTickMarkLines,y=null,g=null;h.pointer.move&&(y=h.pointer.move.xy[1]);for(var v=0;v<h.subCharts.length;v++)for(var O=h.subCharts[v],C=0;C<O.yaxis[0].graphs.length;C++){var k,T,w,I,P;O.yaxis[0].graphs[C];(null===(k=h.pointer)||void 0===k||null===(T=k.chartPointer)||void 0===T||null===(w=T.move)||void 0===w||null===(I=w.snapDatasets)||void 0===I?void 0:I[0])&&null!==(null===(P=h.pointer.chartPointer.move)||void 0===P?void 0:P.snapDatasets[0].pixYSnap)&&(y=h.pointer.chartPointer.move.snapDatasets[0].pixYSnap,g=h.pointer.chartPointer.move.snapDatasets[0].ySnap)}var M=-1;if(h.pointer.move){var z=h.pointer.move.xy[1];M=h.subCharts.findIndex((function(t){return t.bottom>=z&&t.top<=z}))}if(g||-1===M||(g=h.methods.pixToY(null===(e=h.pointer.move)||void 0===e?void 0:e.xy[1],M,0).toFixed(h.subCharts[M].yaxis[0].decimals)),g&&-1!==M){var A=h.subCharts[M].yaxis[0].graphs[0];u(A)&&A.indicator.default.decimals&&(g=(Math.round(parseFloat(g)*Math.pow(10,A.indicator.default.decimals))/Math.pow(10,A.indicator.default.decimals)).toString())}return h.pointer.move&&y?Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.c,{x:0,y:0,points:[h.methods.xToPix(Math.round(h.methods.pixToX(h.pointer.move.xy[0]))),0,h.methods.xToPix(Math.round(h.methods.pixToX(h.pointer.move.xy[0]))),b-j+m],stroke:"black",strokeWidth:1}),h.pointer.move.xy[1]<=h.subCharts[h.subCharts.length-1].bottom?Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.c,{x:0,y:0,points:[0,y,p-x,y],stroke:"black",strokeWidth:1}),Object(S.jsx)(d.e,{sceneFunc:function(t,e){var a=t._context;if(h.pointer.move){var r=y;a.moveTo(p-x,r),a.lineTo(p-x+10,r+10),a.lineTo(p,r+10),a.lineTo(p,r+1),a.lineTo(p,r-10),a.lineTo(p-x+10,r-10),a.lineTo(p-x,r),t.fillStrokeShape(e)}},stroke:"black",fill:"rgba(199, 0, 57, 1)",strokeWidth:1}),Object(S.jsx)(d.e,{sceneFunc:function(t,e){var a=t._context;if(h.pointer.move){var r=y;a.font=h.yaxis.style.fontSize+"px "+h.yaxis.style.fontName,a.fillStyle=h.yaxis.style.fontColor,a.textAlign="left",a.textBaseline="middle",a.fillText(g,p-x+h.yaxis.widthTickmarkLines+5,r),t.fillStrokeShape(e)}}})]}):null,(null===(a=h.pointer)||void 0===a||null===(r=a.chartPointer)||void 0===r||null===(o=r.move)||void 0===o?void 0:o.xUnlimited)<=h.xaxis.xEnd&&(null===(i=h.pointer)||void 0===i||null===(s=i.chartPointer)||void 0===s||null===(l=s.move)||void 0===l?void 0:l.xUnlimited)>=h.xaxis.xStart?Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.d,{x:h.methods.xToPix(Math.round(h.methods.pixToX(null===(c=h.pointer.move)||void 0===c?void 0:c.xy[0])))-25,y:b-j+m+.5,width:50,height:25,fill:"white",stroke:"black",strokeWidth:1}),Object(S.jsx)(d.e,{sceneFunc:function(t,e){var a,r,n,o,i=t._context;h.pointer.move&&(i.font=h.xaxis.style.fontSize+"px "+h.xaxis.style.fontName,i.fillStyle=h.xaxis.style.fontColor,i.textAlign="center",i.textBaseline="top",i.fillText((null===(a=h.pointer)||void 0===a||null===(r=a.chartPointer)||void 0===r||null===(n=r.move)||void 0===n||null===(o=n.snapDatasets)||void 0===o?void 0:o[0])?h.pointer.chartPointer.move.snapDatasets[0].dateString:Math.round(h.methods.pixToX(h.pointer.move.xy[0])).toString(),h.methods.xToPix(Math.round(h.methods.pixToX(h.pointer.move.xy[0]))),b-j+m+5+.5),t.fillStrokeShape(e))}})]}):null]}):null},I=function(t){var e=t.fullState,a=(e.subCharts[0].yaxis[0],e.subCharts[0].yaxis[0].graphs[0]);if(!h(a)||!a||!a.curData)return null;var r=[],o=0;return 0 in e.subCharts&&0 in e.subCharts[0].yaxis&&0 in e.subCharts[0].yaxis[0].graphs&&((r=a.curData).forEach((function(t,e){return t.idx=e})),o=e.xaxis.widthPerTick<=2?0:Math.floor(.35*(e.xaxis.widthPerTick-1))),Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.e,{sceneFunc:function(t,r){t.beginPath(),a.curData.forEach((function(a,r){var n=e.methods.xToPix(r,0)+e.xaxis.pixXStart,o=Math.round(e.methods.yToPix(a.high,0,0)),i=Math.round(e.methods.yToPix(a.low,0,0)),s=Math.round(e.methods.yToPix(a.close,0,0));t.moveTo(n+.5,i+.5),t.lineTo(n+.5,o+.5),a.close===a.open&&(t.moveTo(n-2,s),t.lineTo(n+2,s))})),t.closePath(),t.fillStrokeShape(r)},stroke:a.style.candleStrokeColor,strokeWidth:1}),Object(S.jsx)(d.e,{sceneFunc:function(t,a){t.beginPath(),r.filter((function(t){return t.close>=t.open})).forEach((function(r,n){var i=e.methods.xToPix(r.idx,0)+e.xaxis.pixXStart,s=Math.round(e.methods.yToPix(r.open,0,0)),l=Math.round(e.methods.yToPix(r.close,0,0));if(r.close!==r.open)if(0!==o){var c=i+o>e.xaxis.pixXEnd?e.xaxis.pixXEnd-i+o:2*o;t.rect(i+.5-o,s+.5,c,l-s)}else 0===o&&(t.moveTo(i+.5,l),t.lineTo(i+.5,s));t.closePath(),t.fillStrokeShape(a)}))},stroke:a.style.candleStrokeColor,fill:a.style.candleUpColor,strokeWidth:1}),Object(S.jsx)(d.e,{sceneFunc:function(t,a){t.beginPath(),r.filter((function(t){return t.close<t.open})).forEach((function(r,n){var i=e.methods.xToPix(r.idx,0)+e.xaxis.pixXStart,s=Math.round(e.methods.yToPix(r.open,0,0)),l=Math.round(e.methods.yToPix(r.close,0,0));if(r.close!==r.open)if(0!==o){var c=i+o>e.xaxis.pixXEnd?e.xaxis.pixXEnd-i+o:2*o;t.rect(i+.5-o,s+.5,c,l-s)}else 0===o&&(t.moveTo(i+.5,l),t.lineTo(i+.5,s));t.closePath(),t.fillStrokeShape(a)}))},stroke:a.style.candleStrokeColor,fill:a.style.candleDownColor,strokeWidth:1})]})},P=function(t){return void 0===t||null===t||!("number"!==typeof t||!isNaN(t))},M=function(t){return Math.floor(t)===t?0:t.toString().split(".")[1].length||0},z=function(t){for(var e=!1,a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.forEach((function(a){t.includes(a)&&(e=!0)})),e},A={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},D=function(t){if(!t)return null;t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,a,r){return e+e+a+a+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},X=function(t){var e=t.fullState,a=t.subchartIdx,r=t.yaxisIdx,n=t.graphIdx,o=t.indSeriesIdx,i=P(o)?0:o,s=(e.subCharts[a].yaxis[r],e.subCharts[a].yaxis[r].graphs[n]),c=[];Array.isArray(s.curData)&&s.curData.length>1&&c.push.apply(c,Object(l.a)(s.curData.map((function(t,r){var n;return null===(n=k(t)?t.prices[i]:t.close)?[null,null]:[e.xaxis.widthPerTick*r,e.methods.yToPix(n,a,0,0)]})).flat().filter((function(t){return null!==t}))));var h=c.filter((function(t){return null!==t}));return Object(S.jsx)(d.c,{x:e.xaxis.pixXStart,y:e.methods.yToPix(0,a,0)-e.subCharts[a].bottom,points:Object(l.a)(h),stroke:u(s)?s.style.strokeColor[i]:s.style.strokeColor[0],strokeWidth:1},"sub".concat(a,"_graph").concat(n))},E=function(t){var e=t.fullState,a=t.subchartIdx,r=t.yaxisIdx,n=t.graphIdx,o=e.subCharts[a].yaxis[r].graphs[n];return Object(S.jsx)(d.e,{sceneFunc:function(t,n){t.beginPath(),e.subCharts[0].yaxis[0].graphs[0].curData.forEach((function(n,o){if(n.volume){var i=e.methods.xToPix(o,0)+e.xaxis.pixXStart,s=Math.round(e.methods.yToPix(n.volume,a,r,0)),l=Math.round(e.methods.yToPix(0,a,r,0));t.moveTo(i+.5,l+.5),t.lineTo(i+.5,s+.5)}})),t.closePath(),t.fillStrokeShape(n)},stroke:(u(o),o.style.strokeColor[0]),strokeWidth:1})},R=a(63),W=a(163),F=a(79),U=a(360),Y=a(356),L=a(338),N=a(339),B=a(340),G=a(341),H=a(342),V=function(t,e){switch(e){case"minutes":return Object(Y.a)(t,"mm");case"hours":return Object(Y.a)(t,"HH");case"days":case"weeks":return Object(Y.a)(t,"dd");case"months":return Object(Y.a)(t,"MMM");case"years":return Object(Y.a)(t,"yyyy");default:return"|"}},$=function(t,e){switch(e){case"minutes":return Object(L.a)(t);case"hours":return Object(N.a)(t);case"days":return Object(B.a)(t);case"weeks":return Object(U.a)(t);case"months":return Object(G.a)(t);case"years":return Object(H.a)(t);default:return 0}},q=function(t){return{minute:$(t,"minutes"),hour:$(t,"hours"),day:$(t,"days"),week:$(t,"weeks"),month:$(t,"months"),year:$(t,"years")}},_={minutes:{period:6e4,scaleMultiplys:[2,5,15,30],range:[6e4,6e4]},hours:{period:36e5,scaleMultiplys:[2,4,12],range:[36e5,36e5]},days:{period:864e5,scaleMultiplys:[2],range:[864e5,864e5]},weeks:{period:6048e5,scaleMultiplys:[2],range:[2592e5,9504e5]},months:{period:26784e5,scaleMultiplys:[2,3,6],range:[24192e5,26784e5]},years:{period:31536e6,scaleMultiplys:[],range:[31536e6,316224e5]}},Q=function(t,e,a,r,n,o){if(!r.chartPeriod)return null;var i=r.chartPeriod,s=(i.chartPeriod,i.periodsConstIdx),c=i.chartPeriodName,d=a-e+1,u=Object.assign({},o),h=u.accAmt[c];Object.keys(u.accAmt).forEach((function(t,e){u.accAmt[t]=u.accAmt[t]/h*d}));for(var p=10*(1-n),b=null,x=c,f=1,j=s;j<Object.keys(_).length;j++){var m=Object.keys(_)[j];if(m in u.accAmt)for(var y=0,g=[1].concat(Object(l.a)(_[m].scaleMultiplys));y<g.length;y++){var v=g[y];null!==b?Math.abs(u.accAmt[m]/v-p)<Math.abs(b/f-p)&&(b=u.accAmt[m],f=v,x=m):(b=u.accAmt[m],f=v,x=m)}}return{chartPeriodName:x,multiply:f,chartPeriod:_[x].period,periodsConstIdx:0}},J=function(t,e){if(e.length>1)return!1;var a=q(t),r=a.day,n=a.week,o=a.month,i=(a.year,e[0].months[0]);return i.weeks[0].days[0].day===r&&i.weeks[0].week===n&&i.month===o},K=function(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e.length>1)return!1;var n=q(t),o=n.day,i=n.week;n.month,n.year;return(a+1)%r===0&&(e[0].months[a].weeks[0].days[0].day===o&&e[0].months[a].weeks[0].week===i)},Z=function(t,e,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(e.length>1)return!1;var o=q(t),i=o.day,s=o.week;o.month,o.year;if(e[0].months[a].weeks[r].days[0].day===i&&e[0].months[a].weeks[r].week===s){if(2===n){var l=0;e[0].months[a].weeks.forEach((function(t){return l+=t.days.length}));for(var c=0,d=0,u=0,h=Math.round(l/2),p=0;p<e[0].months[a].weeks.length;p++){var b=e[0].months[a].weeks[p];Math.abs(c+b.days.length-h)<Math.abs(d-h)&&(d=c+b.days.length,u=p+1),c+=b.days.length}return r===u}if(1===n)return!(1===r&&e[0].months[a].weeks[0].days.length<3)&&!(r===e[0].months[a].weeks.length-1&&e[0].months[a].weeks[r].days.length<3)}return!1},tt=function(t,e,a,r){if(!a||!r||!e)return null;var n=r.chartPeriodName,o=r.multiply,i=$(t,"years"),s=$(t,"months"),l=$(t,"weeks"),c=$(t,"days"),d=e.years.filter((function(t){return t.year===i})),u=d[0].months.filter((function(t){return t.month===s})),h=d[0].months.indexOf(u[0]),p=u[0].weeks.filter((function(t){return t.week===l})),b=d[0].months[h].weeks.indexOf(p[0]),x=p[0].days.filter((function(t){return t.day===c})),f=d[0].months[h].weeks[b].days.indexOf(x[0]);return a.chartPeriodName===n&&1===o?n:"days"===n?J(t,d)?"years":K(t,d,h,1)?"months":Z(t,d,h,b,o)?"weeks":function(t,e,a,r,n){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=$(t,"days");if(e[0].months[a].weeks[r].days[n].day===i&&1===o)return!0;if(e[0].months[a].weeks[r].days[n].day===i&&2===o){if(e[0].months[a].weeks[r].days.length<=3)return!1;if(4===e[0].months[a].weeks[r].days.length&&(0===n||2===n)||5===e[0].months[a].weeks[r].days.length&&(0===n||2===n)||6===e[0].months[a].weeks[r].days.length&&(0===n||2===n||4===n)||7===e[0].months[a].weeks[r].days.length&&(0===n||2===n||5===n))return!0}return!1}(t,d,h,b,f,o)?"days":null:"weeks"===n?J(t,d)?"years":K(t,d,h,1)?"months":Z(t,d,h,b,o)?n:null:"months"===n?u[0].weeks[0].days[0].day===c?n:null:"years"===n&&d[0].months[0].weeks[0].days[0].day===c?n:null},et=function(t){for(var e=t.length,a=function(t,e){return t.date-e.date},r=[{dT:a(t[1],t[0]),amt:1}],n=0,o=$(t[0].date,"weeks"),i=$(t[0].date,"years"),s=0,l=[],c=0;c<e;c++){if(c>=2)for(var d=a(t[c],t[c-1]),u=0;u<r.length;u++){if(r[u].dT===d){r[u].amt++;break}u===r.length-1&&r.push({dT:d,amt:1})}var h=Object(U.a)(t[c].date),p=$(t[c].date,"years");if(h>o||p>i||c===e-1){var b=l.filter((function(t){return t.amtDays===s}));if(b.length>0){b.length>1&&console.log("warning - internal error determing GraphMetaData");var x=l.indexOf(b[0]);l[x].occ++}else 0===b.length&&l.push({amtDays:s,occ:1});o=h,s=1,i=p}else s++;t[c].close||console.log("hier ist was falsch",c);var f=[M(t[c].close)],j=t[c];v(j)&&(f.push(M(j.open)),f.push(M(j.high)),f.push(M(j.low)));var m=Math.max.apply(Math,f);m>n&&(n=m)}var y=r.map((function(t){return t.dT})),g=r.map((function(t){return t.amt})),O=g.reduce((function(t,e,a,r){return e>r[t]?a:t}),0),C=l.map((function(t){return t.occ})),k=0;l.forEach((function(t){return k+=t.occ}));var S=C.reduce((function(t,e,a,r){return e>r[t]?a:t}),0),T=l[S].amtDays,w=l[S].occ/k,I=y[O]<0;console.log(y[O]);var P=Math.abs(y[O]);return{nData:e,dataPeriod:P,chartPeriod:function(t){for(var e=Object.keys(_),a=0;a<e.length;a++){var r=e[a],n=_[r].period,o=_[r].range;if("number"===typeof n&&(t===n||t>=o[0]&&t<=o[1]))return{chartPeriodName:r,periodsConstIdx:a,chartPeriod:n,multiply:1}}return null}(P),periodGuessConfidence:g[O]/e,tradingDaysPerWeek:T,tradingDaysPerWeekGuessConfidence:w,type:"candlechart",decimals:n,isDescending:I}},at=function(t,e,a,r,n,o){return{yaxis:[rt(a,r,n,o)],top:t,bottom:e}},rt=function(t,e,a,r){var n=r?ot(t,e,r,a):nt(t,e,a);return{graphs:[Object(c.a)({},n)],decimals:n.decimals,tools:[],translatedY:0,optIntervalY:0,heightPerPt:0,drawTicks:[]}},nt=function(t,e,a){var r=et(t),n=r.decimals,o=r.isDescending,i=Object(R.a)(r,["decimals","isDescending"]);o&&t.reverse();var s=function(t,e,a){for(var r={years:[],accAmt:{years:0,months:0,weeks:0,days:0,hours:0,minutes:0}},n=function(t){return{day:t,hours:[]}},o=function(t,e){return{week:t,days:[n(e)]}},i=function(t,e,a){return{month:t,weeks:[o(e,a)]}},s=function(t,e,a,r){return{year:t,months:[i(e,a,r)]}},c=function(t){"years"===t&&r.accAmt.years++,["years","months"].includes(t)&&r.accAmt.months++,["years","months","weeks"].includes(t)&&r.accAmt.weeks++,["years","months","weeks","days"].includes(t)&&r.accAmt.days++},d=function(e){var a=$(t[e].date,"years"),d=$(t[e].date,"months"),u=$(t[e].date,"weeks"),h=$(t[e].date,"days"),p=function(t,e){"years"===t&&r.years.push(s(a,d,u,h)),"months"===t&&r.years[e[0]].months.push(i(d,u,h)),"weeks"===t&&r.years[e[0]].months[e[1]].weeks.push(o(u,h)),"days"===t&&r.years[e[0]].months[e[1]].weeks[e[2]].days.push(n(h))};!function t(e,b){var x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],f=null,j=-1;if("years"===e)0 in(f=b.years.filter((function(t){return t.year===a})))&&(j=r.years.indexOf(f[0]));else if("months"===e){if(x.length<1)return null;0 in(f=b.years[x[0]].months.filter((function(t){return t.month===d})))&&(j=r.years[x[0]].months.indexOf(f[0]))}else if("weeks"===e){if(x.length<2)return null;0 in(f=b.years[x[0]].months[x[1]].weeks.filter((function(t){return t.week===u})))&&(j=r.years[x[0]].months[x[1]].weeks.indexOf(f[0]))}else if("days"===e){if(x.length<3)return null;0 in(f=b.years[x[0]].months[x[1]].weeks[x[2]].days.filter((function(t){return t.day===h})))&&(j=r.years[x[0]].months[x[1]].weeks[x[2]].days.indexOf(f[0]))}if(!f)return null;if(0===f.length)return c(e),("years"===e?s(a,d,u,h):"months"===e?i(d,u,h):"weeks"===e?o(u,h):"days"===e?n(h):null)?(p(e,x),!0):null;var m="years"===e?"months":"months"===e?"weeks":"weeks"===e?"days":null;return m?-1===j?null:t(m,b,[].concat(Object(l.a)(x),[j])):null}("years",r)},u=e;u<=a;u++)d(u);return r}(t,0,t.length-1);return{data:t,meta:i,style:Object(c.a)({strokeColor:["#000"],candleStrokeColor:"#666",candleDownColor:"rgb(199, 0, 57)",candleUpColor:"#009688"},a),yMax:0,yMaxExact:0,yMin:0,yMinExact:0,datasets:{first:null,last:null},dateStat:s,type:"chart",name:e,decimals:n}},ot=function(t,e,a,r){var n,o=null===(n=a.indicatorFn)||void 0===n?void 0:n.call.apply(n,[a,t,e].concat(Object(l.a)(a.params.map((function(t){return t.val}))))),i=et(t),s=i.decimals,d=(Object(R.a)(i,["decimals"]),a.default.decimals?a.default.decimals:s);return{data:o,type:"indicator",name:a.name,decimals:d,style:Object(c.a)(Object(c.a)({},r),{},{strokeColor:(null===r||void 0===r?void 0:r.strokeColor)||["#00ffff"]}),yMax:0,yMaxExact:0,yMin:0,yMinExact:0,datasets:{first:null,last:null},indicator:a}},it=["#666","#0693E3","#f50057","#00D084","#FF6900","#bd10e0","#bbb"],st=function(t,e){return t[e%t.length]},lt=function(t){return"setCandleChartUpColor"===t.task},ct=function(t){return"setCandleChartDownColor"===t.task},dt=function(t){return"setCandleChartStrokeColor"===t.task},ut=function(t){return"setToolStrokeColor"===t.task},ht=function(t){return"setToolAnchorColor"===t.task},pt=function(t,e){if(function(t){return"addSubchart"===t.task}(e)){var a=e.params.chartSeries,r=e.params.chartName,n=e.params.indicator,o=e.params.reset,i=e.params.containerHeight-t.xaxis.heightXAxis,s=250,d=Math.min(150,(i-s)/(t.subCharts.length-1+1)),h=0===t.subCharts.length||o?0:i-Math.round(d),p=n?{strokeColor:[st(it,0)]}:{strokeColor:st(it,0)};if(0===t.subCharts.length||o)return console.log(a.length),Object(c.a)(Object(c.a)({},t),{},{xaxis:Object(c.a)(Object(c.a)({},t.xaxis),{},{totalTranslatedX:-(a.length+5-(t.containerSize.width-1)/t.xaxis.scaledWidthPerTick)*t.xaxis.scaledWidthPerTick}),subCharts:[at(h,i,a,r,p)]});var b=t.subCharts[0].bottom-t.subCharts[0].top-d<s?(i-s-d)/(t.subCharts.length-1):null,x=at(h,i,a,r,p,n),f=x.yaxis[0].graphs[0];return u(f)&&f.data[f.data.length-1].prices.length>1&&(f.style.strokeColor=f.data[f.data.length-1].prices.map((function(t,e){return st(it,e)}))),Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.map((function(e,a){return 0===a?(e.bottom=Math.max(e.bottom-d,s),e.top=0):a===t.subCharts.length-1?(e.top=t.subCharts[a-1].bottom,e.bottom=h):(e.top=t.subCharts[a-1].bottom,e.bottom=b?Math.round(e.top+b):e.bottom-d),e}))),[x])})}if(function(t){return"removeSubchart"===t.task}(e)){var j=e.params.subchartIdx,m=t.subCharts[j].bottom-t.subCharts[j].top,y=Math.floor(m/(t.subCharts.length-1)),g=m%(t.subCharts.length-1);return Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.slice(0,j).map((function(t,e){return Object(c.a)(Object(c.a)({},t),{},{top:0===t.top?0:t.top+g+(j-2)*y,bottom:0===e?t.bottom+y+g:t.bottom+y+g+(j-1)*y})}))),Object(l.a)(t.subCharts.slice(j+1).map((function(e,a){return Object(c.a)(Object(c.a)({},e),{},{top:e.top-(a+1)*y,bottom:a===t.subCharts.slice(j+1).length-1?e.bottom:e.bottom-(a+1)*y})}))))})}if(function(t){return"removeGraph"===t.task}(e)){var v=e.params,O=v.subchartIdx,C=v.yaxisIdx,k=v.graphIdx;if(0===k&&1===t.subCharts[O].yaxis[C].graphs.length){var S=t.subCharts[O].bottom-t.subCharts[O].top,T=Math.floor(S/(t.subCharts.length-1)),w=S%(t.subCharts.length-1);return Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.slice(0,O).map((function(t,e){return Object(c.a)(Object(c.a)({},t),{},{top:0===t.top?0:t.top+w+(O-2)*T,bottom:0===e?t.bottom+T+w:t.bottom+T+w+(O-1)*T})}))),Object(l.a)(t.subCharts.slice(O+1).map((function(e,a){return Object(c.a)(Object(c.a)({},e),{},{top:e.top-(a+1)*T,bottom:a===t.subCharts.slice(O+1).length-1?e.bottom:e.bottom-(a+1)*T})}))))})}return Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.slice(0,O)),[Object(c.a)(Object(c.a)({},t.subCharts[O]),{},{yaxis:[].concat(Object(l.a)(t.subCharts[O].yaxis.slice(0,C)),[Object(c.a)(Object(c.a)({},t.subCharts[O].yaxis[C]),{},{graphs:[].concat(Object(l.a)(t.subCharts[O].yaxis[C].graphs.slice(0,k)),Object(l.a)(t.subCharts[O].yaxis[C].graphs.slice(k+1)))})],Object(l.a)(t.subCharts[O].yaxis.slice(C+1)))})],Object(l.a)(t.subCharts.slice(O+1)))})}if(function(t){return"clearChart"===t.task}(e)){var I=e.params.mode;if("all"===I)return Object(c.a)(Object(c.a)({},t),{},{subCharts:[Object(c.a)(Object(c.a)({},t.subCharts[0]),{},{yaxis:[Object(c.a)(Object(c.a)({},t.subCharts[0].yaxis[0]),{},{graphs:[t.subCharts[0].yaxis[0].graphs[0]],tools:[]})]})]});if("indicators"===I)return Object(c.a)(Object(c.a)({},t),{},{subCharts:[Object(c.a)(Object(c.a)({},t.subCharts[0]),{},{yaxis:[Object(c.a)(Object(c.a)({},t.subCharts[0].yaxis[0]),{},{graphs:[t.subCharts[0].yaxis[0].graphs[0]]})],top:0,bottom:t.containerSize.height-1-t.xaxis.heightXAxis})]});if("tools"===I)return Object(c.a)(Object(c.a)({},t),{},{subCharts:t.subCharts.map((function(t,e){return Object(c.a)(Object(c.a)({},t),{},{yaxis:t.yaxis.map((function(t,e){return Object(c.a)(Object(c.a)({},t),{},{tools:[]})}))})}))})}else{if(function(t){return"addGraph"===t.task}(e)){var P=e.params.chartSeries,M=e.params.chartName,z=e.params.indicator?e.params.indicator:null,A=e.params.subchartIdx,D=z?{strokeColor:[st(it,t.subCharts[A].yaxis[0].graphs.length)]}:{strokeColor:st(it,t.subCharts[A].yaxis[0].graphs.length)},X=z?ot(P,M,z,D):nt(P,M,D),E=X;return u(E)&&E.data[X.data.length-1].prices.length>1&&(E.style.strokeColor=E.data[X.data.length-1].prices.map((function(t,e){return st(it,e)}))),Object(c.a)(Object(c.a)({},t),{},{subCharts:Object(l.a)(t.subCharts.map((function(t,e){return e===A?Object(c.a)(Object(c.a)({},t),{},{yaxis:[Object(c.a)(Object(c.a)({},t.yaxis[0]),{},{graphs:[].concat(Object(l.a)(t.yaxis[0].graphs),[Object(c.a)({},X)])})]}):t})))})}if(function(t){return"draw"===t.task}(e)){var R=e.params.xy;e.params.subchartIdx;return(e.params.type?["hline","vline"].includes(e.params.type)?1:["trendline"].includes(e.params.type)?2:0:0)&&e.params.type?!R&&e.params.type?Object(c.a)(Object(c.a)({},t),{},{draw:{isDrawing:!0,pixXy:[],type:e.params.type}}):t:Object(c.a)(Object(c.a)({},t),{},{draw:{isDrawing:!1,pixXy:[]}})}if(function(t){return"setBackgroundColor"===t.task}(e)){var W=e.params.color;return Object(c.a)(Object(c.a)({},t),{},{backgroundColor:W})}if(function(t){return"setGridStrokeColor"===t.task}(e)){var U=e.params.color;return Object(c.a)(Object(c.a)({},t),{},{grid:Object(c.a)(Object(c.a)({},t.grid),{},{style:Object(c.a)(Object(c.a)({},t.grid.style),{},{strokeColor:U})})})}if(function(t){return"setAxisFillColor"===t.task}(e)){var Y=e.params.color;return Object(c.a)(Object(c.a)({},t),{},{xaxis:Object(c.a)(Object(c.a)({},t.xaxis),{},{style:Object(c.a)(Object(c.a)({},t.xaxis.style),{},{fillColor:Y})}),yaxis:Object(c.a)(Object(c.a)({},t.yaxis),{},{style:Object(c.a)(Object(c.a)({},t.yaxis.style),{},{fillColor:Y})})})}if(function(t){return"setAxisStrokeColor"===t.task}(e)){var L=e.params.color;return Object(c.a)(Object(c.a)({},t),{},{xaxis:Object(c.a)(Object(c.a)({},t.xaxis),{},{style:Object(c.a)(Object(c.a)({},t.xaxis.style),{},{strokeColor:L})}),yaxis:Object(c.a)(Object(c.a)({},t.yaxis),{},{style:Object(c.a)(Object(c.a)({},t.yaxis.style),{},{strokeColor:L})})})}if(function(t){return"setAxisTextColor"===t.task}(e)){var N=e.params.color;return Object(c.a)(Object(c.a)({},t),{},{xaxis:Object(c.a)(Object(c.a)({},t.xaxis),{},{style:Object(c.a)(Object(c.a)({},t.xaxis.style),{},{fontColor:N})}),yaxis:Object(c.a)(Object(c.a)({},t.yaxis),{},{style:Object(c.a)(Object(c.a)({},t.yaxis.style),{},{fontColor:N})})})}if(function(t){return"toggleXaxisGrid"===t.task}(e))return Object(c.a)(Object(c.a)({},t),{},{grid:Object(c.a)(Object(c.a)({},t.grid),{},{useGridX:!t.grid.useGridX})});if(function(t){return"toggleYaxisGrid"===t.task}(e))return Object(c.a)(Object(c.a)({},t),{},{grid:Object(c.a)(Object(c.a)({},t.grid),{},{useGridY:!t.grid.useGridY})});if(function(t){return"toggleFullscreen"===t.task}(e))return Object(c.a)(Object(c.a)({},t),{},{fullscreen:!t.fullscreen});if(function(t){return"setLineChartStrokeColor"===t.task}(e)){var B=e.params.subchartIdx,G=e.params.yaxisIdx,H=e.params.graphIdx,V=e.params.color;t.subCharts[B].yaxis[G].graphs[H];return Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.slice(0,B)),[Object(c.a)(Object(c.a)({},t.subCharts[B]),{},{yaxis:[Object(c.a)(Object(c.a)({},t.subCharts[B].yaxis[G]),{},{graphs:[].concat(Object(l.a)(t.subCharts[B].yaxis[G].graphs.slice(0,H)),[Object(c.a)(Object(c.a)({},t.subCharts[B].yaxis[G].graphs[H]),{},{style:Object(c.a)(Object(c.a)({},t.subCharts[B].yaxis[G].graphs[H].style),{},{strokeColor:[V]})})],Object(l.a)(t.subCharts[B].yaxis[G].graphs.slice(H+1)))})]})],Object(l.a)(t.subCharts.slice(B+1)))})}if(lt(e)||ct(e)||dt(e)){var $=e.params.subchartIdx,q=e.params.yaxisIdx,_=e.params.graphIdx,Q=e.params.color,J=lt(e)?"candleUpColor":ct(e)?"candleDownColor":dt(e)?"candleStrokeColor":null;return J?Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.slice(0,$)),[Object(c.a)(Object(c.a)({},t.subCharts[$]),{},{yaxis:[Object(c.a)(Object(c.a)({},t.subCharts[$].yaxis[q]),{},{graphs:[].concat(Object(l.a)(t.subCharts[$].yaxis[q].graphs.slice(0,_)),[Object(c.a)(Object(c.a)({},t.subCharts[$].yaxis[q].graphs[_]),{},{style:Object(c.a)(Object(c.a)({},t.subCharts[$].yaxis[q].graphs[_].style),{},Object(F.a)({},J,Q))})],Object(l.a)(t.subCharts[$].yaxis[q].graphs.slice(_+1)))})]})],Object(l.a)(t.subCharts.slice($+1)))}):t}if(ut(e)||ht(e)){var K=e.params.subchartIdx,Z=e.params.yaxisIdx,tt=e.params.toolIdx,et=e.params.color,rt=ut(e)?"strokeColor":ht(e)?"anchorColor":null;return rt?Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.slice(0,K)),[Object(c.a)(Object(c.a)({},t.subCharts[K]),{},{yaxis:[Object(c.a)(Object(c.a)({},t.subCharts[K].yaxis[Z]),{},{tools:[].concat(Object(l.a)(t.subCharts[K].yaxis[Z].tools.slice(0,tt)),[Object(c.a)(Object(c.a)({},t.subCharts[K].yaxis[Z].tools[tt]),{},{style:Object(c.a)(Object(c.a)({},t.subCharts[K].yaxis[Z].tools[tt].style),{},Object(F.a)({},rt,et))})],Object(l.a)(t.subCharts[K].yaxis[Z].tools.slice(tt+1)))})]})],Object(l.a)(t.subCharts.slice(K+1)))}):t}if(function(t){return"setIndicatorParam"===t.task}(e)){var pt=e.params.subchartIdx,bt=e.params.yaxisIdx,xt=e.params.graphIdx,ft=e.params.paramIdx,jt=e.params.val,mt=t.subCharts[pt].yaxis[bt].graphs[xt];if(!u(mt))return t;var yt=mt.indicator.indicatorFn,gt=t.subCharts[0].yaxis[0].graphs[0].data,vt=mt.indicator.params.map((function(t){return t.val}));vt[ft]=jt;var Ot=yt.apply(void 0,[gt,mt.name].concat(Object(l.a)(vt)));return Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.slice(0,pt)),[Object(c.a)(Object(c.a)({},t.subCharts[pt]),{},{yaxis:[Object(c.a)(Object(c.a)({},t.subCharts[pt].yaxis[bt]),{},{graphs:[].concat(Object(l.a)(t.subCharts[pt].yaxis[bt].graphs.slice(0,xt)),[Object(c.a)(Object(c.a)({},mt),{},{data:Ot,indicator:Object(c.a)(Object(c.a)({},mt.indicator),{},{params:[].concat(Object(l.a)(mt.indicator.params.slice(0,ft)),[Object(c.a)(Object(c.a)({},mt.indicator.params[ft]),{},{val:jt})],Object(l.a)(mt.indicator.params.slice(ft+1)))})})],Object(l.a)(t.subCharts[pt].yaxis[bt].graphs.slice(xt+1)))})]})],Object(l.a)(t.subCharts.slice(pt+1)))})}if(function(t){return"setHlineYlevel"===t.task}(e)){var Ct=e.params.subchartIdx,kt=e.params.yaxisIdx,St=e.params.toolIdx,Tt=e.params.val,wt=[t.subCharts[Ct].yaxis[kt].tools[St].xy[0][0],Tt];return Object(c.a)(Object(c.a)({},t),{},{subCharts:[].concat(Object(l.a)(t.subCharts.slice(0,Ct)),[Object(c.a)(Object(c.a)({},t.subCharts[Ct]),{},{yaxis:[Object(c.a)(Object(c.a)({},t.subCharts[Ct].yaxis[kt]),{},{tools:[].concat(Object(l.a)(t.subCharts[Ct].yaxis[kt].tools.slice(0,St)),[Object(c.a)(Object(c.a)({},t.subCharts[Ct].yaxis[kt].tools[St]),{},{xy:[wt]})],Object(l.a)(t.subCharts[Ct].yaxis[kt].tools.slice(St+1)))})]})],Object(l.a)(t.subCharts.slice(Ct+1)))})}if(function(t){return"updateInteractionState"===t.task}(e))return Object(c.a)(Object(c.a)({},t),{},{pointer:e.params.newState.pointer,containerSize:e.params.newState.containerSize,subCharts:e.params.newState.subCharts,draw:Object(c.a)(Object(c.a)({},t.draw),e.params.newState.draw),xaxis:Object(c.a)(Object(c.a)({},t.xaxis),e.params.newState.xaxis)})}return t},bt=function(t,e,a){return{addGraph:function(t,e,r,n){return function(t,e,a,r,n){r({task:"addGraph",params:{subchartIdx:a,chartSeries:t,indicator:n,chartName:e}})}(t,e,r,a,n)},addSubchart:function(t,r,n,o){return function(t,e,a,r,n,o){r({task:"addSubchart",params:{chartSeries:t,chartName:e,indicator:n,containerHeight:a,reset:o}})}(t,r,e,a,n,o)},getSubchart:function(e){return t.subCharts[e]},getYaxis:function(e,a){return t.subCharts[e].yaxis[a]},getGraph:function(e,a,r){return t.subCharts[e].yaxis[a].graphs[r]},xToPix:function(e,a){var r=t.xaxis,n=r.widthPerTick,o=r.totalTranslatedX;return e*n+(void 0!==a?a:o)},pixToX:function(e,a){var r=t.xaxis,n=r.widthPerTick,o=r.totalTranslatedX;return(e-(void 0!==a?a:o))/n},yToPix:function(e,a,r,n){var o=t.subCharts[a].yaxis[r],i=o.heightPerPt,s=o.decimals,l=o.translatedY,c=void 0!==n?n:l;return t.subCharts[a].bottom-e*Math.pow(10,s)*i+c},pixToY:function(e,a,r,n){var o=t.subCharts[a].yaxis[r],i=o.heightPerPt,s=o.decimals,l=o.translatedY,c=void 0!==n?n:l;return(t.subCharts[a].bottom+c-e)/i*Math.pow(10,-s)}}},xt=function(t,e,a){return t*a+e},ft=function(t,e,a){return(t-e)/a},jt=function(t,e,a,r,n){return e-t*Math.pow(10,a)*n+r},mt=function(t,e,a,r,n){return(e+r-t)/n*Math.pow(10,-a)},yt=function(t,e,a,r,n,o){var i=o||10;if(P(t)||P(a)||P(r)||P(n)||P(e))return null;var s=[];if(k(e)?e.prices[0]&&s.push(e.prices[0]):v(e)?s.push(e.open,e.high,e.low,e.close):s.push(e.close),0===s.length)return null;var l=[];return s.forEach((function(e,o){var s=jt(e,a[r].bottom,a[r].yaxis[n].decimals,a[r].yaxis[n].translatedY,a[r].yaxis[n].heightPerPt);s>=t-i&&s<=t+i&&l.push({y:e.toFixed(M(e)),pixY:s})})),l?l.sort((function(e,a){return Math.abs(e.pixY-t)<Math.abs(a.pixY-t)?-1:Math.abs(e.pixY-t)>Math.abs(a.pixY-t)?1:0})):null};var gt=function(t,e,a,r,n,o){if(!t)return null;if(0===t.length)return null;var i=t;return i.forEach((function(t,e){var s=[];t.yaxis.forEach((function(c,d){var h=null,p=null,b=0;c.graphs.forEach((function(t,s){var c,x,f,j,m,y,g,O,C=i[e].yaxis[d].graphs[s],S=C.data;C.datasets.last={data:S[r],x:r,pixX:o,dateString:""},C.datasets.first={data:S[a],x:a,pixX:n,dateString:""};var T=C.data.filter((function(t,e){return e>=a&&e<=r}));C.curData=T,C.yMaxExact=u(C)&&(null===C||void 0===C||null===(c=C.indicator)||void 0===c||null===(x=c.default)||void 0===x?void 0:x.fixedYScale)?null===C||void 0===C||null===(f=C.indicator)||void 0===f||null===(j=f.default)||void 0===j?void 0:j.fixedYScale[1]:Math.max.apply(Math,Object(l.a)(T.map((function(t){if(k(t)){var e=Math.max.apply(Math,Object(l.a)(t.prices.filter((function(t){return null!==t}))));return e||0===e?e:0}return v(t)?t.high:t.close})))),C.yMinExact=u(C)&&(null===C||void 0===C||null===(m=C.indicator)||void 0===m||null===(y=m.default)||void 0===y?void 0:y.fixedYScale)?null===C||void 0===C||null===(g=C.indicator)||void 0===g||null===(O=g.default)||void 0===O?void 0:O.fixedYScale[0]:Math.min.apply(Math,Object(l.a)(T.map((function(t){if(k(t)){var e=Math.min.apply(Math,Object(l.a)(t.prices.filter((function(t){return null!==t}))));return e||0===e?e:0}return v(t)?t.low:t.close})))),(null===h||C.yMinExact<h)&&(h=C.yMinExact),(null===p||C.yMaxExact>p)&&(p=C.yMaxExact),C.decimals>b&&(b=C.decimals)}));var x=Math.max(Math.round((t.bottom-t.top)/75),3),f=b,j=function(t,e,a,r){for(var n=1/Math.pow(10,a),o=n,i=o,s=function(a){return Math.abs((t-e)/a-r)},l=s(o),c=0;o<t-e;){for(var d=0;d<=2;d++){var u=0===d?1:1===d?2.5:5,h=s(o*u);h<l&&(l=h,i=o*u)}c++,o=n*Math.pow(10,c)}return parseFloat(i.toFixed(a))}(p=p||0,h=h||0,f,x);c.optIntervalY=j;var m=null,y=null;c.graphs.forEach((function(t,e){t.yMax=Math.ceil(t.yMaxExact/j)*j,t.yMin=Math.floor(t.yMinExact/j)*j,(null===m||t.yMax>m)&&(m=t.yMax),(null===y||t.yMin<y)&&(y=t.yMin)}));var g=(t.bottom-t.top)/((m||0)-(y||0))/Math.pow(10,f);c.heightPerPt=g,c.translatedY=-jt(y||0,t.bottom,f,0,g)+t.bottom;for(var O=mt(t.bottom,t.bottom,f,c.translatedY,c.heightPerPt),C=jt(Math.ceil(O/j)*j,t.bottom,f,c.translatedY,g);C>=t.top;){var S=mt(C,t.bottom,c.decimals,c.translatedY,c.heightPerPt),T=(Math.round(S*Math.pow(10,f))/Math.pow(10,f)).toString();C>t.top+10&&C<t.bottom-10&&s.push({pixY:C,label:T}),C-=g*j/Math.pow(10,-f)}c.drawTicks=s}))})),i},vt=function(t,e){if(!t||!e)return null;for(var a=0;a<e.length;a++){var r=e[a];if(t[1]>=r.top&&t[1]<r.bottom)return a}return null},Ot=function(t,e,a,r,n,o,i){if(!t)return null;if(r)return null;if(n)return{type:"drawTool",init:t};var s=function(t,e,a){if(!t||!e||!a)return[];var r=vt(t,e);if(null===r)return[];var n=[],o=a.totalTranslatedX,i=a.scaledWidthPerTick;return e[r].yaxis.forEach((function(a,s){var l=a.translatedY,c=a.heightPerPt;a.tools.forEach((function(a,d){a.xy.forEach((function(a,u){t[0]>=xt(a[0],o,i)-10&&t[0]<=xt(a[0],o,i)+10&&t[1]>=jt(a[1],e[r].bottom,e[r].yaxis[s].decimals,l,c)-10&&t[1]<=jt(a[1],e[r].bottom,e[r].yaxis[s].decimals,l,c)+10&&n.push([r,s,d,u])}))}))})),n}(t,e,a);if(s.length>0)return{type:"editTool",res:s,init:e[s[0][0]].yaxis[s[0][1]].tools[s[0][2]].xy[s[0][3]]};var l=function(t,e){if(!t)return null;for(var a=0;a<e.length;a++){var r=e[a];if(t[1]>=r.bottom-10&&t[1]<r.bottom+10)return a}return null}(t,e);return null!==l&&l!==e.length-1?{type:"resizeSubchart",res:l,initBottom:e[l].bottom}:t[0]>=0&&t[0]<0+o&&t[1]>=0&&t[1]<0+i?{type:"translate"}:t[0]>=0&&t[0]<0+o&&t[1]>=0+i?{type:"scale"}:null},Ct=function(t,e,a,r){if("editTool"!==t.type||0===t.res.length||!t.init)return e;var n=r.chartPointer.move.pixXSnap?r.chartPointer.move.pixXSnap:r.drag.xy[0],o=r.chartPointer.move.snapDatasets.length>0&&r.chartPointer.move.snapDatasets[0].pixYSnap?r.chartPointer.move.snapDatasets[0].pixYSnap:r.drag.xy[1],i=xt(Math.round(ft(r.drag.initial[0],a.totalTranslatedX,a.scaledWidthPerTick)),a.totalTranslatedX,a.scaledWidthPerTick),d=t.res[0][0],u=t.res[0][1],h=[],p={y:t.init[1],pixY:r.drag.initial[1]};e[d].yaxis[u].graphs.forEach((function(t,a){var n=yt(r.drag.initial[1],t.data[i],e,d,u);n&&n.length>0&&h.push(Object(c.a)(Object(c.a)({},n[0]),{},{y:parseFloat(n[0].y)}))})),h.length>0&&(p={y:h[0].y,pixY:h[0].pixY});var b=xt(t.init[0],a.totalTranslatedX,a.scaledWidthPerTick)+n-i,x=jt(t.init[1],e[d].bottom,e[d].yaxis[u].decimals,e[d].yaxis[u].translatedY,e[d].yaxis[u].heightPerPt)+o-p.pixY,f=ft(b,a.totalTranslatedX,a.scaledWidthPerTick),j=mt(x,e[d].bottom,e[d].yaxis[u].decimals,e[d].yaxis[u].translatedY,e[d].yaxis[u].heightPerPt),m=Object(s.a)(t.res[0],4),y=m[0],g=m[1],v=m[2],O=m[3];return[].concat(Object(l.a)(e.slice(0,y)),[Object(c.a)(Object(c.a)({},e[y]),{},{yaxis:[].concat(Object(l.a)(e[y].yaxis.slice(0,g)),[Object(c.a)(Object(c.a)({},e[y].yaxis[g]),{},{tools:[].concat(Object(l.a)(e[y].yaxis[g].tools.slice(0,v)),[Object(c.a)(Object(c.a)({},e[y].yaxis[g].tools[v]),{},{xy:[].concat(Object(l.a)(e[y].yaxis[g].tools[v].xy.slice(0,O)),[[f,j]],Object(l.a)(e[y].yaxis[g].tools[v].xy.slice(O+1)))})],Object(l.a)(e[y].yaxis[g].tools.slice(v+1)))})],Object(l.a)(e[y].yaxis.slice(g+1)))})],Object(l.a)(e.slice(y+1)))},kt=function(t,e,a){if("resizeSubchart"!==t.type||null===t)return e;var r=t.res,n=Math.min(Math.max(t.initBottom+a.xy[1]-a.initial[1],e[r].top+10),e[r+1].bottom-10);return[].concat(Object(l.a)(e.slice(0,r)),[Object(c.a)(Object(c.a)({},e[r]),{},{bottom:n}),Object(c.a)(Object(c.a)({},e[r+1]),{},{top:n})],Object(l.a)(e.slice(r+2)))},St=function(t,e,a){var r=[a.chartPointer.move.pixXSnap?a.chartPointer.move.pixXSnap:a.drag.xy[0],a.chartPointer.move.snapDatasets.length>0&&a.chartPointer.move.snapDatasets[0].pixYSnap?a.chartPointer.move.snapDatasets[0].pixYSnap:a.drag.xy[1]];return t&&e&&r?Object(c.a)(Object(c.a)({},e),{},{pixXy:[].concat(Object(l.a)(e.pixXy),[r])}):{isDrawing:!1,pixXy:[]}},Tt=a(114),wt={xaxis:{heightXAxis:50,heightTickMarkLines:20,totalScaleX:0,totalTranslatedX:0,scaledWidthPerTick:20,xStart:0,xEnd:0,pixXStart:0,pixXEnd:0,startNoDataPeriod:0,endNoDataPeriod:0,noDataPeriodPortion:0,optPeriodRes:null,widthPerTick:20,xAxisTicks:[],style:{fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:16,fontName:"Arial"}},grid:{useGridX:!0,useGridY:!0,style:{strokeColor:"rgba(51,51,51, 0.33)",strokeStyle:""}},yaxis:{widthYAxis:80,widthTickmarkLines:20,style:{fillColor:"#fff",strokeColor:"#000",fontColor:"#000",fontSize:16,fontName:"Arial"}},backgroundColor:"#fff",fullscreen:!1,subCharts:[],draw:{isDrawing:!1,pixXy:[]},containerSize:{top:0,left:0,width:300,height:300,init:!1},pointer:{isHovering:!1,move:{isMoving:!1,xy:[0,0]},wheel:{isWheeling:!1,delta:[0,0]},dragPointerUp:{isDragPointerUp:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0]},drag:{isDragging:!1,xy:[0,0],first:!1,last:!1,initial:[0,0],movementInitial:[0,0],delta:[0,0]},chartPointer:{move:{x:0,pixX:0,pixY:0,snapDatasets:[],subchartIdx:0,xDateString:"",pixXSnap:0,xUnlimited:0},click:{clickedSubchartIdx:null}}}},It=function(t,e){var a,r,o=e.maxUpdatesPerSec?e.maxUpdatesPerSec:15,i=e.initWidthPerTick?e.initWidthPerTick:20,d=("static"!==e.viewMode||e.height&&e.width)&&e.viewMode?e.viewMode:"responsive",p=n.a.useReducer(pt,wt),b=Object(s.a)(p,2),x=b[0],f=b[1],j=n.a.useRef({containerSize:wt.containerSize,pointer:wt.pointer,xaxis:{totalScaleX:0,totalTranslatedX:0,scaledWidthPerTick:20,xStart:0,xEnd:0,pixXStart:0,pixXEnd:0,startNoDataPeriod:0,endNoDataPeriod:0,noDataPeriodPortion:0,optPeriodRes:null,widthPerTick:20,xAxisTicks:[]},tmp:{scaleInitWidthPerTick:null,scaleInitTranslatedX:0,dragActionType:null,amtLastSubcharts:0,lastMainChartData:[]},lastUpdate:new Date,shallUpdate:[],userInteractedChartState:null}),m=x.containerSize.height-1;Object(W.a)({onDrag:function(t){var e,a,r,n,o=(null===(e=j.current.pointer.drag)||void 0===e?void 0:e.delta)&&j.current.shallUpdate.includes("drag")?(null===(a=j.current.pointer.drag)||void 0===a?void 0:a.delta[0])+t.delta[0]:t.delta[0],i=(null===(r=j.current.pointer.drag)||void 0===r?void 0:r.delta)&&j.current.shallUpdate.includes("drag")?(null===(n=j.current.pointer.drag)||void 0===n?void 0:n.delta[1])+t.delta[1]:t.delta[1],s=t.xy,d=t.initial,u=t.movement,h=t.first,p=t.last,b=t.active;j.current=Object(c.a)(Object(c.a)({},j.current),{},{pointer:Object(c.a)(Object(c.a)({},j.current.pointer),{},{drag:{isDragging:b,xy:s,initial:d,movementInitial:u,last:p,first:h,delta:[o,i]}}),shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["drag"]),lastUpdate:j.current.lastUpdate})},onMove:function(t){j.current=Object(c.a)(Object(c.a)({},j.current),{},{pointer:Object(c.a)(Object(c.a)({},j.current.pointer),{},{move:{isMoving:t.active,xy:t.xy}}),shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["pointerMove"])})},onHover:function(t){j.current=Object(c.a)(Object(c.a)({},j.current),{},{pointer:Object(c.a)(Object(c.a)({},j.current.pointer),{},{isHovering:t.active}),shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["pointerMove"])})},onWheel:function(t){var e,a,r,n,o=(null===(e=j.current.pointer.wheel)||void 0===e?void 0:e.delta)&&j.current.shallUpdate.includes("wheel")?(null===(a=j.current.pointer.wheel)||void 0===a?void 0:a.delta[0])+t.delta[0]:t.delta[0],i=(null===(r=j.current.pointer.wheel)||void 0===r?void 0:r.delta)&&j.current.shallUpdate.includes("wheel")?(null===(n=j.current.pointer.wheel)||void 0===n?void 0:n.delta[1])+t.delta[1]:t.delta[1];j.current=Object(c.a)(Object(c.a)({},j.current),{},{pointer:Object(c.a)(Object(c.a)({},j.current.pointer),{},{wheel:{delta:[o,i],isWheeling:t.active}}),shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["wheel"])})},onDragEnd:function(t){var e=t.xy,a=t.initial,r=t.first,n=t.last,o=t.movement;j.current=Object(c.a)(Object(c.a)({},j.current),{},{pointer:Object(c.a)(Object(c.a)({},j.current.pointer),{},{dragPointerUp:{isDragPointerUp:!0,xy:e,initial:a,movementInitial:o,last:n,first:r}}),shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["dragEnd"])})}},{domTarget:t,transform:function(t){var e=Object(s.a)(t,2),a=e[0],r=e[1];return[a-x.containerSize.top,r-x.containerSize.left]},drag:{useTouch:!0,experimental_preventWindowScrollY:!0},move:{}}),n.a.useEffect((function(){if(t&&t.current){if(x.fullscreen||"fullscreen"===d){t.current.style.position="fixed",t.current.style.width="100%",t.current.style.height="100%",t.current.style.top="0px";var a=t.current,r=a.clientWidth,n=a.clientHeight;j.current=Object(c.a)(Object(c.a)({},j.current),{},{shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["containerResize"]),containerSize:{top:0,left:0,width:r,height:n,init:!0}})}else{var o=t.current.getBoundingClientRect(),i=o.top,s=o.left,u=t.current,h=u.clientWidth,p=u.clientHeight;t.current.style.position="relative",t.current.style.width=e.width&&"static"===d?e.width+"px":"100%",t.current.style.height=e.height&&"static"===d?e.height+"px":"100%",t.current.style.top="0px",j.current=Object(c.a)(Object(c.a)({},j.current),{},{shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["containerResize"]),containerSize:{top:i,left:s,width:h,height:p,init:!0}})}if(!e.height||!e.width||"static"!==d){var b=function(e){if(t&&t.current)if(x.fullscreen||"fullscreen"===d){var a=t.current,r=a.clientWidth,n=a.clientHeight;j.current=Object(c.a)(Object(c.a)({},j.current),{},{shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["containerResize"]),containerSize:{top:0,left:0,width:r,height:n,init:!0}})}else{var o=t.current.getBoundingClientRect(),i=o.top,s=o.left,u=t.current,h=u.clientWidth,p=u.clientHeight;j.current=Object(c.a)(Object(c.a)({},j.current),{},{shallUpdate:[].concat(Object(l.a)(j.current.shallUpdate),["containerResize"]),containerSize:{top:i,left:s,width:h,height:p,init:!0}})}};return t.current.parentElement&&t.current.parentElement.addEventListener("resize",(function(){})),window.addEventListener("resize",b),window.addEventListener("orientationchange",b),function(){window.removeEventListener("resize",b),window.removeEventListener("orientationchange",b)}}}}),[t,e.width,e.height,x.fullscreen,d,null===t||void 0===t||null===(a=t.current)||void 0===a?void 0:a.clientWidth,null===t||void 0===t||null===(r=t.current)||void 0===r?void 0:r.clientHeight]);var y=x.subCharts.map((function(t){return{yaxis:t.yaxis.map((function(t){return{decimals:t.decimals,graphs:t.graphs.map((function(t){var e=u(t)?Object(c.a)({},t.indicator):{};return Object(c.a)({decimals:t.decimals,name:t.name,style:t.style,type:t.type},e)})),tools:t.tools.map((function(t){return{type:t.type,params:t.params,style:t.style}}))}}))}})),g={xaxis:{heightXAxis:x.xaxis.heightXAxis,heightTickMarkLines:x.xaxis.heightTickMarkLines,style:x.xaxis.style},subcharts:y};return Tt(j.current.userInteractedChartState,g)||(j.current.userInteractedChartState=g),n.a.useEffect((function(){var t=function(){var t,e,a,r,n,o,s,d=j.current,u=d.pointer.dragPointerUp,p=d.pointer.drag;if(d.shallUpdate.length>0){var b,m,y,g=x.yaxis.widthYAxis,v=d.containerSize.width-1,O=d.containerSize.height-1,C=x.xaxis.heightXAxis,k=x.subCharts,S=d.xaxis,T=x.draw;if(d.shallUpdate.includes("dragEnd")||(d.pointer.dragPointerUp.isDragPointerUp=!1),z(d.shallUpdate,"containerResize")&&x.subCharts.length>0){var w=d.containerSize.height-1-x.xaxis.heightXAxis-x.subCharts[x.subCharts.length-1].bottom,I=Math.floor(w/x.subCharts.length),P=x.subCharts[0].bottom-x.subCharts[0].top+I,M=I+(P<250?250-P:0),A=x.subCharts.length>1?Math.floor((w-M)/(x.subCharts.length-1)):0,D=x.subCharts.length>1?(w-M)%(x.subCharts.length-1):0,X=0,E=0;k=k.map((function(t,e){if(0===e)return X=t.bottom+1*M,Object(c.a)(Object(c.a)({},t),{},{bottom:t.bottom+1*M});var a=Math.sign(D)>0&&D>0&&0!==D?-1:Math.sign(D)<0&&D<0&&0!==D?1:0;D+=a,E+=a;var r=X;return X=t.bottom+e*A+M+Math.abs(E),Object(c.a)(Object(c.a)({},t),{},{top:r,bottom:t.bottom+e*A+M+Math.abs(E)})})),j.current.userInteractedChartState=null}if(z(d.shallUpdate,"drag","wheel","containerResize","deps")||d.tmp.dragActionType){var W=null===p||void 0===p?void 0:p.initial;if(y=Ot(W,k,S,!!d.tmp.dragActionType,x.draw.isDrawing,v-g,O-C),!d.tmp.dragActionType&&y&&["resizeSubchart"].includes(y.type)&&(d.tmp.dragActionType=y),d.tmp.dragActionType){var F,U,Y;if(d.pointer.drag.isDragging)"resizeSubchart"===(null===(F=d.tmp.dragActionType)||void 0===F?void 0:F.type)&&(k=kt(d.tmp.dragActionType,k,d.pointer.drag));if(!d.pointer.drag.isDragging)if(!["drawTool","editTool"].includes(null===(U=d.tmp.dragActionType)||void 0===U?void 0:U.type))"resizeSubchart"===(null===(Y=d.tmp.dragActionType)||void 0===Y?void 0:Y.type)&&(k=kt(d.tmp.dragActionType,k,d.pointer.drag),d.userInteractedChartState=null,d.tmp.dragActionType=null)}if(y&&["scale","translate"].includes(y.type)||z(d.shallUpdate,"containerResize","deps")){var L,N,B,G,H,$,q,_,J,K,Z,et,at,rt,nt,ot;null!==(L=d.tmp.amtLastSubcharts!==x.subCharts.length&&1===x.subCharts.length||d.tmp.lastMainChartData!==(null===(N=x.subCharts)||void 0===N||null===(B=N[0])||void 0===B||null===(G=B.yaxis)||void 0===G||null===(H=G[0])||void 0===H||null===($=H.graphs)||void 0===$||null===(q=$[0])||void 0===q?void 0:q.data))&&void 0!==L&&L&&(d.xaxis.totalTranslatedX=x.xaxis.totalTranslatedX);var it=d.tmp,st=it.scaleInitTranslatedX,lt=it.scaleInitWidthPerTick,ct=(null===(_=k)||void 0===_||null===(J=_[0])||void 0===J||null===(K=J.yaxis)||void 0===K||null===(Z=K[0])||void 0===Z||null===(et=Z.graphs)||void 0===et?void 0:et[0])?null===(at=k)||void 0===at?void 0:at[0].yaxis[0].graphs[0]:null;ct&&(h(ct)||(ct=null)),d.xaxis=function(t,e,a,r,n,o,i,s,l,d){var u=!!(null===a||void 0===a?void 0:a.isWheeling),h=null===a||void 0===a?void 0:a.delta[1],p=null===r||void 0===r?void 0:r.xy,b=function(t){return.5*Math.round(Math.min(Math.max(t+640,0)*(n-.5)/640-(n-.5),l/3-n)/.5)};if(o){var x=null===e||void 0===e?void 0:e.initial;if(!x)return t;if(i&&!h){var f=(null===e||void 0===e?void 0:e.delta)?Math.max(Math.min(e.delta[0]+t.totalTranslatedX,l-2*t.scaledWidthPerTick),-(d-3)*t.scaledWidthPerTick):t.totalTranslatedX;return Object(c.a)(Object(c.a)({},t),{},{totalTranslatedX:f})}if(s&&!h){var j=t.scaleInitWidthPerTick?t.scaleInitWidthPerTick:t.scaledWidthPerTick,m=t.scaleInitTranslatedX?t.scaleInitTranslatedX:t.totalTranslatedX,y=(null===e||void 0===e?void 0:e.delta)?t.totalScaleX+(null===e||void 0===e?void 0:e.delta[0]):t.totalScaleX;y=Math.min(Math.max(y,-640),640*(l/3-n+n-.5)/(n-.5)-640);var g=n+b(y),v=m,O=x[0],C=m-((x[0]-v)/j*g+v)+O;return(null===e||void 0===e?void 0:e.isDragging)||(j=null),Object(c.a)(Object(c.a)({},t),{},{scaleInitWidthPerTick:j,scaleInitTranslatedX:m,totalScaleX:y,scaledWidthPerTick:g,totalTranslatedX:C})}}else if(u&&h){var k=t.scaledWidthPerTick,S=t.totalTranslatedX,T=t.totalScaleX+h/10;T=Math.min(Math.max(T,-640),640*(l/3-n+n-.5)/(n-.5)-640);var w=n+b(T),I=S,P=p?p[0]:0,M=((p?p[0]:0)-I)/k,z=S-(Math.round(M)*w+t.totalTranslatedX)+P;return u||(k=null),Object(c.a)(Object(c.a)({},t),{},{scaleInitWidthPerTick:k,scaleInitTranslatedX:S,totalScaleX:T,scaledWidthPerTick:w,totalTranslatedX:z})}return t}(Object(c.a)(Object(c.a)({},d.xaxis),{},{scaleInitTranslatedX:st,scaleInitWidthPerTick:lt}),d.pointer.drag,d.pointer.wheel,d.pointer.move,i,d.shallUpdate.includes("drag"),"translate"===(null===(rt=y)||void 0===rt?void 0:rt.type),"scale"===(null===(nt=y)||void 0===nt?void 0:nt.type),v,(null===(ot=ct)||void 0===ot?void 0:ot.data.length)||0),S=Object(c.a)(Object(c.a)(Object(c.a)({},S),d.xaxis),function(t,e,a,r,n){var o=[],i=Math.max(Math.ceil(-e/t),0),s=null===n||void 0===n?void 0:n.data.length,l=Math.max(Math.ceil(-e/t),0)*t+e,d=0,u=0,h=Math.abs(Math.min(Math.ceil(-e/t),0)),p=0,b=0,x=null;if(a&&r&&s&&(d=Math.min(a,s*t+e),u=Math.min(Math.floor((d-e)/t),s-1),b=(h+(p=Math.max(Math.floor((a-e)/t)-s,0)))/(u-i+h+p),n&&(x=Q(n.data,i,u,n.meta,b,Object.assign({},n.dateStat)))&&n.meta.chartPeriod))for(var f=l,j=i;f<d;){var m=tt(n.data[j].date,n.dateStat,n.meta.chartPeriod,Object(c.a)({},x));if(m){var y=V(n.data[j].date,m);o.push({x:f,dateString:y.toString()}),f+=t,j++}else f+=t,j++}return{xStart:i,pixXStart:l,xEnd:u,pixXEnd:d,widthPerTick:t,startNoDataPeriod:h,endNoDataPeriod:p,noDataPeriodPortion:b,xAxisTicks:o,optPeriodRes:x}}(d.xaxis.scaledWidthPerTick,d.xaxis.totalTranslatedX,d.containerSize.width,x.yaxis.widthYAxis,ct))}if(y&&["scale","translate","resizeSubchart"].includes(y.type)||d.tmp.dragActionType||z(d.shallUpdate,"containerResize","deps")){var dt=gt(k,d.xaxis.scaledWidthPerTick,S.xStart,S.xEnd,S.pixXStart,S.pixXEnd);dt&&(k=dt)}}if(d.shallUpdate.includes("pointerMove")){var ut,ht,pt,bt,jt,Tt=function(t,e,a,r,n){if(!r||!n)return null;var o=Math.round(ft(null===n||void 0===n?void 0:n.xy[0],e,t));if(o<0||o>r.data.length-1)return{xPointerUnlimited:o};var i=Math.abs(Math.round(o)),s=Q(r.data,a.xStart,a.xEnd,r.meta,a.noDataPeriodPortion,Object.assign({},r.dateStat));if(!s||!r.meta.chartPeriod)return null;var l=tt(r.data[i].date,r.dateStat,r.meta.chartPeriod,Object(c.a)({},s));return{xPointer:i,xPointerDateStr:V(r.data[i].date,l||r.meta.chartPeriod.chartPeriodName),pixXPointer:xt(i,e,t),xPointerUnlimited:o}}(S.scaledWidthPerTick,S.totalTranslatedX,S,null===(ut=k)||void 0===ut||null===(ht=ut[0])||void 0===ht||null===(pt=ht.yaxis)||void 0===pt||null===(bt=pt[0])||void 0===bt||null===(jt=bt.graphs)||void 0===jt?void 0:jt[0],d.pointer.move);m=function(t,e,a,r,n,o,i){var s=null===o||void 0===o?void 0:o.xy;if(o&&t&&s){var l=function(e){for(var a=-1,r=0;r<t.length;r++){var n=t[r];e[1]>=n.top&&e[1]<n.bottom&&(a=r)}return a},c=l(s);if(-1!==c){var d=i&&i.xy?l(i.xy):null,u=[];return null!==e&&t[c].yaxis.forEach((function(a,n){a.graphs.forEach((function(i,s){var l=null,d=null,h=yt(null===o||void 0===o?void 0:o.xy[1],i.data[e],t,c,n);h&&h.length>0&&(d=h[0].pixY,l=h[0].y),u.push({yaxisIdx:n,graphIdx:s,data:i.data[e],y:mt(null===o||void 0===o?void 0:o.xy[1],t[c].bottom,a.decimals,a.translatedY,a.heightPerPt),ySnap:l,pixYSnap:d,dateString:r})}))})),{move:{pixX:null===o||void 0===o?void 0:o.xy[0],pixXSnap:n,pixY:null===o||void 0===o?void 0:o.xy[1],x:e,xUnlimited:a,subchartIdx:c,snapDatasets:u,xDateString:r},click:{clickedSubchartIdx:d}}}}}(k,void 0!==(null===Tt||void 0===Tt?void 0:Tt.xPointer)?null===Tt||void 0===Tt?void 0:Tt.xPointer:null,void 0!==(null===Tt||void 0===Tt?void 0:Tt.xPointerUnlimited)?Tt.xPointerUnlimited:-1,(null===Tt||void 0===Tt?void 0:Tt.xPointerDateStr)||"",(null===Tt||void 0===Tt?void 0:Tt.pixXPointer)||0,d.pointer.move,d.pointer.dragPointerUp)}if((d.shallUpdate.includes("drag")||(null===(b=d.tmp)||void 0===b?void 0:b.dragActionType)&&["editTool","drawTool"].includes(d.tmp.dragActionType.type))&&(!d.tmp.dragActionType&&y&&["editTool","drawTool"].includes(y.type)&&(d.tmp.dragActionType=y),d.tmp.dragActionType)){var wt,It,Pt;if(d.pointer.drag.isDragging)"editTool"===(null===(wt=d.tmp.dragActionType)||void 0===wt?void 0:wt.type)&&(k=Ct(d.tmp.dragActionType,k,S,d.pointer));if(!d.pointer.drag.isDragging)if("editTool"===(null===(It=d.tmp.dragActionType)||void 0===It?void 0:It.type))k=Ct(d.tmp.dragActionType,k,S,d.pointer),d.userInteractedChartState=null,d.tmp.dragActionType=null;else if(u.isDragPointerUp&&"drawTool"===(null===(Pt=d.tmp.dragActionType)||void 0===Pt?void 0:Pt.type)){var Mt=x.draw.type?["hline","vline"].includes(x.draw.type)?1:["trendline"].includes(x.draw.type)?2:0:0;Mt?T.pixXy.length<Mt-1?T=St(T.type,T,d.pointer):(k=function(t,e,a,r){var n=vt(r.initial,t);if(null===n||!e||!a||!r||!a.type)return t;var o=a.pixXy.map((function(a,r){return[ft(a[0],e.totalTranslatedX,e.scaledWidthPerTick),mt(a[1],t[n].bottom,t[n].yaxis[0].decimals,t[n].yaxis[0].translatedY,t[n].yaxis[0].heightPerPt)]}));return[].concat(Object(l.a)(t.slice(0,n)),[Object(c.a)(Object(c.a)({},t[n]),{},{yaxis:[Object(c.a)(Object(c.a)({},t[n].yaxis[0]),{},{tools:[].concat(Object(l.a)(t[n].yaxis[0].tools),[{xy:o,type:a.type,style:{strokeColor:"blue",anchorColor:"#333"}}])})].concat(Object(l.a)(t[n].yaxis.slice(1)))})],Object(l.a)(t.slice(n+1)))}(k,S,T=St(T.type,T,d.pointer),d.pointer.drag),T={isDrawing:!1,pixXy:[]},d.tmp.dragActionType=null):T={isDrawing:!1,pixXy:[]}}}d.lastUpdate,d.shallUpdate,d.userInteractedChartState,d.xaxis,d.tmp;var zt=Object(R.a)(d,["lastUpdate","shallUpdate","userInteractedChartState","xaxis","tmp"]);d.xaxis=Object(c.a)(Object(c.a)({},d.xaxis),S),m&&(d.pointer.chartPointer=m),f({task:"updateInteractionState",params:{newState:Object(c.a)(Object(c.a)({},zt),{},{xaxis:S,subCharts:k,draw:T})}}),j.current=Object(c.a)(Object(c.a)({},d),{},{lastUpdate:new Date,shallUpdate:[]})}d.tmp.amtLastSubcharts=x.subCharts.length,d.tmp.lastMainChartData=null!==(t=null===(e=x.subCharts)||void 0===e||null===(a=e[0])||void 0===a||null===(r=a.yaxis)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.graphs)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.data)&&void 0!==t?t:null};console.log("updated Timer"),j.current.shallUpdate.push("deps"),t();var e=window.setInterval(t,1e3/o);return function(){window.clearInterval(e)}}),[o,i,x.draw.isDrawing,x.draw.pixXy,x.yaxis.widthYAxis,x.xaxis.heightXAxis,j.current.userInteractedChartState,x.fullscreen]),[Object(c.a)(Object(c.a)({},x),{},{methods:bt(x,m,f)}),f]},Pt=function(t){var e=t.style,a=t.pixXy,r=t.mode,o=t.subchartTop,i=t.subchartBottom;if(2!==a.length)return null;var s=(null===e||void 0===e?void 0:e.strokeColor)?e.strokeColor:"red",c=(null===e||void 0===e?void 0:e.anchorColor)?e.anchorColor:"#333",u=["line","trendline","infiniteLine"].includes(r)?r:"trendline",h=[];if(a[0][0]>a[1][0]?h.push(Object(l.a)(a[1]),Object(l.a)(a[0])):h.push(Object(l.a)(a[0]),Object(l.a)(a[1])),"trendline"===u||"infiniteLine"===r){var p=h[1][0]-h[0][0],b=h[1][1]-h[0][1],x=b/p,f=b<0?o:i,j=h[0][1]-x*h[0][0],m=(f-j)/x;if(h[1][0]=m,h[1][1]=f,"infiniteLine"===r){var y=b<0?i:o,g=(y-j)/x;h[0][0]=g,h[0][1]=y}}return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.c,{x:0,y:0,points:[h[0][0],h[0][1],h[1][0],h[1][1]],stroke:s,strokeWidth:1}),Object(S.jsx)(d.a,{x:a[0][0],y:a[0][1],radius:5,fill:c}),Object(S.jsx)(d.a,{x:a[1][0],y:a[1][1],radius:5,fill:c})]})},Mt=function(t){var e=t.style,a=t.pixXy,r=t.subchartTop,o=t.subchartBottom;if(1!==a.length)return null;var i=(null===e||void 0===e?void 0:e.strokeColor)?e.strokeColor:"red",s=(null===e||void 0===e?void 0:e.anchorColor)?e.anchorColor:"#333",l=[];return l.push([a[0][0],r],[a[0][0],o]),Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.c,{x:0,y:0,points:[l[0][0],l[0][1],l[1][0],l[1][1]],stroke:i,strokeWidth:1}),Object(S.jsx)(d.a,{x:a[0][0],y:a[0][1],radius:5,fill:s})]})},zt=function(t){var e=t.style,a=t.pixXy,r=t.pixXstart,o=t.pixXend;if(1!==a.length)return null;var i=(null===e||void 0===e?void 0:e.strokeColor)?e.strokeColor:"red",s=(null===e||void 0===e?void 0:e.anchorColor)?e.anchorColor:"#333",l=[];return l.push([r,a[0][1]],[o,a[0][1]]),Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.c,{x:0,y:0,points:[l[0][0],l[0][1],l[1][0],l[1][1]],stroke:i,strokeWidth:1}),Object(S.jsx)(d.a,{x:a[0][0],y:a[0][1],radius:5,fill:s})]})},At=a(355),Dt=a(165),Xt=a(365),Et=function(){var t=Object(Dt.a)({palette:{primary:{main:"#009688"},secondary:{main:"#f50057"},type:"light"}});return t.typography.h1={fontFamily:"'Open Sans', sans-serif, Arial",fontWeight:600,fontSize:"3rem",lineHeight:1.167},t.typography.h2={fontFamily:"'Open Sans', sans-serif, Arial",fontWeight:600,fontSize:"2.5rem",lineHeight:1.167},t.typography.h3={fontFamily:"'Open Sans', sans-serif, Arial",fontWeight:600,fontSize:"2rem",lineHeight:1.167},t.typography.h4={fontFamily:"'Open Sans', sans-serif, Arial",fontWeight:600,fontSize:"1.88rem",lineHeight:1.167},t.typography.h5={fontFamily:"'Open Sans', sans-serif, Arial",fontWeight:600,fontSize:"1.44rem",lineHeight:1.167},t.typography.h6={fontFamily:"'Open Sans', sans-serif, Arial",fontWeight:600,fontSize:"1.25rem",lineHeight:1.167},t.typography.fontFamily="'Quattrocento Sans', sans-serif",t=Object(Xt.a)(t)}(),Rt=a(347),Wt=a(364),Ft=a(34),Ut=a(343),Yt=a(361),Lt=a(351),Nt=a(348),Bt=a(344),Gt=a(297),Ht=a(345),Vt=a(346),$t=function(t){var e=t.ChartState,a=t.onNavigate,r=(Object(Ut.a)("(min-width:600px)"),e.yaxis),o=(r.widthYAxis,r.widthTickmarkLines,e.xaxis),i=(o.heightXAxis,o.heightTickMarkLines,e.containerSize.width,e.containerSize.height,e.xaxis.xAxisTicks,Object(Ft.a)());return Object(S.jsx)(n.a.Fragment,{children:Object(S.jsxs)(Bt.a,{children:[Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){null===a||void 0===a||a("chart")},children:[Object(S.jsx)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:i.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(g.a,{path:m.i,size:2,color:i.palette.secondary.contrastText})}),Object(S.jsx)(Vt.a,{primary:"Chart",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]}),Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){null===a||void 0===a||a("indicators")},children:[Object(S.jsx)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:i.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(g.a,{path:m.h,size:2,color:i.palette.secondary.contrastText})}),Object(S.jsx)(Vt.a,{primary:"Indicators",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]}),Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){null===a||void 0===a||a("tools")},children:[Object(S.jsx)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:i.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(g.a,{path:m.z,size:2,color:i.palette.secondary.contrastText})}),Object(S.jsx)(Vt.a,{primary:"Tools",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]}),Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){null===a||void 0===a||a("settings")},children:[Object(S.jsx)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:i.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(g.a,{path:m.F,size:2,color:i.palette.secondary.contrastText})}),Object(S.jsx)(Vt.a,{primary:"Settings",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]}),Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){null===a||void 0===a||a("quickys")},children:[Object(S.jsx)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:i.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(g.a,{path:m.E,size:2,color:i.palette.secondary.contrastText})}),Object(S.jsx)(Vt.a,{primary:"Quick Tasks",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]})]})})},qt=a(366),_t=a(352),Qt=a(353),Jt={indicatorFn:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=t.map((function(e,r){if(r<a-1)return{prices:[null],date:e.date};var n=0;return t.slice(r-a+1,r+1).forEach((function(t){O(t)?n+=t.close:k(t)&&(n+=t.prices[0]?t.prices[0]:0)})),{prices:[n/a],date:e.date}}))||[];return r},name:"SMA",params:[{name:"period",val:10}],default:{params:[{name:"period",val:10}],newSubchart:!1},type:"line"},Kt=function(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=[],n=0;n<t.length;n++)if(n<a-1)r.push({prices:[null],date:t[n].date});else if(n===a-1){for(var o=0,i=0;i<a;i++){var s=t[i],l=O(s)?s.close:k(s)&&s.prices[0]||0;o+=l}o/=a,r.push({prices:[o],date:t[n].date})}else{var c=2/(a+1),d=t[n],u=O(d)?d.close:k(d)&&d.prices[0]||0,h=(u-r[n-1].prices[0])*c+r[n-1].prices[0];r.push({prices:[h],date:t[n].date})}return r},Zt={indicatorFn:Kt,name:"EMA",params:[{name:"period",val:10}],default:{params:[{name:"period",val:10}],newSubchart:!1},type:"line"},te={indicatorFn:function(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=[],n=0;n<t.length;n++)if(n<a)r.push({prices:[null],date:t[n].date});else{for(var o=0,i=n-a+1;i<=n;i++){var s=t[i],l=t[i-1],c=0;if(v(s)&&v(l)){var d=s.high-s.low,u=Math.abs(s.high-l.close),h=Math.abs(s.low-l.close);c=Math.max(d,u,h)}else Math.abs(s.close-l.close);o+=c}r.push({prices:[o/a],date:t[n].date})}return r},name:"ATR",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0},type:"line"},ee={indicatorFn:function(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=[],n=null,o=0;o<t.length;o++)if(!(o<a&&(r.push({prices:[null],date:t[o].date}),0===o))){var i=t[o],s=t[o-1],l=i.close-s.close,c=l>0?l:0,d=l<0?-l:0,u=1/a;if(1===o&&(n={lastUpEma:c,lastDwnEma:d}),n&&!(o<a)){var h=c*u+(1-u)*n.lastUpEma;n.lastUpEma=h;var p=d*u+(1-u)*n.lastDwnEma;n.lastDwnEma=p;var b=0===p?100:100-100/(1+h/p);o<a?r.push({prices:[null],date:t[o].date}):r.push({prices:[b],date:t[o].date})}}return r},name:"RSI",params:[{name:"period",val:14}],default:{params:[{name:"period",val:14}],newSubchart:!0,decimals:2,fixedYScale:[0,100]},type:"line"},ae={name:"OBV",type:"line",params:[],default:{params:[],newSubchart:!0,decimals:0},indicatorFn:function(t){for(var e=[],a=0;a<t.length;a++){var r=t[a];if(0===a&&C(r))e.push({prices:[r.volume],date:r.date});else{var n=t[a-1];if(C(r)&&C(n)){var o=r.volume+n.volume;e.push({prices:[o],date:t[a].date})}else e.push({prices:[null],date:t[a].date})}}return e}},re={indicatorFn:function(t){for(var e=[],a=0;a<t.length;a++){var r=t[a];C(r)?e.push({prices:[r.volume],date:r.date}):e.push({prices:[0],date:r.date})}return e},name:"Volume",params:[],default:{params:[],newSubchart:!0,decimals:0},type:"bars"},ne={indicatorFn:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:26,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:9,o=Kt(t,e,a),i=Kt(t,e,r),s=o.map((function(e,a){var r=i[a].prices[0],n=e.prices[0];return{prices:[null===n||null===r?null:n-r],date:t[a].date,priceLabels:["EMA"]}})),l=Kt(s,e,n),d=s.map((function(t,e){var a=t.prices[0],r=l[e].prices[0],n=null===a||null===r?null:a-r;return Object(c.a)(Object(c.a)({},t),{},{prices:[a,r,n]})}));return d},name:"MACD",params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],default:{params:[{name:"period short",val:12},{name:"period long",val:26},{name:"signal period",val:9}],newSubchart:!0},type:"line"},oe=a(357),ie=a(367),se=Object(Rt.a)((function(t){return Object(Wt.a)({root:{color:t.palette.text.secondary,"&:hover > $content":{backgroundColor:t.palette.action.hover},"&:focus > $content, &$selected > $content":{backgroundColor:"var(--tree-view-bg-color, ".concat(t.palette.grey[400],")"),color:"var(--tree-view-color)"},"&:focus > $content $label, &:hover > $content $label, &$selected > $content $label":{backgroundColor:"transparent"}},content:{color:t.palette.text.secondary,borderTopRightRadius:t.spacing(2),borderBottomRightRadius:t.spacing(2),paddingRight:t.spacing(1),fontWeight:t.typography.fontWeightMedium,"$expanded > &":{fontWeight:t.typography.fontWeightRegular},width:"auto"},group:{marginLeft:0,"& $content":{paddingLeft:t.spacing(2)}},expanded:{},selected:{},label:{fontWeight:"inherit",color:"inherit"},labelRoot:{display:"flex",alignItems:"center",padding:t.spacing(1,0)},labelRootBtn:{width:"max-content"},btnLabel:{padding:0},labelIcon:{marginRight:t.spacing(1)},labelText:{fontWeight:"inherit",flexGrow:1}})})),le=function(t){var e=se(),a=t.labelText,r=t.labelIcon,n=t.labelInfo,o=t.color,i=t.bgColor,s=t.onLabelClick,l=t.onIconClick,d=t.labelTypographyVariant,u=t.infoTypographyVariant,h=t.labelTypographyColor,p=t.infoTypographyColor,b=Object(R.a)(t,["labelText","labelIcon","labelInfo","color","bgColor","onLabelClick","onIconClick","labelTypographyVariant","infoTypographyVariant","labelTypographyColor","infoTypographyColor"]);return Object(S.jsx)(ie.a,Object(c.a)({onLabelClick:s,onIconClick:l,label:Object(S.jsxs)("div",{className:e.labelRoot,children:[r,Object(S.jsx)(j.a,{variant:null!==d&&void 0!==d?d:"body1",className:e.labelText,color:null!==h&&void 0!==h?h:"initial",children:a}),Object(S.jsx)(j.a,{variant:null!==u&&void 0!==u?u:"caption",color:null!==p&&void 0!==p?p:"initial",children:n})]}),style:{"--tree-view-color":o,"--tree-view-bg-color":i},classes:{root:e.root,content:e.content,expanded:e.expanded,selected:e.selected,group:e.group,label:e.label}},b))},ce=a(349),de=a(368),ue=["0, 0, 0","102, 102, 102","187, 187, 187","255, 255, 255","144, 19, 254","189, 16, 224","63, 81, 181","6, 147, 227","142, 209, 252","0, 128, 128","0, 208, 132","123, 220, 181","184, 0, 0","245, 0, 87","247, 141, 167","121, 85, 72","255, 105, 0","252, 185, 0"],he=function(t){var e=t.color,a=t.width,r=void 0===a?15:a,n=t.height,o=void 0===n?15:n,i=t.container,s=void 0===i?{}:i;return Object(S.jsx)("div",{style:Object(c.a)({width:24,height:24,boxSizing:"border-box",padding:4},s),children:Object(S.jsx)("div",{style:{border:"2px solid #000",width:r,height:o,borderRadius:3,boxSizing:"border-box",background:e}})})},pe=function(t){var e=t.color,a=t.onColorSelected,r=n.a.useState(!1),o=Object(s.a)(r,2),i=o[0],l=o[1],c=n.a.useState(null),d=Object(s.a)(c,2),u=d[0],h=d[1],p=n.a.useRef(null),b=/((^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$))/i.test(e),x=b&&"string"===typeof e?D(e):null,m="string"===typeof e?e.match(/^(rgb)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/):null,y=!!m&&2 in m&&"a"===m[2],g=m&&3 in m&&4 in m&&5 in m?[parseFloat(m[3]),parseFloat(m[4]),parseFloat(m[5])]:b&&x?[x.r,x.g,x.b]:[];if(0===g.length){var v=e in A?D(A.name):null;v&&g.push(v.r,v.g,v.b)}var O=y&&m&&6 in m?100*parseFloat(m[6]):100,C=n.a.useState(O),k=Object(s.a)(C,2),T=k[0],w=k[1];return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(Nt.a,{color:"primary",style:{padding:0},onClick:function(){l(!0)},ref:p,children:Object(S.jsx)(he,{color:e})}),Object(S.jsxs)(ce.a,{id:"id",open:i,anchorEl:p.current,onClose:function(){l(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},style:{width:300},children:[Object(S.jsxs)(Lt.a,{container:!0,alignContent:"center",alignItems:"center",justify:"space-evenly",spacing:1,style:{margin:"10px 15px 10px 15px",width:250},children:[ue.map((function(t,e){return Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(Nt.a,{color:"default",style:{padding:0},onMouseOver:function(t){h("rgba(".concat(ue[e],",").concat(T,")"))},onMouseLeave:function(){h(null)},onClick:function(){a("rgba("+ue[e]+","+T/100+")")},children:Object(S.jsx)(he,{color:"rgba("+t+",1)",width:24,height:24,container:{width:"auto",height:"auto"}})})},e)})),Object(S.jsx)(Lt.a,{item:!0,xs:3,children:Object(S.jsx)(j.a,{children:"Alpha"})}),Object(S.jsx)(Lt.a,{item:!0,xs:6,style:{padding:"0px 10px"},children:Object(S.jsx)(de.a,{value:T,onChange:function(t,e){w(Array.isArray(e)?e[0]:e),a("rgba(".concat(g[0],",").concat(g[1],",").concat(g[2],",").concat((Array.isArray(e)?e[0]:e)/100,")"))}})}),Object(S.jsx)(Lt.a,{item:!0,xs:3,children:Object(S.jsx)(oe.a,{margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:"5px 5px 5px 10px"}},value:T,onChange:function(t){var e=parseInt(t.target.value,10);isNaN(e)&&(e=0),e<0||e>100||(w(e),a("rgba(".concat(g[0],",").concat(g[1],",").concat(g[2],",").concat(e/100,")")))}})})]}),Object(S.jsxs)("div",{style:{background:"#bbb",borderTop:"1px solid #666"},children:[Object(S.jsxs)(Lt.a,{container:!0,alignItems:"center",alignContent:"center",justify:"center",style:{paddingBottom:5,margin:"10px 15px 0px 15px",width:250},children:[Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(j.a,{component:"div",align:"center",children:"R"})}),Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(j.a,{component:"div",align:"center",children:"G"})}),Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(j.a,{component:"div",align:"center",children:"B"})}),Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(j.a,{component:"div",align:"center",children:"A"})}),Object(S.jsx)(Lt.a,{item:!0,xs:2}),Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(he,{color:u||e,width:24,height:24,container:{width:"auto",height:"auto"}})})]}),Object(S.jsxs)(Lt.a,{container:!0,alignItems:"center",alignContent:"center",justify:"center",style:{paddingBottom:15,paddingLeft:"15px"},children:[Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(oe.a,{value:g?g[0]:e,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(184, 0, 0, ".concat(T/100,")")}}})}),Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(oe.a,{value:g?g[1]:e,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(0, 208, 132, ".concat(T/100,")")}},fullWidth:!0})}),Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(oe.a,{value:g?g[2]:e,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"rgba(6, 147, 227, ".concat(T/100,")")}}})}),Object(S.jsx)(Lt.a,{item:!0,xs:2,children:Object(S.jsx)(oe.a,{value:T,margin:"none",variant:"outlined",size:"small",inputProps:{style:{padding:5,background:"#bbb"}}})}),Object(S.jsx)(Lt.a,{item:!0,xs:1}),Object(S.jsx)(Lt.a,{item:!0,xs:3,children:Object(S.jsx)("div",{style:{textAlign:"center",margin:"0px auto"},children:Object(S.jsx)(f.a,{color:"primary",variant:"outlined",size:"small",style:{minWidth:0},onClick:function(){return l(!1)},children:"OK"})})})]})]})]})]})},be=function(t,e){return t.default.newSubchart?function(){e.methods.addSubchart(e.subCharts[0].yaxis[0].graphs[0].data,e.subCharts[0].yaxis[0].graphs[0].name,t)}:function(){e.methods.addGraph(e.subCharts[0].yaxis[0].graphs[0].data,e.subCharts[0].yaxis[0].graphs[0].name,0,t)}},xe=function(t){var e,a,r=t.subchartIdx,n=t.yaxisIdx,o=t.graphIdx,i=t.ChartState,s=t.ChartStateDispatch,l=t.handleToggleExpanded,c=i.subCharts[r].yaxis[n].graphs[o],d=u(c)?c:null,h=Object(Ft.a)();return d?Object(S.jsxs)(le,{nodeId:"graph-sub-".concat(r,"-y-").concat(n,"-graph-").concat(o),labelText:d.name,bgColor:"#eee",onLabelClick:function(){var t="graph-sub-".concat(r,"-y-").concat(n,"-graph-").concat(o);null===l||void 0===l||l(t)},labelIcon:Object(S.jsx)("div",{style:{background:h.palette.primary.main,width:32,height:32,border:"1px solid #666",borderRadius:5,marginRight:10},children:Object(S.jsx)(y.Icon,{path:m.h,size:"32px",color:h.palette.secondary.contrastText})}),labelInfo:0!==r||0!==o?Object(S.jsx)(Nt.a,{size:"small",onClick:function(t){t.preventDefault(),s({task:"removeGraph",params:{subchartIdx:r,yaxisIdx:0,graphIdx:o}})},children:Object(S.jsx)(y.Icon,{path:m.j,size:1,color:"#333"})}):void 0,children:[Object(S.jsx)(le,{nodeId:(1e3*r+100*n+o).toString(),labelText:"line stroke color",labelIcon:Object(S.jsx)(y.Icon,{path:m.d,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:null===(e=i.subCharts[r].yaxis[0].graphs[o].style)||void 0===e||null===(a=e.strokeColor)||void 0===a?void 0:a[0],onColorSelected:function(t){s({task:"setLineChartStrokeColor",params:{color:t,subchartIdx:r,yaxisIdx:0,graphIdx:o}})}})},1e3*r+100*n+o),d.indicator.params.map((function(t,e){return Object(S.jsx)(le,{nodeId:"".concat(2+r,"00-").concat(o,"-").concat(e),labelText:t.name,labelIcon:Object(S.jsx)(y.Icon,{path:m.t,size:1,color:"#333"}),labelInfo:Object(S.jsx)(oe.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},defaultValue:t.val,onChange:function(t){var a=parseFloat(t.target.value);isNaN(a)||s({task:"setIndicatorParam",params:{val:a,subchartIdx:r,yaxisIdx:0,graphIdx:o,paramIdx:e}})}})})}))]},"graph-sub-".concat(r,"-y-").concat(n,"-graph-").concat(o)):null},fe=function(t){var e=t.ChartState,a=t.onNavigate,r=t.open,o=t.ChartStateDispatch,i=Object(Ft.a)(),l=n.a.useState(!0),c=Object(s.a)(l,2),d=c[0],h=c[1],p=[{name:"Average",icon:m.k},{name:"Oszillator",icon:m.h},{name:"Volatility",icon:m.a},{name:"Volume",icon:m.A}],b=[{name:"SMA",indicator:Jt,category:"Average"},{name:"EMA",indicator:Zt,category:"Average"},{name:"RSI",indicator:ee,category:"Oszillator"},{name:"MACD",indicator:ne,category:"Oszillator"},{name:"ATR",indicator:te,category:"Volatility"},{name:"Volume",indicator:re,category:"Volume"},{name:"OBV",indicator:ae,category:"Volume"}],x=e.subCharts.map((function(t,e){return t.yaxis.map((function(t,e){return t.graphs.filter((function(t){return"indicator"===t.type})).length}))})).flat().reduce((function(t,e){return t+e}));return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsxs)("div",{style:{position:"absolute",right:24,zIndex:2},children:[x>0?Object(S.jsx)("div",{style:{paddingBottom:5},children:Object(S.jsxs)(qt.a,{value:"web",exclusive:!0,style:{borderRadius:500},size:"small",children:[Object(S.jsx)(_t.a,{style:{borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"indicators"===r?i.palette.secondary.light:"#fff"},onClick:function(){null===a||void 0===a||a("indicators")},children:Object(S.jsx)(j.a,{children:" Add"})}),Object(S.jsx)(_t.a,{value:"android",style:{borderBottomRightRadius:50,borderTopRightRadius:50,background:"editIndicator"===r?i.palette.secondary.light:"#fff"},onClick:function(){null===a||void 0===a||a("editIndicator")},children:"Edit"})]})}):null,Object(S.jsxs)("div",{style:{background:i.palette.secondary.light,border:"1px solid #666",borderRadius:50,padding:5},children:[Object(S.jsx)(Nt.a,{size:"small",style:{border:"1px solid #fff",margin:"0px 5px"},onClick:function(){return alert("upcoming")},children:Object(S.jsx)(y.Icon,{path:m.u,size:1,color:i.palette.primary.contrastText})}),Object(S.jsx)(Nt.a,{size:"small",style:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return h((function(t){return!t}))},children:Object(S.jsx)(y.Icon,{path:d?m.D:m.n,size:1,color:i.palette.primary.contrastText})})]})]}),Object(S.jsx)(Qt.a,{defaultCollapseIcon:Object(S.jsx)(y.Icon,{path:m.w,size:1,color:"#333"}),defaultExpandIcon:Object(S.jsx)(y.Icon,{path:m.x,size:1,color:"#333"}),defaultEndIcon:Object(S.jsx)("div",{style:{width:24}}),disableSelection:!0,children:"editIndicator"===r?e.subCharts.map((function(t,a){return t.yaxis.map((function(t,r){return t.graphs.map((function(t,n){return u(t)?Object(S.jsx)(xe,{ChartState:e,ChartStateDispatch:o,subchartIdx:a,yaxisIdx:r,graphIdx:n},"editIndicator-sub-".concat(a,"-yaxis-").concat(r,"-graph-").concat(n)):null}))}))})):d?p.map((function(t,a){return Object(S.jsx)(le,{nodeId:a.toString(),labelText:t.name,labelIcon:Object(S.jsx)("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:i.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(y.Icon,{path:t.icon,size:2,color:i.palette.secondary.contrastText})}),bgColor:i.palette.primary.light,children:b.filter((function(e){return e.category===t.name})).sort((function(t,e){return t.name>e.name?1:-1})).map((function(t,r){return Object(S.jsx)(le,{nodeId:(100*(a+1)+(r+1)).toString(),labelText:t.name,bgColor:i.palette.primary.light,onLabelClick:be(t.indicator,e)},"cat-".concat(a,"-indi-").concat(r))}))},"cat-".concat(a))})):b.sort((function(t,e){return t.name>e.name?1:-1})).map((function(t,a){return Object(S.jsx)(le,{nodeId:(a+1).toString(),labelText:t.name,bgColor:i.palette.primary.light,onLabelClick:be(t.indicator,e)},"cat-indi-".concat(a))}))})]})},je=function(t,e){t({task:"draw",params:{type:e,subchartIdx:0}})},me=function(t){var e,a,r,n,o,i=t.subchartIdx,s=t.yaxisIdx,l=t.toolIdx,c=t.ChartState,d=t.ChartStateDispatch,u=t.handleToggleExpanded,h=null===(e=c.subCharts)||void 0===e||null===(a=e[i])||void 0===a||null===(r=a.yaxis)||void 0===r||null===(n=r[s])||void 0===n||null===(o=n.tools)||void 0===o?void 0:o[l],p=h||null;return p?Object(S.jsxs)(le,{nodeId:"tool-".concat(i,"-").concat(l),labelText:"hline"===p.type?"horizontal line":"vline"===p.type?"vertical line":"trendline"===p.type?"Trendline":"Tool",labelIcon:Object(S.jsx)(y.Icon,{path:"hline"===p.type||"vline"===p.type||"trendline"===p.type?m.y:m.r,size:1,color:"#333",rotate:"trendline"===p.type?-45:"vline"===p.type?90:0}),onLabelClick:function(){var t="tool-".concat(i,"-").concat(l);null===u||void 0===u||u(t)},children:["hline"===p.type?Object(S.jsx)(le,{nodeId:"tool-".concat(i,"-y0-").concat(l,"-hlinelevel"),labelText:"Y-Level",labelIcon:Object(S.jsx)(y.Icon,{path:m.c,size:1,color:"#333"}),labelInfo:Object(S.jsx)(oe.a,{variant:"outlined",margin:"none",size:"small",inputProps:{style:{padding:5,width:50}},defaultValue:p.xy[0][1],onChange:function(t){var e=parseFloat(t.target.value);isNaN(e)||d({task:"setHlineYlevel",params:{val:e,subchartIdx:i,yaxisIdx:0,toolIdx:l}})}})},"tool-".concat(i,"-y0-").concat(l,"-hlinelevel")):null,Object(S.jsx)(le,{nodeId:"tool-".concat(i,"-").concat(l,"-stroke"),labelText:"stroke color",labelIcon:Object(S.jsx)(y.Icon,{path:m.d,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:p.style.strokeColor,onColorSelected:function(t){d({task:"setToolStrokeColor",params:{color:t,subchartIdx:i,yaxisIdx:0,toolIdx:l}})}})},"tool-".concat(i,"-").concat(l,"-stroke")),Object(S.jsx)(le,{nodeId:"tool-".concat(i,"-").concat(l,"-anchorColor"),labelText:"anchor color",labelIcon:Object(S.jsx)(y.Icon,{path:m.f,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:p.style.anchorColor,onColorSelected:function(t){d({task:"setToolAnchorColor",params:{color:t,subchartIdx:i,yaxisIdx:0,toolIdx:l}})}})},"tool-".concat(i,"-").concat(l,"-anchorColor"))]},"tool-".concat(l)):null},ye=function(t){var e=t.ChartState,a=t.onNavigate,r=t.ChartStateDispatch,o=t.open,i=Object(Ft.a)(),l=n.a.useState(!0),c=Object(s.a)(l,2),d=c[0],u=c[1],h=[{name:"Lines",icon:m.B},{name:"Upcoming",icon:m.C}],p=[{name:"trendline",type:"trendline",category:"Lines"},{name:"horizontal",type:"hline",category:"Lines"},{name:"vertical",type:"vline",category:"Lines"}],b=e.subCharts.map((function(t){return t.yaxis.map((function(t){return t.tools.length}))})).flat().reduce((function(t,e){return t+e}));return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsxs)("div",{style:{position:"absolute",right:24,zIndex:2},children:[b>0?Object(S.jsx)("div",{style:{paddingBottom:5},children:Object(S.jsxs)(qt.a,{value:"web",exclusive:!0,style:{borderRadius:500},size:"small",children:[Object(S.jsx)(_t.a,{style:{borderBottomLeftRadius:50,textTransform:"none",borderTopLeftRadius:50,background:"tools"===o?i.palette.secondary.light:"#fff"},onClick:function(){null===a||void 0===a||a("tools")},children:Object(S.jsx)(j.a,{children:" Add"})}),Object(S.jsx)(_t.a,{value:"android",style:{borderBottomRightRadius:50,borderTopRightRadius:50,background:"editTool"===o?i.palette.secondary.light:"#fff"},onClick:function(){null===a||void 0===a||a("editTool")},children:"Edit"})]})}):null,Object(S.jsxs)("div",{style:{background:i.palette.secondary.light,border:"1px solid #666",borderRadius:50,padding:5},children:[Object(S.jsx)(Nt.a,{size:"small",style:{border:"1px solid #fff",margin:"0px 5px"},onClick:function(){return alert("upcoming")},children:Object(S.jsx)(y.Icon,{path:m.u,size:1,color:i.palette.primary.contrastText})}),Object(S.jsx)(Nt.a,{size:"small",style:{border:"1px solid #fff",margin:"0px 5px 0px 0px"},onClick:function(){return u((function(t){return!t}))},children:Object(S.jsx)(y.Icon,{path:d?m.D:m.n,size:1,color:i.palette.primary.contrastText})})]})]}),Object(S.jsx)(Qt.a,{defaultCollapseIcon:Object(S.jsx)(y.Icon,{path:m.w,size:1,color:"#333"}),defaultExpandIcon:Object(S.jsx)(y.Icon,{path:m.x,size:1,color:"#333"}),defaultEndIcon:Object(S.jsx)("div",{style:{width:24}}),disableSelection:!0,children:"editTool"===o?e.subCharts.map((function(t,a){return t.yaxis.map((function(t,n){return t.tools.map((function(t,o){return Object(S.jsx)(me,{ChartState:e,ChartStateDispatch:r,subchartIdx:a,yaxisIdx:n,toolIdx:o},"editIndicator-sub-".concat(a,"-yaxis-").concat(n,"-graph-").concat(o))}))}))})):d?h.map((function(t,e){return Object(S.jsx)(le,{nodeId:e.toString(),labelText:t.name,labelIcon:Object(S.jsx)("div",{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:i.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(y.Icon,{path:t.icon,size:2,color:i.palette.secondary.contrastText})}),bgColor:i.palette.primary.light,children:p.filter((function(e){return e.category===t.name})).sort((function(t,e){return t.name>e.name?1:-1})).map((function(t,n){return Object(S.jsx)(le,{nodeId:(100*(e+1)+(n+1)).toString(),labelText:t.name,bgColor:i.palette.primary.light,onLabelClick:function(){je(r,t.type),null===a||void 0===a||a(null)}},"cat-".concat(e,"-tool-").concat(n))}))},"cat-".concat(e))})):p.sort((function(t,e){return t.name>e.name?1:-1})).map((function(t,e){return Object(S.jsx)(le,{nodeId:(e+1).toString(),labelText:t.name,bgColor:i.palette.primary.light,onLabelClick:function(){je(r,t.type),null===a||void 0===a||a(null)}},"cat-tool-".concat(e))}))})]})},ge=a(166),ve=a(354),Oe=a(359),Ce=function(t){var e=t.ChartState,a=t.onNavigate,r=t.ChartStateDispatch,o=t.onSettingsExpand,i=t.ChartMenuState,l=Object(Ft.a)(),c=n.a.useState(!1),d=Object(s.a)(c,2),p=(d[0],d[1],n.a.useState(null)),b=Object(s.a)(p,2),x=b[0],g=b[1],v=function(t){g(null),t&&(null===a||void 0===a||a(t))};return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)("div",{style:{position:"absolute",right:24,zIndex:2},children:Object(S.jsxs)("div",{style:{paddingBottom:5},children:[Object(S.jsx)(f.a,{style:{border:"1px solid #666",borderRadius:50,padding:5,textTransform:"none",background:l.palette.secondary.light,width:"100%",color:l.palette.secondary.contrastText},onClick:function(t){g(t.currentTarget)},children:Object(S.jsx)(j.a,{children:" Add..."})}),Object(S.jsxs)(ge.a,{id:"quick-add",anchorEl:x,keepMounted:!0,open:Boolean(x),onClose:function(){return v(void 0)},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:[Object(S.jsx)(ve.a,{onClick:function(){return v("indicators")},children:"Indicator"}),Object(S.jsx)(ve.a,{onClick:function(){return v("tools")},children:"Tool"})]})]})}),Object(S.jsxs)(Qt.a,{defaultCollapseIcon:Object(S.jsx)(y.Icon,{path:m.w,size:1,color:"#333"}),defaultExpandIcon:Object(S.jsx)(y.Icon,{path:m.x,size:1,color:"#333"}),defaultEndIcon:Object(S.jsx)("div",{style:{width:24}}),disableSelection:!0,expanded:i.expandedSetting,children:[Object(S.jsxs)(le,{nodeId:"1",labelText:"General",labelIcon:Object(S.jsx)("div",{style:{background:l.palette.secondary.main,width:48,height:48,border:"1px solid #666",borderRadius:5,marginRight:10},children:Object(S.jsx)(y.Icon,{path:m.l,size:2,color:l.palette.secondary.contrastText})}),bgColor:l.palette.primary.light,labelTypographyVariant:"h6",onLabelClick:function(){null===o||void 0===o||o("1")},children:[Object(S.jsx)(le,{nodeId:"11",labelText:"background color",labelIcon:Object(S.jsx)(y.Icon,{path:m.G,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:e.backgroundColor,onColorSelected:function(t){r({task:"setBackgroundColor",params:{color:t}})}}),bgColor:"#eee"}),Object(S.jsx)(le,{nodeId:"12",labelText:"axis fill color",labelIcon:Object(S.jsx)(y.Icon,{path:m.G,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:e.xaxis.style.fillColor,onColorSelected:function(t){r({task:"setAxisFillColor",params:{color:t}})}}),bgColor:"#eee"}),Object(S.jsx)(le,{nodeId:"13",labelText:"axis stroke color",labelIcon:Object(S.jsx)(y.Icon,{path:m.d,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:e.xaxis.style.strokeColor,onColorSelected:function(t){r({task:"setAxisStrokeColor",params:{color:t}})}}),bgColor:"#eee"}),Object(S.jsx)(le,{nodeId:"14",labelText:"axis text color",labelIcon:Object(S.jsx)(y.Icon,{path:m.o,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:e.xaxis.style.fontColor,onColorSelected:function(t){r({task:"setAxisTextColor",params:{color:t}})}}),color:"#3c8039",bgColor:"#eee"}),Object(S.jsx)(le,{nodeId:"15",labelText:"use x-axis grid",labelIcon:Object(S.jsx)(y.Icon,{path:m.q,size:1,color:"#333"}),labelInfo:Object(S.jsx)(Oe.a,{checked:e.grid.useGridX,size:"small",style:{padding:0,width:24,height:24},onChange:function(){r({task:"toggleXaxisGrid",params:{}})}}),color:"#3c8039",bgColor:"#eee"}),Object(S.jsx)(le,{nodeId:"16",labelText:"use y-axis grid",labelIcon:Object(S.jsx)(y.Icon,{path:m.q,size:1,color:"#333"}),labelInfo:Object(S.jsx)(Oe.a,{checked:e.grid.useGridY,size:"small",style:{padding:0,width:24,height:24},onChange:function(){r({task:"toggleYaxisGrid",params:{}})}}),color:"#3c8039",bgColor:"#eee"}),Object(S.jsx)(le,{nodeId:"17",labelText:"grid stroke color",labelIcon:Object(S.jsx)(y.Icon,{path:m.d,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:e.grid.style.strokeColor,onColorSelected:function(t){r({task:"setGridStrokeColor",params:{color:t}})}}),color:"#3c8039",bgColor:"#eee"})]}),e.subCharts.map((function(t,a){return Object(S.jsxs)(le,{labelTypographyVariant:"h6",nodeId:"sub-".concat(a),labelText:0===a?"Mainchart":"Subchart ".concat(a),bgColor:l.palette.primary.light,onLabelClick:function(){var t="sub-".concat(a);null===o||void 0===o||o(t)},labelIcon:Object(S.jsx)("div",{style:{background:l.palette.secondary.main,width:48,height:48,border:"1px solid #666",borderRadius:5,marginRight:10},children:Object(S.jsx)(y.Icon,{path:m.g,size:2,color:l.palette.secondary.contrastText})}),labelInfo:0!==a?Object(S.jsx)(Nt.a,{size:"small",onClick:function(t){t.preventDefault(),r({task:"removeSubchart",params:{subchartIdx:a}})},children:Object(S.jsx)(y.Icon,{path:m.j,size:1,color:"#333"})}):void 0,children:[t.yaxis[0].graphs.map((function(t,i){var s,c;return u(t)?Object(S.jsx)(xe,{ChartState:e,ChartStateDispatch:r,subchartIdx:a,yaxisIdx:0,graphIdx:i,handleToggleExpanded:o},"editIndicator-sub-".concat(a,"-yaxis-",0,"-graph-").concat(i)):h(t)?Object(S.jsx)(n.a.Fragment,{children:Object(S.jsx)(le,{onLabelClick:function(){var t="graph-sub-".concat(a,"-yaxis-",0,"-graph-").concat(i);null===o||void 0===o||o(t)},nodeId:"graph-sub-".concat(a,"-y-",0,"-graph-").concat(i),labelText:t.name,bgColor:"#eee",labelIcon:Object(S.jsx)("div",{style:{background:l.palette.primary.main,width:32,height:32,border:"1px solid #666",borderRadius:5,marginRight:10},children:Object(S.jsx)(y.Icon,{path:m.i,size:"32px",color:l.palette.secondary.contrastText})}),labelInfo:0!==a||0!==i?Object(S.jsx)(Nt.a,{size:"small",onClick:function(t){t.preventDefault(),r({task:"removeGraph",params:{subchartIdx:a,yaxisIdx:0,graphIdx:i}})},children:Object(S.jsx)(y.Icon,{path:m.j,size:1,color:"#333"})}):void 0,children:"linechart"===t.meta.type?Object(S.jsx)(le,{nodeId:"".concat(2+a,"00-").concat(i),labelText:"line stroke color",labelIcon:Object(S.jsx)(y.Icon,{path:m.d,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:null===(s=e.subCharts[a].yaxis[0].graphs[i].style)||void 0===s||null===(c=s.strokeColor)||void 0===c?void 0:c[0],onColorSelected:function(t){r({task:"setLineChartStrokeColor",params:{color:t,subchartIdx:a,yaxisIdx:0,graphIdx:i}})}})}):"candlechart"===t.meta.type?Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(le,{nodeId:"".concat(2+a,"00-").concat(i),labelText:"candle up color",labelIcon:Object(S.jsx)(y.Icon,{path:m.d,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:t.style.candleUpColor,onColorSelected:function(t){r({task:"setCandleChartUpColor",params:{color:t,subchartIdx:a,yaxisIdx:0,graphIdx:i}})}})}),Object(S.jsx)(le,{nodeId:"".concat(2+a,"00-").concat(i),labelText:"candle down color",labelIcon:Object(S.jsx)(y.Icon,{path:m.d,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:t.style.candleDownColor,onColorSelected:function(t){r({task:"setCandleChartDownColor",params:{color:t,subchartIdx:a,yaxisIdx:0,graphIdx:i}})}})}),Object(S.jsx)(le,{nodeId:"".concat(2+a,"00-").concat(i),labelText:"candle stroke color",labelIcon:Object(S.jsx)(y.Icon,{path:m.d,size:1,color:"#333"}),labelInfo:Object(S.jsx)(pe,{color:t.style.candleStrokeColor,onColorSelected:function(t){r({task:"setCandleChartStrokeColor",params:{color:t,subchartIdx:a,yaxisIdx:0,graphIdx:i}})}})})]}):null},"graph-sub-".concat(a,"-y-",0,"-graph-").concat(i))}):null})),t.yaxis[0].tools.length>0?Object(S.jsx)(le,{nodeId:"tools-".concat(a,"-y0"),labelIcon:Object(S.jsx)("div",{style:{background:l.palette.primary.main,width:32,height:32,border:"1px solid #666",borderRadius:5,marginRight:10},children:Object(S.jsx)(y.Icon,{path:m.z,size:"32px",color:l.palette.secondary.contrastText})}),labelText:"Tools",onLabelClick:function(){var t="tools-".concat(a,"-y0");null===o||void 0===o||o(t)},bgColor:"#eee",children:t.yaxis[0].tools.map((function(t,n){return Object(S.jsx)(me,{ChartState:e,ChartStateDispatch:r,subchartIdx:a,yaxisIdx:0,toolIdx:n,handleToggleExpanded:o},"editIndicator-sub-".concat(a,"-yaxis-",0,"-tool-").concat(n))}))},"tools-".concat(a,"-y0")):null]},"sub-".concat(a))}))]})]})},ke=function(t){t.ChartState,t.onNavigate;var e=t.ChartStateDispatch,a=(Object(Ut.a)("(min-width:600px)"),Object(Ft.a)());return Object(S.jsx)(n.a.Fragment,{children:Object(S.jsxs)(Bt.a,{children:[Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){e({task:"clearChart",params:{mode:"indicators"}})},children:[Object(S.jsxs)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:a.palette.secondary.main,minWidth:48,height:48,position:"relative",top:0},children:[Object(S.jsx)(g.a,{path:m.e,size:2,color:a.palette.secondary.contrastText,style:{position:"absolute",top:0,left:0},rotate:5}),Object(S.jsx)(g.a,{path:m.h,size:.8,color:"#fff",style:{position:"absolute",bottom:0,right:0}})]}),Object(S.jsx)(Vt.a,{primary:"Clear All Indicators",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]}),Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){e({task:"clearChart",params:{mode:"tools"}})},children:[Object(S.jsxs)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:a.palette.secondary.main,minWidth:48,height:48,position:"relative",top:0},children:[Object(S.jsx)(g.a,{path:m.e,size:2,color:a.palette.secondary.contrastText,style:{position:"absolute",top:0,left:0},rotate:5}),Object(S.jsx)(g.a,{path:m.z,size:.7,color:"#fff",style:{position:"absolute",bottom:1,right:1}})]}),Object(S.jsx)(Vt.a,{primary:"Clear All Tools",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]}),Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){},children:[Object(S.jsx)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:a.palette.secondary.main,width:48,height:48},children:Object(S.jsx)(g.a,{path:m.F,size:2,color:a.palette.secondary.contrastText})}),Object(S.jsx)(Vt.a,{primary:"Autoscale Y axis (mode to disable upcoming)",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]})]})})},Se=a(53),Te=a.n(Se),we=a(103),Ie=a(363),Pe=a(362),Me=a(358);function ze(t){return Object(S.jsx)(Me.a,Object(c.a)({elevation:6,variant:"filled"},t))}var Ae=function(t){var e=t.open,a=t.onClose,r=t.content,n=function(t,e){"clickaway"!==e&&(null===a||void 0===a||a())};return Object(S.jsx)(Pe.a,{open:e,autoHideDuration:6e3,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(S.jsx)(ze,{onClose:n,severity:"error",children:r})})},De=a(148),Xe=Object(Rt.a)({popper:{zIndex:1800},tooltip:{background:"rgba(205, 205, 205, 0.95)"}});function Ee(t){return Re.apply(this,arguments)}function Re(){return(Re=Object(we.a)(Te.a.mark((function t(e){var a;return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.text().then((function(t){var e,a,r,n,o,i,s,c,d,u,h=[{chars:"\n",amt:null!==(e=null===(a=t.match(/\n/gm))||void 0===a?void 0:a.length)&&void 0!==e?e:0},{chars:"\r",amt:null!==(r=null===(n=t.match(/\r/gm))||void 0===n?void 0:n.length)&&void 0!==r?r:0},{chars:"\r\n",amt:null!==(o=null===(i=t.match(/\r\n/gm))||void 0===i?void 0:i.length)&&void 0!==o?o:0}],p=h.map((function(t){return t.amt})),b=h[p.indexOf(Math.max.apply(Math,Object(l.a)(p)))].chars,x=t.split(b),f=[{chars:",",amt:null!==(s=null===(c=x[0].match(/,/gm))||void 0===c?void 0:c.length)&&void 0!==s?s:0},{chars:";",amt:null!==(d=null===(u=x[0].match(/;/gm))||void 0===u?void 0:u.length)&&void 0!==d?d:0}],j=f.map((function(t){return t.amt})),m=f[j.indexOf(Math.max.apply(Math,Object(l.a)(j)))].chars,y={dots:0,commas:0};x.forEach((function(t){t.split(m).forEach((function(t){var e=t.lastIndexOf("."),a=t.lastIndexOf(",");-1!==e&&-1!==a?e>a?y.dots++:y.commas++:-1!==e&&-1===a?y.dots++:-1===e&&-1!==a&&y.commas++}))}));var g=y.dots<y.commas,v=y.dots>y.commas&&y.commas>0,O=g?t.replaceAll(".","").replaceAll(",","."):v?t.replaceAll(",",""):t,C=De(O,{delimiter:m,record_delimiter:b,cast:!0,trim:!0,cast_date:!0}).map((function(t){return{date:t[0],open:t[1],high:t[2],low:t[3],close:t[4],volume:t[5]}}));return C.shift(),C}));case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var We=function(t){var e=t.ChartState,a=(t.ChartStateDispatch,Xe()),r=n.a.useState(null),o=Object(s.a)(r,2),i=o[0],l=o[1],c=Object(Ft.a)(),d=n.a.useRef(null),u=n.a.useState(!1),h=Object(s.a)(u,2),p=h[0],b=h[1],x=n.a.useState(""),f=Object(s.a)(x,2),j=f[0],g=f[1];function v(){return(v=Object(we.a)(Te.a.mark((function t(a){var r,n;return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.target.files){t.next=3;break}return t.abrupt("return");case 3:if(!(r.length>0)){t.next=15;break}return t.prev=4,t.next=7,Ee(r[0]);case 7:n=t.sent,e.methods.addSubchart(n,"some chart",void 0,!0),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),console.log("Error - could not parse provided local file",t.t0),l("Error - could not parse provided local file");case 15:case"end":return t.stop()}}),t,null,[[4,11]])})))).apply(this,arguments)}function O(){return C.apply(this,arguments)}function C(){return(C=Object(we.a)(Te.a.mark((function t(){var a,r,n;return Te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(j);case 3:if(a=t.sent){t.next=6;break}throw Error("cant download file from url");case 6:return r=a,t.next=9,Ee(r);case 9:n=t.sent,e.methods.addSubchart(n,"some chart",void 0,!0),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log("Error - could not download file from URL or File could not be parsed",t.t0),l("Error - could not download file from URL or File could not be parsed");case 17:b(!1);case 18:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(Ae,{open:!!i,onClose:function(){return l(null)},content:i||""}),Object(S.jsx)("input",{type:"file",style:{visibility:"hidden",position:"absolute",top:0,height:0,width:0},ref:d,onChange:function(t){return v.apply(this,arguments)}}),Object(S.jsxs)(Bt.a,{children:[Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){var t,e;null===d||void 0===d||null===(t=d.current)||void 0===t||null===(e=t.click)||void 0===e||e.call(t)},children:[Object(S.jsx)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:c.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(y.Icon,{path:m.m,size:2,color:c.palette.secondary.contrastText})}),Object(S.jsx)(Vt.a,{primary:"CSV from device",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]}),Object(S.jsx)(Ie.a,{PopperProps:{disablePortal:!0},classes:{popper:a.popper,tooltip:a.tooltip},style:{zIndex:1500},open:p,title:Object(S.jsx)("div",{children:Object(S.jsx)(oe.a,{helperText:"Enter/Paste URL",fullWidth:!0,onKeyUp:function(t){"Enter"===t.key&&"keyup"===t.type&&O()},value:j,onChange:function(t){return g(t.target.value)},InputProps:{endAdornment:Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(Nt.a,{onClick:O,size:"small",children:Object(S.jsx)(y.Icon,{path:m.b,size:1})}),Object(S.jsx)(Nt.a,{onClick:function(){return b(!1)},children:Object(S.jsx)(y.Icon,{path:m.j,size:1})})]})}})}),interactive:!0,arrow:!0,placement:"bottom",children:Object(S.jsxs)(Gt.a,{button:!0,onClick:function(){b(!0)},children:[Object(S.jsx)(Ht.a,{style:{border:"1px solid #666",borderRadius:5,marginRight:10,background:c.palette.secondary.main,minWidth:48,height:48},children:Object(S.jsx)(y.Icon,{path:m.H,size:2,color:c.palette.secondary.contrastText})}),Object(S.jsx)(Vt.a,{primary:"CSV from URL",primaryTypographyProps:{variant:"h6",color:"textSecondary"}})]})})]})]})},Fe=Object(Rt.a)((function(t){return Object(Wt.a)({paper:{minHeight:"33%",border:"1px solid #666",borderTopLeftRadius:10,borderTopRightRadius:10},paperDesktop:{minHeight:"33%",border:"1px solid #666",borderBottomRightRadius:10,borderTopRightRadius:10}})})),Ue=function(t){var e=t.onClose,a=t.ChartMenuState,r=t.ChartState,n=t.onNavigate,o=t.ChartStateDispatch,i=t.onSettingsExpand,s=Object(Ft.a)(),l=Object(Ut.a)("(min-width:600px)"),c=Fe();return Object(S.jsxs)(Yt.a,{anchor:l?"left":"bottom",open:!!a.location,classes:{paper:l?c.paperDesktop:c.paper},ModalProps:{hideBackdrop:!0},children:[Object(S.jsx)("div",{style:{background:s.palette.primary.main,color:s.palette.primary.contrastText,padding:10},children:Object(S.jsxs)(Lt.a,{container:!0,alignItems:"center",justify:"center",children:[Object(S.jsx)(Lt.a,{item:!0,children:Object(S.jsx)(j.a,{component:"div",variant:"h4",children:"quickys"===a.location?"Quick Tasks":"editIndicator"===a.location?"Edit Indicator":"indicators"===a.location?"Add Indicator":"editTool"===a.location?"Edit Tool":"tools"===a.location?"Add Tool":"settings"===a.location?"Settings":"Chart Menu"})}),Object(S.jsx)(Lt.a,{item:!0,xs:!0}),Object(S.jsx)(Lt.a,{item:!0,children:Object(S.jsxs)("div",{style:{height:"2.6rem"},children:[a.location&&"menu"!==a.location?Object(S.jsx)(Nt.a,{size:"small",onClick:function(){n("menu")},children:Object(S.jsx)(g.a,{path:m.s,size:1.75,color:s.palette.primary.contrastText})}):null,Object(S.jsx)(Nt.a,{size:"small",onClick:function(){},children:Object(S.jsx)(g.a,{path:m.p,size:1.75,color:s.palette.primary.contrastText})}),Object(S.jsx)(Nt.a,{size:"small",onClick:function(){null===e||void 0===e||e()},children:Object(S.jsx)(g.a,{path:m.j,size:1.75,color:s.palette.primary.contrastText})})]})})]})}),Object(S.jsx)("div",{style:{padding:10},children:"menu"===a.location?Object(S.jsx)($t,{ChartState:r,onNavigate:n}):"indicators"===a.location||"editIndicator"===a.location?Object(S.jsx)(fe,{ChartState:r,onNavigate:n,open:a.location,ChartStateDispatch:o}):"tools"===a.location||"editTool"===a.location?Object(S.jsx)(ye,{ChartState:r,ChartStateDispatch:o,onNavigate:n,open:a.location}):"settings"===a.location?Object(S.jsx)(Ce,{ChartMenuState:a,ChartState:r,ChartStateDispatch:o,onNavigate:n,onSettingsExpand:i}):"quickys"===a.location?Object(S.jsx)(ke,{ChartState:r,onNavigate:n,ChartStateDispatch:o}):"chart"===a.location?Object(S.jsx)(We,{ChartState:r,ChartStateDispatch:o}):null})]})},Ye=new b.a,Le=function(t){var e,a,r,o,i,h,p,b,j,y,v,O=t.width,C=t.height,k=t.chartData,P=(t.style,t.viewMode),M=n.a.useRef(null),z=n.a.useState({location:null,expandedSetting:[]}),A=Object(s.a)(z,2),D=A[0],R=A[1],W=It(M,{width:O,height:C,viewMode:P}),F=Object(s.a)(W,2),U=F[0],Y=F[1];U.xaxis.scaledWidthPerTick;var L=U.yaxis,N=L.widthYAxis,B=L.widthTickmarkLines,G=U.xaxis,H=G.heightXAxis,V=G.heightTickMarkLines,$=U.containerSize.width-1,q=U.containerSize.height-1,_=U.containerSize.init;n.a.useEffect((function(){if(_){var t=Ye.compile(x);if(t(k)){if(0===U.subCharts.length){var e={task:"addSubchart",params:{chartSeries:k[0].data,chartName:k[0].name,containerHeight:q}};Y(e)}}else alert("ERROR - chartData prop is not valid, check console"),console.log("ERROR - chartData prop is not valid -> ","data:",k,"errors:",t.errors)}}),[k,U.subCharts.length,q,_,H]);var Q=U;console.log(Q);var J=Q.xaxis.xAxisTicks;return Object(S.jsx)(n.a.Fragment,{children:Object(S.jsxs)(At.a,{theme:Et,children:[Object(S.jsx)("div",{ref:M,style:{boxSizing:"border-box",border:"1px solid red",background:Q.backgroundColor},children:Object(S.jsxs)(d.f,{width:U.containerSize.width,height:U.containerSize.height,listening:!1,children:[Object(S.jsxs)(d.b,{children:[0 in Q.subCharts?Object(S.jsx)(I,{fullState:Q}):null,Q.subCharts.map((function(t,e){return t.yaxis.map((function(t,a){return t.graphs.map((function(t,a){var r=Q.subCharts[e].yaxis[0].graphs[a],n=u(r)?r.indicator.type:null;if(u(r)&&r.data.length>0){var o=r.data[r.data.length-1].prices;if("line"===n)return o.map((function(t,r){return Object(S.jsx)(X,{fullState:Q,subchartIdx:e,yaxisIdx:0,graphIdx:a,indSeriesIdx:r},"".concat(e,"-").concat(a,"-").concat(r))}));if("bars"===n)return Object(S.jsx)(E,{fullState:Q,subchartIdx:e,yaxisIdx:0,graphIdx:a},"".concat(e,"-").concat(a))}return null}))}))})),Q.pointer.move.isMoving&&Q.draw.pixXy.length>=1?Object(S.jsx)(d.c,{x:0,y:0,points:[Q.draw.pixXy[0][0],Q.draw.pixXy[0][1],(null===(e=Q.pointer)||void 0===e?void 0:e.chartPointer.move.x)?Q.methods.xToPix(Q.pointer.chartPointer.move.x):Q.pointer.move.xy[0],(null===(a=Q.pointer)||void 0===a||null===(r=a.chartPointer)||void 0===r||null===(o=r.move.snapDatasets)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.pixYSnap)?null===(h=Q.pointer)||void 0===h||null===(p=h.chartPointer)||void 0===p?void 0:p.move.snapDatasets[0].pixYSnap:Q.pointer.move.xy[1]],stroke:"red",strokeWidth:1}):null,0 in Q.subCharts?Q.subCharts[0].yaxis[0].tools.map((function(t,e){return"trendline"===t.type&&2===t.xy.length?Object(S.jsx)(Pt,{mode:"trendline",subchartTop:Q.subCharts[0].top,subchartBottom:Q.subCharts[0].bottom,pixXy:[[Q.methods.xToPix(t.xy[0][0]),Q.methods.yToPix(t.xy[0][1],0,0)],[Q.methods.xToPix(t.xy[1][0]),Q.methods.yToPix(t.xy[1][1],0,0)]],style:{anchorColor:t.style.anchorColor,strokeColor:t.style.strokeColor}}):"vline"===t.type&&1===t.xy.length?Object(S.jsx)(Mt,{mode:"extendUpDown",subchartTop:Q.subCharts[0].top,subchartBottom:Q.subCharts[0].bottom,pixXy:[[Q.methods.xToPix(t.xy[0][0]),Q.methods.yToPix(t.xy[0][1],0,0)]],style:{anchorColor:t.style.anchorColor,strokeColor:t.style.strokeColor}}):"hline"===t.type&&1===t.xy.length?Object(S.jsx)(zt,{mode:"extendLeftRight",pixXstart:0,pixXend:Q.containerSize.width-Q.yaxis.widthYAxis,pixXy:[[Q.methods.xToPix(t.xy[0][0]),Q.methods.yToPix(t.xy[0][1],0,0)]],style:{anchorColor:t.style.anchorColor,strokeColor:t.style.strokeColor}}):null})):null]}),Object(S.jsxs)(d.b,{children:[Object(S.jsx)(d.d,{x:.5,y:q-H+.5,width:$,height:H,fill:U.xaxis.style.fillColor,stroke:U.xaxis.style.strokeColor,strokeWidth:1}),Q.subCharts.map((function(t,e){return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.d,{x:$-N+.5,y:t.top+.5,width:N,height:t.bottom-t.top,stroke:U.xaxis.style.strokeColor,strokeWidth:1}),Object(S.jsx)(d.d,{x:.5,y:t.top+.5,width:$-N,height:t.bottom-t.top,stroke:U.xaxis.style.strokeColor,strokeWidth:1})]},e)}))]}),Object(S.jsx)(d.b,{children:J.map((function(t,e){return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.c,{x:t.x,y:U.containerSize.height-1-H+.5,points:[0,0,0,V],stroke:U.xaxis.style.strokeColor,strokeWidth:1}),U.grid.useGridX?Object(S.jsx)(d.c,{x:t.x,y:.5,points:[0,0,0,U.containerSize.height-1-H+.5],stroke:U.grid.style.strokeColor,strokeWidth:1}):null,Object(S.jsx)(d.e,{sceneFunc:function(e,a){var r=e._context;r.font=U.xaxis.style.fontSize+"px "+U.xaxis.style.fontName,r.fillStyle=U.xaxis.style.fontColor,r.textAlign="center",r.textBaseline="top",r.fillText(t.dateString,t.x,U.containerSize.height-1-H+.5+20+5),e.fillStrokeShape(a)}})]},e)}))}),Object(S.jsx)(d.b,{children:Q.subCharts.map((function(t,e){return t.yaxis.map((function(t,e){return t.drawTicks.map((function(t,e){return Object(S.jsxs)(n.a.Fragment,{children:[Object(S.jsx)(d.c,{x:U.containerSize.width-1-N+.5,y:t.pixY+.5,points:[0,0,B,0],stroke:U.xaxis.style.strokeColor,strokeWidth:1}),U.grid.useGridY?Object(S.jsx)(d.c,{x:.5,y:t.pixY+.5,points:[0,0,U.containerSize.width-1+.5,0],stroke:U.grid.style.strokeColor,strokeWidth:1}):null,Object(S.jsx)(d.e,{sceneFunc:function(e,a){var r=e._context;r.font=U.yaxis.style.fontSize+"px "+U.yaxis.style.fontName,r.fillStyle=U.yaxis.style.fontColor,r.textAlign="left",r.textBaseline="middle",r.fillText(t.label,U.containerSize.width-1-N+B+5+.5,t.pixY),e.fillStrokeShape(a)}})]},t.label)}))}))}))}),Object(S.jsx)(d.b,{children:(null===(b=U.pointer.move)||void 0===b?void 0:b.xy)&&U.pointer.isHovering?Object(S.jsx)(w,{fullState:Q}):null})]})}),Q.xaxis.xEnd&&J.length>0?Q.subCharts.map((function(t,e){return Object(S.jsx)("div",{style:{position:"absolute",top:t.top+2},children:t.yaxis[0].graphs.map((function(t,a){var r,n,o,i,s,l,c,d,h,p,b,x=u(t)&&t.indicator.params.length>0?"".concat(t.indicator.name,"(").concat(t.indicator.params[0].val,")"):u(t)&&0===t.indicator.params.length?"".concat(t.indicator.name):t.name;if(!t.datasets.last)return null;var f=(Q.pointer.isHovering&&e===(null===(r=Q.pointer)||void 0===r||null===(n=r.chartPointer)||void 0===n?void 0:n.move.subchartIdx)&&(null===(o=Q.pointer)||void 0===o||null===(i=o.chartPointer)||void 0===i||null===(s=i.move.snapDatasets)||void 0===s||null===(l=s[0])||void 0===l?void 0:l.graphIdx)===a?null===(c=Q.pointer)||void 0===c||null===(d=c.chartPointer)||void 0===d||null===(h=d.move)||void 0===h||null===(p=h.snapDatasets)||void 0===p||null===(b=p[0])||void 0===b?void 0:b.data:Q.pointer.isHovering&&null!==Q.pointer.chartPointer.move.x?t.data[Q.pointer.chartPointer.move.x]:t.datasets.last.data)||t.datasets.last.data;return Object(S.jsx)(T,{onClick:function(){return R((function(t){return{location:"settings",expandedSetting:["graph-sub-".concat(e,"-y-0-graph-").concat(a),"sub-".concat(e)]}}))},name:x,dataset:f,decimals:u(t)&&void 0!==t.indicator.default.decimals?t.indicator.default.decimals:t.decimals},"".concat(e,"-").concat(a))}))})})):null,Object(S.jsx)("div",{style:{position:"absolute",top:(null!==(j=null===(y=Q.subCharts)||void 0===y||null===(v=y[0])||void 0===v?void 0:v.bottom)&&void 0!==j?j:0)-64-10,left:10},children:Object(S.jsx)(f.a,{color:"primary",variant:"contained",style:{width:64,height:64,textTransform:"none",borderRadius:5,opacity:.8},onClick:function(){return R((function(t){return Object(c.a)(Object(c.a)({},t),{},{location:"menu"})}))},children:Object(S.jsx)("div",{style:{position:"relative",top:0,height:64},children:Object(S.jsx)(g.a,{path:m.v,size:"64px",color:"#fff"})})})}),Object(S.jsx)(Ue,{ChartMenuState:D,onClose:function(){R((function(t){return Object(c.a)(Object(c.a)({},t),{},{location:null})}))},onNavigate:function(t){return R((function(e){return Object(c.a)(Object(c.a)({},e),{},{location:t})}))},ChartState:Q,ChartStateDispatch:Y,onSettingsExpand:function(t){D.expandedSetting.includes(t)?R((function(e){return Object(c.a)(Object(c.a)({},e),{},{expandedSetting:D.expandedSetting.filter((function(e){return e!==t}))})})):R((function(e){return Object(c.a)(Object(c.a)({},e),{},{expandedSetting:[].concat(Object(l.a)(D.expandedSetting),[t])})}))}})]})})},Ne=a(148);var Be=function(){var t=n.a.useState(null),e=Object(s.a)(t,2),a=e[0],r=e[1],o=n.a.useState(400),i=Object(s.a)(o,2);return i[0],i[1],n.a.useEffect((function(){fetch("https://raw.githubusercontent.com/carmnk/resources/main/data/csv/BAYN.DE.csv").then((function(t){return t.text()})).then((function(t){var e=Ne(t,{delimiter:",",cast:!0,trim:!0,cast_date:!0}).map((function(t){return{date:t[0],open:t[1],high:t[2],low:t[3],close:t[4],volume:t[5]}}));return e.shift(),e})).then((function(t){return r(t)}))}),[]),a?(console.log("DATA:",[{data:a,name:"coolChart"}]),Object(S.jsx)(n.a.Fragment,{children:Object(S.jsx)("div",{style:{height:"100%"},children:Object(S.jsx)(Le,{chartData:[{data:a,name:"coolChart"}],viewMode:"fullscreen",style:"TODO"})})})):null},Ge=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,369)).then((function(e){var a=e.getCLS,r=e.getFID,n=e.getFCP,o=e.getLCP,i=e.getTTFB;a(t),r(t),n(t),o(t),i(t)}))};i.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(Be,{})}),document.getElementById("root")),Ge()}},[[295,1,2]]]);
//# sourceMappingURL=main.3dff3168.chunk.js.map